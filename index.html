<html>
<head><meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<style type="text/css">
<!--
span.cls_002{font-family:Arial,serif;font-size:9.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_002{font-family:Arial,serif;font-size:9.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_004{font-family:Arial,serif;font-size:28.1px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_004{font-family:Arial,serif;font-size:28.1px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_005{font-family:Arial,serif;font-size:16.1px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_005{font-family:Arial,serif;font-size:16.1px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_006{font-family:Arial,serif;font-size:14.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_006{font-family:Arial,serif;font-size:14.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_008{font-family:Arial,serif;font-size:10.6px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_008{font-family:Arial,serif;font-size:10.6px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_007{font-family:"Book Antiqua",serif;font-size:10.6px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_007{font-family:"Book Antiqua",serif;font-size:10.6px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_009{font-family:Courier New,serif;font-size:9.6px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_009{font-family:Courier New,serif;font-size:9.6px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_010{font-family:Arial,serif;font-size:9.1px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_010{font-family:Arial,serif;font-size:9.1px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_011{font-family:"Book Antiqua Bold",serif;font-size:12.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_011{font-family:"Book Antiqua Bold",serif;font-size:12.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_012{font-family:Arial,serif;font-size:16.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_012{font-family:Arial,serif;font-size:16.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_013{font-family:Arial,serif;font-size:2.7px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_013{font-family:Arial,serif;font-size:2.7px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_014{font-family:Arial,serif;font-size:30.1px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_014{font-family:Arial,serif;font-size:30.1px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_015{font-family:Arial,serif;font-size:12.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_015{font-family:Arial,serif;font-size:12.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_016{font-family:Arial,serif;font-size:11.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_016{font-family:Arial,serif;font-size:11.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_017{font-family:Arial,serif;font-size:11.1px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_017{font-family:Arial,serif;font-size:11.1px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_003{font-family:Arial,serif;font-size:8.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_003{font-family:Arial,serif;font-size:8.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_018{font-family:"Book Antiqua Italic",serif;font-size:9.1px;color:rgb(0,0,0);font-weight:normal;font-style:italic;text-decoration: none}
div.cls_018{font-family:"Book Antiqua Italic",serif;font-size:9.1px;color:rgb(0,0,0);font-weight:normal;font-style:italic;text-decoration: none}
span.cls_019{font-family:Arial,serif;font-size:20.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_019{font-family:Arial,serif;font-size:20.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_020{font-family:"Book Antiqua Italic",serif;font-size:10.6px;color:rgb(0,0,0);font-weight:normal;font-style:italic;text-decoration: none}
div.cls_020{font-family:"Book Antiqua Italic",serif;font-size:10.6px;color:rgb(0,0,0);font-weight:normal;font-style:italic;text-decoration: none}
span.cls_021{font-family:Courier New,serif;font-size:9.1px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_021{font-family:Courier New,serif;font-size:9.1px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_022{font-family:Courier New,serif;font-size:9.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_022{font-family:Courier New,serif;font-size:9.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_023{font-family:"Book Antiqua Bold",serif;font-size:10.6px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_023{font-family:"Book Antiqua Bold",serif;font-size:10.6px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_024{font-family:"Book Antiqua",serif;font-size:9.6px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_024{font-family:"Book Antiqua",serif;font-size:9.6px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_025{font-family:Arial,serif;font-size:18.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_025{font-family:Arial,serif;font-size:18.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_026{font-family:Arial,serif;font-size:10.6px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_026{font-family:Arial,serif;font-size:10.6px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_027{font-family:"Book Antiqua Bold",serif;font-size:9.6px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_027{font-family:"Book Antiqua Bold",serif;font-size:9.6px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_028{font-family:Arial,serif;font-size:19.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_028{font-family:Arial,serif;font-size:19.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_029{font-family:"Book Antiqua Italic",serif;font-size:9.6px;color:rgb(0,0,0);font-weight:normal;font-style:italic;text-decoration: none}
div.cls_029{font-family:"Book Antiqua Italic",serif;font-size:9.6px;color:rgb(0,0,0);font-weight:normal;font-style:italic;text-decoration: none}
span.cls_030{font-family:Arial,serif;font-size:12.1px;color:rgb(0,0,0);font-weight:bold;font-style:italic;text-decoration: none}
div.cls_030{font-family:Arial,serif;font-size:12.1px;color:rgb(0,0,0);font-weight:bold;font-style:italic;text-decoration: none}
span.cls_031{font-family:"Book Antiqua",serif;font-size:9.1px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_031{font-family:"Book Antiqua",serif;font-size:9.1px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
-->
</style>
<script type="text/javascript" src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/wz_jsgraphics.js"></script>
</head>
<body>
<div style="position:absolute;left:50%;margin-left:-306px;top:0px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background001.jpg" width=612 height=792></div>
<div style="position:absolute;left:298.21px;top:665.55px" class="cls_002"><span class="cls_002">[</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:802px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background002.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:163.23px" class="cls_004"><span class="cls_004">LibGDX Game Development</span></div>
<div style="position:absolute;left:108.00px;top:196.83px" class="cls_004"><span class="cls_004">By Example</span></div>
<div style="position:absolute;left:108.00px;top:317.99px" class="cls_005"><span class="cls_005">Learn how to create your very own game using the</span></div>
<div style="position:absolute;left:108.00px;top:337.19px" class="cls_005"><span class="cls_005">LibGDX cross-platform framework</span></div>
<div style="position:absolute;left:108.00px;top:449.59px" class="cls_006"><span class="cls_006">James Cook</span></div>
<div style="position:absolute;left:108.00px;top:639.48px" class="cls_008"><span class="cls_008">BIRMINGHAM - MUMBAI</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:1604px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background003.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:113.01px" class="cls_005"><span class="cls_005">LibGDX Game Development By Example</span></div>
<div style="position:absolute;left:108.00px;top:152.35px" class="cls_007"><span class="cls_007">Copyright © 2015 Packt Publishing</span></div>
<div style="position:absolute;left:108.00px;top:194.83px" class="cls_007"><span class="cls_007">All rights reserved. No part of this book may be reproduced, stored in a retrieval</span></div>
<div style="position:absolute;left:108.00px;top:207.43px" class="cls_007"><span class="cls_007">system, or transmitted in any form or by any means, without the prior written</span></div>
<div style="position:absolute;left:108.00px;top:220.03px" class="cls_007"><span class="cls_007">permission of the publisher, except in the case of brief quotations embedded in</span></div>
<div style="position:absolute;left:108.00px;top:232.63px" class="cls_007"><span class="cls_007">critical articles or reviews.</span></div>
<div style="position:absolute;left:108.00px;top:253.87px" class="cls_007"><span class="cls_007">Every effort has been made in the preparation of this book to ensure the accuracy</span></div>
<div style="position:absolute;left:108.00px;top:266.47px" class="cls_007"><span class="cls_007">of the information presented. However, the information contained in this book is</span></div>
<div style="position:absolute;left:108.00px;top:279.07px" class="cls_007"><span class="cls_007">sold without warranty, either express or implied. Neither the author, nor Packt</span></div>
<div style="position:absolute;left:108.00px;top:291.67px" class="cls_007"><span class="cls_007">Publishing, and its dealers and distributors will be held liable for any damages</span></div>
<div style="position:absolute;left:108.00px;top:304.27px" class="cls_007"><span class="cls_007">caused or alleged to be caused directly or indirectly by this book.</span></div>
<div style="position:absolute;left:108.00px;top:325.51px" class="cls_007"><span class="cls_007">Packt Publishing has endeavored to provide trademark information about all of the</span></div>
<div style="position:absolute;left:108.00px;top:338.11px" class="cls_007"><span class="cls_007">companies and products mentioned in this book by the appropriate use of capitals.</span></div>
<div style="position:absolute;left:108.00px;top:350.71px" class="cls_007"><span class="cls_007">However, Packt Publishing cannot guarantee the accuracy of this information.</span></div>
<div style="position:absolute;left:108.00px;top:393.20px" class="cls_007"><span class="cls_007">First published: August 2015</span></div>
<div style="position:absolute;left:108.00px;top:435.68px" class="cls_007"><span class="cls_007">Production reference: 1210815</span></div>
<div style="position:absolute;left:108.00px;top:478.16px" class="cls_007"><span class="cls_007">Published by Packt Publishing Ltd.</span></div>
<div style="position:absolute;left:108.00px;top:490.76px" class="cls_007"><span class="cls_007">Livery Place</span></div>
<div style="position:absolute;left:108.00px;top:503.36px" class="cls_007"><span class="cls_007">35 Livery Street</span></div>
<div style="position:absolute;left:108.00px;top:515.96px" class="cls_007"><span class="cls_007">Birmingham B3 2PB, UK.</span></div>
<div style="position:absolute;left:108.00px;top:537.20px" class="cls_007"><span class="cls_007">ISBN 978-1-78528-144-0</span></div>
<div style="position:absolute;left:108.00px;top:559.43px" class="cls_009"><span class="cls_009"> </span><A HREF="www.packtpub.com">www.packtpub.com</A> </div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:2406px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background004.jpg" width=612 height=792></div>
<div style="position:absolute;left:261.66px;top:163.23px" class="cls_004"><span class="cls_004">Credits</span></div>
<div style="position:absolute;left:176.97px;top:240.78px" class="cls_002"><span class="cls_002">Author</span></div>
<div style="position:absolute;left:327.93px;top:240.81px" class="cls_002"><span class="cls_002">Project Coordinator</span></div>
<div style="position:absolute;left:184.17px;top:254.59px" class="cls_010"><span class="cls_010">James Cook</span></div>
<div style="position:absolute;left:335.13px;top:254.61px" class="cls_010"><span class="cls_010">Mary Alex</span></div>
<div style="position:absolute;left:176.97px;top:285.20px" class="cls_002"><span class="cls_002">Reviewers</span></div>
<div style="position:absolute;left:327.93px;top:285.22px" class="cls_002"><span class="cls_002">Proofreader</span></div>
<div style="position:absolute;left:184.17px;top:299.00px" class="cls_010"><span class="cls_010">Pavel Czempin</span></div>
<div style="position:absolute;left:335.13px;top:299.03px" class="cls_010"><span class="cls_010">Safis Editing</span></div>
<div style="position:absolute;left:184.17px;top:315.81px" class="cls_010"><span class="cls_010">Lévêque Michel</span></div>
<div style="position:absolute;left:327.93px;top:329.64px" class="cls_002"><span class="cls_002">Indexer</span></div>
<div style="position:absolute;left:184.17px;top:332.61px" class="cls_010"><span class="cls_010">Sudarshan Shetty</span></div>
<div style="position:absolute;left:335.13px;top:343.44px" class="cls_010"><span class="cls_010">Monica Ajmera Mehta</span></div>
<div style="position:absolute;left:176.97px;top:363.22px" class="cls_002"><span class="cls_002">Acquisition Editors</span></div>
<div style="position:absolute;left:327.93px;top:374.05px" class="cls_002"><span class="cls_002">Graphics</span></div>
<div style="position:absolute;left:184.17px;top:377.02px" class="cls_010"><span class="cls_010">Subho Gupta</span></div>
<div style="position:absolute;left:335.13px;top:387.86px" class="cls_010"><span class="cls_010">Dan Smallman</span></div>
<div style="position:absolute;left:184.17px;top:393.83px" class="cls_010"><span class="cls_010">James Jones</span></div>
<div style="position:absolute;left:335.13px;top:404.66px" class="cls_010"><span class="cls_010">Jason Monteiro</span></div>
<div style="position:absolute;left:176.97px;top:424.44px" class="cls_002"><span class="cls_002">Content Development Editor</span></div>
<div style="position:absolute;left:327.93px;top:435.27px" class="cls_002"><span class="cls_002">Production Coordinator</span></div>
<div style="position:absolute;left:184.17px;top:438.24px" class="cls_010"><span class="cls_010">Nikhil Potdukhe</span></div>
<div style="position:absolute;left:335.13px;top:449.08px" class="cls_010"><span class="cls_010">Arvindkumar Gupta</span></div>
<div style="position:absolute;left:176.97px;top:468.85px" class="cls_002"><span class="cls_002">Technical Editor</span></div>
<div style="position:absolute;left:327.93px;top:479.69px" class="cls_002"><span class="cls_002">Cover Work</span></div>
<div style="position:absolute;left:184.17px;top:482.66px" class="cls_010"><span class="cls_010">Abhishek R. Kotian</span></div>
<div style="position:absolute;left:335.13px;top:493.49px" class="cls_010"><span class="cls_010">Arvindkumar Gupta</span></div>
<div style="position:absolute;left:176.97px;top:513.27px" class="cls_002"><span class="cls_002">Copy Editor</span></div>
<div style="position:absolute;left:184.17px;top:527.07px" class="cls_010"><span class="cls_010">Pranjali Chury</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:3208px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background005.jpg" width=612 height=792></div>
<div style="position:absolute;left:295.39px;top:163.23px" class="cls_004"><span class="cls_004">About the Author</span></div>
<div style="position:absolute;left:108.00px;top:235.55px" class="cls_011"><span class="cls_011">James Cook</span><span class="cls_007"> is a Java software developer from London, England. He is currently</span></div>
<div style="position:absolute;left:108.00px;top:249.65px" class="cls_007"><span class="cls_007">touring Australia. He has developed software ranging from banking and mobile</span></div>
<div style="position:absolute;left:108.00px;top:262.25px" class="cls_007"><span class="cls_007">applications to games. He has worked for large gaming companies, such as</span></div>
<div style="position:absolute;left:108.00px;top:274.85px" class="cls_007"><span class="cls_007">Electronic Arts, Playfish, and Plumbee.</span></div>
<div style="position:absolute;left:108.00px;top:296.09px" class="cls_007"><span class="cls_007">During the day, he can be found working on rapid application prototyping for</span></div>
<div style="position:absolute;left:108.00px;top:308.69px" class="cls_007"><span class="cls_007">new social casino experiences. However, during the night, he collaborates with his</span></div>
<div style="position:absolute;left:108.00px;top:321.29px" class="cls_007"><span class="cls_007">longtime working partner, Dan Smallman, for Super Cookie Games to create games</span></div>
<div style="position:absolute;left:108.00px;top:333.89px" class="cls_007"><span class="cls_007">such as Super Bomb Noms, OMG Dancer!, and Betamax—Sherbet Plains.</span></div>
<div style="position:absolute;left:108.00px;top:355.13px" class="cls_007"><span class="cls_007">Super Cookie Games started out as a simple endeavor for James and Dan to learn</span></div>
<div style="position:absolute;left:108.00px;top:367.73px" class="cls_007"><span class="cls_007">how to make games and deliver them to Android, iOS, and the Web. Choosing</span></div>
<div style="position:absolute;left:108.00px;top:380.33px" class="cls_007"><span class="cls_007">LibGDX as the platform was a key component for the success of this duo, with</span></div>
<div style="position:absolute;left:108.00px;top:392.93px" class="cls_007"><span class="cls_007">six different games across three app stores culminating in 50,000 downloads—a</span></div>
<div style="position:absolute;left:108.00px;top:405.53px" class="cls_007"><span class="cls_007">testament to LibGDX and its brilliant feature set and ability.</span></div>
<div style="position:absolute;left:145.45px;top:439.73px" class="cls_007"><span class="cls_007">I would like to thank Dan because our teamwork over the last</span></div>
<div style="position:absolute;left:145.45px;top:452.33px" class="cls_007"><span class="cls_007">4 years and our continuous efforts to try out new things while</span></div>
<div style="position:absolute;left:145.45px;top:464.93px" class="cls_007"><span class="cls_007">making games led me to write this book. I would like to thank</span></div>
<div style="position:absolute;left:145.45px;top:477.53px" class="cls_007"><span class="cls_007">Barry Cranford, who first put me in touch with Dan many years ago.</span></div>
<div style="position:absolute;left:145.45px;top:490.13px" class="cls_007"><span class="cls_007">I would also like to thank James Jones and Nikhil Potdukhe at Packt</span></div>
<div style="position:absolute;left:145.45px;top:502.73px" class="cls_007"><span class="cls_007">Publishing; without them, this book would not have been possible.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:4010px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background006.jpg" width=612 height=792></div>
<div style="position:absolute;left:245.64px;top:163.23px" class="cls_004"><span class="cls_004">About the Reviewers</span></div>
<div style="position:absolute;left:108.00px;top:235.63px" class="cls_011"><span class="cls_011">Pavel Czempin</span><span class="cls_007"> is currently completing an internship in the software field and</span></div>
<div style="position:absolute;left:108.00px;top:249.73px" class="cls_007"><span class="cls_007">plans to study engineering at a German university. Most of his programming</span></div>
<div style="position:absolute;left:108.00px;top:262.33px" class="cls_007"><span class="cls_007">experience stems from his early enrollment in a bachelor's course in computer</span></div>
<div style="position:absolute;left:108.00px;top:274.93px" class="cls_007"><span class="cls_007">science. In his free time, he likes to program and develop games.</span></div>
<div style="position:absolute;left:108.00px;top:296.17px" class="cls_007"><span class="cls_007">You can find some of his projects on his GitHub page at</span></div>
<div style="position:absolute;left:108.00px;top:308.77px" class="cls_009"><span class="cls_009"> </span><A HREF="https://github.com/Valep42">https://github.com/Valep42</A> <span class="cls_007">.</span></div>
<div style="position:absolute;left:108.00px;top:394.03px" class="cls_011"><span class="cls_011">Lévêque Michel</span><span class="cls_007"> has a bachelor's degree in information technology. He worked</span></div>
<div style="position:absolute;left:108.00px;top:408.13px" class="cls_007"><span class="cls_007">as a Java developer for 8 years and is currently working on a LibGDX point-and-click</span></div>
<div style="position:absolute;left:108.00px;top:420.73px" class="cls_007"><span class="cls_007">game as a core programmer.</span></div>
<div style="position:absolute;left:145.44px;top:454.93px" class="cls_007"><span class="cls_007">I would like to thank the author of this book and the team at Packt</span></div>
<div style="position:absolute;left:145.44px;top:467.53px" class="cls_007"><span class="cls_007">Publishing for giving me the opportunity to review this great book.</span></div>
<div style="position:absolute;left:108.00px;top:562.15px" class="cls_011"><span class="cls_011">Sudarshan Shetty</span><span class="cls_007"> is a software developer who builds mobile apps for the order</span></div>
<div style="position:absolute;left:108.01px;top:576.25px" class="cls_007"><span class="cls_007">management system. He uses LibGDX to build BI dashboards and data visualization</span></div>
<div style="position:absolute;left:108.01px;top:588.85px" class="cls_007"><span class="cls_007">software. When not programming, he engages in gardening as a hobby with his wife,</span></div>
<div style="position:absolute;left:108.01px;top:601.45px" class="cls_007"><span class="cls_007">Anuradha, and kids, Shameen and Shamika.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:4812px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background007.jpg" width=612 height=792></div>
<div style="position:absolute;left:256.58px;top:163.21px" class="cls_004"><span class="cls_004"> </span><A HREF="http://www.packtpub.com/">www.PacktPub.com</A> </div>
<div style="position:absolute;left:108.00px;top:254.33px" class="cls_012"><span class="cls_012">Support files, eBooks, discount offers, and more</span></div>
<div style="position:absolute;left:108.00px;top:275.31px" class="cls_007"><span class="cls_007">For support files and downloads related to your book, please visit </span><A HREF="www.PacktPub.com">www.PacktPub.com</A> </span><span class="cls_007">.</span></div>
<div style="position:absolute;left:108.00px;top:296.55px" class="cls_007"><span class="cls_007">Did you know that Packt offers eBook versions of every book published, with PDF</span></div>
<div style="position:absolute;left:108.00px;top:309.15px" class="cls_007"><span class="cls_007">and ePub files available? You can upgrade to the eBook version at </span><A HREF="www.PacktPub.com">www.PacktPub.com</A> </span></div>
<div style="position:absolute;left:108.00px;top:321.75px" class="cls_007"><span class="cls_007">and as a print book customer, you are entitled to a discount on the eBook copy. Get in</span></div>
<div style="position:absolute;left:108.00px;top:334.35px" class="cls_007"><span class="cls_007">touch with us at </span><span class="cls_009">service@packtpub.com</span><span class="cls_007"> for more details.</span></div>
<div style="position:absolute;left:108.00px;top:355.59px" class="cls_007"><span class="cls_007">At </span><A HREF="www.PacktPub.com">www.PacktPub.com</A> </span><span class="cls_007">, you can also read a collection of free technical articles, sign</span></div>
<div style="position:absolute;left:108.00px;top:368.19px" class="cls_007"><span class="cls_007">up for a range of free newsletters and receive exclusive discounts and offers on Packt</span></div>
<div style="position:absolute;left:108.00px;top:380.79px" class="cls_007"><span class="cls_007">books and eBooks.</span></div>
<div style="position:absolute;left:250.94px;top:408.55px" class="cls_013"><span class="cls_013">TM</span></div>
<div style="position:absolute;left:108.00px;top:448.93px" class="cls_009"><span class="cls_009"> </span><A HREF="https://www2.packtpub.com/books/subscription/packtlib">https://www2.packtpub.com/books/subscription/packtlib</A> </div>
<div style="position:absolute;left:108.00px;top:469.17px" class="cls_007"><span class="cls_007">Do you need instant solutions to your IT questions? PacktLib is Packt's online digital</span></div>
<div style="position:absolute;left:108.00px;top:481.77px" class="cls_007"><span class="cls_007">book library. Here, you can search, access, and read Packt's entire library of books.</span></div>
<div style="position:absolute;left:108.00px;top:510.91px" class="cls_006"><span class="cls_006">Why subscribe?</span></div>
<div style="position:absolute;left:126.00px;top:529.89px" class="cls_007"><span class="cls_007">•  Fully searchable across every book published by Packt</span></div>
<div style="position:absolute;left:126.00px;top:546.80px" class="cls_007"><span class="cls_007">•  Copy and paste, print, and bookmark content</span></div>
<div style="position:absolute;left:126.00px;top:563.72px" class="cls_007"><span class="cls_007">•  On demand and accessible via a web browser</span></div>
<div style="position:absolute;left:108.00px;top:592.87px" class="cls_006"><span class="cls_006">Free access for Packt account holders</span></div>
<div style="position:absolute;left:108.00px;top:611.85px" class="cls_007"><span class="cls_007">If you have an account with Packt at </span><A HREF="www.PacktPub.com">www.PacktPub.com</A> </span><span class="cls_007">, you can use this to access</span></div>
<div style="position:absolute;left:108.00px;top:624.45px" class="cls_007"><span class="cls_007">PacktLib today and view 9 entirely free books. Simply use your login credentials for</span></div>
<div style="position:absolute;left:108.00px;top:637.05px" class="cls_007"><span class="cls_007">immediate access.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:5614px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background008.jpg" width=612 height=792></div>
<div style="position:absolute;left:270.52px;top:218.71px" class="cls_014"><span class="cls_014">Table of Contents</span></div>
<div style="position:absolute;left:108.00px;top:274.09px" class="cls_015"><span class="cls_015">Preface</span></div>
<div style="position:absolute;left:497.33px;top:274.09px" class="cls_015"><span class="cls_015">v</span></div>
<div style="position:absolute;left:108.00px;top:291.37px" class="cls_015"><span class="cls_015">Chapter 1: Getting to Know LibGDX</span></div>
<div style="position:absolute;left:497.33px;top:291.37px" class="cls_015"><span class="cls_015">1</span></div>
<div style="position:absolute;left:115.20px;top:307.07px" class="cls_016"><span class="cls_016">Introducing LibGDX</span></div>
<div style="position:absolute;left:497.88px;top:307.07px" class="cls_016"><span class="cls_016">1</span></div>
<div style="position:absolute;left:115.20px;top:320.27px" class="cls_016"><span class="cls_016">Setting up LibGDX</span></div>
<div style="position:absolute;left:497.88px;top:320.27px" class="cls_016"><span class="cls_016">3</span></div>
<div style="position:absolute;left:115.20px;top:333.47px" class="cls_016"><span class="cls_016">Creating a project</span></div>
<div style="position:absolute;left:497.88px;top:333.47px" class="cls_016"><span class="cls_016">6</span></div>
<div style="position:absolute;left:126.00px;top:346.67px" class="cls_017"><span class="cls_017">What is Gradle?</span></div>
<div style="position:absolute;left:497.88px;top:346.67px" class="cls_017"><span class="cls_017">9</span></div>
<div style="position:absolute;left:115.20px;top:359.87px" class="cls_016"><span class="cls_016">Importing a project</span></div>
<div style="position:absolute;left:492.37px;top:359.87px" class="cls_016"><span class="cls_016">11</span></div>
<div style="position:absolute;left:115.20px;top:373.07px" class="cls_016"><span class="cls_016">Summary</span></div>
<div style="position:absolute;left:491.76px;top:373.07px" class="cls_016"><span class="cls_016">14</span></div>
<div style="position:absolute;left:108.00px;top:387.85px" class="cls_015"><span class="cls_015">Chapter 2: Let's Get These Snakes Out of This Book!</span></div>
<div style="position:absolute;left:490.66px;top:387.85px" class="cls_015"><span class="cls_015">15</span></div>
<div style="position:absolute;left:115.20px;top:403.55px" class="cls_016"><span class="cls_016">Why Snake?</span></div>
<div style="position:absolute;left:491.76px;top:403.55px" class="cls_016"><span class="cls_016">15</span></div>
<div style="position:absolute;left:115.20px;top:416.75px" class="cls_016"><span class="cls_016">Game update cycle</span></div>
<div style="position:absolute;left:491.76px;top:416.75px" class="cls_016"><span class="cls_016">16</span></div>
<div style="position:absolute;left:126.00px;top:429.95px" class="cls_017"><span class="cls_017">Texture rendering</span></div>
<div style="position:absolute;left:491.76px;top:429.95px" class="cls_017"><span class="cls_017">19</span></div>
<div style="position:absolute;left:133.20px;top:442.75px" class="cls_010"><span class="cls_010">The batch class</span></div>
<div style="position:absolute;left:493.99px;top:442.75px" class="cls_010"><span class="cls_010">20</span></div>
<div style="position:absolute;left:133.20px;top:453.55px" class="cls_010"><span class="cls_010">The texture class</span></div>
<div style="position:absolute;left:493.99px;top:453.55px" class="cls_010"><span class="cls_010">20</span></div>
<div style="position:absolute;left:133.20px;top:464.35px" class="cls_010"><span class="cls_010">The dispose() method</span></div>
<div style="position:absolute;left:493.99px;top:464.35px" class="cls_010"><span class="cls_010">21</span></div>
<div style="position:absolute;left:115.20px;top:475.55px" class="cls_016"><span class="cls_016">Introducing Sammy the snake</span></div>
<div style="position:absolute;left:491.76px;top:475.55px" class="cls_016"><span class="cls_016">21</span></div>
<div style="position:absolute;left:126.00px;top:488.75px" class="cls_017"><span class="cls_017">Giving the snake a face</span></div>
<div style="position:absolute;left:491.76px;top:488.75px" class="cls_017"><span class="cls_017">22</span></div>
<div style="position:absolute;left:115.20px;top:501.95px" class="cls_016"><span class="cls_016">Moving Sammy the snake</span></div>
<div style="position:absolute;left:491.76px;top:501.95px" class="cls_016"><span class="cls_016">23</span></div>
<div style="position:absolute;left:126.00px;top:515.15px" class="cls_017"><span class="cls_017">Controlling Sammy with event polling</span></div>
<div style="position:absolute;left:491.76px;top:515.15px" class="cls_017"><span class="cls_017">27</span></div>
<div style="position:absolute;left:115.20px;top:528.35px" class="cls_016"><span class="cls_016">Adding the apple</span></div>
<div style="position:absolute;left:491.76px;top:528.35px" class="cls_016"><span class="cls_016">28</span></div>
<div style="position:absolute;left:115.20px;top:541.55px" class="cls_016"><span class="cls_016">Increasing the length of the snake</span></div>
<div style="position:absolute;left:491.76px;top:541.55px" class="cls_016"><span class="cls_016">31</span></div>
<div style="position:absolute;left:115.20px;top:554.75px" class="cls_016"><span class="cls_016">Summary</span></div>
<div style="position:absolute;left:491.76px;top:554.75px" class="cls_016"><span class="cls_016">34</span></div>
<div style="position:absolute;left:108.00px;top:569.53px" class="cls_015"><span class="cls_015">Chapter 3: Making That Snake Slick</span></div>
<div style="position:absolute;left:490.66px;top:569.53px" class="cls_015"><span class="cls_015">35</span></div>
<div style="position:absolute;left:115.20px;top:585.23px" class="cls_016"><span class="cls_016">Introducing the ShapeRenderer class</span></div>
<div style="position:absolute;left:491.76px;top:585.23px" class="cls_016"><span class="cls_016">35</span></div>
<div style="position:absolute;left:126.00px;top:598.43px" class="cls_017"><span class="cls_017">Adding the ShapeRenderer class</span></div>
<div style="position:absolute;left:491.76px;top:598.43px" class="cls_017"><span class="cls_017">36</span></div>
<div style="position:absolute;left:126.00px;top:611.63px" class="cls_017"><span class="cls_017">Drawing with the ShapeRenderer class</span></div>
<div style="position:absolute;left:491.76px;top:611.63px" class="cls_017"><span class="cls_017">36</span></div>
<div style="position:absolute;left:126.00px;top:624.83px" class="cls_017"><span class="cls_017">Final thoughts on the ShapeRenderer class</span></div>
<div style="position:absolute;left:491.76px;top:624.83px" class="cls_017"><span class="cls_017">38</span></div>
<div style="position:absolute;left:299.33px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> i </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:6416px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background009.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Table of Contents</span></div>
<div style="position:absolute;left:115.20px;top:114.37px" class="cls_016"><span class="cls_016">More on collisions</span></div>
<div style="position:absolute;left:491.76px;top:114.37px" class="cls_016"><span class="cls_016">39</span></div>
<div style="position:absolute;left:126.00px;top:127.57px" class="cls_017"><span class="cls_017">Stopping the doubleback</span></div>
<div style="position:absolute;left:491.76px;top:127.57px" class="cls_017"><span class="cls_017">40</span></div>
<div style="position:absolute;left:126.00px;top:140.77px" class="cls_017"><span class="cls_017">Colliding with the body</span></div>
<div style="position:absolute;left:491.76px;top:140.77px" class="cls_017"><span class="cls_017">42</span></div>
<div style="position:absolute;left:115.20px;top:153.97px" class="cls_016"><span class="cls_016">The state of the game</span></div>
<div style="position:absolute;left:491.76px;top:153.97px" class="cls_016"><span class="cls_016">44</span></div>
<div style="position:absolute;left:126.00px;top:167.17px" class="cls_017"><span class="cls_017">Adding a state</span></div>
<div style="position:absolute;left:491.76px;top:167.17px" class="cls_017"><span class="cls_017">44</span></div>
<div style="position:absolute;left:126.00px;top:180.37px" class="cls_017"><span class="cls_017">Player feedback</span></div>
<div style="position:absolute;left:491.76px;top:180.37px" class="cls_017"><span class="cls_017">46</span></div>
<div style="position:absolute;left:126.00px;top:193.57px" class="cls_017"><span class="cls_017">Restart your engines!</span></div>
<div style="position:absolute;left:491.76px;top:193.57px" class="cls_017"><span class="cls_017">49</span></div>
<div style="position:absolute;left:115.20px;top:206.77px" class="cls_016"><span class="cls_016">High scores</span></div>
<div style="position:absolute;left:491.76px;top:206.77px" class="cls_016"><span class="cls_016">50</span></div>
<div style="position:absolute;left:115.20px;top:219.97px" class="cls_016"><span class="cls_016">Handling different screen sizes</span></div>
<div style="position:absolute;left:491.76px;top:219.97px" class="cls_016"><span class="cls_016">53</span></div>
<div style="position:absolute;left:126.00px;top:233.17px" class="cls_017"><span class="cls_017">Introducing the Viewport</span></div>
<div style="position:absolute;left:491.76px;top:233.17px" class="cls_017"><span class="cls_017">55</span></div>
<div style="position:absolute;left:126.00px;top:246.37px" class="cls_017"><span class="cls_017">Using the Viewport</span></div>
<div style="position:absolute;left:491.76px;top:246.37px" class="cls_017"><span class="cls_017">56</span></div>
<div style="position:absolute;left:115.20px;top:259.57px" class="cls_016"><span class="cls_016">Summary</span></div>
<div style="position:absolute;left:491.76px;top:259.57px" class="cls_016"><span class="cls_016">59</span></div>
<div style="position:absolute;left:108.00px;top:274.35px" class="cls_015"><span class="cls_015">Chapter 4: What the Flap Is the Hype About?</span></div>
<div style="position:absolute;left:490.66px;top:274.35px" class="cls_015"><span class="cls_015">61</span></div>
<div style="position:absolute;left:115.20px;top:290.05px" class="cls_016"><span class="cls_016">Why Flappy Bird?</span></div>
<div style="position:absolute;left:491.76px;top:290.05px" class="cls_016"><span class="cls_016">61</span></div>
<div style="position:absolute;left:115.20px;top:303.25px" class="cls_016"><span class="cls_016">The project setup</span></div>
<div style="position:absolute;left:491.76px;top:303.25px" class="cls_016"><span class="cls_016">62</span></div>
<div style="position:absolute;left:126.00px;top:316.45px" class="cls_017"><span class="cls_017">Setting up the GameScreen class</span></div>
<div style="position:absolute;left:491.76px;top:316.45px" class="cls_017"><span class="cls_017">62</span></div>
<div style="position:absolute;left:115.20px;top:329.65px" class="cls_016"><span class="cls_016">Creating Flappee Bee</span></div>
<div style="position:absolute;left:491.76px;top:329.65px" class="cls_016"><span class="cls_016">64</span></div>
<div style="position:absolute;left:126.00px;top:342.85px" class="cls_017"><span class="cls_017">Flappee Bee</span></div>
<div style="position:absolute;left:491.76px;top:342.85px" class="cls_017"><span class="cls_017">64</span></div>
<div style="position:absolute;left:126.00px;top:356.05px" class="cls_017"><span class="cls_017">Flapping Flappee</span></div>
<div style="position:absolute;left:491.76px;top:356.05px" class="cls_017"><span class="cls_017">68</span></div>
<div style="position:absolute;left:126.00px;top:369.25px" class="cls_017"><span class="cls_017">Flower power obstacles</span></div>
<div style="position:absolute;left:491.76px;top:369.25px" class="cls_017"><span class="cls_017">70</span></div>
<div style="position:absolute;left:115.20px;top:382.45px" class="cls_016"><span class="cls_016">Collisions</span></div>
<div style="position:absolute;left:491.76px;top:382.45px" class="cls_016"><span class="cls_016">78</span></div>
<div style="position:absolute;left:126.00px;top:395.65px" class="cls_017"><span class="cls_017">Scoring</span></div>
<div style="position:absolute;left:491.76px;top:395.65px" class="cls_017"><span class="cls_017">80</span></div>
<div style="position:absolute;left:115.20px;top:408.85px" class="cls_016"><span class="cls_016">Adding textures and animations</span></div>
<div style="position:absolute;left:491.76px;top:408.85px" class="cls_016"><span class="cls_016">85</span></div>
<div style="position:absolute;left:115.20px;top:422.05px" class="cls_016"><span class="cls_016">GUI creation with Scene2D</span></div>
<div style="position:absolute;left:491.76px;top:422.05px" class="cls_016"><span class="cls_016">97</span></div>
<div style="position:absolute;left:126.00px;top:435.25px" class="cls_017"><span class="cls_017">The Stage class</span></div>
<div style="position:absolute;left:491.76px;top:435.25px" class="cls_017"><span class="cls_017">97</span></div>
<div style="position:absolute;left:126.00px;top:448.45px" class="cls_017"><span class="cls_017">The Actor class</span></div>
<div style="position:absolute;left:491.76px;top:448.45px" class="cls_017"><span class="cls_017">98</span></div>
<div style="position:absolute;left:115.20px;top:461.65px" class="cls_016"><span class="cls_016">The Start screen and disposal</span></div>
<div style="position:absolute;left:491.76px;top:461.65px" class="cls_016"><span class="cls_016">99</span></div>
<div style="position:absolute;left:126.00px;top:474.85px" class="cls_017"><span class="cls_017">The dispose() method</span></div>
<div style="position:absolute;left:485.65px;top:474.85px" class="cls_017"><span class="cls_017">105</span></div>
<div style="position:absolute;left:115.20px;top:488.05px" class="cls_016"><span class="cls_016">Summary</span></div>
<div style="position:absolute;left:485.65px;top:488.05px" class="cls_016"><span class="cls_016">106</span></div>
<div style="position:absolute;left:108.00px;top:502.83px" class="cls_015"><span class="cls_015">Chapter 5: Making Your Bird More Flightworthy</span></div>
<div style="position:absolute;left:483.98px;top:502.83px" class="cls_015"><span class="cls_015">107</span></div>
<div style="position:absolute;left:115.20px;top:518.53px" class="cls_016"><span class="cls_016">Let's load up them assets!</span></div>
<div style="position:absolute;left:485.65px;top:518.53px" class="cls_016"><span class="cls_016">107</span></div>
<div style="position:absolute;left:126.00px;top:531.73px" class="cls_017"><span class="cls_017">Implementing the AssetManager parameter</span></div>
<div style="position:absolute;left:485.65px;top:531.73px" class="cls_017"><span class="cls_017">109</span></div>
<div style="position:absolute;left:126.00px;top:544.93px" class="cls_017"><span class="cls_017">Loading the loading screen!</span></div>
<div style="position:absolute;left:486.46px;top:544.93px" class="cls_017"><span class="cls_017">110</span></div>
<div style="position:absolute;left:115.20px;top:558.13px" class="cls_016"><span class="cls_016">Packing textures</span></div>
<div style="position:absolute;left:486.25px;top:558.13px" class="cls_016"><span class="cls_016">115</span></div>
<div style="position:absolute;left:126.00px;top:571.33px" class="cls_017"><span class="cls_017">Measuring the impact</span></div>
<div style="position:absolute;left:486.46px;top:571.33px" class="cls_017"><span class="cls_017">116</span></div>
<div style="position:absolute;left:126.00px;top:584.53px" class="cls_017"><span class="cls_017">The GDX-tools TexturePacker</span></div>
<div style="position:absolute;left:486.46px;top:584.53px" class="cls_017"><span class="cls_017">117</span></div>
<div style="position:absolute;left:126.00px;top:597.73px" class="cls_017"><span class="cls_017">Using the texture atlas</span></div>
<div style="position:absolute;left:486.46px;top:597.73px" class="cls_017"><span class="cls_017">119</span></div>
<div style="position:absolute;left:115.20px;top:610.93px" class="cls_016"><span class="cls_016">I need a Hiero!</span></div>
<div style="position:absolute;left:485.65px;top:610.93px" class="cls_016"><span class="cls_016">120</span></div>
<div style="position:absolute;left:126.00px;top:624.13px" class="cls_017"><span class="cls_017">What is Hiero?</span></div>
<div style="position:absolute;left:485.65px;top:624.13px" class="cls_017"><span class="cls_017">120</span></div>
<div style="position:absolute;left:115.20px;top:637.33px" class="cls_016"><span class="cls_016">Summary</span></div>
<div style="position:absolute;left:485.65px;top:637.33px" class="cls_016"><span class="cls_016">124</span></div>
<div style="position:absolute;left:297.59px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> ii </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:7218px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background010.jpg" width=612 height=792></div>
<div style="position:absolute;left:440.96px;top:94.56px" class="cls_018"><span class="cls_018">Table of Contents</span></div>
<div style="position:absolute;left:108.00px;top:112.60px" class="cls_015"><span class="cls_015">Chapter 6: Onto the Next Platform...Game</span></div>
<div style="position:absolute;left:483.98px;top:112.60px" class="cls_015"><span class="cls_015">125</span></div>
<div style="position:absolute;left:115.20px;top:128.30px" class="cls_016"><span class="cls_016">Why and what is a platformer?</span></div>
<div style="position:absolute;left:485.65px;top:128.30px" class="cls_016"><span class="cls_016">126</span></div>
<div style="position:absolute;left:126.00px;top:141.50px" class="cls_017"><span class="cls_017">Introducing Pete the platformer</span></div>
<div style="position:absolute;left:485.65px;top:141.50px" class="cls_017"><span class="cls_017">126</span></div>
<div style="position:absolute;left:115.20px;top:154.70px" class="cls_016"><span class="cls_016">Game reuse</span></div>
<div style="position:absolute;left:485.65px;top:154.70px" class="cls_016"><span class="cls_016">126</span></div>
<div style="position:absolute;left:115.20px;top:167.90px" class="cls_016"><span class="cls_016">Tile maps - mapping all over the world!</span></div>
<div style="position:absolute;left:485.65px;top:167.90px" class="cls_016"><span class="cls_016">131</span></div>
<div style="position:absolute;left:126.00px;top:181.10px" class="cls_017"><span class="cls_017">Introducing Tiled</span></div>
<div style="position:absolute;left:485.65px;top:181.10px" class="cls_017"><span class="cls_017">131</span></div>
<div style="position:absolute;left:126.00px;top:194.30px" class="cls_017"><span class="cls_017">Creating a new map</span></div>
<div style="position:absolute;left:485.65px;top:194.30px" class="cls_017"><span class="cls_017">132</span></div>
<div style="position:absolute;left:126.00px;top:207.50px" class="cls_017"><span class="cls_017">The LibGDX Tile Map API</span></div>
<div style="position:absolute;left:485.65px;top:207.50px" class="cls_017"><span class="cls_017">134</span></div>
<div style="position:absolute;left:115.20px;top:220.70px" class="cls_016"><span class="cls_016">Introducing Pete</span></div>
<div style="position:absolute;left:485.65px;top:220.70px" class="cls_016"><span class="cls_016">137</span></div>
<div style="position:absolute;left:126.00px;top:233.90px" class="cls_017"><span class="cls_017">Adding our character</span></div>
<div style="position:absolute;left:485.65px;top:233.90px" class="cls_017"><span class="cls_017">138</span></div>
<div style="position:absolute;left:126.00px;top:247.10px" class="cls_017"><span class="cls_017">Making Pete jump!</span></div>
<div style="position:absolute;left:485.65px;top:247.10px" class="cls_017"><span class="cls_017">141</span></div>
<div style="position:absolute;left:126.00px;top:260.30px" class="cls_017"><span class="cls_017">Adding our artwork</span></div>
<div style="position:absolute;left:485.65px;top:260.30px" class="cls_017"><span class="cls_017">145</span></div>
<div style="position:absolute;left:115.20px;top:273.50px" class="cls_016"><span class="cls_016">Collision detection</span></div>
<div style="position:absolute;left:485.65px;top:273.50px" class="cls_016"><span class="cls_016">148</span></div>
<div style="position:absolute;left:115.20px;top:286.70px" class="cls_016"><span class="cls_016">Adding a collectable</span></div>
<div style="position:absolute;left:485.65px;top:286.70px" class="cls_016"><span class="cls_016">153</span></div>
<div style="position:absolute;left:115.20px;top:299.90px" class="cls_016"><span class="cls_016">Summary</span></div>
<div style="position:absolute;left:485.65px;top:299.90px" class="cls_016"><span class="cls_016">159</span></div>
<div style="position:absolute;left:108.00px;top:314.68px" class="cls_015"><span class="cls_015">Chapter 7: Extending the Platform</span></div>
<div style="position:absolute;left:483.98px;top:314.68px" class="cls_015"><span class="cls_015">161</span></div>
<div style="position:absolute;left:115.20px;top:330.38px" class="cls_016"><span class="cls_016">Increasing the level</span></div>
<div style="position:absolute;left:485.65px;top:330.38px" class="cls_016"><span class="cls_016">161</span></div>
<div style="position:absolute;left:126.00px;top:343.58px" class="cls_017"><span class="cls_017">Resizing the Map</span></div>
<div style="position:absolute;left:485.65px;top:343.58px" class="cls_017"><span class="cls_017">163</span></div>
<div style="position:absolute;left:126.00px;top:356.78px" class="cls_017"><span class="cls_017">Allowing Pete to leave the screen</span></div>
<div style="position:absolute;left:485.65px;top:356.78px" class="cls_017"><span class="cls_017">165</span></div>
<div style="position:absolute;left:126.00px;top:369.98px" class="cls_017"><span class="cls_017">The camera sees it all</span></div>
<div style="position:absolute;left:485.65px;top:369.98px" class="cls_017"><span class="cls_017">166</span></div>
<div style="position:absolute;left:115.20px;top:383.18px" class="cls_016"><span class="cls_016">Let's make some noise</span></div>
<div style="position:absolute;left:485.65px;top:383.18px" class="cls_016"><span class="cls_016">169</span></div>
<div style="position:absolute;left:126.00px;top:396.38px" class="cls_017"><span class="cls_017">Sound effects</span></div>
<div style="position:absolute;left:485.65px;top:396.38px" class="cls_017"><span class="cls_017">169</span></div>
<div style="position:absolute;left:126.00px;top:409.58px" class="cls_017"><span class="cls_017">Music</span></div>
<div style="position:absolute;left:485.65px;top:409.58px" class="cls_017"><span class="cls_017">170</span></div>
<div style="position:absolute;left:126.00px;top:422.78px" class="cls_017"><span class="cls_017">If Pete jumps in the game, does anyone hear him?</span></div>
<div style="position:absolute;left:485.65px;top:422.78px" class="cls_017"><span class="cls_017">171</span></div>
<div style="position:absolute;left:115.20px;top:435.98px" class="cls_016"><span class="cls_016">Summary</span></div>
<div style="position:absolute;left:485.65px;top:435.98px" class="cls_016"><span class="cls_016">175</span></div>
<div style="position:absolute;left:108.00px;top:450.76px" class="cls_015"><span class="cls_015">Chapter 8: Why Are All the Birds Angry?</span></div>
<div style="position:absolute;left:483.98px;top:450.76px" class="cls_015"><span class="cls_015">177</span></div>
<div style="position:absolute;left:115.20px;top:466.46px" class="cls_016"><span class="cls_016">The what, why, and how of Angry Birds</span></div>
<div style="position:absolute;left:485.65px;top:466.46px" class="cls_016"><span class="cls_016">177</span></div>
<div style="position:absolute;left:126.00px;top:479.66px" class="cls_017"><span class="cls_017">Why?</span></div>
<div style="position:absolute;left:485.65px;top:479.66px" class="cls_017"><span class="cls_017">178</span></div>
<div style="position:absolute;left:126.00px;top:492.86px" class="cls_017"><span class="cls_017">How?</span></div>
<div style="position:absolute;left:485.65px;top:492.86px" class="cls_017"><span class="cls_017">179</span></div>
<div style="position:absolute;left:115.20px;top:506.06px" class="cls_016"><span class="cls_016">Setting up LibGDX with Box2D</span></div>
<div style="position:absolute;left:485.65px;top:506.06px" class="cls_016"><span class="cls_016">179</span></div>
<div style="position:absolute;left:126.00px;top:519.26px" class="cls_017"><span class="cls_017">Code reuse</span></div>
<div style="position:absolute;left:485.65px;top:519.26px" class="cls_017"><span class="cls_017">179</span></div>
<div style="position:absolute;left:126.00px;top:532.46px" class="cls_017"><span class="cls_017">Box2D with LibGDX</span></div>
<div style="position:absolute;left:485.65px;top:532.46px" class="cls_017"><span class="cls_017">180</span></div>
<div style="position:absolute;left:133.20px;top:545.26px" class="cls_010"><span class="cls_010">Box2D concepts</span></div>
<div style="position:absolute;left:488.99px;top:545.26px" class="cls_010"><span class="cls_010">181</span></div>
<div style="position:absolute;left:126.00px;top:556.46px" class="cls_017"><span class="cls_017">Creating a world!</span></div>
<div style="position:absolute;left:485.64px;top:556.46px" class="cls_017"><span class="cls_017">183</span></div>
<div style="position:absolute;left:115.20px;top:569.66px" class="cls_016"><span class="cls_016">Nutty Birds</span></div>
<div style="position:absolute;left:485.64px;top:569.66px" class="cls_016"><span class="cls_016">186</span></div>
<div style="position:absolute;left:126.00px;top:582.86px" class="cls_017"><span class="cls_017">Let's get tiling!</span></div>
<div style="position:absolute;left:485.64px;top:582.86px" class="cls_017"><span class="cls_017">186</span></div>
<div style="position:absolute;left:133.20px;top:595.66px" class="cls_010"><span class="cls_010">The groundwork</span></div>
<div style="position:absolute;left:488.99px;top:595.66px" class="cls_010"><span class="cls_010">187</span></div>
<div style="position:absolute;left:133.20px;top:606.46px" class="cls_010"><span class="cls_010">Adding objects</span></div>
<div style="position:absolute;left:488.99px;top:606.46px" class="cls_010"><span class="cls_010">189</span></div>
<div style="position:absolute;left:133.20px;top:617.26px" class="cls_010"><span class="cls_010">Importing the tile map</span></div>
<div style="position:absolute;left:488.99px;top:617.26px" class="cls_010"><span class="cls_010">191</span></div>
<div style="position:absolute;left:133.20px;top:628.06px" class="cls_010"><span class="cls_010">Importing the object layer</span></div>
<div style="position:absolute;left:488.99px;top:628.06px" class="cls_010"><span class="cls_010">193</span></div>
<div style="position:absolute;left:133.20px;top:638.86px" class="cls_010"><span class="cls_010">Importing the naughty ones!</span></div>
<div style="position:absolute;left:488.99px;top:638.86px" class="cls_010"><span class="cls_010">200</span></div>
<div style="position:absolute;left:297.10px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> iii </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:8020px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background011.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Table of Contents</span></div>
<div style="position:absolute;left:133.20px;top:114.91px" class="cls_010"><span class="cls_010">Fire at will!</span></div>
<div style="position:absolute;left:488.99px;top:114.91px" class="cls_010"><span class="cls_010">201</span></div>
<div style="position:absolute;left:133.20px;top:125.71px" class="cls_010"><span class="cls_010">Take Aim! Fire!</span></div>
<div style="position:absolute;left:488.99px;top:125.71px" class="cls_010"><span class="cls_010">207</span></div>
<div style="position:absolute;left:133.20px;top:136.51px" class="cls_010"><span class="cls_010">Time for an art attack!</span></div>
<div style="position:absolute;left:489.65px;top:136.51px" class="cls_010"><span class="cls_010">211</span></div>
<div style="position:absolute;left:133.20px;top:147.31px" class="cls_010"><span class="cls_010">Ladies and gentleman - the main event!</span></div>
<div style="position:absolute;left:488.99px;top:147.31px" class="cls_010"><span class="cls_010">219</span></div>
<div style="position:absolute;left:115.20px;top:158.51px" class="cls_016"><span class="cls_016">Summary</span></div>
<div style="position:absolute;left:485.65px;top:158.51px" class="cls_016"><span class="cls_016">221</span></div>
<div style="position:absolute;left:108.00px;top:173.29px" class="cls_015"><span class="cls_015">Chapter 9: Even Angrier Birds!</span></div>
<div style="position:absolute;left:483.98px;top:173.29px" class="cls_015"><span class="cls_015">223</span></div>
<div style="position:absolute;left:115.20px;top:188.99px" class="cls_016"><span class="cls_016">The how, what, and why of object pools</span></div>
<div style="position:absolute;left:485.65px;top:188.99px" class="cls_016"><span class="cls_016">223</span></div>
<div style="position:absolute;left:126.00px;top:202.19px" class="cls_017"><span class="cls_017">Object pools with LibGDX</span></div>
<div style="position:absolute;left:485.65px;top:202.19px" class="cls_017"><span class="cls_017">224</span></div>
<div style="position:absolute;left:115.20px;top:215.39px" class="cls_016"><span class="cls_016">Hey, look at all these acorns!</span></div>
<div style="position:absolute;left:485.65px;top:215.39px" class="cls_016"><span class="cls_016">226</span></div>
<div style="position:absolute;left:126.00px;top:228.59px" class="cls_017"><span class="cls_017">Pooling the acorns</span></div>
<div style="position:absolute;left:485.65px;top:228.59px" class="cls_017"><span class="cls_017">226</span></div>
<div style="position:absolute;left:126.00px;top:241.79px" class="cls_017"><span class="cls_017">Freeing the acorns!</span></div>
<div style="position:absolute;left:485.65px;top:241.79px" class="cls_017"><span class="cls_017">230</span></div>
<div style="position:absolute;left:115.20px;top:254.99px" class="cls_016"><span class="cls_016">Summary</span></div>
<div style="position:absolute;left:485.65px;top:254.99px" class="cls_016"><span class="cls_016">231</span></div>
<div style="position:absolute;left:108.00px;top:269.77px" class="cls_015"><span class="cls_015">Chapter 10: Exporting Our Games to the Platforms</span></div>
<div style="position:absolute;left:483.98px;top:269.77px" class="cls_015"><span class="cls_015">233</span></div>
<div style="position:absolute;left:115.20px;top:285.47px" class="cls_016"><span class="cls_016">Using all the platforms</span></div>
<div style="position:absolute;left:485.65px;top:285.47px" class="cls_016"><span class="cls_016">233</span></div>
<div style="position:absolute;left:115.20px;top:298.67px" class="cls_016"><span class="cls_016">Looking closer - Android</span></div>
<div style="position:absolute;left:485.65px;top:298.67px" class="cls_016"><span class="cls_016">234</span></div>
<div style="position:absolute;left:126.00px;top:311.87px" class="cls_017"><span class="cls_017">Launching the emulator from an IDE</span></div>
<div style="position:absolute;left:485.65px;top:311.87px" class="cls_017"><span class="cls_017">236</span></div>
<div style="position:absolute;left:126.00px;top:325.07px" class="cls_017"><span class="cls_017">Launching the emulator from the command line</span></div>
<div style="position:absolute;left:485.65px;top:325.07px" class="cls_017"><span class="cls_017">241</span></div>
<div style="position:absolute;left:126.00px;top:338.27px" class="cls_017"><span class="cls_017">Hang on, how does it work?</span></div>
<div style="position:absolute;left:485.65px;top:338.27px" class="cls_017"><span class="cls_017">243</span></div>
<div style="position:absolute;left:126.00px;top:351.47px" class="cls_017"><span class="cls_017">Release the Kraken!</span></div>
<div style="position:absolute;left:485.65px;top:351.47px" class="cls_017"><span class="cls_017">243</span></div>
<div style="position:absolute;left:115.20px;top:364.67px" class="cls_016"><span class="cls_016">Looking closer - iOS</span></div>
<div style="position:absolute;left:485.65px;top:364.67px" class="cls_016"><span class="cls_016">245</span></div>
<div style="position:absolute;left:115.20px;top:377.87px" class="cls_016"><span class="cls_016">Looking closer - HTML</span></div>
<div style="position:absolute;left:485.65px;top:377.87px" class="cls_016"><span class="cls_016">246</span></div>
<div style="position:absolute;left:126.00px;top:391.07px" class="cls_017"><span class="cls_017">Getting ready to launch</span></div>
<div style="position:absolute;left:485.65px;top:391.07px" class="cls_017"><span class="cls_017">246</span></div>
<div style="position:absolute;left:115.20px;top:404.27px" class="cls_016"><span class="cls_016">Summary</span></div>
<div style="position:absolute;left:485.65px;top:404.27px" class="cls_016"><span class="cls_016">248</span></div>
<div style="position:absolute;left:108.00px;top:419.05px" class="cls_015"><span class="cls_015">Chapter 11: Third-party Services</span></div>
<div style="position:absolute;left:483.98px;top:419.05px" class="cls_015"><span class="cls_015">249</span></div>
<div style="position:absolute;left:115.20px;top:434.75px" class="cls_016"><span class="cls_016">How to use platform-dependent libraries</span></div>
<div style="position:absolute;left:485.65px;top:434.75px" class="cls_016"><span class="cls_016">249</span></div>
<div style="position:absolute;left:126.00px;top:447.95px" class="cls_017"><span class="cls_017">The nice way - via Maven</span></div>
<div style="position:absolute;left:485.65px;top:447.95px" class="cls_017"><span class="cls_017">250</span></div>
<div style="position:absolute;left:126.00px;top:461.15px" class="cls_017"><span class="cls_017">An alternative to Maven - A project/JAR file</span></div>
<div style="position:absolute;left:485.65px;top:461.15px" class="cls_017"><span class="cls_017">251</span></div>
<div style="position:absolute;left:115.20px;top:474.35px" class="cls_016"><span class="cls_016">Keeping it cross-platform friendly</span></div>
<div style="position:absolute;left:485.65px;top:474.35px" class="cls_016"><span class="cls_016">251</span></div>
<div style="position:absolute;left:126.00px;top:487.55px" class="cls_017"><span class="cls_017">FriendFace for Android</span></div>
<div style="position:absolute;left:485.65px;top:487.55px" class="cls_017"><span class="cls_017">252</span></div>
<div style="position:absolute;left:126.00px;top:500.75px" class="cls_017"><span class="cls_017">A potential trap! (Android)</span></div>
<div style="position:absolute;left:485.65px;top:500.75px" class="cls_017"><span class="cls_017">255</span></div>
<div style="position:absolute;left:115.20px;top:513.95px" class="cls_016"><span class="cls_016">Summary</span></div>
<div style="position:absolute;left:485.65px;top:513.95px" class="cls_016"><span class="cls_016">256</span></div>
<div style="position:absolute;left:108.00px;top:528.73px" class="cls_015"><span class="cls_015">Index</span></div>
<div style="position:absolute;left:483.98px;top:528.73px" class="cls_015"><span class="cls_015">257</span></div>
<div style="position:absolute;left:296.48px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> iv </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:8822px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background012.jpg" width=612 height=792></div>
<div style="position:absolute;left:400.61px;top:218.91px" class="cls_014"><span class="cls_014">Preface</span></div>
<div style="position:absolute;left:108.00px;top:272.61px" class="cls_007"><span class="cls_007">Video games have been around for over 30 years now and many of us have grown</span></div>
<div style="position:absolute;left:108.00px;top:285.21px" class="cls_007"><span class="cls_007">up with some form of experience playing video games. Most of us will want to go</span></div>
<div style="position:absolute;left:108.00px;top:297.81px" class="cls_007"><span class="cls_007">on and make our own games. It has never been easier to create your own game and</span></div>
<div style="position:absolute;left:108.00px;top:310.41px" class="cls_007"><span class="cls_007">deliver it to the world, whether you want to make a game to share with your friends</span></div>
<div style="position:absolute;left:108.00px;top:323.01px" class="cls_007"><span class="cls_007">or want to start a career in the game development industry.</span></div>
<div style="position:absolute;left:108.00px;top:344.25px" class="cls_007"><span class="cls_007">Owing to the ease of development, a whole host of different tools are available to</span></div>
<div style="position:absolute;left:108.00px;top:356.85px" class="cls_007"><span class="cls_007">help you create games. Depending on whether you want to develop for desktop,</span></div>
<div style="position:absolute;left:108.00px;top:369.45px" class="cls_007"><span class="cls_007">iOS, Android, or HTML5, there are different tools available. However, what if you</span></div>
<div style="position:absolute;left:108.00px;top:382.05px" class="cls_007"><span class="cls_007">wanted to develop for all platforms? This is where an awesome framework called</span></div>
<div style="position:absolute;left:108.00px;top:394.65px" class="cls_007"><span class="cls_007">LibGDX comes in.</span></div>
<div style="position:absolute;left:108.00px;top:415.89px" class="cls_007"><span class="cls_007">If you are reading this book, you are probably already aware of LibGDX. You may</span></div>
<div style="position:absolute;left:108.00px;top:428.49px" class="cls_007"><span class="cls_007">not be proficient in it, and you may not even have used it yet. But that's OK! That's</span></div>
<div style="position:absolute;left:108.00px;top:441.09px" class="cls_007"><span class="cls_007">why you are reading this book. We will use LibGDX to create a series of games, each</span></div>
<div style="position:absolute;left:108.00px;top:453.69px" class="cls_007"><span class="cls_007">game introducing another set of features of LibGDX. Hopefully, by the end of this</span></div>
<div style="position:absolute;left:108.00px;top:466.29px" class="cls_007"><span class="cls_007">book, you will have the foundation to go on and comfortably start making your</span></div>
<div style="position:absolute;left:108.00px;top:478.89px" class="cls_007"><span class="cls_007">own games.</span></div>
<div style="position:absolute;left:108.00px;top:511.39px" class="cls_019"><span class="cls_019">What this book covers</span></div>
<div style="position:absolute;left:108.00px;top:536.37px" class="cls_020"><span class="cls_020">Chapter 1</span><span class="cls_007">, </span><span class="cls_020">Getting to Know LibGDX</span><span class="cls_007">, introduces us to LibGDX and helps us to set up</span></div>
<div style="position:absolute;left:108.00px;top:548.97px" class="cls_007"><span class="cls_007">our development environment to get ready to create our first ever LibGDX project.</span></div>
<div style="position:absolute;left:108.00px;top:570.21px" class="cls_020"><span class="cls_020">Chapter 2</span><span class="cls_007">, </span><span class="cls_020">Let's Get These Snakes Out of This Book!</span><span class="cls_007">, covers creating our first game</span></div>
<div style="position:absolute;left:108.00px;top:582.81px" class="cls_007"><span class="cls_007">using LibGDX—Snake! This also covers the game cycle and how to handle input</span></div>
<div style="position:absolute;left:108.00px;top:595.41px" class="cls_007"><span class="cls_007">through LibGDX.</span></div>
<div style="position:absolute;left:298.21px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> v </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:9624px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background013.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Preface</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_020"><span class="cls_020">Chapter 3</span><span class="cls_007">, </span><span class="cls_020">Making That Snake Slick</span><span class="cls_007">, covers creating game states, continuing with</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">our Snake game from the previous chapter. This also covers an introduction to</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">the techniques used to help with development and talks about handling different</span></div>
<div style="position:absolute;left:108.00px;top:152.29px" class="cls_007"><span class="cls_007">screen sizes and resolutions.</span></div>
<div style="position:absolute;left:108.00px;top:173.54px" class="cls_020"><span class="cls_020">Chapter 4</span><span class="cls_007">, </span><span class="cls_020">What the Flap Is the Hype About?</span><span class="cls_007">, explains how to create our second game,</span></div>
<div style="position:absolute;left:108.00px;top:186.14px" class="cls_007"><span class="cls_007">Flappy Bee, our own interpretation of a famous mobile game. Here, we are introduced</span></div>
<div style="position:absolute;left:108.00px;top:198.74px" class="cls_007"><span class="cls_007">to handling animations and using LibGDX's Scene2D to create a GUI menu.</span></div>
<div style="position:absolute;left:108.00px;top:219.98px" class="cls_020"><span class="cls_020">Chapter 5</span><span class="cls_007">, </span><span class="cls_020">Making Your Bird More Flightworthy</span><span class="cls_007">, explores our Flappy Bee game a little</span></div>
<div style="position:absolute;left:108.00px;top:232.58px" class="cls_007"><span class="cls_007">further, where we look at handling assets in LibGDX as well as using one of the</span></div>
<div style="position:absolute;left:108.00px;top:245.18px" class="cls_007"><span class="cls_007">tools—Heiro—for converting fonts.</span></div>
<div style="position:absolute;left:108.00px;top:266.42px" class="cls_020"><span class="cls_020">Chapter 6</span><span class="cls_007">, </span><span class="cls_020">Onto the Next Platform...Game</span><span class="cls_007">, introduces you to our next game, where we</span></div>
<div style="position:absolute;left:108.00px;top:279.02px" class="cls_007"><span class="cls_007">create a simple platform game—Pete the Squirrel! Here, we cover the use of a tile</span></div>
<div style="position:absolute;left:108.00px;top:291.62px" class="cls_007"><span class="cls_007">mapping tool—Tiled—and discuss how LibGDX integrates with it.</span></div>
<div style="position:absolute;left:108.00px;top:312.86px" class="cls_020"><span class="cls_020">Chapter 7</span><span class="cls_007">, </span><span class="cls_020">Extending the Platform</span><span class="cls_007">, discusses handling the LibGDX camera to create</span></div>
<div style="position:absolute;left:108.00px;top:325.46px" class="cls_007"><span class="cls_007">scrolling levels and introduces playing sounds.</span></div>
<div style="position:absolute;left:108.00px;top:346.70px" class="cls_020"><span class="cls_020">Chapter 8</span><span class="cls_007">, </span><span class="cls_020">Why Are All the Birds Angry?</span><span class="cls_007">, covers our final game in this book. We look at</span></div>
<div style="position:absolute;left:108.00px;top:359.30px" class="cls_007"><span class="cls_007">creating our own version of Angry Birds, where we look at how LibGDX and Box2D</span></div>
<div style="position:absolute;left:108.00px;top:371.90px" class="cls_007"><span class="cls_007">work together to create an awesome game.</span></div>
<div style="position:absolute;left:108.00px;top:393.14px" class="cls_020"><span class="cls_020">Chapter 9</span><span class="cls_007">, </span><span class="cls_020">Even Angrier Birds!</span><span class="cls_007">, closes our final game by looking at object pooling</span></div>
<div style="position:absolute;left:108.00px;top:405.74px" class="cls_007"><span class="cls_007">in LibGDX and showing how it can be used to help with performance and</span></div>
<div style="position:absolute;left:108.00px;top:418.34px" class="cls_007"><span class="cls_007">memory management.</span></div>
<div style="position:absolute;left:108.00px;top:439.58px" class="cls_020"><span class="cls_020">Chapter 10</span><span class="cls_007">, </span><span class="cls_020">Exporting Our Games to the Platforms</span><span class="cls_007">, introduces you to how we can use</span></div>
<div style="position:absolute;left:108.00px;top:452.18px" class="cls_007"><span class="cls_007">LibGDX to export our awesome games to Android, iOS, and HTML5.</span></div>
<div style="position:absolute;left:108.00px;top:473.43px" class="cls_020"><span class="cls_020">Chapter 11</span><span class="cls_007">, </span><span class="cls_020">Third-party Services</span><span class="cls_007">, covers integrating a platform-specific service into a</span></div>
<div style="position:absolute;left:108.00px;top:486.03px" class="cls_007"><span class="cls_007">LibGDX game.</span></div>
<div style="position:absolute;left:108.00px;top:518.51px" class="cls_019"><span class="cls_019">What you need for this book</span></div>
<div style="position:absolute;left:108.00px;top:543.49px" class="cls_007"><span class="cls_007">It is entirely possible to enjoy and learn from this book without having to use a</span></div>
<div style="position:absolute;left:108.00px;top:556.09px" class="cls_007"><span class="cls_007">computer. However, I would recommend that you run the examples while you</span></div>
<div style="position:absolute;left:108.00px;top:568.69px" class="cls_007"><span class="cls_007">read this book.</span></div>
<div style="position:absolute;left:108.00px;top:589.94px" class="cls_007"><span class="cls_007">The first chapter covers how to get your computer set up to run these examples.</span></div>
<div style="position:absolute;left:108.00px;top:602.54px" class="cls_007"><span class="cls_007">A computer with a minimum of a dual core processor and 4GB RAM is preferable.</span></div>
<div style="position:absolute;left:296.48px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> vi </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:10426px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background014.jpg" width=612 height=792></div>
<div style="position:absolute;left:478.46px;top:94.56px" class="cls_018"><span class="cls_018">Preface</span></div>
<div style="position:absolute;left:108.00px;top:111.92px" class="cls_019"><span class="cls_019">Who this book is for</span></div>
<div style="position:absolute;left:108.00px;top:136.90px" class="cls_007"><span class="cls_007">This book is about getting started with making games using LibGDX. So, complete</span></div>
<div style="position:absolute;left:108.00px;top:149.50px" class="cls_007"><span class="cls_007">beginners are more than welcome on our journey to create games. No previous</span></div>
<div style="position:absolute;left:108.00px;top:162.10px" class="cls_007"><span class="cls_007">experience of LibGDX is necessary, however, some basic Java knowledge will help.</span></div>
<div style="position:absolute;left:108.00px;top:194.60px" class="cls_019"><span class="cls_019">Conventions</span></div>
<div style="position:absolute;left:108.00px;top:219.58px" class="cls_007"><span class="cls_007">In this book, you will find a number of text styles that distinguish between different</span></div>
<div style="position:absolute;left:108.00px;top:232.18px" class="cls_007"><span class="cls_007">kinds of information. Here are some examples of these styles and an explanation of</span></div>
<div style="position:absolute;left:108.00px;top:244.78px" class="cls_007"><span class="cls_007">their meaning.</span></div>
<div style="position:absolute;left:108.00px;top:266.02px" class="cls_007"><span class="cls_007">Code words in text, database table names, folder names, filenames, file extensions,</span></div>
<div style="position:absolute;left:108.00px;top:278.62px" class="cls_007"><span class="cls_007">pathnames, dummy URLs, user input, and Twitter handles are shown as follows: "The</span></div>
<div style="position:absolute;left:108.00px;top:291.22px" class="cls_009"><span class="cls_009">Gdx.log()</span><span class="cls_007"> methods is extremely handy when it comes to debugging our games"</span></div>
<div style="position:absolute;left:108.00px;top:312.46px" class="cls_007"><span class="cls_007">A block of code is set as follows:</span></div>
<div style="position:absolute;left:126.00px;top:333.40px" class="cls_021"><span class="cls_021">public void render(float delta) {</span></div>
<div style="position:absolute;left:136.80px;top:345.64px" class="cls_021"><span class="cls_021">batch.begin();</span></div>
<div style="position:absolute;left:136.80px;top:357.88px" class="cls_021"><span class="cls_021">sprite.draw(batch);</span></div>
<div style="position:absolute;left:136.80px;top:370.12px" class="cls_021"><span class="cls_021">batch.end();</span></div>
<div style="position:absolute;left:126.00px;top:382.36px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:402.10px" class="cls_007"><span class="cls_007">Any command-line input or output is written as follows:</span></div>
<div style="position:absolute;left:108.00px;top:423.04px" class="cls_022"><span class="cls_022">java -verlsion</span></div>
<div style="position:absolute;left:108.00px;top:442.78px" class="cls_023"><span class="cls_023">New terms</span><span class="cls_007"> and </span><span class="cls_023">important words</span><span class="cls_007"> are shown in bold. Words that you see on the</span></div>
<div style="position:absolute;left:108.00px;top:455.38px" class="cls_007"><span class="cls_007">screen, for example, in menus or dialog boxes, appear in the text like this: "Before</span></div>
<div style="position:absolute;left:108.00px;top:467.98px" class="cls_007"><span class="cls_007">we hit the </span><span class="cls_023">Generate</span><span class="cls_007"> button, let's just take a look at what we are creating."</span></div>
<div style="position:absolute;left:209.72px;top:505.93px" class="cls_024"><span class="cls_024">Warnings or important notes appear in a box like this.</span></div>
<div style="position:absolute;left:209.06px;top:559.93px" class="cls_024"><span class="cls_024">Tips and tricks appear like this.</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> vii </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:11228px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background015.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Preface</span></div>
<div style="position:absolute;left:108.00px;top:111.92px" class="cls_019"><span class="cls_019">Reader feedback</span></div>
<div style="position:absolute;left:108.00px;top:136.90px" class="cls_007"><span class="cls_007">Feedback from our readers is always welcome. Let us know what you think about</span></div>
<div style="position:absolute;left:108.00px;top:149.50px" class="cls_007"><span class="cls_007">this book—what you liked or disliked. Reader feedback is important for us as it</span></div>
<div style="position:absolute;left:108.00px;top:162.10px" class="cls_007"><span class="cls_007">helps us develop titles that you will really get the most out of.</span></div>
<div style="position:absolute;left:108.00px;top:183.34px" class="cls_007"><span class="cls_007">To send us general feedback, simply e-mail </span><span class="cls_009">feedback@packtpub.com</span><span class="cls_007">, and mention</span></div>
<div style="position:absolute;left:108.00px;top:195.94px" class="cls_007"><span class="cls_007">the book's title in the subject of your message.</span></div>
<div style="position:absolute;left:108.00px;top:217.18px" class="cls_007"><span class="cls_007">If there is a topic that you have expertise in and you are interested in either writing</span></div>
<div style="position:absolute;left:108.00px;top:229.78px" class="cls_007"><span class="cls_007">or contributing to a book, see our author guide at </span><A HREF="www.packtpub.com/authors">www.packtpub.com/authors</A> </span><span class="cls_007">.</span></div>
<div style="position:absolute;left:108.00px;top:262.28px" class="cls_019"><span class="cls_019">Customer support</span></div>
<div style="position:absolute;left:108.00px;top:287.26px" class="cls_007"><span class="cls_007">Now that you are the proud owner of a Packt book, we have a number of things to</span></div>
<div style="position:absolute;left:108.00px;top:299.86px" class="cls_007"><span class="cls_007">help you to get the most from your purchase.</span></div>
<div style="position:absolute;left:108.00px;top:329.80px" class="cls_025"><span class="cls_025">Downloading the example code</span></div>
<div style="position:absolute;left:108.00px;top:352.78px" class="cls_007"><span class="cls_007">You can download the example code files from your account at </span><A HREF="http://www.packtpub.com">http://www.</A> </span></div>
<div style="position:absolute;left:108.00px;top:365.38px" class="cls_009"><span class="cls_009"> </span><A HREF="http://www.packtpub.com">packtpub.com</A> <span class="cls_007"> for all the Packt Publishing books you have purchased. If you</span></div>
<div style="position:absolute;left:108.00px;top:377.98px" class="cls_007"><span class="cls_007">purchased this book elsewhere, you can visit </span><A HREF="http://www.packtpub.com/support">http://www.packtpub.com/support</A> </span></div>
<div style="position:absolute;left:108.00px;top:390.58px" class="cls_007"><span class="cls_007">and register to have the files e-mailed directly to you.</span></div>
<div style="position:absolute;left:108.00px;top:420.52px" class="cls_025"><span class="cls_025">Downloading the color images of this book</span></div>
<div style="position:absolute;left:108.00px;top:443.50px" class="cls_007"><span class="cls_007">We also provide you with a PDF file that has color images of the screenshots/</span></div>
<div style="position:absolute;left:108.00px;top:456.10px" class="cls_007"><span class="cls_007">diagrams used in this book. The color images will help you better understand the</span></div>
<div style="position:absolute;left:108.00px;top:468.70px" class="cls_007"><span class="cls_007">changes in the output. You can download this file from </span><A HREF="https://www.packtpub.com/sites/default/files/downloads/B04176_1440OS_ColorImages.pdf">https://www.packtpub.</A> </span></div>
<div style="position:absolute;left:108.00px;top:481.30px" class="cls_009"><span class="cls_009"> </span><A HREF="https://www.packtpub.com/sites/default/files/downloads/B04176_1440OS_ColorImages.pdf">com/sites/default/files/downloads/B04176_1440OS_ColorImages.pdf</A> <span class="cls_007">.</span></div>
<div style="position:absolute;left:108.00px;top:511.24px" class="cls_025"><span class="cls_025">Errata</span></div>
<div style="position:absolute;left:108.00px;top:534.22px" class="cls_007"><span class="cls_007">Although we have taken every care to ensure the accuracy of our content, mistakes</span></div>
<div style="position:absolute;left:108.00px;top:546.82px" class="cls_007"><span class="cls_007">do happen. If you find a mistake in one of our books—maybe a mistake in the text or</span></div>
<div style="position:absolute;left:108.00px;top:559.42px" class="cls_007"><span class="cls_007">the code—we would be grateful if you could report this to us. By doing so, you can</span></div>
<div style="position:absolute;left:108.00px;top:572.02px" class="cls_007"><span class="cls_007">save other readers from frustration and help us improve subsequent versions of this</span></div>
<div style="position:absolute;left:108.00px;top:584.62px" class="cls_007"><span class="cls_007">book. If you find any errata, please report them by visiting </span><A HREF="http://www.packtpub.com/submit-errata">http://www.packtpub.</A> </span></div>
<div style="position:absolute;left:108.00px;top:597.22px" class="cls_009"><span class="cls_009"> </span><A HREF="http://www.packtpub.com/submit-errata">com/submit-errata</A> <span class="cls_007">, selecting your book, clicking on the </span><span class="cls_023">Errata Submission Form</span></div>
<div style="position:absolute;left:108.00px;top:609.82px" class="cls_007"><span class="cls_007">link, and entering the details of your errata. Once your errata are verified, your</span></div>
<div style="position:absolute;left:108.00px;top:622.42px" class="cls_007"><span class="cls_007">submission will be accepted and the errata will be uploaded to our website or added</span></div>
<div style="position:absolute;left:108.00px;top:635.02px" class="cls_007"><span class="cls_007">to any list of existing errata under the Errata section of that title.</span></div>
<div style="position:absolute;left:294.26px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> viii </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:12030px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background016.jpg" width=612 height=792></div>
<div style="position:absolute;left:478.46px;top:94.56px" class="cls_018"><span class="cls_018">Preface</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">To view the previously submitted errata, go to </span><A HREF="https://www.packtpub.com/books/content/support">https://www.packtpub.com/books/</A> </span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_009"><span class="cls_009"> </span><A HREF="https://www.packtpub.com/books/content/support">content/support</A> <span class="cls_007"> and enter the name of the book in the search field. The required</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">information will appear under the </span><span class="cls_023">Errata</span><span class="cls_007"> section.</span></div>
<div style="position:absolute;left:108.00px;top:169.63px" class="cls_025"><span class="cls_025">Piracy</span></div>
<div style="position:absolute;left:108.00px;top:192.61px" class="cls_007"><span class="cls_007">Piracy of copyrighted material on the Internet is an ongoing problem across all</span></div>
<div style="position:absolute;left:108.00px;top:205.21px" class="cls_007"><span class="cls_007">media. At Packt, we take the protection of our copyright and licenses very seriously.</span></div>
<div style="position:absolute;left:108.00px;top:217.81px" class="cls_007"><span class="cls_007">If you come across any illegal copies of our works in any form on the Internet, please</span></div>
<div style="position:absolute;left:108.00px;top:230.41px" class="cls_007"><span class="cls_007">provide us with the location address or website name immediately so that we can</span></div>
<div style="position:absolute;left:108.00px;top:243.01px" class="cls_007"><span class="cls_007">pursue a remedy.</span></div>
<div style="position:absolute;left:108.00px;top:264.25px" class="cls_007"><span class="cls_007">Please contact us at </span><span class="cls_009">copyright@packtpub.com</span><span class="cls_007"> with a link to the suspected</span></div>
<div style="position:absolute;left:107.99px;top:276.85px" class="cls_007"><span class="cls_007">pirated material.</span></div>
<div style="position:absolute;left:107.99px;top:298.10px" class="cls_007"><span class="cls_007">We appreciate your help in protecting our authors and our ability to bring you</span></div>
<div style="position:absolute;left:107.99px;top:310.70px" class="cls_007"><span class="cls_007">valuable content.</span></div>
<div style="position:absolute;left:108.00px;top:340.63px" class="cls_025"><span class="cls_025">Questions</span></div>
<div style="position:absolute;left:108.00px;top:363.61px" class="cls_007"><span class="cls_007">If you have a problem with any aspect of this book, you can contact us at</span></div>
<div style="position:absolute;left:108.00px;top:376.21px" class="cls_009"><span class="cls_009">questions@packtpub.com</span><span class="cls_007">, and we will do our best to address the problem.</span></div>
<div style="position:absolute;left:297.10px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> ix </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:12832px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background017.jpg" width=612 height=792></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:12832px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background018.jpg" width=612 height=792></div>
<div style="position:absolute;left:177.16px;top:218.96px" class="cls_014"><span class="cls_014">Getting to Know LibGDX</span></div>
<div style="position:absolute;left:108.00px;top:272.66px" class="cls_007"><span class="cls_007">Creating games is fun, and that is why I like to do it. The process of having an idea</span></div>
<div style="position:absolute;left:108.00px;top:285.26px" class="cls_007"><span class="cls_007">for a game to actually delivering it has changed over the years. Back in the 1980s, it</span></div>
<div style="position:absolute;left:108.00px;top:297.86px" class="cls_007"><span class="cls_007">was quite common that the top games around were created by either a single person</span></div>
<div style="position:absolute;left:108.00px;top:310.46px" class="cls_007"><span class="cls_007">or a very small team. However, anyone who is lucky enough (in my opinion) to see</span></div>
<div style="position:absolute;left:108.00px;top:323.06px" class="cls_007"><span class="cls_007">games grow from being quite a simplistic affair to the complex beast that the now</span></div>
<div style="position:absolute;left:108.00px;top:335.66px" class="cls_007"><span class="cls_007">AAA titles are, must have also seen the resources needed for these grow with them.</span></div>
<div style="position:absolute;left:108.00px;top:348.26px" class="cls_007"><span class="cls_007">The advent of mobile gaming reduced the barrier for entry; once again, the smaller</span></div>
<div style="position:absolute;left:108.00px;top:360.86px" class="cls_007"><span class="cls_007">teams could produce a game that could be a worldwide hit! Now, there are games of</span></div>
<div style="position:absolute;left:108.00px;top:373.46px" class="cls_007"><span class="cls_007">all genres and complexities available across major gaming platforms.</span></div>
<div style="position:absolute;left:108.00px;top:394.70px" class="cls_007"><span class="cls_007">Due to this explosion in the number of games being made, new general-purpose</span></div>
<div style="position:absolute;left:108.00px;top:407.30px" class="cls_007"><span class="cls_007">game-making tools appeared in the community. Previously, the in-house teams built</span></div>
<div style="position:absolute;left:108.00px;top:419.90px" class="cls_007"><span class="cls_007">and maintained very specific game engines for their games; however, this would</span></div>
<div style="position:absolute;left:108.00px;top:432.50px" class="cls_007"><span class="cls_007">have led to a lot of reinventing the wheel. I hate to think how much time I would</span></div>
<div style="position:absolute;left:108.00px;top:445.10px" class="cls_007"><span class="cls_007">have lost if for each of my games, I had to start from scratch.</span></div>
<div style="position:absolute;left:108.00px;top:466.34px" class="cls_007"><span class="cls_007">Now, instead of worrying about how to display a 2D image on the screen, I can focus</span></div>
<div style="position:absolute;left:108.00px;top:478.94px" class="cls_007"><span class="cls_007">on creating that fun player experience I have in my head. My tool of choice? </span><span class="cls_023">LibGDX</span><span class="cls_007">.</span></div>
<div style="position:absolute;left:108.00px;top:511.44px" class="cls_019"><span class="cls_019">Introducing LibGDX</span></div>
<div style="position:absolute;left:108.00px;top:536.42px" class="cls_007"><span class="cls_007">Before I dive into what LibGDX is, here is how LibGDX describes itself. From the</span></div>
<div style="position:absolute;left:108.00px;top:549.02px" class="cls_007"><span class="cls_007">LibGDX wiki—</span><A HREF="https://github.com/libgdx/libgdx/wiki/Introduction">https://github.com/libgdx/libgdx/wiki/Introduction</A> </span><span class="cls_007">:</span></div>
<div style="position:absolute;left:129.60px;top:570.62px" class="cls_020"><span class="cls_020">LibGDX is a cross-platform game and visualization development framework.</span></div>
<div style="position:absolute;left:108.00px;top:592.22px" class="cls_007"><span class="cls_007">So what does that actually mean? What can LibGDX do for us game-makers that</span></div>
<div style="position:absolute;left:108.00px;top:604.82px" class="cls_007"><span class="cls_007">allows us to focus purely on the gameplay?</span></div>
<div style="position:absolute;left:108.00px;top:626.06px" class="cls_007"><span class="cls_007">To begin with, LibGDX is Java-based. This means you can reuse a lot, and I mean a</span></div>
<div style="position:absolute;left:108.00px;top:638.66px" class="cls_007"><span class="cls_007">lot, of tools that already exist in the Java world.</span></div>
<div style="position:absolute;left:298.21px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 1 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:13634px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background019.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Getting to Know LibGDX</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">I can imagine a few of you right now must be thinking, "But Java? For a game? I</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">thought Java is supposed to be slow". To a certain extent, this can be true; after all,</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">Java is still an interpreted language that runs in a virtual machine. However, to</span></div>
<div style="position:absolute;left:108.00px;top:152.29px" class="cls_007"><span class="cls_007">combat the need for the best possible performance, LibGDX takes advantage of</span></div>
<div style="position:absolute;left:108.00px;top:164.89px" class="cls_007"><span class="cls_007">the </span><span class="cls_023">Java Native Interface</span><span class="cls_007"> (</span><span class="cls_023">JNI</span><span class="cls_007">) to implement native platform code and negate the</span></div>
<div style="position:absolute;left:108.00px;top:177.49px" class="cls_007"><span class="cls_007">performance disadvantage. One of the beauties of LibGDX is that it allows you to go as</span></div>
<div style="position:absolute;left:108.00px;top:190.09px" class="cls_007"><span class="cls_007">low-level as you would like. Direct access to filesystems, input devices, audio devices,</span></div>
<div style="position:absolute;left:108.00px;top:202.69px" class="cls_007"><span class="cls_007">and OpenGL (via OpenGL ES 2.0/3.0) is provided. However, the added edge LibGDX</span></div>
<div style="position:absolute;left:108.00px;top:215.29px" class="cls_007"><span class="cls_007">gives is that with the APIs that are built on top of these low-level facilities, displaying</span></div>
<div style="position:absolute;left:108.00px;top:227.89px" class="cls_007"><span class="cls_007">an image on the screen takes now a days only a few lines of code.</span></div>
<div style="position:absolute;left:180.47px;top:260.15px" class="cls_024"><span class="cls_024">A full list of the available features for LibGDX can be found here:</span></div>
<div style="position:absolute;left:180.47px;top:271.55px" class="cls_009"><span class="cls_009"> </span><A HREF="http://libgdx.badlogicgames.com/features.html">http://libgdx.badlogicgames.com/features.html</A> </div>
<div style="position:absolute;left:108.00px;top:299.49px" class="cls_007"><span class="cls_007">I am happy to wait here while you go and check it out.</span></div>
<div style="position:absolute;left:108.00px;top:320.74px" class="cls_007"><span class="cls_007">Impressive list of features, no?</span></div>
<div style="position:absolute;left:108.00px;top:341.98px" class="cls_007"><span class="cls_007">So, how cross-platform is this gaming platform? This is probably what you are</span></div>
<div style="position:absolute;left:108.00px;top:354.58px" class="cls_007"><span class="cls_007">thinking now. Well, as mentioned before, games are being delivered on many</span></div>
<div style="position:absolute;left:108.00px;top:367.18px" class="cls_007"><span class="cls_007">different platforms, be it consoles, PCs, or mobiles.</span></div>
<div style="position:absolute;left:108.00px;top:388.42px" class="cls_007"><span class="cls_007">LibGDX currently supports the following platforms:</span></div>
<div style="position:absolute;left:126.00px;top:409.66px" class="cls_007"><span class="cls_007">•  Windows</span></div>
<div style="position:absolute;left:126.00px;top:426.58px" class="cls_007"><span class="cls_007">•  Linux</span></div>
<div style="position:absolute;left:126.00px;top:443.49px" class="cls_007"><span class="cls_007">•  Mac OS X</span></div>
<div style="position:absolute;left:126.00px;top:460.41px" class="cls_007"><span class="cls_007">•  Android</span></div>
<div style="position:absolute;left:126.00px;top:477.32px" class="cls_007"><span class="cls_007">•  BlackBerry</span></div>
<div style="position:absolute;left:126.00px;top:494.24px" class="cls_007"><span class="cls_007">•  iOS</span></div>
<div style="position:absolute;left:126.00px;top:511.15px" class="cls_007"><span class="cls_007">•  HTML/WebGL</span></div>
<div style="position:absolute;left:107.99px;top:532.39px" class="cls_007"><span class="cls_007">That is a pretty comprehensive list. Being able to write your game once and have it</span></div>
<div style="position:absolute;left:107.99px;top:544.99px" class="cls_007"><span class="cls_007">delivered to all the preceding platforms is pretty powerful.</span></div>
<div style="position:absolute;left:107.99px;top:566.24px" class="cls_007"><span class="cls_007">At this point, I would like to mention that LibGDX is completely free and open</span></div>
<div style="position:absolute;left:107.99px;top:578.84px" class="cls_007"><span class="cls_007">source. You can go to </span><A HREF="https://github.com/libGDX/libGDX">https://github.com/libGDX/libGDX</A> </span><span class="cls_007"> and check out all the</span></div>
<div style="position:absolute;left:108.00px;top:591.45px" class="cls_007"><span class="cls_007">code in all its glory. If the code does something and you would like to understand</span></div>
<div style="position:absolute;left:108.00px;top:604.05px" class="cls_007"><span class="cls_007">how, it is all possible; or, if you find a bug, you can make a fix and offer it back to</span></div>
<div style="position:absolute;left:108.00px;top:616.65px" class="cls_007"><span class="cls_007">the community.</span></div>
<div style="position:absolute;left:297.59px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 2 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:14436px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background020.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 1</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Along with the source code, there are plenty of tests and demos showcasing</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">what LibGDX can do, and more importantly, how to do it. Check out the wiki</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">for more information:</span></div>
<div style="position:absolute;left:126.00px;top:160.94px" class="cls_007"><span class="cls_007">•</span><span class="cls_009">  <A HREF="https://github.com/libgdx/libgdx/wiki/Running-Demos">https://github.com/libgdx/libgdx/wiki/Running-Demos</A> </span></div>
<div style="position:absolute;left:126.00px;top:177.85px" class="cls_007"><span class="cls_007">•</span><span class="cls_009">  <A HREF="https://github.com/libgdx/libgdx/wiki/Running-Tests">https://github.com/libgdx/libgdx/wiki/Running-Tests</A> </span></div>
<div style="position:absolute;left:108.00px;top:199.09px" class="cls_007"><span class="cls_007">"Who else uses LibGDX?" is quite a common query that comes up during a LibGDX</span></div>
<div style="position:absolute;left:108.00px;top:211.69px" class="cls_007"><span class="cls_007">discussion. Well it turns out just about everyone has used it. Google released a</span></div>
<div style="position:absolute;left:108.00px;top:224.29px" class="cls_007"><span class="cls_007">game called "</span><span class="cls_020">Ingress</span><span class="cls_007">" (</span><A HREF="https://play.google.com/store/apps/details?id=com.nianticproject.ingress&hl=en">https://play.google.com/store/apps/details?id=com.</A> </span></div>
<div style="position:absolute;left:108.00px;top:236.89px" class="cls_009"><span class="cls_009"> </span><A HREF="https://play.google.com/store/apps/details?id=com.nianticproject.ingress&hl=en">nianticproject.ingress&hl=en</A> <span class="cls_007">) on the play store in 2013, which uses LibGDX.</span></div>
<div style="position:absolute;left:108.00px;top:249.49px" class="cls_007"><span class="cls_007">Even Intel (</span><A HREF="https://software.intel.com/en-us/articles/getting-started-with-libgdx-a-cross-platform-game-development-framework">https://software.intel.com/en-us/articles/getting-started-</A> </span></div>
<div style="position:absolute;left:108.00px;top:262.09px" class="cls_009"><span class="cls_009"> </span><A HREF="https://software.intel.com/en-us/articles/getting-started-with-libgdx-a-cross-platform-game-development-framework">with-libgdx-a-cross-platform-game-development-framework</A> <span class="cls_007">) has shown an</span></div>
<div style="position:absolute;left:108.00px;top:274.69px" class="cls_007"><span class="cls_007">interest in LibGDX. Finally, I would like to end this section with another quote from</span></div>
<div style="position:absolute;left:108.00px;top:287.29px" class="cls_007"><span class="cls_007">the LibGDX website:</span></div>
<div style="position:absolute;left:129.59px;top:308.89px" class="cls_020"><span class="cls_020">LibGDX aims to be a framework rather than an engine, acknowledging that there is</span></div>
<div style="position:absolute;left:129.59px;top:321.49px" class="cls_020"><span class="cls_020">no one-size-fits-all solution. Instead we give you powerful abstractions that let you</span></div>
<div style="position:absolute;left:129.59px;top:334.09px" class="cls_020"><span class="cls_020">chose how you want to write your game or application.</span></div>
<div style="position:absolute;left:129.59px;top:355.69px" class="cls_020"><span class="cls_020">LibGDX wiki—</span><A HREF="https://github.com/libgdx/libgdx/wiki/Introduction">https://github.com/libgdx/libgdx/wiki/Introduction</A> </span></div>
<div style="position:absolute;left:108.00px;top:377.29px" class="cls_007"><span class="cls_007">This means that you can use the available tools if you want to; if not, you can dive</span></div>
<div style="position:absolute;left:108.00px;top:389.89px" class="cls_007"><span class="cls_007">deeper into the framework and create your own!</span></div>
<div style="position:absolute;left:108.00px;top:422.39px" class="cls_019"><span class="cls_019">Setting up LibGDX</span></div>
<div style="position:absolute;left:108.00px;top:447.37px" class="cls_007"><span class="cls_007">We know by now that LibGDX is this awesome tool for creating games across many</span></div>
<div style="position:absolute;left:108.00px;top:459.97px" class="cls_007"><span class="cls_007">platforms with the ability to iterate on our code at superfast speeds. But how do we</span></div>
<div style="position:absolute;left:108.00px;top:472.57px" class="cls_007"><span class="cls_007">start using it?</span></div>
<div style="position:absolute;left:108.00px;top:493.82px" class="cls_007"><span class="cls_007">Thankfully, some helpful people have made the setup process quite easy. However,</span></div>
<div style="position:absolute;left:108.00px;top:506.42px" class="cls_007"><span class="cls_007">before we get to that part, we need to ensure that we have the prerequisites installed,</span></div>
<div style="position:absolute;left:108.00px;top:519.02px" class="cls_007"><span class="cls_007">which are as follows:</span></div>
<div style="position:absolute;left:126.00px;top:540.26px" class="cls_007"><span class="cls_007">•  Java Development Kit 7+ (at the time of writing, version 8 is available)</span></div>
<div style="position:absolute;left:126.00px;top:557.17px" class="cls_007"><span class="cls_007">•  Android SDK</span></div>
<div style="position:absolute;left:107.99px;top:578.41px" class="cls_007"><span class="cls_007">Not that big a list! Follow the given steps:</span></div>
<div style="position:absolute;left:125.99px;top:599.66px" class="cls_007"><span class="cls_007">1.  First things first. Go to </span><A HREF="http://www.oracle.com/technetwork/java/javase/downloads/index.html">http://www.oracle.com/technetwork/java/</A> </span></div>
<div style="position:absolute;left:144.00px;top:612.25px" class="cls_009"><span class="cls_009"> </span><A HREF="http://www.oracle.com/technetwork/java/javase/downloads/index.html">javase/downloads/index.html</A> <span class="cls_007">.</span></div>
<div style="position:absolute;left:298.21px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 3 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:15238px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background021.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Getting to Know LibGDX</span></div>
<div style="position:absolute;left:126.00px;top:114.49px" class="cls_007"><span class="cls_007">2.  Download and install the latest JDK if you haven't already done so. Oracle</span></div>
<div style="position:absolute;left:144.00px;top:127.09px" class="cls_007"><span class="cls_007">developers are wonderful people and have provided a useful installation</span></div>
<div style="position:absolute;left:144.00px;top:139.69px" class="cls_007"><span class="cls_007">guide, which you can refer to if you are unsure on how to install the JDK, at</span></div>
<div style="position:absolute;left:144.00px;top:156.41px" class="cls_009"><span class="cls_009"> </span><A HREF="http://docs.oracle.com/javase/8/docs/technotes/guides/install/install_overview.html">http://docs.oracle.com/javase/8/docs/technotes/guides/install/</A> </div>
<div style="position:absolute;left:144.00px;top:168.01px" class="cls_009"><span class="cls_009"> </span><A HREF="http://docs.oracle.com/javase/8/docs/technotes/guides/install/install_overview.html">install_overview.html</A> <span class="cls_007">.</span></div>
<div style="position:absolute;left:126.00px;top:189.26px" class="cls_007"><span class="cls_007">3.  Once you have installed the JDK, open up the command line and run the</span></div>
<div style="position:absolute;left:144.00px;top:201.86px" class="cls_007"><span class="cls_007">following command:</span></div>
<div style="position:absolute;left:144.00px;top:218.47px" class="cls_022"><span class="cls_022">java -version</span></div>
<div style="position:absolute;left:144.00px;top:238.21px" class="cls_007"><span class="cls_007">If it is installed correctly, you should get an output similar to this:</span></div>
<div style="position:absolute;left:126.00px;top:362.67px" class="cls_007"><span class="cls_007">4.  If you generate an error while doing this, consult the Oracle installation</span></div>
<div style="position:absolute;left:144.00px;top:375.27px" class="cls_007"><span class="cls_007">documentation and try again.</span></div>
<div style="position:absolute;left:126.00px;top:392.19px" class="cls_007"><span class="cls_007">5.  One final touch would be to ensure that we have JAVA_HOME configured.</span></div>
<div style="position:absolute;left:144.00px;top:404.79px" class="cls_007"><span class="cls_007">On the command line, perform the following:</span></div>
<div style="position:absolute;left:161.99px;top:421.70px" class="cls_026"><span class="cls_026">°</span><span class="cls_007">°</span></div>
<div style="position:absolute;left:179.99px;top:421.70px" class="cls_007"><span class="cls_007">For Windows, set JAVA_HOME = </span><span class="cls_009">C:\Path\ToJDK\</span></div>
<div style="position:absolute;left:162.00px;top:438.63px" class="cls_026"><span class="cls_026">°</span><span class="cls_007">°</span></div>
<div style="position:absolute;left:180.00px;top:438.63px" class="cls_007"><span class="cls_007">For Linux and Mac OSX, export JAVA_HOME = </span><span class="cls_009">/Path/ToJDK/</span></div>
<div style="position:absolute;left:126.00px;top:459.87px" class="cls_007"><span class="cls_007">6.  Next, on to the Android SDK.</span></div>
<div style="position:absolute;left:107.99px;top:481.11px" class="cls_007"><span class="cls_007">At the time of writing, </span><span class="cls_023">Android Studio</span><span class="cls_007"> has just been released. Android Studio is an</span></div>
<div style="position:absolute;left:107.99px;top:493.71px" class="cls_007"><span class="cls_007">IDE offered by Google that is built upon </span><span class="cls_023">JetBrains IntelliJ IDEA Java IDE</span><span class="cls_007">. If you</span></div>
<div style="position:absolute;left:107.99px;top:506.31px" class="cls_007"><span class="cls_007">feel comfortable using Android Studio as your IDE, and as a developer who has used</span></div>
<div style="position:absolute;left:107.99px;top:518.91px" class="cls_007"><span class="cls_007">IntelliJ for the last 5 years, I suggest that you at least give it a go. You can download</span></div>
<div style="position:absolute;left:107.99px;top:531.51px" class="cls_007"><span class="cls_007">Android Studio + Android SDK in a bundle from here:</span></div>
<div style="position:absolute;left:108.00px;top:553.75px" class="cls_009"><span class="cls_009"> </span><A HREF="http://developer.android.com/sdk/index.html">http://developer.android.com/sdk/index.html</A> </div>
<div style="position:absolute;left:108.00px;top:573.99px" class="cls_007"><span class="cls_007">Alternatively, if you plan to use a different IDE (</span><span class="cls_023">Eclipse</span><span class="cls_007"> or </span><span class="cls_023">NetBeans</span><span class="cls_007">, for example)</span></div>
<div style="position:absolute;left:108.00px;top:586.59px" class="cls_007"><span class="cls_007">you can just install the tools from the following URL:</span></div>
<div style="position:absolute;left:108.00px;top:607.63px" class="cls_009"><span class="cls_009"> </span><A HREF="http://developer.android.com/sdk/index.html#Other ">http://developer.android.com/sdk/index.html#Other</A> </div>
<div style="position:absolute;left:297.59px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 4 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:16040px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background022.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 1</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">You can find the installation instructions here:</span></div>
<div style="position:absolute;left:108.00px;top:136.73px" class="cls_009"><span class="cls_009"> </span><A HREF="https://developer.android.com/sdk/installing/index.html?pkg=tools">https://developer.android.com/sdk/installing/index.html?pkg=tools</A> </div>
<div style="position:absolute;left:108.00px;top:156.97px" class="cls_007"><span class="cls_007">However, I would like to point out that the official IDE for Android is now Android</span></div>
<div style="position:absolute;left:108.00px;top:169.57px" class="cls_007"><span class="cls_007">Studio and no longer Eclipse with ADT.</span></div>
<div style="position:absolute;left:108.00px;top:190.82px" class="cls_007"><span class="cls_007">For the sake of simplicity, we will only focus on making games for desktops for the</span></div>
<div style="position:absolute;left:108.00px;top:203.42px" class="cls_007"><span class="cls_007">greater part of this book. We will look at exporting to Android and iOS later on.</span></div>
<div style="position:absolute;left:108.00px;top:224.66px" class="cls_007"><span class="cls_007">Once the Android SDK is installed, it would be well worth running the SDK</span></div>
<div style="position:absolute;left:108.00px;top:237.26px" class="cls_007"><span class="cls_007">manager application; so, finalize the set up.</span></div>
<div style="position:absolute;left:108.00px;top:258.50px" class="cls_007"><span class="cls_007">If you opt to use Android Studio, you can access this from the SDK Manager icon in</span></div>
<div style="position:absolute;left:108.00px;top:271.10px" class="cls_007"><span class="cls_007">the toolbar. Alternatively, you can also access it as follows:</span></div>
<div style="position:absolute;left:126.00px;top:292.33px" class="cls_007"><span class="cls_007">•</span><span class="cls_023">  On Windows</span><span class="cls_007">: Double-click on the SDK's </span><span class="cls_009">Manager.exe</span><span class="cls_007"> file at the root of the</span></div>
<div style="position:absolute;left:144.00px;top:304.93px" class="cls_007"><span class="cls_007">Android SDK directory</span></div>
<div style="position:absolute;left:126.00px;top:321.85px" class="cls_007"><span class="cls_007">•</span><span class="cls_023">  On Mac/Linux</span><span class="cls_007">: Open a terminal and navigate to the </span><span class="cls_009">tools/</span><span class="cls_007"> directory in the</span></div>
<div style="position:absolute;left:144.00px;top:334.45px" class="cls_007"><span class="cls_007">location where the Android SDK is installed, then execute Android SDK.</span></div>
<div style="position:absolute;left:108.00px;top:355.70px" class="cls_007"><span class="cls_007">The following screen might appear:</span></div>
<div style="position:absolute;left:298.21px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 5 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:16842px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background023.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Getting to Know LibGDX</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">As a minimum configuration, select:</span></div>
<div style="position:absolute;left:126.00px;top:135.74px" class="cls_007"><span class="cls_007">•</span><span class="cls_023">  Android SDK Tools</span></div>
<div style="position:absolute;left:126.00px;top:152.65px" class="cls_007"><span class="cls_007">•</span><span class="cls_023">  Android SDK Platform-tools</span></div>
<div style="position:absolute;left:126.00px;top:169.57px" class="cls_007"><span class="cls_007">•</span><span class="cls_023">  Android SDK Build-tools</span><span class="cls_007"> (latest available version)</span></div>
<div style="position:absolute;left:125.99px;top:186.48px" class="cls_007"><span class="cls_007">•  Latest version of </span><span class="cls_023">SDK Platform</span></div>
<div style="position:absolute;left:107.98px;top:207.72px" class="cls_007"><span class="cls_007">Let them download and install the selected configuration. Then that's it!</span></div>
<div style="position:absolute;left:107.98px;top:228.96px" class="cls_007"><span class="cls_007">Well, not really. We just need to set the </span><span class="cls_009">ANDROID_HOME</span><span class="cls_007"> environment variable. To do</span></div>
<div style="position:absolute;left:108.00px;top:241.57px" class="cls_007"><span class="cls_007">this, we can open up a command line and run the following command:</span></div>
<div style="position:absolute;left:125.99px;top:262.82px" class="cls_007"><span class="cls_007">•</span><span class="cls_023">  On Windows</span><span class="cls_007">: Set </span><span class="cls_009">ANDROID_HOME=C:/Path/To/Your/Android/Sdk</span></div>
<div style="position:absolute;left:126.00px;top:279.73px" class="cls_007"><span class="cls_007">•</span><span class="cls_023">  On Linux</span><span class="cls_007"> and </span><span class="cls_023">Mac OS X</span><span class="cls_007">: Export </span><span class="cls_009">ANDROID_HOME=/Path/To/Your/Android/</span></div>
<div style="position:absolute;left:144.00px;top:293.33px" class="cls_009"><span class="cls_009">Sdk</span></div>
<div style="position:absolute;left:108.00px;top:313.57px" class="cls_007"><span class="cls_007">Phew! With that done, we can now move on to the best part—creating our first ever</span></div>
<div style="position:absolute;left:108.00px;top:326.17px" class="cls_007"><span class="cls_007">LibGDX game!</span></div>
<div style="position:absolute;left:108.00px;top:358.67px" class="cls_019"><span class="cls_019">Creating a project</span></div>
<div style="position:absolute;left:108.00px;top:383.65px" class="cls_007"><span class="cls_007">Follow the given steps to create your own project:</span></div>
<div style="position:absolute;left:126.00px;top:404.90px" class="cls_007"><span class="cls_007">1.  As mentioned earlier, LibGDX comes with a really useful project setup tool.</span></div>
<div style="position:absolute;left:143.99px;top:417.50px" class="cls_007"><span class="cls_007">Download the application from here:</span></div>
<div style="position:absolute;left:144.00px;top:435.41px" class="cls_009"><span class="cls_009"> </span><A HREF="http://libgdx.badlogicgames.com/download.html">http://libgdx.badlogicgames.com/download.html</A> </div>
<div style="position:absolute;left:144.00px;top:451.33px" class="cls_007"><span class="cls_007">At the time of writing, it is the big red "</span><span class="cls_023">Download Setup App</span><span class="cls_007">" button in the</span></div>
<div style="position:absolute;left:144.00px;top:463.93px" class="cls_007"><span class="cls_007">middle of your screen.</span></div>
<div style="position:absolute;left:126.00px;top:485.18px" class="cls_007"><span class="cls_007">2.  Once downloaded, open the command line and navigate to the location of</span></div>
<div style="position:absolute;left:144.00px;top:497.78px" class="cls_007"><span class="cls_007">the application. You will notice that it is a JAR file type. This means we need</span></div>
<div style="position:absolute;left:144.00px;top:510.38px" class="cls_007"><span class="cls_007">to use Java to run it.</span></div>
<div style="position:absolute;left:297.59px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 6 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:17644px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background024.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 1</span></div>
<div style="position:absolute;left:126.00px;top:114.49px" class="cls_007"><span class="cls_007">3.  Running this will open the setup UI:</span></div>
<div style="position:absolute;left:298.21px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 7 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:18446px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background025.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Getting to Know LibGDX</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Before we hit the </span><span class="cls_023">Generate</span><span class="cls_007"> button, let's just take a look at what we are creating here:</span></div>
<div style="position:absolute;left:126.00px;top:135.74px" class="cls_007"><span class="cls_007">•</span><span class="cls_023">  Name</span><span class="cls_007">: This is the name of our game.</span></div>
<div style="position:absolute;left:126.00px;top:152.65px" class="cls_007"><span class="cls_007">•</span><span class="cls_023">  Package</span><span class="cls_007">: This is the Java package our game code will be developed in.</span></div>
<div style="position:absolute;left:126.00px;top:169.57px" class="cls_007"><span class="cls_007">•</span><span class="cls_023">  Game class</span><span class="cls_007">: This parameter sets the name of our game class, where the</span></div>
<div style="position:absolute;left:143.99px;top:182.17px" class="cls_007"><span class="cls_007">magic happens!</span></div>
<div style="position:absolute;left:126.00px;top:199.08px" class="cls_007"><span class="cls_007">•</span><span class="cls_023">  Destination</span><span class="cls_007">: This is the project's directory. You can change this to any</span></div>
<div style="position:absolute;left:143.99px;top:211.68px" class="cls_007"><span class="cls_007">location of your choice.</span></div>
<div style="position:absolute;left:126.00px;top:228.60px" class="cls_007"><span class="cls_007">•</span><span class="cls_023">  Android SDK</span><span class="cls_007">: This is the location of the SDK. If this isn't set correctly, we</span></div>
<div style="position:absolute;left:143.99px;top:241.20px" class="cls_007"><span class="cls_007">can change it here. Going forward, it might be worth setting the </span><span class="cls_009">ANDROID_</span></div>
<div style="position:absolute;left:144.00px;top:253.81px" class="cls_009"><span class="cls_009">HOME</span><span class="cls_007"> environment variable.</span></div>
<div style="position:absolute;left:108.00px;top:275.06px" class="cls_007"><span class="cls_007">Next is the version of LibGDX we want to use. At time of writing, the version is 1.5.4.</span></div>
<div style="position:absolute;left:108.00px;top:296.30px" class="cls_007"><span class="cls_007">Now, let's move on to the subprojects. As we are only interested in desktops at the</span></div>
<div style="position:absolute;left:108.00px;top:308.90px" class="cls_007"><span class="cls_007">moment, let's deselect the others.</span></div>
<div style="position:absolute;left:108.00px;top:330.14px" class="cls_007"><span class="cls_007">Finally, we come to extensions. Feel free to uncheck any that are checked. We won't</span></div>
<div style="position:absolute;left:108.00px;top:342.74px" class="cls_007"><span class="cls_007">be needing any of them at this point in time. For more information on available</span></div>
<div style="position:absolute;left:108.00px;top:355.33px" class="cls_007"><span class="cls_007">extensions, check out the LibGDX wiki (</span><A HREF="https://github.com/libgdx/libgdx/wiki">https://github.com/libgdx/libgdx/wiki</A> </span><span class="cls_007">).</span></div>
<div style="position:absolute;left:108.00px;top:376.58px" class="cls_007"><span class="cls_007">Once all is set, let's hit the </span><span class="cls_023">Generate</span><span class="cls_007"> button!</span></div>
<div style="position:absolute;left:108.00px;top:397.82px" class="cls_007"><span class="cls_007">There is a little window at the bottom of the UI that will now spring to life. Here, it</span></div>
<div style="position:absolute;left:108.00px;top:410.42px" class="cls_007"><span class="cls_007">will show you the setup progress as it downloads the necessary setup files.</span></div>
<div style="position:absolute;left:108.00px;top:431.66px" class="cls_007"><span class="cls_007">Once complete, open that command line, navigate to the directory, and run your</span></div>
<div style="position:absolute;left:108.00px;top:444.25px" class="cls_007"><span class="cls_007">preferred tree command (in Windows, it is just "</span><span class="cls_009">tree</span><span class="cls_007">").</span></div>
<div style="position:absolute;left:297.59px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 8 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:19248px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background026.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 1</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Hopefully, you will have the same directory layout as the previous image shows.</span></div>
<div style="position:absolute;left:108.00px;top:135.74px" class="cls_007"><span class="cls_007">The astute among you will now ask, "What is this Gradle?" and quite rightly so.</span></div>
<div style="position:absolute;left:108.00px;top:148.34px" class="cls_007"><span class="cls_007">I haven't mentioned it yet, although it appears twice in our projects directory.</span></div>
<div style="position:absolute;left:108.00px;top:178.27px" class="cls_025"><span class="cls_025">What is Gradle?</span></div>
<div style="position:absolute;left:108.00px;top:201.25px" class="cls_007"><span class="cls_007">Well, </span><span class="cls_023">Gradle</span><span class="cls_007"> is a very excellent build tool and LibGDX leverages its abilities to look</span></div>
<div style="position:absolute;left:108.00px;top:213.85px" class="cls_007"><span class="cls_007">after the dependencies, build process, and IDE integration. This is especially useful if</span></div>
<div style="position:absolute;left:108.00px;top:226.45px" class="cls_007"><span class="cls_007">you are going to be working in a team with a shared code base. Even if you are not,</span></div>
<div style="position:absolute;left:108.00px;top:239.05px" class="cls_007"><span class="cls_007">the dependency management aspect is worth it alone.</span></div>
<div style="position:absolute;left:108.00px;top:260.30px" class="cls_007"><span class="cls_007">Anyone who isn't familiar with dependency management may well be used to</span></div>
<div style="position:absolute;left:108.00px;top:272.89px" class="cls_007"><span class="cls_007">downloading Java JARs manually and placing them in a </span><span class="cls_009">libs</span><span class="cls_007"> folder, but they might</span></div>
<div style="position:absolute;left:108.00px;top:285.49px" class="cls_007"><span class="cls_007">run into problems later when the JAR they just downloaded needs another JAR, and</span></div>
<div style="position:absolute;left:108.00px;top:298.09px" class="cls_007"><span class="cls_007">so on. The dependency management will take care of this for you and even better is</span></div>
<div style="position:absolute;left:108.00px;top:310.69px" class="cls_007"><span class="cls_007">that the LibGDX setup application takes care of this for you by already describing the</span></div>
<div style="position:absolute;left:108.00px;top:323.29px" class="cls_007"><span class="cls_007">dependencies that you need to run!</span></div>
<div style="position:absolute;left:108.00px;top:344.54px" class="cls_007"><span class="cls_007">Within LibGDX, there is something called the </span><span class="cls_023">Gradle Wrapper</span><span class="cls_007">. This is essentially the</span></div>
<div style="position:absolute;left:108.00px;top:357.14px" class="cls_007"><span class="cls_007">Gradle application embedded into the project. This allows portability of our project,</span></div>
<div style="position:absolute;left:108.00px;top:369.74px" class="cls_007"><span class="cls_007">as now if we want someone else to run it, they can.</span></div>
<div style="position:absolute;left:108.00px;top:390.98px" class="cls_007"><span class="cls_007">I guess this leads us to the question, how do we use Gradle to run our project? In</span></div>
<div style="position:absolute;left:108.00px;top:403.58px" class="cls_007"><span class="cls_007">the LibGDX wiki (</span><A HREF="https://github.com/libgdx/libgdx/wiki/Gradle-on-the-Commandline">https://github.com/libgdx/libgdx/wiki/Gradle-on-the-</A> </span></div>
<div style="position:absolute;left:108.00px;top:416.17px" class="cls_009"><span class="cls_009"> </span><A HREF="https://github.com/libgdx/libgdx/wiki/Gradle-on-the-Commandline">Commandline</A> <span class="cls_007">), you will find a comprehensive list of commands that can be used</span></div>
<div style="position:absolute;left:108.00px;top:428.77px" class="cls_007"><span class="cls_007">while developing your game.</span></div>
<div style="position:absolute;left:108.00px;top:450.02px" class="cls_007"><span class="cls_007">However, for now, we will only cover the desktop project.</span></div>
<div style="position:absolute;left:108.00px;top:471.26px" class="cls_007"><span class="cls_007">What you may not have noticed is that the setup application actually generates a</span></div>
<div style="position:absolute;left:108.00px;top:483.86px" class="cls_007"><span class="cls_007">very simple "Hello World" game for us. So, we have something we can run from</span></div>
<div style="position:absolute;left:108.00px;top:496.46px" class="cls_007"><span class="cls_007">the command line right away!</span></div>
<div style="position:absolute;left:108.00px;top:517.70px" class="cls_007"><span class="cls_007">Let's go for it!</span></div>
<div style="position:absolute;left:298.21px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 9 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:20050px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background027.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Getting to Know LibGDX</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">On our command line, let's run the following:</span></div>
<div style="position:absolute;left:126.00px;top:135.74px" class="cls_007"><span class="cls_007">•  On Windows: </span><span class="cls_009">gradlew desktop:run</span></div>
<div style="position:absolute;left:126.00px;top:152.65px" class="cls_007"><span class="cls_007">•  On Linux and Mac OS X: </span><span class="cls_009">./gradlew desktop:run</span></div>
<div style="position:absolute;left:144.00px;top:169.57px" class="cls_007"><span class="cls_007">The following screen will appear once you execute the preceding command:</span></div>
<div style="position:absolute;left:108.00px;top:354.80px" class="cls_007"><span class="cls_007">You will get an output similar to the preceding screenshot. Don't worry if it suddenly</span></div>
<div style="position:absolute;left:108.00px;top:367.40px" class="cls_007"><span class="cls_007">wants to start downloading the dependencies. This is our dependency management</span></div>
<div style="position:absolute;left:108.00px;top:380.00px" class="cls_007"><span class="cls_007">in action! All those JARs and native binaries are being downloaded and put on to</span></div>
<div style="position:absolute;left:108.00px;top:392.60px" class="cls_007"><span class="cls_007">classpaths. But, we don't care. We are here to create games!</span></div>
<div style="position:absolute;left:108.00px;top:413.85px" class="cls_007"><span class="cls_007">So, after the command prompt has finished downloading the files, it should then</span></div>
<div style="position:absolute;left:108.00px;top:426.45px" class="cls_007"><span class="cls_007">launch the "Hello World" game.</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 10 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:20852px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background028.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 1</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Awesome! You have just launched your very first LibGDX game!</span></div>
<div style="position:absolute;left:108.00px;top:135.74px" class="cls_007"><span class="cls_007">Although, before we get too excited, you will notice that not much actually happens</span></div>
<div style="position:absolute;left:108.00px;top:148.34px" class="cls_007"><span class="cls_007">here. It is just a red screen with the </span><span class="cls_023">Bad Logic Games</span><span class="cls_007"> logo.</span></div>
<div style="position:absolute;left:108.00px;top:169.58px" class="cls_007"><span class="cls_007">I think now is the time to look at the code!</span></div>
<div style="position:absolute;left:108.00px;top:202.07px" class="cls_019"><span class="cls_019">Importing a project</span></div>
<div style="position:absolute;left:108.00px;top:227.05px" class="cls_007"><span class="cls_007">So far, we have launched the "Hello World" game via the command line, and haven't</span></div>
<div style="position:absolute;left:108.00px;top:239.65px" class="cls_007"><span class="cls_007">seen a single line of code so far. Let's change that.</span></div>
<div style="position:absolute;left:108.00px;top:260.90px" class="cls_007"><span class="cls_007">To do this, I will use IntelliJ IDEA. If you are using Android Studio, the screenshots</span></div>
<div style="position:absolute;left:108.00px;top:273.50px" class="cls_007"><span class="cls_007">will look familiar. If you are using Eclipse, I am sure you will be able to see the</span></div>
<div style="position:absolute;left:108.00px;top:286.10px" class="cls_007"><span class="cls_007">common concepts.</span></div>
<div style="position:absolute;left:108.00px;top:307.34px" class="cls_007"><span class="cls_007">To begin with, we need to generate the appropriate IDE project files. Again, this is</span></div>
<div style="position:absolute;left:108.00px;top:319.94px" class="cls_007"><span class="cls_007">using Gradle to do the heavy lifting for us.</span></div>
<div style="position:absolute;left:108.00px;top:341.18px" class="cls_007"><span class="cls_007">Once again, on the command line, run the following (pick the one that applies):</span></div>
<div style="position:absolute;left:126.00px;top:362.41px" class="cls_007"><span class="cls_007">•</span><span class="cls_023">  On Windows</span><span class="cls_007">: </span><span class="cls_009">gradlew idea</span><span class="cls_007"> or </span><span class="cls_009">gradlew eclipse</span></div>
<div style="position:absolute;left:126.00px;top:379.33px" class="cls_007"><span class="cls_007">•</span><span class="cls_023">  On Linux and Mac OS X</span><span class="cls_007">: </span><span class="cls_009">./gradlew idea</span><span class="cls_007"> or </span><span class="cls_009">./gradlew eclipse</span></div>
<div style="position:absolute;left:108.00px;top:400.57px" class="cls_007"><span class="cls_007">Now, Gradle will have generated some project files. Open your IDE of choice and</span></div>
<div style="position:absolute;left:108.00px;top:413.17px" class="cls_007"><span class="cls_007">open the project.</span></div>
<div style="position:absolute;left:193.32px;top:446.05px" class="cls_024"><span class="cls_024">If you require more help, check out the following wiki pages:</span></div>
<div style="position:absolute;left:207.72px;top:460.33px" class="cls_024"><span class="cls_024">•</span><span class="cls_009">  <A HREF="https://github.com/libgdx/libgdx/wiki/Gradle-and-Eclipse">https://github.com/libgdx/libgdx/wiki/</A> </span></div>
<div style="position:absolute;left:225.72px;top:471.73px" class="cls_009"><span class="cls_009"> </span><A HREF="https://github.com/libgdx/libgdx/wiki/Gradle-and-Eclipse">Gradle-and-Eclipse</A> </div>
<div style="position:absolute;left:207.72px;top:484.57px" class="cls_024"><span class="cls_024">•</span><span class="cls_009">  <A HREF="https://github.com/libgdx/libgdx/wiki/Gradle-and-Intellij-IDEA">https://github.com/libgdx/libgdx/wiki/</A> </span></div>
<div style="position:absolute;left:225.72px;top:495.97px" class="cls_009"><span class="cls_009"> </span><A HREF="https://github.com/libgdx/libgdx/wiki/Gradle-and-Intellij-IDEA">Gradle-and-Intellij-IDEA</A> </div>
<div style="position:absolute;left:207.72px;top:508.81px" class="cls_024"><span class="cls_024">•</span><span class="cls_009">  <A HREF="https://github.com/libgdx/libgdx/wiki/Gradle-and-NetBeans">https://github.com/libgdx/libgdx/wiki/</A> </span></div>
<div style="position:absolute;left:225.72px;top:520.21px" class="cls_009"><span class="cls_009"> </span><A HREF="https://github.com/libgdx/libgdx/wiki/Gradle-and-NetBeans">Gradle-and-NetBeans</A> </div>
<div style="position:absolute;left:108.00px;top:548.77px" class="cls_007"><span class="cls_007">Once the project is open, have a poke around and look at some of the files. I think</span></div>
<div style="position:absolute;left:108.00px;top:561.37px" class="cls_007"><span class="cls_007">our first port of call should be the </span><span class="cls_009">build.gradle</span><span class="cls_007"> file in the root of the project. Here,</span></div>
<div style="position:absolute;left:108.00px;top:573.97px" class="cls_007"><span class="cls_007">you will see that the layout of our project is defined and the dependencies we require</span></div>
<div style="position:absolute;left:108.00px;top:586.57px" class="cls_007"><span class="cls_007">are on display.</span></div>
<div style="position:absolute;left:296.21px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 11 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:21654px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background029.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Getting to Know LibGDX</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">It is a good time to mention that going forward, there will be new releases of</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">LibGDX, and to update our project to the latest version, all we need to do is</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">update the following property:</span></div>
<div style="position:absolute;left:126.00px;top:160.63px" class="cls_021"><span class="cls_021">gdxVersion = '1.6.4'</span></div>
<div style="position:absolute;left:108.00px;top:180.37px" class="cls_007"><span class="cls_007">Now, run your game and Gradle will kick in and download everything for you!</span></div>
<div style="position:absolute;left:108.00px;top:201.62px" class="cls_007"><span class="cls_007">Next, we should look for our game class, remember the one we specified in the setup</span></div>
<div style="position:absolute;left:108.00px;top:214.21px" class="cls_007"><span class="cls_007">application—</span><span class="cls_009">MyGdxGame.java</span><span class="cls_007">? Find it, open it, and be in awe of how simple it is to</span></div>
<div style="position:absolute;left:108.00px;top:226.81px" class="cls_007"><span class="cls_007">display that red screen and Bad Logic Games logo. In fact, I am going to paste the</span></div>
<div style="position:absolute;left:108.00px;top:239.41px" class="cls_007"><span class="cls_007">code here for you to see how simple it is:</span></div>
<div style="position:absolute;left:126.00px;top:260.35px" class="cls_021"><span class="cls_021">public class MyGdxGame extends ApplicationAdapter {</span></div>
<div style="position:absolute;left:136.80px;top:272.59px" class="cls_021"><span class="cls_021">SpriteBatch batch;</span></div>
<div style="position:absolute;left:136.80px;top:284.83px" class="cls_021"><span class="cls_021">Texture img;</span></div>
<div style="position:absolute;left:136.80px;top:297.07px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:136.80px;top:309.31px" class="cls_021"><span class="cls_021">public void create () {</span></div>
<div style="position:absolute;left:147.60px;top:321.55px" class="cls_021"><span class="cls_021">batch = new SpriteBatch();</span></div>
<div style="position:absolute;left:147.60px;top:333.79px" class="cls_021"><span class="cls_021">img = new Texture("badlogic.jpg");</span></div>
<div style="position:absolute;left:136.80px;top:346.03px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:370.51px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:136.80px;top:382.75px" class="cls_021"><span class="cls_021">public void render () {</span></div>
<div style="position:absolute;left:147.60px;top:394.99px" class="cls_021"><span class="cls_021">Gdx.gl.glClearColor(1, 0, 0, 1);</span></div>
<div style="position:absolute;left:147.60px;top:407.23px" class="cls_021"><span class="cls_021">Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);</span></div>
<div style="position:absolute;left:147.60px;top:419.47px" class="cls_021"><span class="cls_021">batch.begin();</span></div>
<div style="position:absolute;left:147.60px;top:431.71px" class="cls_021"><span class="cls_021">batch.draw(img, 0, 0);</span></div>
<div style="position:absolute;left:147.60px;top:443.95px" class="cls_021"><span class="cls_021">batch.end();</span></div>
<div style="position:absolute;left:136.80px;top:456.19px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:468.43px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:488.17px" class="cls_007"><span class="cls_007">We will cover what all this means in the next chapter, but, essentially, we can see</span></div>
<div style="position:absolute;left:108.00px;top:500.77px" class="cls_007"><span class="cls_007">that when the </span><span class="cls_009">create()</span><span class="cls_007"> method is called, it sets up a </span><span class="cls_009">SpriteBatch</span><span class="cls_007"> batch and creates</span></div>
<div style="position:absolute;left:108.00px;top:513.37px" class="cls_007"><span class="cls_007">a texture from a given JPEG file. Then, on the </span><span class="cls_009">render()</span><span class="cls_007"> method, this is called on</span></div>
<div style="position:absolute;left:108.00px;top:525.97px" class="cls_007"><span class="cls_007">every iteration of the game loop; it covers the screen with the color red, then it draws</span></div>
<div style="position:absolute;left:108.00px;top:538.57px" class="cls_007"><span class="cls_007">the texture at the (0, 0) coordinate location.</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 12 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:22456px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background030.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 1</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Finally, we will look at the </span><span class="cls_009">DesktopLauncher</span><span class="cls_007"> class, which is responsible for running</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">the game in the desktop environment. Let's take a look at the following code snippet:</span></div>
<div style="position:absolute;left:126.00px;top:148.03px" class="cls_021"><span class="cls_021">public class DesktopLauncher {</span></div>
<div style="position:absolute;left:136.80px;top:160.27px" class="cls_021"><span class="cls_021">public static void main (String[] arg) {</span></div>
<div style="position:absolute;left:147.60px;top:172.51px" class="cls_021"><span class="cls_021">LwjglApplicationConfiguration config = new</span></div>
<div style="position:absolute;left:147.60px;top:183.31px" class="cls_021"><span class="cls_021">LwjglApplicationConfiguration();</span></div>
<div style="position:absolute;left:147.60px;top:195.55px" class="cls_021"><span class="cls_021">new LwjglApplication(new MyGdxGame(), config);</span></div>
<div style="position:absolute;left:136.80px;top:207.79px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:220.03px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:239.77px" class="cls_007"><span class="cls_007">The preceding code shows how simple it is. We have a configuration object</span></div>
<div style="position:absolute;left:108.00px;top:252.37px" class="cls_007"><span class="cls_007">that will define how our desktop application runs, setting things like screen</span></div>
<div style="position:absolute;left:108.00px;top:264.97px" class="cls_007"><span class="cls_007">resolution and framerate, amongst others. In fact, this is an excellent time to</span></div>
<div style="position:absolute;left:108.00px;top:277.57px" class="cls_007"><span class="cls_007">utilize the open source aspect of LibGDX. In your IDE, click through to the</span></div>
<div style="position:absolute;left:108.00px;top:290.17px" class="cls_009"><span class="cls_009">LwjglApplicationConfiguration</span><span class="cls_007"> class. You will see all the properties that</span></div>
<div style="position:absolute;left:108.00px;top:302.77px" class="cls_007"><span class="cls_007">can be tweaked and notes on what they mean.</span></div>
<div style="position:absolute;left:108.00px;top:324.01px" class="cls_007"><span class="cls_007">The instance of the </span><span class="cls_009">LwjglApplicationConfiguration</span><span class="cls_007"> class is then passed to</span></div>
<div style="position:absolute;left:107.99px;top:336.61px" class="cls_007"><span class="cls_007">the constructor of another class </span><span class="cls_009">LwjglApplication</span><span class="cls_007">, along with an instance of</span></div>
<div style="position:absolute;left:108.00px;top:349.21px" class="cls_007"><span class="cls_007">our </span><span class="cls_009">MyGdxGame</span><span class="cls_007"> class.</span></div>
<div style="position:absolute;left:108.00px;top:370.46px" class="cls_007"><span class="cls_007">Finally, those who have worked with Java a lot in the past will recognize that it is</span></div>
<div style="position:absolute;left:108.00px;top:383.06px" class="cls_007"><span class="cls_007">wrapped in a main method—a traditional entry point for a Java application.</span></div>
<div style="position:absolute;left:108.00px;top:404.30px" class="cls_007"><span class="cls_007">That is all that is needed to create and launch a desktop-only LibGDX game.</span></div>
<div style="position:absolute;left:179.64px;top:433.80px" class="cls_027"><span class="cls_027">Downloading the example code</span></div>
<div style="position:absolute;left:179.64px;top:448.08px" class="cls_024"><span class="cls_024">You can download the example code files from your account at</span></div>
<div style="position:absolute;left:179.64px;top:459.48px" class="cls_009"><span class="cls_009"> </span><A HREF="http://www.packtpub.com/">http://www.packtpub.com</A> <span class="cls_024"> for all the Packt Publishing books</span></div>
<div style="position:absolute;left:179.64px;top:470.88px" class="cls_024"><span class="cls_024">you have purchased. If you purchased this book elsewhere, you can</span></div>
<div style="position:absolute;left:179.64px;top:482.28px" class="cls_024"><span class="cls_024">visit </span><A HREF="http://www.packtpub.com/support/">http://www.packtpub.com/support</A> </span><span class="cls_024"> and register to have</span></div>
<div style="position:absolute;left:179.64px;top:493.68px" class="cls_024"><span class="cls_024">the files e-mailed directly to you.</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 13 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:23258px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background031.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Getting to Know LibGDX</span></div>
<div style="position:absolute;left:108.00px;top:111.92px" class="cls_019"><span class="cls_019">Summary</span></div>
<div style="position:absolute;left:108.00px;top:136.90px" class="cls_007"><span class="cls_007">In this chapter, we looked at what LibGDX is about and how to go about creating</span></div>
<div style="position:absolute;left:108.00px;top:149.50px" class="cls_007"><span class="cls_007">a standard project, running it from the command line and importing it into your</span></div>
<div style="position:absolute;left:108.00px;top:162.10px" class="cls_007"><span class="cls_007">preferred IDE ready for development.</span></div>
<div style="position:absolute;left:108.00px;top:183.34px" class="cls_007"><span class="cls_007">Coming up in the next chapter, we will look at making our very first LibGDX-based</span></div>
<div style="position:absolute;left:108.00px;top:195.94px" class="cls_007"><span class="cls_007">game! We will take a very well known old mobile game and recreate it in LibGDX.</span></div>
<div style="position:absolute;left:108.00px;top:208.54px" class="cls_007"><span class="cls_007">We will also introduce the game cycle concept along with rendering our own</span></div>
<div style="position:absolute;left:108.00px;top:221.14px" class="cls_007"><span class="cls_007">textures to the screen, move them, and access input detection.</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 14 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:24060px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background032.jpg" width=612 height=792></div>
<div style="position:absolute;left:185.31px;top:218.96px" class="cls_014"><span class="cls_014">Let's Get These Snakes</span></div>
<div style="position:absolute;left:272.76px;top:254.96px" class="cls_014"><span class="cls_014">Out of This Book!</span></div>
<div style="position:absolute;left:108.00px;top:308.66px" class="cls_007"><span class="cls_007">In this chapter, we will start making our first game with the LibGDX framework.</span></div>
<div style="position:absolute;left:108.00px;top:321.26px" class="cls_007"><span class="cls_007">We will make a little journey back to one of the very first popular mobile games,</span></div>
<div style="position:absolute;left:108.00px;top:333.86px" class="cls_007"><span class="cls_007">Snake. We will start out by looking at LibGDX's update cycle and how textures</span></div>
<div style="position:absolute;left:108.00px;top:346.46px" class="cls_007"><span class="cls_007">are handled. Then, we will dive into the world of game making by creating our</span></div>
<div style="position:absolute;left:108.00px;top:359.06px" class="cls_007"><span class="cls_007">Snake game!</span></div>
<div style="position:absolute;left:108.00px;top:380.30px" class="cls_007"><span class="cls_007">The following will be covered in this chapter:</span></div>
<div style="position:absolute;left:126.00px;top:401.54px" class="cls_007"><span class="cls_007">•  Why Snake?</span></div>
<div style="position:absolute;left:126.00px;top:418.46px" class="cls_007"><span class="cls_007">•  The game update cycle</span></div>
<div style="position:absolute;left:126.00px;top:435.38px" class="cls_007"><span class="cls_007">•  Introducing the snake</span></div>
<div style="position:absolute;left:126.00px;top:452.29px" class="cls_007"><span class="cls_007">•  Making the snake move</span></div>
<div style="position:absolute;left:126.00px;top:469.21px" class="cls_007"><span class="cls_007">•  Controlling the snake</span></div>
<div style="position:absolute;left:126.00px;top:486.12px" class="cls_007"><span class="cls_007">•  Introducing the collision detection mechanism</span></div>
<div style="position:absolute;left:126.00px;top:503.04px" class="cls_007"><span class="cls_007">•  Increasing the length of the snake once the apple is eaten</span></div>
<div style="position:absolute;left:108.00px;top:535.56px" class="cls_019"><span class="cls_019">Why Snake?</span></div>
<div style="position:absolute;left:108.00px;top:560.54px" class="cls_007"><span class="cls_007">Snake is one of the earliest mobile games that I can remember. I remember playing</span></div>
<div style="position:absolute;left:108.00px;top:573.14px" class="cls_007"><span class="cls_007">it many a time, chasing the apple while avoiding contact with the snake's own body.</span></div>
<div style="position:absolute;left:108.00px;top:585.74px" class="cls_007"><span class="cls_007">The beauty of the game was that it was a slightly different experience each time</span></div>
<div style="position:absolute;left:108.00px;top:598.34px" class="cls_007"><span class="cls_007">you played.</span></div>
<div style="position:absolute;left:108.00px;top:619.58px" class="cls_007"><span class="cls_007">The premise is simple: navigate the snake around the board collecting apples—which</span></div>
<div style="position:absolute;left:108.00px;top:632.18px" class="cls_007"><span class="cls_007">increase the length of the snake when consumed—while avoiding collision with the</span></div>
<div style="position:absolute;left:108.00px;top:644.78px" class="cls_007"><span class="cls_007">snake itself.</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 15 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:24862px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background033.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Let's Get These Snakes Out of This Book!</span></div>
<div style="position:absolute;left:108.00px;top:111.92px" class="cls_019"><span class="cls_019">Game update cycle</span></div>
<div style="position:absolute;left:108.00px;top:136.90px" class="cls_007"><span class="cls_007">Before we jump straight into some coding action, let's first take a look at a couple</span></div>
<div style="position:absolute;left:108.00px;top:149.50px" class="cls_007"><span class="cls_007">of core classes that will make our lives easier. When you created your project with</span></div>
<div style="position:absolute;left:108.00px;top:162.10px" class="cls_007"><span class="cls_007">the setup tool, the core of the game, the </span><span class="cls_009">MyGDXGame</span><span class="cls_007"> class, which is the default name</span></div>
<div style="position:absolute;left:108.00px;top:174.70px" class="cls_007"><span class="cls_007">of the class, extends a class called </span><span class="cls_009">ApplicationAdapter</span><span class="cls_007">. This in turn implements</span></div>
<div style="position:absolute;left:108.00px;top:187.30px" class="cls_007"><span class="cls_007">an interface called </span><span class="cls_009">ApplicationListener</span><span class="cls_007">. Now, you might think these are good</span></div>
<div style="position:absolute;left:108.00px;top:199.90px" class="cls_007"><span class="cls_007">enough for us to get going; however, there is a better class that we can extend and</span></div>
<div style="position:absolute;left:108.00px;top:212.50px" class="cls_007"><span class="cls_007">that is the </span><span class="cls_009">Game</span><span class="cls_007"> class.</span></div>
<div style="position:absolute;left:108.00px;top:233.74px" class="cls_007"><span class="cls_007">What is so special about this class? Essentially, it is </span><span class="cls_009">ApplicationListener</span></div>
<div style="position:absolute;left:108.00px;top:246.34px" class="cls_007"><span class="cls_007">that delegates the game to a screen. Every bar method, such as </span><span class="cls_009">onCreate()</span><span class="cls_007">,</span></div>
<div style="position:absolute;left:108.00px;top:258.94px" class="cls_007"><span class="cls_007">is implemented. This will save us lots of time going forward.</span></div>
<div style="position:absolute;left:108.00px;top:280.18px" class="cls_007"><span class="cls_007">The following code is the </span><span class="cls_009">Game</span><span class="cls_007"> class from the LibGDX framework:</span></div>
<div style="position:absolute;left:126.00px;top:301.12px" class="cls_021"><span class="cls_021">public abstract class Game implements ApplicationListener {</span></div>
<div style="position:absolute;left:136.80px;top:313.36px" class="cls_021"><span class="cls_021">protected Screen screen;</span></div>
<div style="position:absolute;left:136.80px;top:337.84px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:136.80px;top:350.08px" class="cls_021"><span class="cls_021">public void dispose () {</span></div>
<div style="position:absolute;left:147.60px;top:362.32px" class="cls_021"><span class="cls_021">if (screen != null) screen.hide();</span></div>
<div style="position:absolute;left:136.80px;top:374.56px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:399.04px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:136.80px;top:411.28px" class="cls_021"><span class="cls_021">public void pause () {</span></div>
<div style="position:absolute;left:147.60px;top:423.52px" class="cls_021"><span class="cls_021">if (screen != null) screen.pause();</span></div>
<div style="position:absolute;left:136.80px;top:435.76px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:460.24px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:136.80px;top:472.48px" class="cls_021"><span class="cls_021">public void resume () {</span></div>
<div style="position:absolute;left:147.60px;top:484.72px" class="cls_021"><span class="cls_021">if (screen != null) screen.resume();</span></div>
<div style="position:absolute;left:136.80px;top:496.96px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:521.44px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:136.80px;top:533.68px" class="cls_021"><span class="cls_021">public void render () {</span></div>
<div style="position:absolute;left:147.60px;top:545.92px" class="cls_021"><span class="cls_021">if (screen != null) screen.render(Gdx.graphics.getDeltaTime());</span></div>
<div style="position:absolute;left:136.80px;top:558.16px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:582.64px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:136.80px;top:594.88px" class="cls_021"><span class="cls_021">public void resize (int width, int height) {</span></div>
<div style="position:absolute;left:147.60px;top:607.12px" class="cls_021"><span class="cls_021">if (screen != null) screen.resize(width, height);</span></div>
<div style="position:absolute;left:136.80px;top:619.36px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:643.84px" class="cls_021"><span class="cls_021">public void setScreen (Screen screen) {</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 16 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:25664px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background034.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 2</span></div>
<div style="position:absolute;left:147.60px;top:114.01px" class="cls_021"><span class="cls_021">if (this.screen != null) this.screen.hide();</span></div>
<div style="position:absolute;left:147.60px;top:126.25px" class="cls_021"><span class="cls_021">this.screen = screen;</span></div>
<div style="position:absolute;left:147.60px;top:138.49px" class="cls_021"><span class="cls_021">if (this.screen != null) {</span></div>
<div style="position:absolute;left:158.40px;top:150.73px" class="cls_021"><span class="cls_021">this.screen.show();</span></div>
<div style="position:absolute;left:158.40px;top:162.97px" class="cls_021"><span class="cls_021">this.screen.resize(Gdx.graphics.getWidth(), Gdx.graphics.</span></div>
<div style="position:absolute;left:158.40px;top:173.77px" class="cls_021"><span class="cls_021">getHeight());</span></div>
<div style="position:absolute;left:147.60px;top:186.01px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:198.25px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:222.73px" class="cls_021"><span class="cls_021">public Screen getScreen () {</span></div>
<div style="position:absolute;left:147.60px;top:234.97px" class="cls_021"><span class="cls_021">return screen;</span></div>
<div style="position:absolute;left:136.80px;top:247.21px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:259.45px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:279.18px" class="cls_007"><span class="cls_007">As we can see in the preceding code, the </span><span class="cls_009">Game</span><span class="cls_007"> class is abstract, this will require us to</span></div>
<div style="position:absolute;left:108.00px;top:291.78px" class="cls_007"><span class="cls_007">provide our own implementation. Then, as mentioned earlier, it delegates life cycle</span></div>
<div style="position:absolute;left:108.00px;top:304.38px" class="cls_007"><span class="cls_007">calls to the </span><span class="cls_009">Screen</span><span class="cls_007"> class.</span></div>
<div style="position:absolute;left:108.00px;top:325.62px" class="cls_007"><span class="cls_007">The </span><span class="cls_009">Screen</span><span class="cls_007"> class is used to define what a player is looking at, such as the main menu</span></div>
<div style="position:absolute;left:108.00px;top:338.22px" class="cls_007"><span class="cls_007">or the game screen. It has various methods that may be overridden. Let's take a look</span></div>
<div style="position:absolute;left:108.00px;top:350.82px" class="cls_007"><span class="cls_007">at the following code snippet:</span></div>
<div style="position:absolute;left:126.00px;top:371.76px" class="cls_021"><span class="cls_021">public interface Screen {</span></div>
<div style="position:absolute;left:136.80px;top:384.00px" class="cls_021"><span class="cls_021">public void show ();</span></div>
<div style="position:absolute;left:136.80px;top:396.24px" class="cls_021"><span class="cls_021">public void render (float delta);</span></div>
<div style="position:absolute;left:136.80px;top:408.48px" class="cls_021"><span class="cls_021">public void resize (int width, int height);</span></div>
<div style="position:absolute;left:136.80px;top:420.72px" class="cls_021"><span class="cls_021">public void pause ();</span></div>
<div style="position:absolute;left:136.80px;top:432.96px" class="cls_021"><span class="cls_021">public void resume ();</span></div>
<div style="position:absolute;left:136.80px;top:445.20px" class="cls_021"><span class="cls_021">public void hide ();</span></div>
<div style="position:absolute;left:136.80px;top:457.44px" class="cls_021"><span class="cls_021">public void dispose ();</span></div>
<div style="position:absolute;left:126.00px;top:469.68px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:489.42px" class="cls_007"><span class="cls_007">It has the same method signature as the </span><span class="cls_009">ApplicationListener</span><span class="cls_007"> class. However,</span></div>
<div style="position:absolute;left:108.00px;top:502.02px" class="cls_007"><span class="cls_007">there is an additional method, </span><span class="cls_009">show()</span><span class="cls_007">, which is called when the screen becomes</span></div>
<div style="position:absolute;left:108.00px;top:514.62px" class="cls_007"><span class="cls_007">the current screen in the game.</span></div>
<div style="position:absolute;left:108.00px;top:535.86px" class="cls_007"><span class="cls_007">We wouldn't want from implement all those methods every time we wanted to</span></div>
<div style="position:absolute;left:108.00px;top:548.46px" class="cls_007"><span class="cls_007">create a </span><span class="cls_009">Screen</span><span class="cls_007"> class implementation. Luckily, LibGDX has an adapter class,</span></div>
<div style="position:absolute;left:108.00px;top:561.06px" class="cls_009"><span class="cls_009">ScreenAdapter</span><span class="cls_007">, which is purely for convenience and contains zero logic. It</span></div>
<div style="position:absolute;left:108.00px;top:573.66px" class="cls_007"><span class="cls_007">implements the methods with empty bodies. I won't show the code structure here,</span></div>
<div style="position:absolute;left:108.00px;top:586.26px" class="cls_007"><span class="cls_007">I will leave it to you to look it up if you like.</span></div>
<div style="position:absolute;left:108.00px;top:607.50px" class="cls_007"><span class="cls_007">Out of the life cycle methods that are mentioned here, we are only interested in a</span></div>
<div style="position:absolute;left:108.00px;top:620.10px" class="cls_007"><span class="cls_007">couple of these to start off with, </span><span class="cls_009">show()</span><span class="cls_007"> and </span><span class="cls_009">render()</span><span class="cls_007">.</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 17 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:26466px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background035.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Let's Get These Snakes Out of This Book!</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">The </span><span class="cls_009">render()</span><span class="cls_007"> method is called on every cycle. By default, this is 60 times a second.</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">This is configurable; however, we are happy with 60fps (frames per second) for</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">now. In the default project, you will see that there is some interesting code already.</span></div>
<div style="position:absolute;left:108.00px;top:152.29px" class="cls_007"><span class="cls_007">What's happening here is that, with every frame, the screen is being cleared with the</span></div>
<div style="position:absolute;left:108.00px;top:164.89px" class="cls_007"><span class="cls_007">background color, which is red in this case, and rendering the LibGDX logo from</span></div>
<div style="position:absolute;left:108.00px;top:177.49px" class="cls_007"><span class="cls_007">scratch. This is achieved with the calls to </span><span class="cls_009">glClearColor()</span><span class="cls_007"> and </span><span class="cls_009">glClear()</span><span class="cls_007">. Later, we</span></div>
<div style="position:absolute;left:107.99px;top:190.09px" class="cls_007"><span class="cls_007">will look at how we can clear with other colors.</span></div>
<div style="position:absolute;left:107.99px;top:211.33px" class="cls_007"><span class="cls_007">Let's get our </span><span class="cls_009">Game</span><span class="cls_007"> class up and running. Initially, it will not do much, but it will set</span></div>
<div style="position:absolute;left:107.99px;top:223.93px" class="cls_007"><span class="cls_007">us up to make our game.</span></div>
<div style="position:absolute;left:107.99px;top:245.18px" class="cls_007"><span class="cls_007">First, let's generate a new project. This time, we will use some proper names as</span></div>
<div style="position:absolute;left:107.99px;top:257.78px" class="cls_007"><span class="cls_007">opposed to the defaults. To create the Snake game, we set the tool as follows:</span></div>
<div style="position:absolute;left:108.00px;top:365.17px" class="cls_007"><span class="cls_007">Once you have the project that is generated from the LibGDX setup application,</span></div>
<div style="position:absolute;left:108.00px;top:377.77px" class="cls_007"><span class="cls_007">import it into your IDE; if you are using Eclipse, refer to the previous chapter.</span></div>
<div style="position:absolute;left:108.00px;top:399.01px" class="cls_007"><span class="cls_007">The </span><span class="cls_009">Game</span><span class="cls_007"> class that is generated for you extends </span><span class="cls_009">ApplicationAdapter</span><span class="cls_007"> by default.</span></div>
<div style="position:absolute;left:126.00px;top:419.95px" class="cls_021"><span class="cls_021">public class SnakeGame extends ApplicationAdapter {</span></div>
<div style="position:absolute;left:108.00px;top:439.69px" class="cls_007"><span class="cls_007">Let's change the extended class to </span><span class="cls_009">Game</span><span class="cls_007">:</span></div>
<div style="position:absolute;left:126.00px;top:460.63px" class="cls_021"><span class="cls_021">public class SnakeGame extends Game {</span></div>
<div style="position:absolute;left:108.00px;top:480.37px" class="cls_007"><span class="cls_007">Ensure that the imports are updated at the top of the class:</span></div>
<div style="position:absolute;left:126.00px;top:501.31px" class="cls_021"><span class="cls_021">import com.badlogic.gdx.Game;</span></div>
<div style="position:absolute;left:108.00px;top:521.05px" class="cls_007"><span class="cls_007">You will now notice that, essentially, nothing has changed. If you run the project</span></div>
<div style="position:absolute;left:108.00px;top:533.65px" class="cls_007"><span class="cls_007">again—via </span><span class="cls_009">DesktopLauncher</span><span class="cls_007">—it will still show the red screen with the LibGDX</span></div>
<div style="position:absolute;left:108.00px;top:546.25px" class="cls_007"><span class="cls_007">logo.</span></div>
<div style="position:absolute;left:108.00px;top:567.49px" class="cls_007"><span class="cls_007">But why is this happening? We haven't set a </span><span class="cls_009">Screen</span><span class="cls_007"> class for game object to use. The</span></div>
<div style="position:absolute;left:108.00px;top:580.09px" class="cls_007"><span class="cls_007">keen-eyed among you will have spotted that this is because we are still overriding</span></div>
<div style="position:absolute;left:108.00px;top:592.69px" class="cls_007"><span class="cls_007">the </span><span class="cls_009">render()</span><span class="cls_007"> method. Thus, the delegation to the </span><span class="cls_009">Screen</span><span class="cls_007"> class is not happening.</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 18 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:27268px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background036.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 2</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Before we remove the override, let's create our </span><span class="cls_009">Screen</span><span class="cls_007"> class. Create a class called</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_009"><span class="cls_009">GameScreen</span><span class="cls_007"> and make it extend by the class </span><span class="cls_009">ScreenAdapter</span><span class="cls_007">:</span></div>
<div style="position:absolute;left:126.00px;top:148.03px" class="cls_021"><span class="cls_021">public class GameScreen extends ScreenAdapter {</span></div>
<div style="position:absolute;left:108.00px;top:167.77px" class="cls_007"><span class="cls_007">As all the interface methods are implemented in the </span><span class="cls_009">ScreenAdapter</span><span class="cls_007"> class, you will</span></div>
<div style="position:absolute;left:108.00px;top:180.37px" class="cls_007"><span class="cls_007">notice that the IDE does not request that you implement anything.</span></div>
<div style="position:absolute;left:108.00px;top:201.61px" class="cls_007"><span class="cls_007">Let's return to our </span><span class="cls_009">SnakeGame</span><span class="cls_007"> class and remove the default project example code,</span></div>
<div style="position:absolute;left:108.00px;top:214.21px" class="cls_007"><span class="cls_007">so all we are left with is the </span><span class="cls_009">create()</span><span class="cls_007"> method's override:</span></div>
<div style="position:absolute;left:126.00px;top:235.15px" class="cls_021"><span class="cls_021">public class SnakeGame extends Game {</span></div>
<div style="position:absolute;left:147.60px;top:247.39px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:147.60px;top:259.63px" class="cls_021"><span class="cls_021">public void create() {</span></div>
<div style="position:absolute;left:147.60px;top:271.87px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:284.11px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:303.85px" class="cls_007"><span class="cls_007">In the </span><span class="cls_009">create()</span><span class="cls_007"> method, we can set a new instance of our </span><span class="cls_009">GameScreen</span><span class="cls_007"> method:</span></div>
<div style="position:absolute;left:126.00px;top:324.79px" class="cls_021"><span class="cls_021">public class SnakeGame extends Game {</span></div>
<div style="position:absolute;left:147.60px;top:337.03px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:147.60px;top:349.27px" class="cls_021"><span class="cls_021">public void create() {</span></div>
<div style="position:absolute;left:169.20px;top:361.51px" class="cls_021"><span class="cls_021">setScreen(new GameScreen());</span></div>
<div style="position:absolute;left:147.60px;top:373.75px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:385.99px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:405.73px" class="cls_007"><span class="cls_007">If you run the project again, this time you will see that we just have a black screen;</span></div>
<div style="position:absolute;left:108.00px;top:418.33px" class="cls_007"><span class="cls_007">however, now the rendering is coming from the screen. Let's draw something on</span></div>
<div style="position:absolute;left:108.00px;top:430.93px" class="cls_007"><span class="cls_007">the screen!</span></div>
<div style="position:absolute;left:108.00px;top:460.87px" class="cls_025"><span class="cls_025">Texture rendering</span></div>
<div style="position:absolute;left:108.00px;top:483.85px" class="cls_007"><span class="cls_007">Now we have a blank screen, but let's make our screen do something! To start off</span></div>
<div style="position:absolute;left:108.00px;top:496.45px" class="cls_007"><span class="cls_007">with, let's put the default project code—the lovely LibGDX logo—onto the screen.</span></div>
<div style="position:absolute;left:108.00px;top:509.05px" class="cls_007"><span class="cls_007">You will notice that we don't have a </span><span class="cls_009">create()</span><span class="cls_007"> method to put the object initialization</span></div>
<div style="position:absolute;left:108.00px;top:521.65px" class="cls_007"><span class="cls_007">in. We do, however, have a </span><span class="cls_009">show()</span><span class="cls_007"> method. Let's put it in there. So now your</span></div>
<div style="position:absolute;left:108.00px;top:534.25px" class="cls_009"><span class="cls_009">GameScreen</span><span class="cls_007"> class should look something like this:</span></div>
<div style="position:absolute;left:126.00px;top:555.19px" class="cls_021"><span class="cls_021">public class GameScreen extends ScreenAdapter {</span></div>
<div style="position:absolute;left:147.60px;top:579.67px" class="cls_021"><span class="cls_021">private SpriteBatch batch;</span></div>
<div style="position:absolute;left:147.60px;top:591.91px" class="cls_021"><span class="cls_021">private Texture img;</span></div>
<div style="position:absolute;left:147.60px;top:616.39px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 19 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:28070px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background037.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Let's Get These Snakes Out of This Book!</span></div>
<div style="position:absolute;left:147.60px;top:114.01px" class="cls_021"><span class="cls_021">public void show() {</span></div>
<div style="position:absolute;left:169.20px;top:138.49px" class="cls_021"><span class="cls_021">batch = new SpriteBatch();</span></div>
<div style="position:absolute;left:169.20px;top:150.73px" class="cls_021"><span class="cls_021">img = new Texture("badlogic.jpg");</span></div>
<div style="position:absolute;left:147.60px;top:162.97px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:147.60px;top:187.45px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:147.60px;top:199.69px" class="cls_021"><span class="cls_021">public void render(float delta) {</span></div>
<div style="position:absolute;left:169.20px;top:211.93px" class="cls_021"><span class="cls_021">Gdx.gl.glClearColor(1, 0, 0, 1);</span></div>
<div style="position:absolute;left:169.20px;top:224.17px" class="cls_021"><span class="cls_021">Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);</span></div>
<div style="position:absolute;left:169.20px;top:236.41px" class="cls_021"><span class="cls_021">batch.begin();</span></div>
<div style="position:absolute;left:169.20px;top:248.65px" class="cls_021"><span class="cls_021">batch.draw(img, 0, 0);</span></div>
<div style="position:absolute;left:169.20px;top:260.89px" class="cls_021"><span class="cls_021">batch.end();</span></div>
<div style="position:absolute;left:147.60px;top:273.13px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:285.37px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:305.10px" class="cls_007"><span class="cls_007">If you run the project again, you will see we are back to where we started. Before we</span></div>
<div style="position:absolute;left:108.00px;top:317.70px" class="cls_007"><span class="cls_007">go any further, I am going to provide a little explanation to what is going on, in the</span></div>
<div style="position:absolute;left:108.00px;top:330.30px" class="cls_007"><span class="cls_007">code, here.</span></div>
<div style="position:absolute;left:108.00px;top:358.40px" class="cls_012"><span class="cls_012">The batch class</span></div>
<div style="position:absolute;left:108.00px;top:379.38px" class="cls_007"><span class="cls_007">Next we need something that will draw our textures; this is where the </span><span class="cls_009">batch</span><span class="cls_007"> classes</span></div>
<div style="position:absolute;left:108.00px;top:391.98px" class="cls_007"><span class="cls_007">come in. A Batch is used to draw 2D rectangles that reference a texture. Among the</span></div>
<div style="position:absolute;left:108.00px;top:404.58px" class="cls_007"><span class="cls_007">different Batch class implementations is SpriteBatch, which is the one we will use for</span></div>
<div style="position:absolute;left:108.00px;top:417.18px" class="cls_007"><span class="cls_007">our game.</span></div>
<div style="position:absolute;left:108.00px;top:445.28px" class="cls_012"><span class="cls_012">The texture class</span></div>
<div style="position:absolute;left:108.00px;top:466.26px" class="cls_007"><span class="cls_007">A texture is a bitmap image that gets drawn on the screen through mapping.</span></div>
<div style="position:absolute;left:108.00px;top:478.86px" class="cls_007"><span class="cls_007">The texture class wraps an OpenGL texture without having to worry too much</span></div>
<div style="position:absolute;left:108.00px;top:491.46px" class="cls_007"><span class="cls_007">about the internal workings of OpenGL—remember we are here to make games!</span></div>
<div style="position:absolute;left:108.00px;top:512.70px" class="cls_007"><span class="cls_007">When using the </span><span class="cls_009">texture</span><span class="cls_007"> class, we should ensure that our textures are managed; by</span></div>
<div style="position:absolute;left:108.00px;top:525.30px" class="cls_007"><span class="cls_007">this, we mean that if the OpenGL context is lost, for example, that loss can happen</span></div>
<div style="position:absolute;left:108.00px;top:537.90px" class="cls_007"><span class="cls_007">by the user switching to another application, then our managed textures will</span></div>
<div style="position:absolute;left:108.00px;top:550.50px" class="cls_007"><span class="cls_007">automatically get reloaded for us. Excellent!</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 20 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:28872px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background038.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 2</span></div>
<div style="position:absolute;left:108.00px;top:113.01px" class="cls_012"><span class="cls_012">The dispose() method</span></div>
<div style="position:absolute;left:108.00px;top:133.99px" class="cls_007"><span class="cls_007">Everything we have talked about so far, somewhere in the inner workings of</span></div>
<div style="position:absolute;left:108.00px;top:146.59px" class="cls_007"><span class="cls_007">LibGDX, holds on to real resources, such as memory. To ensure that our games are</span></div>
<div style="position:absolute;left:108.00px;top:159.19px" class="cls_007"><span class="cls_007">well behaved and do not eat all available system memory, we have to remember</span></div>
<div style="position:absolute;left:108.00px;top:171.79px" class="cls_007"><span class="cls_007">to dispose of our SpriteBatch and textures when we are done using them. You will</span></div>
<div style="position:absolute;left:108.00px;top:184.39px" class="cls_007"><span class="cls_007">notice that they all have a </span><span class="cls_009">dispose()</span><span class="cls_007"> method in them. When called, this will release</span></div>
<div style="position:absolute;left:108.00px;top:196.99px" class="cls_007"><span class="cls_007">all resources associated with that object. The </span><span class="cls_009">Screen</span><span class="cls_007"> class has a </span><span class="cls_009">dispose()</span><span class="cls_007"> method.</span></div>
<div style="position:absolute;left:108.01px;top:209.59px" class="cls_007"><span class="cls_007">We will look at that later on.</span></div>
<div style="position:absolute;left:108.00px;top:242.09px" class="cls_019"><span class="cls_019">Introducing Sammy the snake</span></div>
<div style="position:absolute;left:108.00px;top:267.07px" class="cls_007"><span class="cls_007">Before we start making the Snake game, we need to set up our textures for the snake</span></div>
<div style="position:absolute;left:108.00px;top:279.67px" class="cls_007"><span class="cls_007">and the game play area. So, let's remove the default code from our </span><span class="cls_009">GameScreen</span><span class="cls_007"> class,</span></div>
<div style="position:absolute;left:108.00px;top:292.27px" class="cls_007"><span class="cls_007">leaving just our </span><span class="cls_009">SpriteBatch</span><span class="cls_007"> batch's clear screen calls:</span></div>
<div style="position:absolute;left:126.00px;top:313.21px" class="cls_021"><span class="cls_021">public class GameScreen extends ScreenAdapter {</span></div>
<div style="position:absolute;left:147.60px;top:337.69px" class="cls_021"><span class="cls_021">private SpriteBatch batch;</span></div>
<div style="position:absolute;left:147.60px;top:362.17px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:147.60px;top:374.41px" class="cls_021"><span class="cls_021">public void show() {</span></div>
<div style="position:absolute;left:169.20px;top:386.65px" class="cls_021"><span class="cls_021">batch = new SpriteBatch();</span></div>
<div style="position:absolute;left:147.60px;top:398.89px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:147.60px;top:423.37px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:147.60px;top:435.61px" class="cls_021"><span class="cls_021">public void render(float delta) {</span></div>
<div style="position:absolute;left:169.20px;top:447.85px" class="cls_021"><span class="cls_021">Gdx.gl.glClearColor(1, 0, 0, 1);</span></div>
<div style="position:absolute;left:169.20px;top:460.09px" class="cls_021"><span class="cls_021">Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);</span></div>
<div style="position:absolute;left:147.60px;top:472.33px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:484.57px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:504.31px" class="cls_007"><span class="cls_007">Next, let's change the color that fills the screen from red to black. We can do this by</span></div>
<div style="position:absolute;left:108.00px;top:516.91px" class="cls_007"><span class="cls_007">updating the </span><span class="cls_009">glClearColor</span><span class="cls_007"> method call to reference the r, </span><span class="cls_009">g</span><span class="cls_007">, </span><span class="cls_009">b</span><span class="cls_007">, </span><span class="cls_009">a</span><span class="cls_007"> values of the black</span></div>
<div style="position:absolute;left:108.00px;top:529.51px" class="cls_009"><span class="cls_009">Color</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:126.00px;top:550.45px" class="cls_021"><span class="cls_021">Gdx.gl.glClearColor(Color.BLACK.r, Color.BLACK.g, Color.BLACK.b,</span></div>
<div style="position:absolute;left:126.00px;top:561.25px" class="cls_021"><span class="cls_021">Color.BLACK.a);</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 21 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:29674px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background039.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Let's Get These Snakes Out of This Book!</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">If you run the project now, you will find that we are back to our black screen;</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">however, this time, the screen is being cleared every render call. If you don't want</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">to use black, check out the other default colors LibGDX provides, failing that you can</span></div>
<div style="position:absolute;left:108.00px;top:152.29px" class="cls_007"><span class="cls_007">define your own! You can do this by creating your own instance of </span><span class="cls_009">Color</span><span class="cls_007"> with your</span></div>
<div style="position:absolute;left:108.00px;top:164.89px" class="cls_007"><span class="cls_007">own </span><span class="cls_009">r</span><span class="cls_007">, </span><span class="cls_009">g</span><span class="cls_007">, </span><span class="cls_009">b</span><span class="cls_007">, </span><span class="cls_009">a</span><span class="cls_007"> values.</span></div>
<div style="position:absolute;left:189.18px;top:196.25px" class="cls_024"><span class="cls_024">We are very fortunate that there is now plenty of computing</span></div>
<div style="position:absolute;left:189.18px;top:207.65px" class="cls_024"><span class="cls_024">power available to do this. Many moons ago, game developers</span></div>
<div style="position:absolute;left:189.18px;top:219.05px" class="cls_024"><span class="cls_024">could only refresh sections of the screen that had changed to</span></div>
<div style="position:absolute;left:189.18px;top:230.45px" class="cls_024"><span class="cls_024">preserve CPU cycles.</span></div>
<div style="position:absolute;left:108.00px;top:257.49px" class="cls_007"><span class="cls_007">Next we will add back calls in to our batch as we did earlier:</span></div>
<div style="position:absolute;left:169.20px;top:278.43px" class="cls_021"><span class="cls_021">batch.begin();</span></div>
<div style="position:absolute;left:169.20px;top:290.67px" class="cls_021"><span class="cls_021">//Our rending code will live here!</span></div>
<div style="position:absolute;left:169.20px;top:302.91px" class="cls_021"><span class="cls_021">batch.end();</span></div>
<div style="position:absolute;left:108.00px;top:322.65px" class="cls_007"><span class="cls_007">Admittedly they won't do much right now, but our texture rendering code will sit in</span></div>
<div style="position:absolute;left:108.00px;top:335.25px" class="cls_007"><span class="cls_007">between them. Failing to call </span><span class="cls_009">begin()</span><span class="cls_007"> before trying to call any other method for the</span></div>
<div style="position:absolute;left:108.00px;top:347.85px" class="cls_009"><span class="cls_009">SpriteBatch</span><span class="cls_007"> class will result in a </span><span class="cls_009">java.lang.IllegalStateException</span><span class="cls_007"> exception</span></div>
<div style="position:absolute;left:108.00px;top:360.45px" class="cls_007"><span class="cls_007">being thrown.</span></div>
<div style="position:absolute;left:108.00px;top:381.70px" class="cls_007"><span class="cls_007">Now, I think we are ready to start drawing our snake!</span></div>
<div style="position:absolute;left:108.00px;top:411.63px" class="cls_025"><span class="cls_025">Giving the snake a face</span></div>
<div style="position:absolute;left:108.00px;top:434.61px" class="cls_007"><span class="cls_007">We have two assets that we are going to use for drawing our snake, </span><span class="cls_009">snakehead.</span></div>
<div style="position:absolute;left:108.00px;top:447.21px" class="cls_009"><span class="cls_009">png</span><span class="cls_007"> and </span><span class="cls_009">snakebody.png</span><span class="cls_007">. These assets will reside in a specific directory with in the</span></div>
<div style="position:absolute;left:108.00px;top:459.81px" class="cls_007"><span class="cls_007">project. As we are only using the desktop export of LibGDX at the moment, you will</span></div>
<div style="position:absolute;left:108.00px;top:472.41px" class="cls_007"><span class="cls_007">find an </span><span class="cls_009">assets</span><span class="cls_007"> directory in the core project. However, when we start looking at the</span></div>
<div style="position:absolute;left:108.00px;top:485.01px" class="cls_007"><span class="cls_007">Android export, you will find the </span><span class="cls_009">assets</span><span class="cls_007"> directory will move. The assets themselves</span></div>
<div style="position:absolute;left:108.00px;top:497.61px" class="cls_007"><span class="cls_007">are self-explanatory, one for the snakes head and one for the snakes body. Let's start</span></div>
<div style="position:absolute;left:108.00px;top:510.21px" class="cls_007"><span class="cls_007">with the head.</span></div>
<div style="position:absolute;left:108.00px;top:531.45px" class="cls_007"><span class="cls_007">Back in our </span><span class="cls_009">GameScreen</span><span class="cls_007"> class, add a texture object and call it </span><span class="cls_009">snakeHead</span><span class="cls_007">:</span></div>
<div style="position:absolute;left:126.00px;top:552.39px" class="cls_021"><span class="cls_021">private Texture snakeHead;</span></div>
<div style="position:absolute;left:108.00px;top:572.13px" class="cls_007"><span class="cls_007">Next, let's initialize the texture in the </span><span class="cls_009">show()</span><span class="cls_007"> method:</span></div>
<div style="position:absolute;left:126.00px;top:593.07px" class="cls_021"><span class="cls_021">snakeHead = new Texture(Gdx.files.internal("snakehead.png"));</span></div>
<div style="position:absolute;left:108.00px;top:612.81px" class="cls_007"><span class="cls_007">Uh oh! Looks like something new cropped up here—</span><span class="cls_009">Gdx.files.internal</span><span class="cls_007">. LibGDX</span></div>
<div style="position:absolute;left:108.00px;top:625.41px" class="cls_007"><span class="cls_007">comes with some handy tools for handling files. Here we are just loading a file from</span></div>
<div style="position:absolute;left:108.00px;top:638.01px" class="cls_007"><span class="cls_007">within the project.</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 22 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:30476px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background040.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 2</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Now, let's render it in the </span><span class="cls_009">render()</span><span class="cls_007"> method:</span></div>
<div style="position:absolute;left:126.00px;top:135.43px" class="cls_021"><span class="cls_021">batch.draw(snakeHead,0,0);</span></div>
<div style="position:absolute;left:108.00px;top:155.17px" class="cls_007"><span class="cls_007">Hopefully, when you run the project, you will get the following output:</span></div>
<div style="position:absolute;left:108.00px;top:499.36px" class="cls_007"><span class="cls_007">The default resolution that the </span><span class="cls_009">DesktopLauncher</span><span class="cls_007"> parameter has is 640 x 480 pixels.</span></div>
<div style="position:absolute;left:108.00px;top:511.96px" class="cls_007"><span class="cls_007">Currently, this is what we are rendering to. Later on, we will discuss using a</span></div>
<div style="position:absolute;left:108.00px;top:524.56px" class="cls_007"><span class="cls_007">viewport to allow us to handle multiple different resolutions.</span></div>
<div style="position:absolute;left:108.00px;top:557.06px" class="cls_019"><span class="cls_019">Moving Sammy the snake</span></div>
<div style="position:absolute;left:108.00px;top:582.04px" class="cls_007"><span class="cls_007">So, we have Sammy the snake on the screen, sitting there, looking snaky. However, it</span></div>
<div style="position:absolute;left:108.00px;top:594.64px" class="cls_007"><span class="cls_007">isn't much of a game. If it were, we could finish the book right here! What we need to</span></div>
<div style="position:absolute;left:108.00px;top:607.24px" class="cls_007"><span class="cls_007">do now is get that snake slithering across the screen!</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 23 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:31278px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background041.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Let's Get These Snakes Out of This Book!</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">First, let's sort out the playing area. Currently, the resolution is 640 x 480 pixels</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">and the snake texture is 32 x 32. This means we have a grid of 20 x 15—derived</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">by dividing up the resolution by the texture (</span><span class="cls_020">640/32 = 20, 480/32 = 15</span><span class="cls_007">)— of the</span></div>
<div style="position:absolute;left:108.00px;top:152.29px" class="cls_007"><span class="cls_007">different positions the snake head could be in. The reason we are going to do it</span></div>
<div style="position:absolute;left:108.00px;top:164.89px" class="cls_007"><span class="cls_007">this way is because the original game moved with a periodic movement of one</span></div>
<div style="position:absolute;left:108.00px;top:177.49px" class="cls_007"><span class="cls_007">snake component at a time. We are going to do the same.</span></div>
<div style="position:absolute;left:108.00px;top:198.74px" class="cls_007"><span class="cls_007">Let's define our timer. We are going to start off with an interval of one second</span></div>
<div style="position:absolute;left:108.00px;top:211.34px" class="cls_007"><span class="cls_007">between movements. So let's create a constant field:</span></div>
<div style="position:absolute;left:147.60px;top:232.27px" class="cls_021"><span class="cls_021">private static final float MOVE_TIME = 1F;</span></div>
<div style="position:absolute;left:108.00px;top:252.01px" class="cls_007"><span class="cls_007">Now, define a variable to keep track of the time:</span></div>
<div style="position:absolute;left:147.60px;top:272.95px" class="cls_021"><span class="cls_021">private float timer = MOVE_TIME;</span></div>
<div style="position:absolute;left:108.00px;top:292.69px" class="cls_007"><span class="cls_007">Finally, let's get it updated in every frame. This is in the </span><span class="cls_009">render()</span><span class="cls_007"> method:</span></div>
<div style="position:absolute;left:147.60px;top:313.63px" class="cls_021"><span class="cls_021">timer -= delta;</span></div>
<div style="position:absolute;left:147.60px;top:325.87px" class="cls_021"><span class="cls_021">if (timer &lt;= 0) {</span></div>
<div style="position:absolute;left:169.20px;top:338.11px" class="cls_021"><span class="cls_021">timer = MOVE_TIME;</span></div>
<div style="position:absolute;left:147.60px;top:350.35px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:370.09px" class="cls_007"><span class="cls_007">Here we are deducting the time from the last frame. If the timer reaches zero or</span></div>
<div style="position:absolute;left:108.00px;top:382.69px" class="cls_007"><span class="cls_007">below, we reset it.</span></div>
<div style="position:absolute;left:108.00px;top:403.94px" class="cls_007"><span class="cls_007">What we want to do next is move the snake head to the next block once the timer has</span></div>
<div style="position:absolute;left:108.00px;top:416.54px" class="cls_007"><span class="cls_007">reached zero or below. Since we only want to make the snake move right, we will be</span></div>
<div style="position:absolute;left:108.00px;top:429.14px" class="cls_007"><span class="cls_007">adding 32 px to the position of the snake.</span></div>
<div style="position:absolute;left:108.00px;top:450.37px" class="cls_007"><span class="cls_007">Let's add an </span><span class="cls_009">x</span><span class="cls_007"> and </span><span class="cls_009">y</span><span class="cls_007"> component for the snake, and a constant for moving:</span></div>
<div style="position:absolute;left:147.60px;top:471.31px" class="cls_021"><span class="cls_021">private static final int SNAKE_MOVEMENT = 32;</span></div>
<div style="position:absolute;left:147.60px;top:483.55px" class="cls_021"><span class="cls_021">private int snakeX = 0, snakeY = 0;</span></div>
<div style="position:absolute;left:108.00px;top:503.29px" class="cls_007"><span class="cls_007">Next, let's update the </span><span class="cls_009">render()</span><span class="cls_007"> method:</span></div>
<div style="position:absolute;left:147.60px;top:524.23px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:147.60px;top:536.47px" class="cls_021"><span class="cls_021">public void render(float delta) {</span></div>
<div style="position:absolute;left:169.20px;top:548.71px" class="cls_021"><span class="cls_021">timer -= delta;</span></div>
<div style="position:absolute;left:169.20px;top:560.95px" class="cls_021"><span class="cls_021">if (timer &lt;= 0) {</span></div>
<div style="position:absolute;left:190.80px;top:573.19px" class="cls_021"><span class="cls_021">timer = MOVE_TIME;</span></div>
<div style="position:absolute;left:190.80px;top:585.43px" class="cls_021"><span class="cls_021">snakeX += SNAKE_MOVEMENT;</span></div>
<div style="position:absolute;left:169.20px;top:597.67px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:169.20px;top:609.91px" class="cls_021"><span class="cls_021">Gdx.gl.glClearColor(Color.BLACK.r, Color.BLACK.g,</span></div>
<div style="position:absolute;left:169.20px;top:620.71px" class="cls_021"><span class="cls_021">Color.BLACK.b, Color.BLACK.a);</span></div>
<div style="position:absolute;left:169.20px;top:632.95px" class="cls_021"><span class="cls_021">Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);</span></div>
<div style="position:absolute;left:169.20px;top:645.19px" class="cls_021"><span class="cls_021">batch.begin();</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 24 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:32080px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background042.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 2</span></div>
<div style="position:absolute;left:169.20px;top:114.01px" class="cls_021"><span class="cls_021">batch.draw(snakeHead,snakeX,snakeY);</span></div>
<div style="position:absolute;left:169.20px;top:126.25px" class="cls_021"><span class="cls_021">batch.end();</span></div>
<div style="position:absolute;left:147.60px;top:138.49px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:158.22px" class="cls_007"><span class="cls_007">So now every time the timer reaches zero or below, the snake will move to the right</span></div>
<div style="position:absolute;left:108.00px;top:170.82px" class="cls_007"><span class="cls_007">by 32 px.</span></div>
<div style="position:absolute;left:108.00px;top:192.06px" class="cls_007"><span class="cls_007">Run the default project and check it out!</span></div>
<div style="position:absolute;left:108.00px;top:213.31px" class="cls_007"><span class="cls_007">So what did you see? Hopefully, it was the snake head scrolling across the screen in</span></div>
<div style="position:absolute;left:108.00px;top:225.91px" class="cls_007"><span class="cls_007">intervals of 1 second. Then it probably disappeared off to the right? Yes, we should</span></div>
<div style="position:absolute;left:108.00px;top:238.51px" class="cls_007"><span class="cls_007">have been expecting that. We told the snake head to move to the right indefinitely.</span></div>
<div style="position:absolute;left:108.00px;top:251.11px" class="cls_007"><span class="cls_007">What we should do, staying true to the original, is have the snake reappear on the</span></div>
<div style="position:absolute;left:108.00px;top:263.71px" class="cls_007"><span class="cls_007">left-hand side.</span></div>
<div style="position:absolute;left:108.00px;top:284.95px" class="cls_007"><span class="cls_007">Let's create a method to check for the position of the snake:</span></div>
<div style="position:absolute;left:147.60px;top:305.88px" class="cls_021"><span class="cls_021">private void checkForOutOfBounds() {</span></div>
<div style="position:absolute;left:169.20px;top:318.12px" class="cls_021"><span class="cls_021">if (snakeX >= Gdx.graphics.getWidth()) {</span></div>
<div style="position:absolute;left:190.80px;top:330.36px" class="cls_021"><span class="cls_021">snakeX = 0;</span></div>
<div style="position:absolute;left:169.20px;top:342.60px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:147.60px;top:354.84px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:374.58px" class="cls_007"><span class="cls_007">Now we should have this method called after we move the snake. What we are</span></div>
<div style="position:absolute;left:108.00px;top:387.18px" class="cls_007"><span class="cls_007">doing here is checking whether the position of the snake head is outside the screen.</span></div>
<div style="position:absolute;left:108.00px;top:399.78px" class="cls_007"><span class="cls_007">We do this by querying the screen's width and checking whether the snake's </span><span class="cls_009">x</span></div>
<div style="position:absolute;left:108.00px;top:412.38px" class="cls_007"><span class="cls_007">position is greater than or equal to it. We then reset it to zero.</span></div>
<div style="position:absolute;left:108.00px;top:433.62px" class="cls_007"><span class="cls_007">Running the project now, you will see that the snake head will return back to the</span></div>
<div style="position:absolute;left:108.00px;top:446.22px" class="cls_007"><span class="cls_007">start of the screen.</span></div>
<div style="position:absolute;left:108.00px;top:467.47px" class="cls_007"><span class="cls_007">This is all well and good, but again, it isn't much of a game just having the snake</span></div>
<div style="position:absolute;left:108.00px;top:480.07px" class="cls_007"><span class="cls_007">move to the right. What we need to do is give the snake a direction:</span></div>
<div style="position:absolute;left:147.60px;top:501.00px" class="cls_021"><span class="cls_021">private static final int RIGHT = 0;</span></div>
<div style="position:absolute;left:147.60px;top:513.24px" class="cls_021"><span class="cls_021">private static final int LEFT = 1;</span></div>
<div style="position:absolute;left:147.60px;top:525.48px" class="cls_021"><span class="cls_021">private static final int UP = 2;</span></div>
<div style="position:absolute;left:147.60px;top:537.72px" class="cls_021"><span class="cls_021">private static final int DOWN = 3;</span></div>
<div style="position:absolute;left:147.60px;top:549.96px" class="cls_021"><span class="cls_021">private int snakeDirection = RIGHT;</span></div>
<div style="position:absolute;left:108.00px;top:569.70px" class="cls_007"><span class="cls_007">By adding some constants and a variable, we can keep track of the snake's direction.</span></div>
<div style="position:absolute;left:108.00px;top:582.30px" class="cls_007"><span class="cls_007">Now that we have a direction, we need to be more precise on how we mean to move</span></div>
<div style="position:absolute;left:108.00px;top:594.90px" class="cls_007"><span class="cls_007">the snake. Let's replace the current code for moving with the following method:</span></div>
<div style="position:absolute;left:147.60px;top:615.84px" class="cls_021"><span class="cls_021">private void moveSnake() {</span></div>
<div style="position:absolute;left:169.20px;top:628.08px" class="cls_021"><span class="cls_021">switch (snakeDirection) {</span></div>
<div style="position:absolute;left:190.80px;top:640.32px" class="cls_021"><span class="cls_021">case RIGHT: {</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 25 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:32882px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background043.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Let's Get These Snakes Out of This Book!</span></div>
<div style="position:absolute;left:212.40px;top:114.01px" class="cls_021"><span class="cls_021">snakeX += SNAKE_MOVEMENT;</span></div>
<div style="position:absolute;left:212.40px;top:126.25px" class="cls_021"><span class="cls_021">return;</span></div>
<div style="position:absolute;left:190.80px;top:138.49px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:190.80px;top:150.73px" class="cls_021"><span class="cls_021">case LEFT: {</span></div>
<div style="position:absolute;left:212.40px;top:162.97px" class="cls_021"><span class="cls_021">snakeX -= SNAKE_MOVEMENT;</span></div>
<div style="position:absolute;left:212.40px;top:175.21px" class="cls_021"><span class="cls_021">return;</span></div>
<div style="position:absolute;left:190.80px;top:187.45px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:190.80px;top:199.69px" class="cls_021"><span class="cls_021">case UP: {</span></div>
<div style="position:absolute;left:212.40px;top:211.93px" class="cls_021"><span class="cls_021">snakeY += SNAKE_MOVEMENT;</span></div>
<div style="position:absolute;left:212.40px;top:224.17px" class="cls_021"><span class="cls_021">return;</span></div>
<div style="position:absolute;left:190.80px;top:236.41px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:190.80px;top:248.65px" class="cls_021"><span class="cls_021">case DOWN: {</span></div>
<div style="position:absolute;left:212.40px;top:260.89px" class="cls_021"><span class="cls_021">snakeY -= SNAKE_MOVEMENT;</span></div>
<div style="position:absolute;left:212.40px;top:273.13px" class="cls_021"><span class="cls_021">return;</span></div>
<div style="position:absolute;left:190.80px;top:285.37px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:169.20px;top:297.61px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:147.60px;top:309.85px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:329.58px" class="cls_007"><span class="cls_007">Now, depending the direction set, the snake will move; give it a go and set the snake</span></div>
<div style="position:absolute;left:108.00px;top:342.18px" class="cls_007"><span class="cls_007">to move in a different direction.</span></div>
<div style="position:absolute;left:108.00px;top:363.42px" class="cls_007"><span class="cls_007">Ah, I bet you've seen the problem with this already. We only check whether the</span></div>
<div style="position:absolute;left:108.00px;top:376.02px" class="cls_007"><span class="cls_007">snake is on the screen when moving right, and that means we need to update our</span></div>
<div style="position:absolute;left:108.00px;top:388.62px" class="cls_007"><span class="cls_007">bounds to check method to cover all cases:</span></div>
<div style="position:absolute;left:147.60px;top:409.56px" class="cls_021"><span class="cls_021">private void checkForOutOfBounds() {</span></div>
<div style="position:absolute;left:169.20px;top:421.80px" class="cls_021"><span class="cls_021">if (snakeX >= Gdx.graphics.getWidth()) {</span></div>
<div style="position:absolute;left:190.80px;top:434.04px" class="cls_021"><span class="cls_021">snakeX = 0;</span></div>
<div style="position:absolute;left:169.20px;top:446.28px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:169.20px;top:458.52px" class="cls_021"><span class="cls_021">if (snakeX &lt; 0) {</span></div>
<div style="position:absolute;left:190.80px;top:470.76px" class="cls_021"><span class="cls_021">snakeX = Gdx.graphics.getWidth() - SNAKE_MOVEMENT;</span></div>
<div style="position:absolute;left:169.20px;top:483.00px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:169.20px;top:495.24px" class="cls_021"><span class="cls_021">if (snakeY >= Gdx.graphics.getHeight()) {</span></div>
<div style="position:absolute;left:190.80px;top:507.48px" class="cls_021"><span class="cls_021">snakeY = 0;</span></div>
<div style="position:absolute;left:169.20px;top:519.72px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:169.20px;top:531.96px" class="cls_021"><span class="cls_021">if (snakeY &lt; 0) {</span></div>
<div style="position:absolute;left:190.80px;top:544.20px" class="cls_021"><span class="cls_021">snakeY = Gdx.graphics.getHeight() - SNAKE_MOVEMENT;</span></div>
<div style="position:absolute;left:169.20px;top:556.44px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:147.60px;top:568.68px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:588.42px" class="cls_007"><span class="cls_007">That should be better!</span></div>
<div style="position:absolute;left:108.00px;top:609.66px" class="cls_007"><span class="cls_007">Just before we move on to controlling the snake, let's do a little code refactor to</span></div>
<div style="position:absolute;left:108.00px;top:622.26px" class="cls_007"><span class="cls_007">stop things from getting a bit too messy in our </span><span class="cls_009">render()</span><span class="cls_007"> method. You will see</span></div>
<div style="position:absolute;left:108.00px;top:634.86px" class="cls_007"><span class="cls_007">in the samples that this has already been done!</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 26 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:33684px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background044.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 2</span></div>
<div style="position:absolute;left:108.00px;top:112.46px" class="cls_025"><span class="cls_025">Controlling Sammy with event polling</span></div>
<div style="position:absolute;left:108.00px;top:135.44px" class="cls_007"><span class="cls_007">Now we are going to look at how to control our snake. Normally, there are a couple</span></div>
<div style="position:absolute;left:108.00px;top:148.04px" class="cls_007"><span class="cls_007">of approaches to handle user input. One is event polling, where we can query the</span></div>
<div style="position:absolute;left:108.00px;top:160.64px" class="cls_007"><span class="cls_007">state of the input and then update our game accordingly. Generally, this polling</span></div>
<div style="position:absolute;left:108.00px;top:173.24px" class="cls_007"><span class="cls_007">will occur during the main game loop, just before the rendering. The other method</span></div>
<div style="position:absolute;left:108.00px;top:185.84px" class="cls_007"><span class="cls_007">is to listen to events; we register a listener that will receive events from the LibGDX</span></div>
<div style="position:absolute;left:108.00px;top:198.44px" class="cls_007"><span class="cls_007">framework when the player interacts with the game, that is, presses a key. For now,</span></div>
<div style="position:absolute;left:108.00px;top:211.04px" class="cls_007"><span class="cls_007">we will just work with polling.</span></div>
<div style="position:absolute;left:108.00px;top:232.29px" class="cls_007"><span class="cls_007">As we are working in desktop mode, we will take advantage of the arrow keys on</span></div>
<div style="position:absolute;left:108.00px;top:244.89px" class="cls_007"><span class="cls_007">the keyboard. Because LibGDX is so awesome, there is a really convenient way</span></div>
<div style="position:absolute;left:108.00px;top:257.48px" class="cls_007"><span class="cls_007">to poll for user input, </span><span class="cls_009">Gdx.input</span><span class="cls_007">. There is a vast array of methods that we can</span></div>
<div style="position:absolute;left:108.00px;top:270.08px" class="cls_007"><span class="cls_007">call here to determine what the player has pressed. For this example, we will be</span></div>
<div style="position:absolute;left:108.00px;top:282.68px" class="cls_007"><span class="cls_007">focus on the </span><span class="cls_009">Gdx.input.isKeyPressed()</span><span class="cls_007"> method. Here we can specify the key to</span></div>
<div style="position:absolute;left:108.00px;top:295.28px" class="cls_007"><span class="cls_007">query by passing in a key code. The codes are available as constants that live inside</span></div>
<div style="position:absolute;left:108.00px;top:307.88px" class="cls_007"><span class="cls_007">the </span><span class="cls_009">Keys</span><span class="cls_007"> static class; please check the official documentation at </span><A HREF="http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/Input.Keys.html">http://libgdx.</A> </span></div>
<div style="position:absolute;left:108.00px;top:320.48px" class="cls_009"><span class="cls_009"> </span><A HREF="http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/Input.Keys.html">badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/Input.Keys.html</A> </div>
<div style="position:absolute;left:108.00px;top:333.08px" class="cls_007"><span class="cls_007">to access the whole list.</span></div>
<div style="position:absolute;left:108.00px;top:354.33px" class="cls_007"><span class="cls_007">So how do we use it?</span></div>
<div style="position:absolute;left:108.00px;top:375.56px" class="cls_007"><span class="cls_007">Well, let's create a method called </span><span class="cls_009">queryInput()</span><span class="cls_007"> in it. We will check whether the</span></div>
<div style="position:absolute;left:108.00px;top:388.16px" class="cls_007"><span class="cls_007">arrow keys have been pressed and update the snake direction accordingly:</span></div>
<div style="position:absolute;left:147.60px;top:409.10px" class="cls_021"><span class="cls_021">private void queryInput() {</span></div>
<div style="position:absolute;left:169.20px;top:421.34px" class="cls_021"><span class="cls_021">boolean lPressed = Gdx.input.isKeyPressed(Input.Keys.LEFT);</span></div>
<div style="position:absolute;left:169.20px;top:433.58px" class="cls_021"><span class="cls_021">boolean rPressed = Gdx.input.isKeyPressed(Input.Keys.RIGHT);</span></div>
<div style="position:absolute;left:169.20px;top:445.82px" class="cls_021"><span class="cls_021">boolean uPressed = Gdx.input.isKeyPressed(Input.Keys.UP);</span></div>
<div style="position:absolute;left:169.20px;top:458.06px" class="cls_021"><span class="cls_021">boolean dPressed = Gdx.input.isKeyPressed(Input.Keys.DOWN);</span></div>
<div style="position:absolute;left:169.20px;top:482.54px" class="cls_021"><span class="cls_021">if (lPressed) snakeDirection = LEFT;</span></div>
<div style="position:absolute;left:169.20px;top:494.78px" class="cls_021"><span class="cls_021">if (rPressed) snakeDirection = RIGHT;</span></div>
<div style="position:absolute;left:169.20px;top:507.02px" class="cls_021"><span class="cls_021">if (uPressed) snakeDirection = UP;</span></div>
<div style="position:absolute;left:169.20px;top:519.26px" class="cls_021"><span class="cls_021">if (dPressed) snakeDirection = DOWN;</span></div>
<div style="position:absolute;left:147.60px;top:531.50px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:551.24px" class="cls_007"><span class="cls_007">So firstly, we query the four keys we are interested in, and then we set the direction.</span></div>
<div style="position:absolute;left:108.00px;top:572.48px" class="cls_007"><span class="cls_007">Now, add this method to the top of the </span><span class="cls_009">render()</span><span class="cls_007"> method.</span></div>
<div style="position:absolute;left:108.00px;top:593.73px" class="cls_007"><span class="cls_007">Run the project and you will find that you can control the snake with the arrow keys.</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 27 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:34486px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background045.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Let's Get These Snakes Out of This Book!</span></div>
<div style="position:absolute;left:108.00px;top:111.92px" class="cls_019"><span class="cls_019">Adding the apple</span></div>
<div style="position:absolute;left:108.00px;top:136.90px" class="cls_007"><span class="cls_007">Next up, we need to get our snake eating something. Let's get our apple implemented.</span></div>
<div style="position:absolute;left:108.00px;top:158.14px" class="cls_007"><span class="cls_007">We will need to get our apple to do the following things:</span></div>
<div style="position:absolute;left:126.00px;top:179.38px" class="cls_007"><span class="cls_007">•  Randomly being placed on the screen, not on the snake!</span></div>
<div style="position:absolute;left:126.00px;top:196.30px" class="cls_007"><span class="cls_007">•  Only place one if there isn't an apple on the screen already</span></div>
<div style="position:absolute;left:126.00px;top:213.21px" class="cls_007"><span class="cls_007">•  Disappear when it collides with the snake's head</span></div>
<div style="position:absolute;left:107.99px;top:234.46px" class="cls_007"><span class="cls_007">Right! Let's add the texture:</span></div>
<div style="position:absolute;left:147.60px;top:255.40px" class="cls_021"><span class="cls_021">private Texture apple;</span></div>
<div style="position:absolute;left:108.00px;top:275.14px" class="cls_007"><span class="cls_007">Then, let's amend our </span><span class="cls_009">show()</span><span class="cls_007"> method and add the code to instantiate the apple texture:</span></div>
<div style="position:absolute;left:147.60px;top:296.08px" class="cls_021"><span class="cls_021">apple = new Texture(Gdx.files.internal("apple.png"));</span></div>
<div style="position:absolute;left:108.00px;top:315.82px" class="cls_007"><span class="cls_007">Let's add a flag to determine if the apple is available:</span></div>
<div style="position:absolute;left:147.60px;top:336.76px" class="cls_021"><span class="cls_021">private boolean appleAvailable = false;</span></div>
<div style="position:absolute;left:147.60px;top:349.00px" class="cls_021"><span class="cls_021">private int appleX, appleY;</span></div>
<div style="position:absolute;left:108.00px;top:368.74px" class="cls_007"><span class="cls_007">This will control whether or not we want to place one. In the Snake game, the next</span></div>
<div style="position:absolute;left:108.00px;top:381.34px" class="cls_007"><span class="cls_007">apple appears after the current apple is eaten; therefore, we don't need any fancy</span></div>
<div style="position:absolute;left:108.00px;top:393.94px" class="cls_007"><span class="cls_007">timing mechanism to deal with it. Hence, the apple is not available at the start as we</span></div>
<div style="position:absolute;left:108.00px;top:406.54px" class="cls_007"><span class="cls_007">need to place one first. We also specify the variables that will contain the location of</span></div>
<div style="position:absolute;left:108.00px;top:419.14px" class="cls_007"><span class="cls_007">the apple.</span></div>
<div style="position:absolute;left:108.00px;top:440.38px" class="cls_007"><span class="cls_007">Finally, add the drawing code to the </span><span class="cls_009">render()</span><span class="cls_007"> method:</span></div>
<div style="position:absolute;left:169.20px;top:461.32px" class="cls_021"><span class="cls_021">if (appleAvailable) {</span></div>
<div style="position:absolute;left:190.80px;top:473.56px" class="cls_021"><span class="cls_021">batch.draw(apple, appleX, appleY);</span></div>
<div style="position:absolute;left:169.20px;top:485.80px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:505.54px" class="cls_007"><span class="cls_007">Here, we tell the game to only render the apple if it has been placed.</span></div>
<div style="position:absolute;left:108.00px;top:526.78px" class="cls_007"><span class="cls_007">Now we need to randomly place the apple on the screen:</span></div>
<div style="position:absolute;left:147.60px;top:547.72px" class="cls_021"><span class="cls_021">private void checkAndPlaceApple() {</span></div>
<div style="position:absolute;left:169.20px;top:559.96px" class="cls_021"><span class="cls_021">if (!appleAvailable) {</span></div>
<div style="position:absolute;left:190.80px;top:572.20px" class="cls_021"><span class="cls_021">do {</span></div>
<div style="position:absolute;left:212.40px;top:584.44px" class="cls_021"><span class="cls_021">appleX = MathUtils.random(Gdx.graphics.getWidth()</span></div>
<div style="position:absolute;left:212.40px;top:595.24px" class="cls_021"><span class="cls_021">/ SNAKE_MOVEMENT - 1) * SNAKE_MOVEMENT;</span></div>
<div style="position:absolute;left:212.40px;top:607.48px" class="cls_021"><span class="cls_021">appleY = MathUtils.random(Gdx.graphics.getHeight()</span></div>
<div style="position:absolute;left:212.40px;top:618.28px" class="cls_021"><span class="cls_021">/ SNAKE_MOVEMENT - 1) * SNAKE_MOVEMENT;</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 28 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:35288px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background046.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 2</span></div>
<div style="position:absolute;left:212.40px;top:114.01px" class="cls_021"><span class="cls_021">appleAvailable = true;</span></div>
<div style="position:absolute;left:190.80px;top:126.25px" class="cls_021"><span class="cls_021">} while (appleX == snakeX && appleY == snakeY);</span></div>
<div style="position:absolute;left:169.20px;top:138.49px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:147.60px;top:150.73px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:170.46px" class="cls_007"><span class="cls_007">The previous code listing shows the required rule for placing the apple on the</span></div>
<div style="position:absolute;left:108.00px;top:183.06px" class="cls_007"><span class="cls_007">screen. First, we check whether we need to place an apple, then we randomly pick</span></div>
<div style="position:absolute;left:108.00px;top:195.66px" class="cls_007"><span class="cls_007">a location on the screen, which is a multiple of 32, and we repick it if the picked</span></div>
<div style="position:absolute;left:108.00px;top:208.26px" class="cls_007"><span class="cls_007">location contains the snake. As we are working in a 0-indexed environment we need</span></div>
<div style="position:absolute;left:108.00px;top:220.86px" class="cls_007"><span class="cls_007">to subtract one (1-20 becomes 0-19 and 1-15 becomes 0-14). Add this method to the</span></div>
<div style="position:absolute;left:108.00px;top:233.46px" class="cls_009"><span class="cls_009">render()</span><span class="cls_007"> method after we move the snake:</span></div>
<div style="position:absolute;left:147.60px;top:254.40px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:147.60px;top:266.64px" class="cls_021"><span class="cls_021">public void render(float delta) {</span></div>
<div style="position:absolute;left:169.20px;top:278.88px" class="cls_021"><span class="cls_021">queryInput();</span></div>
<div style="position:absolute;left:169.20px;top:291.12px" class="cls_021"><span class="cls_021">timer -= delta;</span></div>
<div style="position:absolute;left:169.20px;top:303.36px" class="cls_021"><span class="cls_021">if (timer &lt;= 0) {</span></div>
<div style="position:absolute;left:190.80px;top:315.60px" class="cls_021"><span class="cls_021">timer = MOVE_TIME;</span></div>
<div style="position:absolute;left:190.80px;top:327.84px" class="cls_021"><span class="cls_021">moveSnake();</span></div>
<div style="position:absolute;left:190.80px;top:340.08px" class="cls_021"><span class="cls_021">checkForOutOfBounds();</span></div>
<div style="position:absolute;left:169.20px;top:352.32px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:169.20px;top:364.56px" class="cls_021"><span class="cls_021">checkAndPlaceApple();</span></div>
<div style="position:absolute;left:169.20px;top:376.80px" class="cls_021"><span class="cls_021">clearScreen();</span></div>
<div style="position:absolute;left:169.20px;top:389.04px" class="cls_021"><span class="cls_021">draw();</span></div>
<div style="position:absolute;left:147.60px;top:401.28px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:421.02px" class="cls_007"><span class="cls_007">You may have noticed two new methods creep in there, </span><span class="cls_009">clearScreen()</span><span class="cls_007"> and </span><span class="cls_009">draw()</span><span class="cls_007">.</span></div>
<div style="position:absolute;left:108.00px;top:433.62px" class="cls_007"><span class="cls_007">These are the result of a very quick refactor to neaten up our </span><span class="cls_009">render</span><span class="cls_007"> method. The</span></div>
<div style="position:absolute;left:108.00px;top:446.22px" class="cls_009"><span class="cls_009">clearScreen()</span><span class="cls_007"> method is as follows:</span></div>
<div style="position:absolute;left:147.60px;top:467.16px" class="cls_021"><span class="cls_021">private void clearScreen() {</span></div>
<div style="position:absolute;left:169.20px;top:479.40px" class="cls_021"><span class="cls_021">Gdx.gl.glClearColor(Color.BLACK.r, Color.BLACK.g,</span></div>
<div style="position:absolute;left:169.20px;top:490.20px" class="cls_021"><span class="cls_021">Color.BLACK.b, Color.BLACK.a);</span></div>
<div style="position:absolute;left:169.20px;top:502.44px" class="cls_021"><span class="cls_021">Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);</span></div>
<div style="position:absolute;left:147.60px;top:514.68px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:534.42px" class="cls_007"><span class="cls_007">The </span><span class="cls_009">draw()</span><span class="cls_007"> method is as follows:</span></div>
<div style="position:absolute;left:147.60px;top:555.36px" class="cls_021"><span class="cls_021">private void draw() {</span></div>
<div style="position:absolute;left:169.20px;top:567.60px" class="cls_021"><span class="cls_021">batch.begin();</span></div>
<div style="position:absolute;left:169.20px;top:579.84px" class="cls_021"><span class="cls_021">batch.draw(snakeHead, snakeX, snakeY);</span></div>
<div style="position:absolute;left:169.20px;top:592.08px" class="cls_021"><span class="cls_021">if (appleAvailable) {</span></div>
<div style="position:absolute;left:190.80px;top:604.32px" class="cls_021"><span class="cls_021">batch.draw(apple, appleX, appleY);</span></div>
<div style="position:absolute;left:169.20px;top:616.56px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:169.20px;top:628.80px" class="cls_021"><span class="cls_021">batch.end();</span></div>
<div style="position:absolute;left:147.60px;top:641.04px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 29 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:36090px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background047.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Let's Get These Snakes Out of This Book!</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Now run the project. Hopefully you will see something similar to the following</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">screenshot. The apple will be randomly placed on the screen every time you launch</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">the project.</span></div>
<div style="position:absolute;left:108.00px;top:469.15px" class="cls_007"><span class="cls_007">You may have noticed, however, that if you take control of the snake and head over</span></div>
<div style="position:absolute;left:108.00px;top:481.75px" class="cls_007"><span class="cls_007">to the apple, the snake will just glide over the top and the apple will remain. Not</span></div>
<div style="position:absolute;left:108.00px;top:494.35px" class="cls_007"><span class="cls_007">very game-like and not what we would want to happen.</span></div>
<div style="position:absolute;left:108.00px;top:515.59px" class="cls_007"><span class="cls_007">Let's fix this!</span></div>
<div style="position:absolute;left:108.00px;top:536.83px" class="cls_007"><span class="cls_007">We can do this quite simply by checking whether the apple and the snake head</span></div>
<div style="position:absolute;left:108.00px;top:549.43px" class="cls_007"><span class="cls_007">coordinates match:</span></div>
<div style="position:absolute;left:147.60px;top:570.37px" class="cls_021"><span class="cls_021">private void checkAppleCollision() {</span></div>
<div style="position:absolute;left:169.20px;top:582.61px" class="cls_021"><span class="cls_021">if (appleAvailable && appleX == snakeX && appleY == snakeY) {</span></div>
<div style="position:absolute;left:190.80px;top:594.85px" class="cls_021"><span class="cls_021">appleAvailable = false;</span></div>
<div style="position:absolute;left:169.20px;top:607.09px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:147.60px;top:619.33px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 30 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:36892px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background048.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 2</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">If they do collide, we set the </span><span class="cls_009">appleAvailable</span><span class="cls_007"> flag to </span><span class="cls_009">false</span><span class="cls_007">. This will trigger a</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">respawn of the apple.</span></div>
<div style="position:absolute;left:108.00px;top:148.33px" class="cls_007"><span class="cls_007">Add the </span><span class="cls_009">checkAppleCollision()</span><span class="cls_007"> method to the </span><span class="cls_009">render()</span><span class="cls_007"> method above</span></div>
<div style="position:absolute;left:108.00px;top:160.93px" class="cls_009"><span class="cls_009">checkAndPlaceApple()</span><span class="cls_007">.</span></div>
<div style="position:absolute;left:108.00px;top:182.18px" class="cls_007"><span class="cls_007">Run the project, and you will now find that the apple respawns every time the</span></div>
<div style="position:absolute;left:108.00px;top:194.78px" class="cls_007"><span class="cls_007">snakes head collides with it.</span></div>
<div style="position:absolute;left:108.00px;top:216.02px" class="cls_007"><span class="cls_007">On to the final part of this chapter. We need to make the snake grow in length every</span></div>
<div style="position:absolute;left:108.00px;top:228.62px" class="cls_007"><span class="cls_007">time it eats an apple.</span></div>
<div style="position:absolute;left:108.00px;top:261.11px" class="cls_019"><span class="cls_019">Increasing the length of the snake</span></div>
<div style="position:absolute;left:108.00px;top:286.09px" class="cls_007"><span class="cls_007">We have the snake eating the apple; however, there aren't any consequences to this.</span></div>
<div style="position:absolute;left:108.00px;top:298.69px" class="cls_007"><span class="cls_007">As a part of the game, we need to make the snake increase the length of his body for</span></div>
<div style="position:absolute;left:108.00px;top:311.29px" class="cls_007"><span class="cls_007">each apple he eats. Our requirements for this are as follows:</span></div>
<div style="position:absolute;left:126.00px;top:332.54px" class="cls_007"><span class="cls_007">•  Add a body part to the snake when it eats an apple</span></div>
<div style="position:absolute;left:126.00px;top:349.45px" class="cls_007"><span class="cls_007">•  As the snake moves, the body parts should follow</span></div>
<div style="position:absolute;left:126.00px;top:366.37px" class="cls_007"><span class="cls_007">•  There will be multiple body parts</span></div>
<div style="position:absolute;left:107.99px;top:387.61px" class="cls_007"><span class="cls_007">First, let's create a class that will contain the length of the snake's body. This can take</span></div>
<div style="position:absolute;left:107.99px;top:400.21px" class="cls_007"><span class="cls_007">the form of an inner class for now:</span></div>
<div style="position:absolute;left:147.60px;top:421.15px" class="cls_021"><span class="cls_021">private class BodyPart {</span></div>
<div style="position:absolute;left:169.20px;top:445.63px" class="cls_021"><span class="cls_021">private int x, y;</span></div>
<div style="position:absolute;left:169.20px;top:457.87px" class="cls_021"><span class="cls_021">private Texture texture;</span></div>
<div style="position:absolute;left:169.20px;top:482.35px" class="cls_021"><span class="cls_021">public BodyPart(Texture texture) {</span></div>
<div style="position:absolute;left:190.80px;top:494.59px" class="cls_021"><span class="cls_021">this.texture = texture;</span></div>
<div style="position:absolute;left:169.20px;top:506.83px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:169.20px;top:531.31px" class="cls_021"><span class="cls_021">public void updateBodyPosition(int x, int y) {</span></div>
<div style="position:absolute;left:190.80px;top:543.55px" class="cls_021"><span class="cls_021">this.x = x;</span></div>
<div style="position:absolute;left:190.80px;top:555.79px" class="cls_021"><span class="cls_021">this.y = y;</span></div>
<div style="position:absolute;left:169.20px;top:568.03px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:169.20px;top:592.51px" class="cls_021"><span class="cls_021">public void draw(Batch batch) {</span></div>
<div style="position:absolute;left:190.80px;top:604.75px" class="cls_021"><span class="cls_021">if (!(x == snakeX && y == snakeY)) batch.draw(texture,</span></div>
<div style="position:absolute;left:190.80px;top:615.55px" class="cls_021"><span class="cls_021">x, y);</span></div>
<div style="position:absolute;left:169.20px;top:627.79px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:147.60px;top:640.03px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 31 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:37694px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background049.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Let's Get These Snakes Out of This Book!</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">As you can see, it contains the </span><span class="cls_009">x</span><span class="cls_007"> and </span><span class="cls_009">y</span><span class="cls_007"> components along with the texture to be</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">drawn. It also has a </span><span class="cls_009">draw()</span><span class="cls_007"> method which will only draw the texture if the body</span></div>
<div style="position:absolute;left:108.01px;top:139.69px" class="cls_007"><span class="cls_007">part is not in the same location as the snake's head. This is important for when you</span></div>
<div style="position:absolute;left:108.01px;top:152.29px" class="cls_007"><span class="cls_007">collect the apple; you wouldn't want the body part showing over the head before the</span></div>
<div style="position:absolute;left:108.01px;top:164.89px" class="cls_007"><span class="cls_007">snake moves.</span></div>
<div style="position:absolute;left:108.01px;top:186.14px" class="cls_007"><span class="cls_007">Next, let's create the texture:</span></div>
<div style="position:absolute;left:126.00px;top:207.07px" class="cls_021"><span class="cls_021">private Texture snakeBody;</span></div>
<div style="position:absolute;left:108.00px;top:226.81px" class="cls_007"><span class="cls_007">Again in our </span><span class="cls_009">show()</span><span class="cls_007"> method, let's add code to instantiate the object:</span></div>
<div style="position:absolute;left:126.00px;top:247.75px" class="cls_021"><span class="cls_021">snakeBody = new Texture(Gdx.files.internal("snakeBody.png"));</span></div>
<div style="position:absolute;left:108.00px;top:267.49px" class="cls_007"><span class="cls_007">Let's create an array of body parts:</span></div>
<div style="position:absolute;left:126.00px;top:288.43px" class="cls_021"><span class="cls_021">private Array&lt;BodyPart> bodyParts = new Array&lt;BodyPart>();</span></div>
<div style="position:absolute;left:108.00px;top:308.17px" class="cls_007"><span class="cls_007">Here, we are using LibGDX's built-in </span><span class="cls_009">Array&lt;T></span><span class="cls_007"> class. It has some useful methods for</span></div>
<div style="position:absolute;left:108.00px;top:320.77px" class="cls_007"><span class="cls_007">accessing the the first and last element of the array that we will need shortly.</span></div>
<div style="position:absolute;left:108.00px;top:342.02px" class="cls_007"><span class="cls_007">Now, when that part is set up, we can add a body part when a collision between the</span></div>
<div style="position:absolute;left:108.00px;top:354.62px" class="cls_007"><span class="cls_007">snakes head and apple occurs:</span></div>
<div style="position:absolute;left:147.60px;top:375.55px" class="cls_021"><span class="cls_021">private void checkAppleCollision() {</span></div>
<div style="position:absolute;left:169.20px;top:387.79px" class="cls_021"><span class="cls_021">if (appleAvailable && appleX == snakeX && appleY == snakeY) {</span></div>
<div style="position:absolute;left:190.80px;top:400.03px" class="cls_021"><span class="cls_021">BodyPart bodyPart = new BodyPart(snakeBody);</span></div>
<div style="position:absolute;left:190.80px;top:412.27px" class="cls_021"><span class="cls_021">bodyPart.updateBodyPosition(snakeX, snakeY);</span></div>
<div style="position:absolute;left:190.80px;top:424.51px" class="cls_021"><span class="cls_021">bodyParts.insert(0,bodyPart);</span></div>
<div style="position:absolute;left:190.80px;top:436.75px" class="cls_021"><span class="cls_021">appleAvailable = false;</span></div>
<div style="position:absolute;left:169.20px;top:448.99px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:147.60px;top:461.23px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:480.97px" class="cls_007"><span class="cls_007">When a collision is detected, we create a new body part, set its position, and insert</span></div>
<div style="position:absolute;left:108.00px;top:493.57px" class="cls_007"><span class="cls_007">it at the front of the array. We are reusing the texture for the body parts, so we can</span></div>
<div style="position:absolute;left:108.00px;top:506.17px" class="cls_007"><span class="cls_007">reduce our memory footprint by not loading it multiple times. We can do this as the</span></div>
<div style="position:absolute;left:108.00px;top:518.77px" class="cls_007"><span class="cls_007">drawing of the texture doesn't require it to be a different instance of the texture every</span></div>
<div style="position:absolute;left:108.00px;top:531.37px" class="cls_007"><span class="cls_007">time we draw it in the same render cycle.</span></div>
<div style="position:absolute;left:108.00px;top:552.62px" class="cls_007"><span class="cls_007">Next, we need to update the body parts every time the snake moves; if we don't do</span></div>
<div style="position:absolute;left:108.00px;top:565.22px" class="cls_007"><span class="cls_007">this, they will remain in their place for all eternity. Let's add the following code to</span></div>
<div style="position:absolute;left:108.00px;top:577.82px" class="cls_007"><span class="cls_007">our game:</span></div>
<div style="position:absolute;left:147.60px;top:598.75px" class="cls_021"><span class="cls_021">private int snakeXBeforeUpdate = 0, snakeYBeforeUpdate = 0;</span></div>
<div style="position:absolute;left:147.60px;top:610.99px" class="cls_021"><span class="cls_021">private void moveSnake() {</span></div>
<div style="position:absolute;left:169.20px;top:623.23px" class="cls_021"><span class="cls_021">snakeXBeforeUpdate = snakeX;</span></div>
<div style="position:absolute;left:169.20px;top:635.47px" class="cls_021"><span class="cls_021">snakeYBeforeUpdate = snakeY;</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 32 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:38496px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background050.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 2</span></div>
<div style="position:absolute;left:147.60px;top:114.01px" class="cls_021"><span class="cls_021">// Rest of method omitted</span></div>
<div style="position:absolute;left:147.60px;top:126.25px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:147.60px;top:138.49px" class="cls_021"><span class="cls_021">private void updateBodyPartsPosition() {</span></div>
<div style="position:absolute;left:169.20px;top:150.73px" class="cls_021"><span class="cls_021">if (bodyParts.size > 0) {</span></div>
<div style="position:absolute;left:190.80px;top:162.97px" class="cls_021"><span class="cls_021">BodyPart bodyPart = bodyParts.removeIndex(0);</span></div>
<div style="position:absolute;left:190.80px;top:175.21px" class="cls_021"><span class="cls_021">bodyPart.updateBodyPosition(snakeXBeforeUpdate,</span></div>
<div style="position:absolute;left:190.80px;top:186.01px" class="cls_021"><span class="cls_021">snakeYBeforeUpdate);</span></div>
<div style="position:absolute;left:190.80px;top:198.25px" class="cls_021"><span class="cls_021">bodyParts.add(bodyPart);</span></div>
<div style="position:absolute;left:169.20px;top:210.49px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:147.60px;top:222.73px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:242.46px" class="cls_007"><span class="cls_007">Right, first we need to keep track of the previous position of the snake—the reason</span></div>
<div style="position:absolute;left:108.00px;top:255.06px" class="cls_007"><span class="cls_007">for this will be clear in a minute. Then we have the </span><span class="cls_009">updateBodyPartsPosition()</span></div>
<div style="position:absolute;left:108.00px;top:267.66px" class="cls_007"><span class="cls_007">method, where we take the front element of the array, which would be the body part</span></div>
<div style="position:absolute;left:108.00px;top:280.26px" class="cls_007"><span class="cls_007">that is the tail part of the snake, and we remove it from the array. We then update</span></div>
<div style="position:absolute;left:108.00px;top:292.86px" class="cls_007"><span class="cls_007">the position and add it to the back of the array, which is the front of the snake. This</span></div>
<div style="position:absolute;left:108.00px;top:305.46px" class="cls_007"><span class="cls_007">means we are only updating the one body part as the others won't need to move</span></div>
<div style="position:absolute;left:108.00px;top:318.06px" class="cls_007"><span class="cls_007">unless they are the tail of the snake.</span></div>
<div style="position:absolute;left:108.00px;top:339.30px" class="cls_007"><span class="cls_007">Add a call to this method after we check whether the snake is out of bounds:</span></div>
<div style="position:absolute;left:190.80px;top:360.24px" class="cls_021"><span class="cls_021">// render method</span></div>
<div style="position:absolute;left:136.80px;top:372.48px" class="cls_021"><span class="cls_021">moveSnake();</span></div>
<div style="position:absolute;left:136.80px;top:384.72px" class="cls_021"><span class="cls_021">checkForOutOfBounds();</span></div>
<div style="position:absolute;left:136.80px;top:396.96px" class="cls_021"><span class="cls_021">updateBodyPartsPosition();</span></div>
<div style="position:absolute;left:108.00px;top:416.70px" class="cls_007"><span class="cls_007">Before we run the project and see what we have created, we need to update our</span></div>
<div style="position:absolute;left:108.00px;top:429.30px" class="cls_009"><span class="cls_009">draw()</span><span class="cls_007"> method to draw out the body of the snake:</span></div>
<div style="position:absolute;left:126.00px;top:450.24px" class="cls_021"><span class="cls_021">private void draw() {</span></div>
<div style="position:absolute;left:136.80px;top:462.48px" class="cls_021"><span class="cls_021">batch.begin();</span></div>
<div style="position:absolute;left:136.80px;top:474.72px" class="cls_021"><span class="cls_021">batch.draw(snakeHead, snakeX, snakeY);</span></div>
<div style="position:absolute;left:136.80px;top:486.96px" class="cls_021"><span class="cls_021">for (BodyPart bodyPart : bodyParts) {</span></div>
<div style="position:absolute;left:147.60px;top:499.20px" class="cls_021"><span class="cls_021">bodyPart.draw(batch);</span></div>
<div style="position:absolute;left:136.80px;top:511.44px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:523.68px" class="cls_021"><span class="cls_021">if (appleAvailable) {</span></div>
<div style="position:absolute;left:147.60px;top:535.92px" class="cls_021"><span class="cls_021">batch.draw(apple, appleX, appleY);</span></div>
<div style="position:absolute;left:136.80px;top:548.16px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:560.40px" class="cls_021"><span class="cls_021">batch.end();</span></div>
<div style="position:absolute;left:126.00px;top:572.64px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 33 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:39298px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background051.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Let's Get These Snakes Out of This Book!</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">With that in place, if you run the project now, you will see that the snake grows</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">every time it eats an apple.</span></div>
<div style="position:absolute;left:108.00px;top:423.44px" class="cls_019"><span class="cls_019">Summary</span></div>
<div style="position:absolute;left:108.00px;top:448.42px" class="cls_007"><span class="cls_007">In this chapter, we looked at setting up our game to use the screen-based system,</span></div>
<div style="position:absolute;left:108.00px;top:461.02px" class="cls_007"><span class="cls_007">we then implemented our own game using the </span><span class="cls_009">Game</span><span class="cls_007"> class. We looked at the render</span></div>
<div style="position:absolute;left:108.01px;top:473.62px" class="cls_007"><span class="cls_007">cycle and the loaded textures and handled input. We have the makings of a very</span></div>
<div style="position:absolute;left:108.01px;top:486.22px" class="cls_007"><span class="cls_007">good game!</span></div>
<div style="position:absolute;left:108.01px;top:507.46px" class="cls_007"><span class="cls_007">Coming up, we will take this game further and make it complete. We will do this</span></div>
<div style="position:absolute;left:108.01px;top:520.06px" class="cls_007"><span class="cls_007">by adding the collision of the snake with itself, creating a gameover scenario, and</span></div>
<div style="position:absolute;left:108.01px;top:532.66px" class="cls_007"><span class="cls_007">introducing a scoring system.</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 34 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:40100px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background052.jpg" width=612 height=792></div>
<div style="position:absolute;left:174.40px;top:218.96px" class="cls_014"><span class="cls_014">Making That Snake Slick</span></div>
<div style="position:absolute;left:108.00px;top:272.66px" class="cls_007"><span class="cls_007">In this chapter, we will take our Snake project further towards being a complete</span></div>
<div style="position:absolute;left:108.00px;top:285.26px" class="cls_007"><span class="cls_007">game. This will include more on collisions, restarting the game, and maintaining</span></div>
<div style="position:absolute;left:108.00px;top:297.86px" class="cls_007"><span class="cls_007">a high score. You will also learn how to use LibGDX to help in making it easier to</span></div>
<div style="position:absolute;left:108.00px;top:310.46px" class="cls_007"><span class="cls_007">debug your game along with how to handle multiple screen sizes.</span></div>
<div style="position:absolute;left:108.00px;top:331.70px" class="cls_007"><span class="cls_007">The following will be covered in this chapter:</span></div>
<div style="position:absolute;left:126.00px;top:352.94px" class="cls_007"><span class="cls_007">•  Introducing the </span><span class="cls_009">ShapeRenderer</span><span class="cls_007"> class</span></div>
<div style="position:absolute;left:126.00px;top:369.86px" class="cls_007"><span class="cls_007">•  More on collisions</span></div>
<div style="position:absolute;left:126.00px;top:386.77px" class="cls_007"><span class="cls_007">•  Game state</span></div>
<div style="position:absolute;left:126.00px;top:403.69px" class="cls_007"><span class="cls_007">•  High score</span></div>
<div style="position:absolute;left:126.00px;top:420.60px" class="cls_007"><span class="cls_007">•  Handling different screen sizes</span></div>
<div style="position:absolute;left:108.00px;top:453.12px" class="cls_019"><span class="cls_019">Introducing the ShapeRenderer class</span></div>
<div style="position:absolute;left:108.00px;top:478.10px" class="cls_007"><span class="cls_007">You are probably wondering why we are not diving straight into making more</span></div>
<div style="position:absolute;left:108.00px;top:490.70px" class="cls_007"><span class="cls_007">improvements to the game. Well, it is because I would like to show you something</span></div>
<div style="position:absolute;left:108.00px;top:503.30px" class="cls_007"><span class="cls_007">that will make your life easier when you start making more games, especially if you</span></div>
<div style="position:absolute;left:108.00px;top:515.90px" class="cls_007"><span class="cls_007">don't have any art ready for the game you are making and you want to see things</span></div>
<div style="position:absolute;left:108.00px;top:528.50px" class="cls_007"><span class="cls_007">come to life sooner. As an eager game developer myself, I know what that is like; you</span></div>
<div style="position:absolute;left:108.00px;top:541.10px" class="cls_007"><span class="cls_007">have an idea and you want to bring it to life faster than your artist can design, draw,</span></div>
<div style="position:absolute;left:108.00px;top:553.70px" class="cls_007"><span class="cls_007">and deliver. Alternatively, in the case of our Snake game, we can draw the grid that</span></div>
<div style="position:absolute;left:108.00px;top:566.30px" class="cls_007"><span class="cls_007">our snake moves in.</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 35 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:40902px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background053.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Making That Snake Slick</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">So, I introduce you to the </span><span class="cls_009">ShapeRenderer</span><span class="cls_007"> class; its job is simple. According</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">to </span><A HREF="http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/graphics/glutils/ShapeRenderer.html">http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/</A> </span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_009"><span class="cls_009"> </span><A HREF="http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/graphics/glutils/ShapeRenderer.html">gdx/graphics/glutils/ShapeRenderer.html</A> <span class="cls_007">, the </span><span class="cls_009">ShapeRenderer</span><span class="cls_007"> class does</span></div>
<div style="position:absolute;left:108.00px;top:152.29px" class="cls_007"><span class="cls_007">the following:</span></div>
<div style="position:absolute;left:129.60px;top:173.89px" class="cls_020"><span class="cls_020">"Renders points, lines, shape outlines and filled shapes."</span></div>
<div style="position:absolute;left:108.00px;top:195.49px" class="cls_007"><span class="cls_007">This means we will have the ability to draw boxes on the screen. Let's put this into</span></div>
<div style="position:absolute;left:108.00px;top:208.09px" class="cls_007"><span class="cls_007">our Snake game so you can see it in action.</span></div>
<div style="position:absolute;left:108.00px;top:238.03px" class="cls_025"><span class="cls_025">Adding the ShapeRenderer class</span></div>
<div style="position:absolute;left:108.00px;top:261.01px" class="cls_007"><span class="cls_007">The first thing to do is to add the </span><span class="cls_009">ShapeRenderer</span><span class="cls_007"> class to our </span><span class="cls_009">GameScreen</span><span class="cls_007"> class.</span></div>
<div style="position:absolute;left:108.01px;top:273.61px" class="cls_007"><span class="cls_007">The following code shows how to add and create a </span><span class="cls_009">ShapeRenderer</span><span class="cls_007"> object:</span></div>
<div style="position:absolute;left:126.00px;top:294.55px" class="cls_021"><span class="cls_021">private ShapeRenderer shapeRenderer;</span></div>
<div style="position:absolute;left:136.80px;top:319.03px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:136.80px;top:331.27px" class="cls_021"><span class="cls_021">public void show() {</span></div>
<div style="position:absolute;left:147.60px;top:343.51px" class="cls_021"><span class="cls_021">shapeRenderer = new ShapeRenderer();</span></div>
<div style="position:absolute;left:147.60px;top:355.75px" class="cls_021"><span class="cls_021">// Other code omitted for now</span></div>
<div style="position:absolute;left:136.80px;top:367.99px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:387.73px" class="cls_007"><span class="cls_007">We now have a </span><span class="cls_009">ShapeRenderer</span><span class="cls_007"> object ready to go!</span></div>
<div style="position:absolute;left:108.00px;top:417.67px" class="cls_025"><span class="cls_025">Drawing with the ShapeRenderer class</span></div>
<div style="position:absolute;left:108.00px;top:440.65px" class="cls_007"><span class="cls_007">Well, it is great that we have it, but how do we use it? The </span><span class="cls_009">ShapeRenderer</span><span class="cls_007"> class</span></div>
<div style="position:absolute;left:108.01px;top:453.25px" class="cls_007"><span class="cls_007">has quite a few drawing methods available, giving it the ability to draw arcs, circles,</span></div>
<div style="position:absolute;left:108.01px;top:465.85px" class="cls_007"><span class="cls_007">cones, rectangles, lines, and more. However, right now we are only interested in</span></div>
<div style="position:absolute;left:108.01px;top:478.45px" class="cls_007"><span class="cls_007">using it for drawing rectangles.</span></div>
<div style="position:absolute;left:108.01px;top:499.69px" class="cls_007"><span class="cls_007">When using the </span><span class="cls_009">ShaperRenderer</span><span class="cls_007"> class, much like the </span><span class="cls_009">SpriteBatch</span><span class="cls_007"> class, we need to</span></div>
<div style="position:absolute;left:108.00px;top:512.29px" class="cls_007"><span class="cls_007">call the drawing methods in a particular order, which is as follows:</span></div>
<div style="position:absolute;left:126.00px;top:533.54px" class="cls_007"><span class="cls_007">1.  Begin a new batch.</span></div>
<div style="position:absolute;left:126.00px;top:550.45px" class="cls_007"><span class="cls_007">2.  Draw our shapes.</span></div>
<div style="position:absolute;left:126.00px;top:567.37px" class="cls_007"><span class="cls_007">3.  Finish our batch and ensure they get rendered.</span></div>
<div style="position:absolute;left:107.99px;top:588.61px" class="cls_007"><span class="cls_007">First, let's create a method to draw our grid; again, this is all happening in our</span></div>
<div style="position:absolute;left:108.00px;top:601.21px" class="cls_009"><span class="cls_009">GameScreen</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:142.20px;top:622.15px" class="cls_021"><span class="cls_021">private void drawGrid() {</span></div>
<div style="position:absolute;left:126.00px;top:634.39px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 36 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:41704px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background054.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 3</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Let's now add our begin and end calls:</span></div>
<div style="position:absolute;left:126.00px;top:135.43px" class="cls_021"><span class="cls_021">private void drawGrid() {</span></div>
<div style="position:absolute;left:136.80px;top:147.67px" class="cls_021"><span class="cls_021">shapeRenderer.begin(ShapeRenderer.ShapeType.Line);</span></div>
<div style="position:absolute;left:136.80px;top:159.91px" class="cls_021"><span class="cls_021">shapeRenderer.end();</span></div>
<div style="position:absolute;left:126.00px;top:172.15px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:191.89px" class="cls_007"><span class="cls_007">You may have noticed that the begin method call takes a parameter of type</span></div>
<div style="position:absolute;left:108.00px;top:204.49px" class="cls_009"><span class="cls_009">ShapeRenderer.ShapeType</span><span class="cls_007">. This is because we need to tell the </span><span class="cls_009">ShapeRenderer</span></div>
<div style="position:absolute;left:108.00px;top:217.09px" class="cls_007"><span class="cls_007">object what type of shape we are going to render. We only want to draw the outline</span></div>
<div style="position:absolute;left:108.00px;top:229.69px" class="cls_007"><span class="cls_007">of our shapes, or rectangles in our case, so we can use the </span><span class="cls_009">Line</span><span class="cls_007"> type. There are others</span></div>
<div style="position:absolute;left:108.00px;top:242.29px" class="cls_007"><span class="cls_007">as well; feel free to experiment to see what happens if you choose one of the others!</span></div>
<div style="position:absolute;left:108.00px;top:263.54px" class="cls_007"><span class="cls_007">Next, we need to draw our grid; to do this, we need to know what our grid is. Our</span></div>
<div style="position:absolute;left:108.00px;top:276.14px" class="cls_007"><span class="cls_007">grid comprises of squares that are 32x32 pixels in size, and we will want to render</span></div>
<div style="position:absolute;left:108.00px;top:288.74px" class="cls_007"><span class="cls_007">one of these squares ever 32 pixels both horizontally and vertically. We can achieve</span></div>
<div style="position:absolute;left:108.00px;top:301.34px" class="cls_007"><span class="cls_007">this by two simple loops. The following code shows this implementation:</span></div>
<div style="position:absolute;left:126.00px;top:322.27px" class="cls_021"><span class="cls_021">private void drawGrid() {</span></div>
<div style="position:absolute;left:136.80px;top:334.51px" class="cls_021"><span class="cls_021">shapeRenderer.begin(ShapeRenderer.ShapeType.Line);</span></div>
<div style="position:absolute;left:136.80px;top:346.75px" class="cls_021"><span class="cls_021">for (int x = 0; x &lt; Gdx.graphics.getWidth(); x += GRID_CELL) {</span></div>
<div style="position:absolute;left:147.60px;top:358.99px" class="cls_021"><span class="cls_021">for (int y = 0; y &lt; Gdx.graphics.getHeight(); y += GRID_CELL) {</span></div>
<div style="position:absolute;left:158.40px;top:371.23px" class="cls_021"><span class="cls_021">shapeRenderer.rect(x,y, GRID_CELL, GRID_CELL);</span></div>
<div style="position:absolute;left:158.40px;top:383.47px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:147.60px;top:395.71px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:407.95px" class="cls_021"><span class="cls_021">shapeRenderer.end();</span></div>
<div style="position:absolute;left:126.00px;top:420.19px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:439.93px" class="cls_007"><span class="cls_007">The call itself to </span><span class="cls_009">ShapeRenderer</span><span class="cls_007"> is fairly self-explanatory:</span></div>
<div style="position:absolute;left:126.00px;top:460.87px" class="cls_021"><span class="cls_021">shapeRenderer.rect(x,y, GRID_CELL, GRID_CELL);</span></div>
<div style="position:absolute;left:108.00px;top:480.61px" class="cls_007"><span class="cls_007">It takes four parameters, that is, the </span><span class="cls_020">x</span><span class="cls_007"> and </span><span class="cls_020">y</span><span class="cls_007"> coordinates and the width and height.</span></div>
<div style="position:absolute;left:108.00px;top:493.21px" class="cls_007"><span class="cls_007">Since we want a square, our width and height values will be the same.</span></div>
<div style="position:absolute;left:108.00px;top:514.46px" class="cls_007"><span class="cls_007">We have also introduced a constant field to define the size of our cell:</span></div>
<div style="position:absolute;left:126.00px;top:535.39px" class="cls_021"><span class="cls_021">private static final int GRID_CELL = 32;</span></div>
<div style="position:absolute;left:108.00px;top:555.13px" class="cls_007"><span class="cls_007">Finally, we just need to update our </span><span class="cls_009">render()</span><span class="cls_007"> method so that it calls our</span></div>
<div style="position:absolute;left:108.00px;top:567.73px" class="cls_009"><span class="cls_009">drawGrid()</span><span class="cls_007"> method:</span></div>
<div style="position:absolute;left:126.00px;top:588.67px" class="cls_021"><span class="cls_021">public void render(float delta) {</span></div>
<div style="position:absolute;left:158.40px;top:600.91px" class="cls_021"><span class="cls_021">// Other code omitted for now</span></div>
<div style="position:absolute;left:136.80px;top:613.15px" class="cls_021"><span class="cls_021">drawGrid();</span></div>
<div style="position:absolute;left:136.80px;top:625.39px" class="cls_021"><span class="cls_021">draw();</span></div>
<div style="position:absolute;left:126.00px;top:637.63px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 37 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:42506px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background055.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Making That Snake Slick</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Now, when you run your project, you will see the following:</span></div>
<div style="position:absolute;left:108.00px;top:426.48px" class="cls_007"><span class="cls_007">We now have a working grid!</span></div>
<div style="position:absolute;left:108.00px;top:456.42px" class="cls_025"><span class="cls_025">Final thoughts on the ShapeRenderer class</span></div>
<div style="position:absolute;left:108.00px;top:479.40px" class="cls_007"><span class="cls_007">As I mentioned earlier in this chapter, the </span><span class="cls_009">ShaperRenderer</span><span class="cls_007"> class is very useful when</span></div>
<div style="position:absolute;left:108.00px;top:492.00px" class="cls_007"><span class="cls_007">you want to make a game and you do not have your art assets ready; you want to</span></div>
<div style="position:absolute;left:108.00px;top:504.60px" class="cls_007"><span class="cls_007">quickly prototype the game; or, in our case, you want to make things a bit clearer in</span></div>
<div style="position:absolute;left:108.00px;top:517.20px" class="cls_007"><span class="cls_007">the game you're currently creating.</span></div>
<div style="position:absolute;left:108.00px;top:538.44px" class="cls_007"><span class="cls_007">Finally, another useful aspect is being able to set the color of the shapes that are</span></div>
<div style="position:absolute;left:108.00px;top:551.04px" class="cls_007"><span class="cls_007">drawn. The method call is </span><span class="cls_009">setColor()</span><span class="cls_007"> and I use it do draw different game objects</span></div>
<div style="position:absolute;left:108.00px;top:563.64px" class="cls_007"><span class="cls_007">in different colors, so I can tell them apart!</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 38 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:43308px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background056.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 3</span></div>
<div style="position:absolute;left:108.00px;top:111.92px" class="cls_019"><span class="cls_019">More on collisions</span></div>
<div style="position:absolute;left:108.00px;top:136.90px" class="cls_007"><span class="cls_007">You might have found while playing our little game that you can make the snake</span></div>
<div style="position:absolute;left:108.00px;top:149.50px" class="cls_007"><span class="cls_007">turn back on itself or it even goes through itself. Anyone who remembers the original</span></div>
<div style="position:absolute;left:108.00px;top:162.10px" class="cls_007"><span class="cls_007">will know that this results in an immediate game over!</span></div>
<div style="position:absolute;left:108.00px;top:183.34px" class="cls_007"><span class="cls_007">What we are going to look at now can essentially be split into two parts. First, we</span></div>
<div style="position:absolute;left:108.00px;top:195.94px" class="cls_007"><span class="cls_007">will fix the snake's ability to slither back on itself, as seen in the following screenshot:</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 39 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:44110px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background057.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Making That Snake Slick</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Second, we will look at stopping the game when the snake collides with another part</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">of its body, as seen in the following screenshot:</span></div>
<div style="position:absolute;left:108.00px;top:446.69px" class="cls_025"><span class="cls_025">Stopping the doubleback</span></div>
<div style="position:absolute;left:108.00px;top:469.67px" class="cls_007"><span class="cls_007">With our snake slithering around, if you change the direction of the snake and you</span></div>
<div style="position:absolute;left:108.00px;top:482.27px" class="cls_007"><span class="cls_007">tell it to go back the way it is traveling, it will slide right through itself. This isn't how</span></div>
<div style="position:absolute;left:108.00px;top:494.87px" class="cls_007"><span class="cls_007">the game should be!</span></div>
<div style="position:absolute;left:108.00px;top:516.11px" class="cls_007"><span class="cls_007">Essentially, what we want to do is, if the player tells the snake to change its</span></div>
<div style="position:absolute;left:108.00px;top:528.71px" class="cls_007"><span class="cls_007">direction and move in the exact opposite direction, ignore that input command.</span></div>
<div style="position:absolute;left:108.00px;top:549.96px" class="cls_007"><span class="cls_007">First, we will create a method to do this precise check:</span></div>
<div style="position:absolute;left:126.00px;top:570.89px" class="cls_021"><span class="cls_021">private void updateIfNotOppositeDirection(int newSnakeDirection, int</span></div>
<div style="position:absolute;left:126.00px;top:581.69px" class="cls_021"><span class="cls_021">oppositeDirection) {</span></div>
<div style="position:absolute;left:142.20px;top:593.93px" class="cls_021"><span class="cls_021">if (snakeDirection != oppositeDirection) snakeDirection =</span></div>
<div style="position:absolute;left:126.00px;top:604.73px" class="cls_021"><span class="cls_021">newSnakeDirection;</span></div>
<div style="position:absolute;left:126.00px;top:616.97px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 40 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:44912px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background058.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 3</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">What we will pass into this method is the new direction that we would like to send</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">the snake in, but then also the opposite direction (left and right or up and down) so</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">we make the check and only update the direction if it isn't the opposite.</span></div>
<div style="position:absolute;left:108.00px;top:160.93px" class="cls_007"><span class="cls_007">Next, we create a method that will call </span><span class="cls_009">updateIfNotOppositeDirection()</span><span class="cls_007"> with all</span></div>
<div style="position:absolute;left:108.00px;top:173.53px" class="cls_007"><span class="cls_007">the possible combinations. We are lucky there are only four!</span></div>
<div style="position:absolute;left:108.00px;top:194.78px" class="cls_007"><span class="cls_007">The following method shows how we will do this:</span></div>
<div style="position:absolute;left:126.00px;top:215.71px" class="cls_021"><span class="cls_021">private void updateDirection(int newSnakeDirection) {</span></div>
<div style="position:absolute;left:136.80px;top:227.95px" class="cls_021"><span class="cls_021">if (!directionSet && snakeDirection != newSnakeDirection) {</span></div>
<div style="position:absolute;left:153.00px;top:240.19px" class="cls_021"><span class="cls_021">directionSet = true;</span></div>
<div style="position:absolute;left:153.00px;top:252.43px" class="cls_021"><span class="cls_021">switch (newSnakeDirection) {</span></div>
<div style="position:absolute;left:163.80px;top:264.67px" class="cls_021"><span class="cls_021">case LEFT: {</span></div>
<div style="position:absolute;left:180.00px;top:276.91px" class="cls_021"><span class="cls_021">updateIfNotOppositeDirection(newSnakeDirection, RIGHT);</span></div>
<div style="position:absolute;left:163.80px;top:289.15px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:163.80px;top:301.39px" class="cls_021"><span class="cls_021">break;</span></div>
<div style="position:absolute;left:163.80px;top:313.63px" class="cls_021"><span class="cls_021">case RIGHT: {</span></div>
<div style="position:absolute;left:180.00px;top:325.87px" class="cls_021"><span class="cls_021">updateIfNotOppositeDirection(newSnakeDirection, LEFT);</span></div>
<div style="position:absolute;left:163.80px;top:338.11px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:163.80px;top:350.35px" class="cls_021"><span class="cls_021">break;</span></div>
<div style="position:absolute;left:163.80px;top:362.59px" class="cls_021"><span class="cls_021">case UP: {</span></div>
<div style="position:absolute;left:180.00px;top:374.83px" class="cls_021"><span class="cls_021">updateIfNotOppositeDirection(newSnakeDirection, DOWN);</span></div>
<div style="position:absolute;left:163.80px;top:387.07px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:163.80px;top:399.31px" class="cls_021"><span class="cls_021">break;</span></div>
<div style="position:absolute;left:163.80px;top:411.55px" class="cls_021"><span class="cls_021">case DOWN: {</span></div>
<div style="position:absolute;left:180.00px;top:423.79px" class="cls_021"><span class="cls_021">updateIfNotOppositeDirection(newSnakeDirection, UP);</span></div>
<div style="position:absolute;left:163.80px;top:436.03px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:163.80px;top:448.27px" class="cls_021"><span class="cls_021">break;</span></div>
<div style="position:absolute;left:153.00px;top:460.51px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:472.75px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:484.99px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:504.73px" class="cls_007"><span class="cls_007">Now, to take a little side step, you may have noticed that I have introduced a new</span></div>
<div style="position:absolute;left:108.00px;top:517.33px" class="cls_007"><span class="cls_007">member to the </span><span class="cls_009">GameScreen</span><span class="cls_007"> class here: </span><span class="cls_009">directionSet</span><span class="cls_007">—a Boolean flag. This is needed</span></div>
<div style="position:absolute;left:108.00px;top:529.93px" class="cls_007"><span class="cls_007">because of how we poll for input compared to the snake update. The snake currently</span></div>
<div style="position:absolute;left:108.00px;top:542.53px" class="cls_007"><span class="cls_007">has its movement updated periodically, currently every half a second, yet we poll</span></div>
<div style="position:absolute;left:108.00px;top:555.13px" class="cls_007"><span class="cls_007">for input at a rate of up to 1/60th of a second. This means our snake's direction can</span></div>
<div style="position:absolute;left:108.00px;top:567.73px" class="cls_007"><span class="cls_007">change up to 30 times before it moves! This would allow a player to negate what we</span></div>
<div style="position:absolute;left:108.00px;top:580.33px" class="cls_007"><span class="cls_007">are trying to stop—the snake turning back on itself.</span></div>
<div style="position:absolute;left:108.00px;top:601.58px" class="cls_007"><span class="cls_007">So what we do is, once we detect a new input after we move the snake, we take that</span></div>
<div style="position:absolute;left:108.00px;top:614.17px" class="cls_007"><span class="cls_007">input. However, we take it if the </span><span class="cls_009">newSnakeDirection</span><span class="cls_007"> value is not equal to that of the</span></div>
<div style="position:absolute;left:108.00px;top:626.77px" class="cls_007"><span class="cls_007">current </span><span class="cls_009">snakeDirection</span><span class="cls_007"> value.</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 41 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:45714px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background059.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Making That Snake Slick</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">We reset the </span><span class="cls_009">directionSet</span><span class="cls_007"> flag after we move the snake.</span></div>
<div style="position:absolute;left:108.00px;top:135.73px" class="cls_007"><span class="cls_007">Finally, we update our </span><span class="cls_009">quertInput()</span><span class="cls_007"> method to call our new </span><span class="cls_009">updateDirection()</span></div>
<div style="position:absolute;left:108.00px;top:148.33px" class="cls_007"><span class="cls_007">method:</span></div>
<div style="position:absolute;left:126.00px;top:169.27px" class="cls_021"><span class="cls_021">private void queryInput() {</span></div>
<div style="position:absolute;left:142.20px;top:181.51px" class="cls_021"><span class="cls_021">boolean lPressed = Gdx.input.isKeyPressed(Input.Keys.LEFT);</span></div>
<div style="position:absolute;left:142.20px;top:193.75px" class="cls_021"><span class="cls_021">boolean rPressed = Gdx.input.isKeyPressed(Input.Keys.RIGHT);</span></div>
<div style="position:absolute;left:142.20px;top:205.99px" class="cls_021"><span class="cls_021">boolean uPressed = Gdx.input.isKeyPressed(Input.Keys.UP);</span></div>
<div style="position:absolute;left:142.20px;top:218.23px" class="cls_021"><span class="cls_021">boolean dPressed = Gdx.input.isKeyPressed(Input.Keys.DOWN);</span></div>
<div style="position:absolute;left:142.20px;top:242.71px" class="cls_021"><span class="cls_021">if (lPressed) updateDirection(LEFT);</span></div>
<div style="position:absolute;left:142.20px;top:254.95px" class="cls_021"><span class="cls_021">if (rPressed) updateDirection(RIGHT);</span></div>
<div style="position:absolute;left:142.20px;top:267.19px" class="cls_021"><span class="cls_021">if (uPressed) updateDirection(UP);</span></div>
<div style="position:absolute;left:142.20px;top:279.43px" class="cls_021"><span class="cls_021">if (dPressed) updateDirection(DOWN);</span></div>
<div style="position:absolute;left:126.00px;top:291.67px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:311.41px" class="cls_007"><span class="cls_007">If you now launch the game, you will see that the snake can now no longer slither</span></div>
<div style="position:absolute;left:108.00px;top:324.01px" class="cls_007"><span class="cls_007">back onto itself!</span></div>
<div style="position:absolute;left:108.00px;top:345.26px" class="cls_007"><span class="cls_007">However, did you notice the deliberate mistake I've included?</span></div>
<div style="position:absolute;left:108.00px;top:366.50px" class="cls_007"><span class="cls_007">If you try to change to the opposite direction while the snake is only a head, it won't</span></div>
<div style="position:absolute;left:108.00px;top:379.10px" class="cls_007"><span class="cls_007">let you! Try it, go ahead!</span></div>
<div style="position:absolute;left:108.00px;top:400.33px" class="cls_007"><span class="cls_007">To fix this, we need to update our </span><span class="cls_009">updateIfNotOppositeDirection()</span><span class="cls_007"> method to</span></div>
<div style="position:absolute;left:108.00px;top:412.93px" class="cls_007"><span class="cls_007">also check on the size of the snake, as follows:</span></div>
<div style="position:absolute;left:126.00px;top:433.87px" class="cls_021"><span class="cls_021">private void updateIfNotOppositeDirection(int newSnakeDirection, int</span></div>
<div style="position:absolute;left:126.00px;top:444.67px" class="cls_021"><span class="cls_021">oppositeDirection) {</span></div>
<div style="position:absolute;left:142.20px;top:456.91px" class="cls_021"><span class="cls_021">if (snakeDirection != oppositeDirection || bodyParts.size == 0)</span></div>
<div style="position:absolute;left:126.00px;top:467.71px" class="cls_021"><span class="cls_021">snakeDirection = newSnakeDirection;</span></div>
<div style="position:absolute;left:126.00px;top:479.95px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:499.69px" class="cls_007"><span class="cls_007">Now try it. You will find that it is all fixed!</span></div>
<div style="position:absolute;left:108.00px;top:529.63px" class="cls_025"><span class="cls_025">Colliding with the body</span></div>
<div style="position:absolute;left:108.00px;top:552.61px" class="cls_007"><span class="cls_007">On to the second part of this topic. We will now look into stopping the game when</span></div>
<div style="position:absolute;left:108.00px;top:565.21px" class="cls_007"><span class="cls_007">the snake collides with itself. To achieve this, we will need to do a few things:</span></div>
<div style="position:absolute;left:126.00px;top:586.46px" class="cls_007"><span class="cls_007">•  Introduce a collision flag</span></div>
<div style="position:absolute;left:126.00px;top:603.37px" class="cls_007"><span class="cls_007">•  Check the snake's head position compared to its body parts</span></div>
<div style="position:absolute;left:126.00px;top:620.29px" class="cls_007"><span class="cls_007">•  Update the collision flag when there is a collision</span></div>
<div style="position:absolute;left:126.00px;top:637.20px" class="cls_007"><span class="cls_007">•  Stop the movement of the snake if the flag returns </span><span class="cls_009">true</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 42 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:46516px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background060.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 3</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">First, let's introduce the flag:</span></div>
<div style="position:absolute;left:126.00px;top:135.43px" class="cls_021"><span class="cls_021">private boolean hasHit = false;</span></div>
<div style="position:absolute;left:108.00px;top:155.17px" class="cls_007"><span class="cls_007">Add this flag to the </span><span class="cls_009">GameScreen</span><span class="cls_007"> class. We will update it later!</span></div>
<div style="position:absolute;left:108.00px;top:176.42px" class="cls_007"><span class="cls_007">Next, we need to check for the collision. This is fairly straightforward, as we</span></div>
<div style="position:absolute;left:108.00px;top:189.02px" class="cls_007"><span class="cls_007">know the location of our snake's body parts and head. Let's create a method</span></div>
<div style="position:absolute;left:108.00px;top:201.61px" class="cls_007"><span class="cls_007">called </span><span class="cls_009">checkSnakeBodyCollision()</span><span class="cls_007"> in our </span><span class="cls_009">GameScreen</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:126.00px;top:222.55px" class="cls_021"><span class="cls_021">private void checkSnakeBodyCollision() {</span></div>
<div style="position:absolute;left:142.20px;top:234.79px" class="cls_021"><span class="cls_021">for (BodyPart bodyPart : bodyParts) {</span></div>
<div style="position:absolute;left:142.20px;top:247.03px" class="cls_021"><span class="cls_021">if (bodyPart.x == snakeX && bodyPart.y == snakeY) hasHit = true;</span></div>
<div style="position:absolute;left:126.00px;top:259.27px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:271.51px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:291.25px" class="cls_007"><span class="cls_007">The preceding code checks whether the </span><span class="cls_020">x</span><span class="cls_007"> and </span><span class="cls_020">y</span><span class="cls_007"> coordinates of our snake's head</span></div>
<div style="position:absolute;left:108.00px;top:303.85px" class="cls_007"><span class="cls_007">match its body parts. If true, let's set our flag. Simple!</span></div>
<div style="position:absolute;left:108.00px;top:325.09px" class="cls_007"><span class="cls_007">We now add this method call to our </span><span class="cls_009">updateSnake()</span><span class="cls_007"> method block:</span></div>
<div style="position:absolute;left:126.00px;top:346.03px" class="cls_021"><span class="cls_021">private void updateSnake(float delta) {</span></div>
<div style="position:absolute;left:142.20px;top:358.27px" class="cls_021"><span class="cls_021">timer -= delta;</span></div>
<div style="position:absolute;left:142.20px;top:370.51px" class="cls_021"><span class="cls_021">if (timer &lt;= 0) {</span></div>
<div style="position:absolute;left:163.80px;top:382.75px" class="cls_021"><span class="cls_021">timer = MOVE_TIME;</span></div>
<div style="position:absolute;left:147.60px;top:394.99px" class="cls_021"><span class="cls_021">moveSnake();</span></div>
<div style="position:absolute;left:147.60px;top:407.23px" class="cls_021"><span class="cls_021">checkForOutOfBounds();</span></div>
<div style="position:absolute;left:147.60px;top:419.47px" class="cls_021"><span class="cls_021">updateBodyPartsPosition();</span></div>
<div style="position:absolute;left:147.60px;top:431.71px" class="cls_021"><span class="cls_021">checkSnakeBodyCollision();</span></div>
<div style="position:absolute;left:147.60px;top:443.95px" class="cls_021"><span class="cls_021">directionSet = false;</span></div>
<div style="position:absolute;left:147.60px;top:456.19px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:468.43px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:488.17px" class="cls_007"><span class="cls_007">Finally, to complete this, we add a check on our flag before we go on to update</span></div>
<div style="position:absolute;left:108.00px;top:500.77px" class="cls_007"><span class="cls_007">our snake.</span></div>
<div style="position:absolute;left:126.00px;top:521.71px" class="cls_021"><span class="cls_021">private void updateSnake(float delta) {</span></div>
<div style="position:absolute;left:142.20px;top:533.95px" class="cls_021"><span class="cls_021">if (!hasHit) {</span></div>
<div style="position:absolute;left:153.00px;top:546.19px" class="cls_021"><span class="cls_021">//Update snake code omitted</span></div>
<div style="position:absolute;left:142.20px;top:558.43px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:570.67px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:590.41px" class="cls_007"><span class="cls_007">Now if you launch the game, you will see that it will appear to stop when you make</span></div>
<div style="position:absolute;left:108.00px;top:603.01px" class="cls_007"><span class="cls_007">the snake collide with its body.</span></div>
<div style="position:absolute;left:108.00px;top:624.26px" class="cls_007"><span class="cls_007">We almost have a complete game on our hands!</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 43 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:47318px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background061.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Making That Snake Slick</span></div>
<div style="position:absolute;left:108.00px;top:111.92px" class="cls_019"><span class="cls_019">The state of the game</span></div>
<div style="position:absolute;left:108.00px;top:136.90px" class="cls_007"><span class="cls_007">We now have our Snake game at the point where it is almost a complete game; we</span></div>
<div style="position:absolute;left:108.00px;top:149.50px" class="cls_007"><span class="cls_007">just need to add a few more things to achieve this. Currently, our game stops when</span></div>
<div style="position:absolute;left:108.00px;top:162.10px" class="cls_007"><span class="cls_007">the snake collides with itself. What we need to add is a way to restart the game if this</span></div>
<div style="position:absolute;left:108.00px;top:174.70px" class="cls_007"><span class="cls_007">happens, so the player can have another go!</span></div>
<div style="position:absolute;left:108.00px;top:195.94px" class="cls_007"><span class="cls_007">To do this, we will do the following:</span></div>
<div style="position:absolute;left:126.01px;top:217.18px" class="cls_007"><span class="cls_007">•  Adding a game state</span></div>
<div style="position:absolute;left:126.01px;top:234.10px" class="cls_007"><span class="cls_007">•  Displaying game-over text</span></div>
<div style="position:absolute;left:126.01px;top:251.01px" class="cls_007"><span class="cls_007">•  Restarting the game</span></div>
<div style="position:absolute;left:108.00px;top:280.96px" class="cls_025"><span class="cls_025">Adding a state</span></div>
<div style="position:absolute;left:108.00px;top:303.94px" class="cls_007"><span class="cls_007">When you think about it, a game can have many states. Seriously, pick one of your</span></div>
<div style="position:absolute;left:108.00px;top:316.54px" class="cls_007"><span class="cls_007">favorite games and consider the states the game could be in. Let's list some out:</span></div>
<div style="position:absolute;left:126.00px;top:337.78px" class="cls_007"><span class="cls_007">•  Start</span></div>
<div style="position:absolute;left:126.00px;top:354.70px" class="cls_007"><span class="cls_007">•  Playing</span></div>
<div style="position:absolute;left:126.00px;top:371.61px" class="cls_007"><span class="cls_007">•  Paused</span></div>
<div style="position:absolute;left:126.00px;top:388.53px" class="cls_007"><span class="cls_007">•  Game over</span></div>
<div style="position:absolute;left:126.00px;top:405.44px" class="cls_007"><span class="cls_007">•  Restart</span></div>
<div style="position:absolute;left:107.99px;top:426.69px" class="cls_007"><span class="cls_007">It could be argued that start and restart are the same thing, but that really depends</span></div>
<div style="position:absolute;left:107.99px;top:439.29px" class="cls_007"><span class="cls_007">on the game and what you, as the game developer, would like to achieve. For our</span></div>
<div style="position:absolute;left:107.99px;top:451.89px" class="cls_007"><span class="cls_007">little Snake game, we are only going to focus on two states for now: playing and</span></div>
<div style="position:absolute;left:107.99px;top:464.49px" class="cls_007"><span class="cls_007">game over.</span></div>
<div style="position:absolute;left:107.99px;top:485.73px" class="cls_007"><span class="cls_007">Let's first start off by creating an enumeration of our states, and let's create a member</span></div>
<div style="position:absolute;left:107.99px;top:498.33px" class="cls_007"><span class="cls_007">of </span><span class="cls_009">GameScreen</span><span class="cls_007"> to use it:</span></div>
<div style="position:absolute;left:126.00px;top:519.28px" class="cls_021"><span class="cls_021">private enum STATE {</span></div>
<div style="position:absolute;left:142.20px;top:531.52px" class="cls_021"><span class="cls_021">PLAYING, GAME_OVER</span></div>
<div style="position:absolute;left:126.00px;top:543.76px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:568.24px" class="cls_021"><span class="cls_021">private STATE state = STATE.PLAYING;</span></div>
<div style="position:absolute;left:108.00px;top:587.98px" class="cls_007"><span class="cls_007">By default, our game will start in the playing state, no different than how it is now!</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 44 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:48120px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background062.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 3</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Next, let's update our </span><span class="cls_009">render()</span><span class="cls_007"> method to take this new state into consideration:</span></div>
<div style="position:absolute;left:126.00px;top:135.43px" class="cls_021"><span class="cls_021">public void render(float delta) {</span></div>
<div style="position:absolute;left:147.60px;top:147.67px" class="cls_021"><span class="cls_021">switch(state) {</span></div>
<div style="position:absolute;left:169.20px;top:159.91px" class="cls_021"><span class="cls_021">case PLAYING: {</span></div>
<div style="position:absolute;left:190.80px;top:172.15px" class="cls_021"><span class="cls_021">queryInput();</span></div>
<div style="position:absolute;left:190.80px;top:184.39px" class="cls_021"><span class="cls_021">updateSnake(delta);</span></div>
<div style="position:absolute;left:190.80px;top:196.63px" class="cls_021"><span class="cls_021">checkAppleCollision();</span></div>
<div style="position:absolute;left:190.80px;top:208.87px" class="cls_021"><span class="cls_021">checkAndPlaceApple();</span></div>
<div style="position:absolute;left:169.20px;top:221.11px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:169.20px;top:233.35px" class="cls_021"><span class="cls_021">break;</span></div>
<div style="position:absolute;left:169.20px;top:245.59px" class="cls_021"><span class="cls_021">case GAME_OVER: {</span></div>
<div style="position:absolute;left:169.20px;top:270.07px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:169.20px;top:282.31px" class="cls_021"><span class="cls_021">break;</span></div>
<div style="position:absolute;left:147.60px;top:294.55px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:147.60px;top:306.79px" class="cls_021"><span class="cls_021">clearScreen();</span></div>
<div style="position:absolute;left:147.60px;top:319.03px" class="cls_021"><span class="cls_021">drawGrid();</span></div>
<div style="position:absolute;left:147.60px;top:331.27px" class="cls_021"><span class="cls_021">draw();</span></div>
<div style="position:absolute;left:126.00px;top:343.51px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:363.25px" class="cls_007"><span class="cls_007">What we have achieved here is, essentially, only updating the game state while in</span></div>
<div style="position:absolute;left:108.00px;top:375.85px" class="cls_007"><span class="cls_007">playing mode. What this means is that we can now do away with that code-invasive</span></div>
<div style="position:absolute;left:108.00px;top:388.45px" class="cls_009"><span class="cls_009">hasHit</span><span class="cls_007"> flag, as we can now change the state of the game to </span><span class="cls_009">GAME_OVER</span><span class="cls_007"> instead!</span></div>
<div style="position:absolute;left:108.00px;top:409.69px" class="cls_007"><span class="cls_007">Let's update our </span><span class="cls_009">checkSnakeBodyCollision()</span><span class="cls_007"> method to reflect this:</span></div>
<div style="position:absolute;left:126.00px;top:430.63px" class="cls_021"><span class="cls_021">private void checkSnakeBodyCollision() {</span></div>
<div style="position:absolute;left:147.60px;top:442.87px" class="cls_021"><span class="cls_021">for (BodyPart bodyPart : bodyParts) {</span></div>
<div style="position:absolute;left:169.20px;top:455.11px" class="cls_021"><span class="cls_021">if (bodyPart.x == snakeX && bodyPart.y == snakeY) state =</span></div>
<div style="position:absolute;left:126.00px;top:465.91px" class="cls_021"><span class="cls_021">STATE.GAME_OVER;</span></div>
<div style="position:absolute;left:147.60px;top:478.15px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:490.39px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:510.13px" class="cls_007"><span class="cls_007">Now run the game. It should run exactly as it did earlier! The exception is that we</span></div>
<div style="position:absolute;left:108.00px;top:522.73px" class="cls_007"><span class="cls_007">now enter the </span><span class="cls_009">GAME_OVER</span><span class="cls_007"> state on collision.</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 45 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:48922px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background063.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Making That Snake Slick</span></div>
<div style="position:absolute;left:108.00px;top:112.46px" class="cls_025"><span class="cls_025">Player feedback</span></div>
<div style="position:absolute;left:108.00px;top:135.44px" class="cls_007"><span class="cls_007">Now that we have the game set up to handle different states, let's provide the player</span></div>
<div style="position:absolute;left:108.00px;top:148.04px" class="cls_007"><span class="cls_007">with some feedback to the effect that they lost (aww) our little Snake game. Once you</span></div>
<div style="position:absolute;left:108.00px;top:160.64px" class="cls_007"><span class="cls_007">get comfortable with making games, particularly with the LibGDX framework, you</span></div>
<div style="position:absolute;left:108.00px;top:173.24px" class="cls_007"><span class="cls_007">can really make some amazing things happen in the game-over scenario. However,</span></div>
<div style="position:absolute;left:108.00px;top:185.84px" class="cls_007"><span class="cls_007">for our game, we will just display some text.</span></div>
<div style="position:absolute;left:108.00px;top:207.09px" class="cls_007"><span class="cls_007">How are we going to achieve this? Luckily, for us, LibGDX has bitmap font support,</span></div>
<div style="position:absolute;left:108.00px;top:219.69px" class="cls_007"><span class="cls_007">so we can go ahead and start drawing text on the screen. By default, LibGDX comes</span></div>
<div style="position:absolute;left:108.00px;top:232.29px" class="cls_007"><span class="cls_007">with Arial font at size 15, which will do for now.</span></div>
<div style="position:absolute;left:108.00px;top:253.53px" class="cls_007"><span class="cls_007">To use this bitmap font, we need to define and then create an instance in our</span></div>
<div style="position:absolute;left:108.00px;top:266.12px" class="cls_009"><span class="cls_009">GameScreen</span><span class="cls_007"> class, once again in the </span><span class="cls_009">show()</span><span class="cls_007"> method; we update it as follows:</span></div>
<div style="position:absolute;left:126.00px;top:287.06px" class="cls_021"><span class="cls_021">private BitmapFont bitmapFont;</span></div>
<div style="position:absolute;left:126.00px;top:311.54px" class="cls_021"><span class="cls_021">public void show() {</span></div>
<div style="position:absolute;left:147.60px;top:323.78px" class="cls_021"><span class="cls_021">bitmapFont = new BitmapFont();</span></div>
<div style="position:absolute;left:147.60px;top:336.02px" class="cls_021"><span class="cls_021">// other code omitted</span></div>
<div style="position:absolute;left:126.00px;top:348.26px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:368.00px" class="cls_007"><span class="cls_007">Next, we will make it draw some text to the screen. Let's update our </span><span class="cls_009">draw()</span><span class="cls_007"> method</span></div>
<div style="position:absolute;left:108.00px;top:380.60px" class="cls_007"><span class="cls_007">with a call to the draw method of our font:</span></div>
<div style="position:absolute;left:126.00px;top:401.54px" class="cls_021"><span class="cls_021">private void draw() {</span></div>
<div style="position:absolute;left:142.20px;top:413.78px" class="cls_021"><span class="cls_021">batch.begin();</span></div>
<div style="position:absolute;left:142.20px;top:426.02px" class="cls_021"><span class="cls_021">//Other render code omitted</span></div>
<div style="position:absolute;left:142.20px;top:438.26px" class="cls_021"><span class="cls_021">bitmapFont.draw(batch, "This Snake Game is AWESOME!", 0, 0);</span></div>
<div style="position:absolute;left:142.20px;top:450.50px" class="cls_021"><span class="cls_021">batch.end();</span></div>
<div style="position:absolute;left:126.00px;top:462.74px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:482.48px" class="cls_007"><span class="cls_007">The </span><span class="cls_009">bitmapFont.draw()</span><span class="cls_007"> method signature shows that it requires a </span><span class="cls_009">batch</span><span class="cls_007"> object, the</span></div>
<div style="position:absolute;left:108.00px;top:495.08px" class="cls_007"><span class="cls_007">text, and the location to start at. Let's place it in the bottom-left corner for now!</span></div>
<div style="position:absolute;left:108.00px;top:516.33px" class="cls_007"><span class="cls_007">Let's run our game and see our text on the screen!</span></div>
<div style="position:absolute;left:108.00px;top:537.57px" class="cls_007"><span class="cls_007">Oh, it didn't render! Well, technically it would have, if it had been on screen.</span></div>
<div style="position:absolute;left:108.00px;top:550.17px" class="cls_007"><span class="cls_007">However, what I didn't point out is that it renders the text from the top-left</span></div>
<div style="position:absolute;left:108.00px;top:562.77px" class="cls_007"><span class="cls_007">corner rather than the bottom-left corner, as with our game textures.</span></div>
<div style="position:absolute;left:108.00px;top:584.01px" class="cls_007"><span class="cls_007">The question is, How do we know where to draw it then, as different fonts will</span></div>
<div style="position:absolute;left:108.00px;top:596.61px" class="cls_007"><span class="cls_007">have different widths and heights? Well, we have to define an instance of a class</span></div>
<div style="position:absolute;left:108.00px;top:609.20px" class="cls_007"><span class="cls_007">called </span><span class="cls_009">GlyphLayout</span><span class="cls_007">. This class allows us to obtain the size of the string we wish</span></div>
<div style="position:absolute;left:108.00px;top:621.80px" class="cls_007"><span class="cls_007">to display. Perfect!</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 46 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:49724px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background064.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 3</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Let's update our code to utilize this then. First let's define the </span><span class="cls_009">GlyphLayout</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:147.60px;top:135.43px" class="cls_021"><span class="cls_021">private GlyphLayout layout = new GlyphLayout();</span></div>
<div style="position:absolute;left:108.00px;top:155.17px" class="cls_007"><span class="cls_007">Next, we then set the text which we have to use.</span></div>
<div style="position:absolute;left:126.00px;top:176.11px" class="cls_021"><span class="cls_021">String text = "This Snake Game is AWESOME!";</span></div>
<div style="position:absolute;left:126.00px;top:188.35px" class="cls_021"><span class="cls_021">layout.setText(text);</span></div>
<div style="position:absolute;left:126.00px;top:200.59px" class="cls_021"><span class="cls_021">bitmapFont.draw(batch, text, 0, layout.height);</span></div>
<div style="position:absolute;left:108.00px;top:220.33px" class="cls_007"><span class="cls_007">What is happening here is that we are using the height of our font as the </span><span class="cls_020">y</span><span class="cls_007"> coordinate</span></div>
<div style="position:absolute;left:108.00px;top:232.93px" class="cls_007"><span class="cls_007">to start the render from. Run the game and see for yourself. The text will now appear</span></div>
<div style="position:absolute;left:108.00px;top:245.53px" class="cls_007"><span class="cls_007">where we expected it to, and hopefully will look like the following screenshot:</span></div>
<div style="position:absolute;left:108.00px;top:575.54px" class="cls_007"><span class="cls_007">However, as awesome as this is, this isn't what we are looking to achieve. What we</span></div>
<div style="position:absolute;left:108.00px;top:588.14px" class="cls_007"><span class="cls_007">are aiming to do is to have the text displayed when the game is over.</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 47 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:50526px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background065.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Making That Snake Slick</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">First, let's add a constant value with our game-over message, again in the</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_009"><span class="cls_009">GameScreen</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:126.00px;top:148.03px" class="cls_021"><span class="cls_021">private static final String GAME_OVER_TEXT = "Game Over!";</span></div>
<div style="position:absolute;left:108.00px;top:167.77px" class="cls_007"><span class="cls_007">Finally, in our </span><span class="cls_009">draw()</span><span class="cls_007"> method, we can update this to draw our text when in the</span></div>
<div style="position:absolute;left:108.00px;top:180.37px" class="cls_009"><span class="cls_009">GAME_OVER</span><span class="cls_007"> state:</span></div>
<div style="position:absolute;left:126.00px;top:201.31px" class="cls_021"><span class="cls_021">if (state == STATE.GAME_OVER) {</span></div>
<div style="position:absolute;left:136.80px;top:213.55px" class="cls_021"><span class="cls_021">layout.setText(bitmapFont, GAME_OVER_TEXT);</span></div>
<div style="position:absolute;left:136.80px;top:225.79px" class="cls_021"><span class="cls_021">bitmapFont.draw(batch, GAME_OVER_TEXT, (viewport.getWorldWidth() -</span></div>
<div style="position:absolute;left:126.00px;top:236.59px" class="cls_021"><span class="cls_021">layout.width) / 2, (viewport.getWorldHeight() - layout.height) / 2);</span></div>
<div style="position:absolute;left:126.00px;top:248.83px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:268.57px" class="cls_007"><span class="cls_007">The position at which we are setting the render of the font is the center of the screen,</span></div>
<div style="position:absolute;left:108.00px;top:281.17px" class="cls_007"><span class="cls_007">offset by the size of the text.</span></div>
<div style="position:absolute;left:108.00px;top:302.41px" class="cls_007"><span class="cls_007">Let's run the game and get to a </span><span class="cls_009">GAME_OVER</span><span class="cls_007"> state to see our text!</span></div>
<div style="position:absolute;left:108.00px;top:323.65px" class="cls_007"><span class="cls_007">But before we do that, let's turn off the </span><span class="cls_009">drawGrid()</span><span class="cls_007"> call so it doesn't get in the way!</span></div>
<div style="position:absolute;left:108.00px;top:336.25px" class="cls_007"><span class="cls_007">We can simply just comment it for now.</span></div>
<div style="position:absolute;left:108.00px;top:357.50px" class="cls_007"><span class="cls_007">Hopefully, your game will look as shown in the following screenshot:</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 48 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:51328px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background066.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 3</span></div>
<div style="position:absolute;left:108.00px;top:112.46px" class="cls_025"><span class="cls_025">Restart your engines!</span></div>
<div style="position:absolute;left:108.00px;top:135.44px" class="cls_007"><span class="cls_007">So, the player now knows that they have lost the game. However, what if they want</span></div>
<div style="position:absolute;left:108.00px;top:148.04px" class="cls_007"><span class="cls_007">to play again? More complex games will have different flows through which they</span></div>
<div style="position:absolute;left:108.00px;top:160.64px" class="cls_007"><span class="cls_007">might want to take the player during a restart scenario of the game. However,</span></div>
<div style="position:absolute;left:108.00px;top:173.24px" class="cls_007"><span class="cls_007">for us, we just want to have the game set itself back up and let the player go again!</span></div>
<div style="position:absolute;left:108.00px;top:194.49px" class="cls_007"><span class="cls_007">First, let's define how to restart the game. Let's use the space bar to restart the game.</span></div>
<div style="position:absolute;left:108.00px;top:207.08px" class="cls_007"><span class="cls_007">Now, create a method called </span><span class="cls_009">checkForRestart()</span><span class="cls_007"> and another called </span><span class="cls_009">doRestart()</span></div>
<div style="position:absolute;left:108.00px;top:219.68px" class="cls_007"><span class="cls_007">in our </span><span class="cls_009">GameScreen</span><span class="cls_007"> class. Inside it, we will query the input for the space bar:</span></div>
<div style="position:absolute;left:126.00px;top:240.62px" class="cls_021"><span class="cls_021">private void checkForRestart() {</span></div>
<div style="position:absolute;left:142.20px;top:252.86px" class="cls_021"><span class="cls_021">if (Gdx.input.isKeyPressed(Input.Keys.SPACE)) doRestart();</span></div>
<div style="position:absolute;left:126.00px;top:265.10px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:289.58px" class="cls_021"><span class="cls_021">private void doRestart() {</span></div>
<div style="position:absolute;left:142.20px;top:301.82px" class="cls_021"><span class="cls_021">state = STATE.PLAYING;</span></div>
<div style="position:absolute;left:142.20px;top:314.06px" class="cls_021"><span class="cls_021">bodyParts.clear();</span></div>
<div style="position:absolute;left:142.20px;top:326.30px" class="cls_021"><span class="cls_021">snakeDirection = RIGHT;</span></div>
<div style="position:absolute;left:142.20px;top:338.54px" class="cls_021"><span class="cls_021">directionSet = false;</span></div>
<div style="position:absolute;left:142.20px;top:350.78px" class="cls_021"><span class="cls_021">timer = MOVE_TIME;</span></div>
<div style="position:absolute;left:142.20px;top:363.02px" class="cls_021"><span class="cls_021">snakeX = 0;</span></div>
<div style="position:absolute;left:142.20px;top:375.26px" class="cls_021"><span class="cls_021">snakeY = 0;</span></div>
<div style="position:absolute;left:142.20px;top:387.50px" class="cls_021"><span class="cls_021">snakeXBeforeUpdate = 0;</span></div>
<div style="position:absolute;left:142.20px;top:399.74px" class="cls_021"><span class="cls_021">snakeYBeforeUpdate = 0;</span></div>
<div style="position:absolute;left:142.20px;top:411.98px" class="cls_021"><span class="cls_021">appleAvailable = false;</span></div>
<div style="position:absolute;left:126.00px;top:424.22px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:443.96px" class="cls_007"><span class="cls_007">As you can see in our </span><span class="cls_009">doRestart()</span><span class="cls_007"> method, we are resetting the game logic.</span></div>
<div style="position:absolute;left:108.00px;top:456.56px" class="cls_007"><span class="cls_007">This will put everything back to how it was when the game launched.</span></div>
<div style="position:absolute;left:108.00px;top:477.80px" class="cls_007"><span class="cls_007">Finally, add a call to the </span><span class="cls_009">checkForRestart()</span><span class="cls_007"> method in the </span><span class="cls_009">GAME_OVER</span><span class="cls_007"> case in our</span></div>
<div style="position:absolute;left:108.00px;top:490.40px" class="cls_009"><span class="cls_009">render()</span><span class="cls_007"> call:</span></div>
<div style="position:absolute;left:126.00px;top:511.34px" class="cls_021"><span class="cls_021">case GAME_OVER: {</span></div>
<div style="position:absolute;left:147.60px;top:523.58px" class="cls_021"><span class="cls_021">checkForRestart();</span></div>
<div style="position:absolute;left:126.00px;top:535.82px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:555.56px" class="cls_007"><span class="cls_007">Let's run the game again. Now when we enter the </span><span class="cls_009">GAME_OVER</span><span class="cls_007"> state, if we press the</span></div>
<div style="position:absolute;left:108.00px;top:568.16px" class="cls_007"><span class="cls_007">spacebar, the game will reset! Perfect!</span></div>
<div style="position:absolute;left:108.00px;top:589.40px" class="cls_007"><span class="cls_007">As a final touch, we should update our </span><span class="cls_009">GAME_OVER_TEXT</span><span class="cls_007"> constant to let the player</span></div>
<div style="position:absolute;left:108.00px;top:602.00px" class="cls_007"><span class="cls_007">know how to restart, as follows:</span></div>
<div style="position:absolute;left:126.00px;top:622.94px" class="cls_021"><span class="cls_021">private static final String GAME_OVER_TEXT = "Game Over... Tap space</span></div>
<div style="position:absolute;left:126.00px;top:633.74px" class="cls_021"><span class="cls_021">to restart!";</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 49 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:52130px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background067.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Making That Snake Slick</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Now your game over should look like this:</span></div>
<div style="position:absolute;left:108.00px;top:437.32px" class="cls_019"><span class="cls_019">High scores</span></div>
<div style="position:absolute;left:108.00px;top:462.30px" class="cls_007"><span class="cls_007">One of the final pieces is still missing from our Snake game; we don't have, or keep</span></div>
<div style="position:absolute;left:108.00px;top:474.90px" class="cls_007"><span class="cls_007">track of, any scoring! How is the player supposed to know how well they did when</span></div>
<div style="position:absolute;left:108.00px;top:487.50px" class="cls_007"><span class="cls_007">the game finishes?</span></div>
<div style="position:absolute;left:108.00px;top:508.74px" class="cls_007"><span class="cls_007">The first step to solve this is to add a member to the </span><span class="cls_009">GameScreen</span><span class="cls_007"> class called </span><span class="cls_009">score</span><span class="cls_007">,</span></div>
<div style="position:absolute;left:108.00px;top:521.34px" class="cls_007"><span class="cls_007">which we will add to the following:</span></div>
<div style="position:absolute;left:126.00px;top:542.28px" class="cls_021"><span class="cls_021">private int score = 0;</span></div>
<div style="position:absolute;left:108.00px;top:562.02px" class="cls_007"><span class="cls_007">But how much should we add? It is completely up to you, the game designer, how</span></div>
<div style="position:absolute;left:108.00px;top:574.62px" class="cls_007"><span class="cls_007">many points you want to give to the player. For the sake of simplicity, let's just say</span></div>
<div style="position:absolute;left:108.00px;top:587.22px" class="cls_007"><span class="cls_007">20 points per apple collected. Feel free to change this later to whatever you like. Let's</span></div>
<div style="position:absolute;left:108.00px;top:599.82px" class="cls_007"><span class="cls_007">create a constant member:</span></div>
<div style="position:absolute;left:126.00px;top:620.76px" class="cls_021"><span class="cls_021">private static final int POINTS_PER_APPLE = 20;</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 50 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:52932px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background068.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 3</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Next, let's create a method that can be called every time a player makes the snake</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">collide with the apple:</span></div>
<div style="position:absolute;left:126.00px;top:148.03px" class="cls_021"><span class="cls_021">private void addToScore() {</span></div>
<div style="position:absolute;left:142.20px;top:160.27px" class="cls_021"><span class="cls_021">score += POINTS_PER_APPLE;</span></div>
<div style="position:absolute;left:126.00px;top:172.51px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:192.25px" class="cls_007"><span class="cls_007">Now, we need to find a logical place to call this method. What we can do is place this</span></div>
<div style="position:absolute;left:108.00px;top:204.85px" class="cls_007"><span class="cls_007">method call inside the </span><span class="cls_009">checkAppleCollision()</span><span class="cls_007"> method call, as follows:</span></div>
<div style="position:absolute;left:126.00px;top:225.79px" class="cls_021"><span class="cls_021">private void checkAppleCollision() {</span></div>
<div style="position:absolute;left:142.20px;top:238.03px" class="cls_021"><span class="cls_021">if (appleAvailable && appleX == snakeX && appleY == snakeY) {</span></div>
<div style="position:absolute;left:163.80px;top:250.27px" class="cls_021"><span class="cls_021">BodyPart bodyPart = new BodyPart(snakeBody);</span></div>
<div style="position:absolute;left:163.80px;top:262.51px" class="cls_021"><span class="cls_021">bodyPart.updateBodyPosition(snakeX, snakeY);</span></div>
<div style="position:absolute;left:163.80px;top:274.75px" class="cls_021"><span class="cls_021">bodyParts.insert(0, bodyPart);</span></div>
<div style="position:absolute;left:163.80px;top:286.99px" class="cls_021"><span class="cls_021">addToScore();</span></div>
<div style="position:absolute;left:163.80px;top:299.23px" class="cls_021"><span class="cls_021">appleAvailable = false;</span></div>
<div style="position:absolute;left:142.20px;top:311.47px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:323.71px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:343.45px" class="cls_007"><span class="cls_007">Let's run the game and see what happens.</span></div>
<div style="position:absolute;left:108.00px;top:364.70px" class="cls_007"><span class="cls_007">You probably have guessed, or noticed, right away that, although the code might be</span></div>
<div style="position:absolute;left:108.00px;top:377.30px" class="cls_007"><span class="cls_007">keeping track of the score, we have no way of feeding that back to the user.</span></div>
<div style="position:absolute;left:108.00px;top:398.54px" class="cls_007"><span class="cls_007">What we can do to fix this is have the score displayed to the user as the game is being</span></div>
<div style="position:absolute;left:108.00px;top:411.14px" class="cls_007"><span class="cls_007">played—like a real game!</span></div>
<div style="position:absolute;left:108.00px;top:432.37px" class="cls_007"><span class="cls_007">To do this, we need to update the </span><span class="cls_009">draw()</span><span class="cls_007"> method call to draw our score out, so let's</span></div>
<div style="position:absolute;left:108.00px;top:444.97px" class="cls_007"><span class="cls_007">create the following method to do this:</span></div>
<div style="position:absolute;left:126.00px;top:465.91px" class="cls_021"><span class="cls_021">private void drawScore() {</span></div>
<div style="position:absolute;left:142.20px;top:478.15px" class="cls_021"><span class="cls_021">if (state == STATE.PLAYING) {</span></div>
<div style="position:absolute;left:158.40px;top:490.39px" class="cls_021"><span class="cls_021">String scoreAsString = Integer.toString(score);</span></div>
<div style="position:absolute;left:158.40px;top:502.63px" class="cls_021"><span class="cls_021">BitmapFont.TextBounds scoreBounds = bitmapFont.</span></div>
<div style="position:absolute;left:158.40px;top:513.43px" class="cls_021"><span class="cls_021">getBounds(scoreAsString);</span></div>
<div style="position:absolute;left:158.40px;top:525.67px" class="cls_021"><span class="cls_021">bitmapFont.draw(batch, scoreAsString, (Gdx.graphics.getWidth()</span></div>
<div style="position:absolute;left:158.40px;top:536.47px" class="cls_021"><span class="cls_021">- scoreBounds.width) / 2, (4 * Gdx.graphics.getHeight() / 5) -</span></div>
<div style="position:absolute;left:158.40px;top:547.27px" class="cls_021"><span class="cls_021">scoreBounds.height / 2);</span></div>
<div style="position:absolute;left:142.20px;top:559.51px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:571.75px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:591.49px" class="cls_007"><span class="cls_007">What we are saying here is: if the game state is playing, convert the integer score to</span></div>
<div style="position:absolute;left:108.00px;top:604.09px" class="cls_007"><span class="cls_007">a string object. Then, we create a </span><span class="cls_009">TextBounds</span><span class="cls_007"> instance so we know the size of our</span></div>
<div style="position:absolute;left:108.00px;top:616.69px" class="cls_007"><span class="cls_007">string in terms of the font. Finally, we make the call to draw it to the screen, in the</span></div>
<div style="position:absolute;left:108.00px;top:629.29px" class="cls_007"><span class="cls_007">middle and slightly higher up the screen.</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 51 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:53734px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background069.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Making That Snake Slick</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Next, add the method call to our original </span><span class="cls_009">draw()</span><span class="cls_007"> method:</span></div>
<div style="position:absolute;left:126.00px;top:135.43px" class="cls_021"><span class="cls_021">private void draw() {</span></div>
<div style="position:absolute;left:142.20px;top:147.67px" class="cls_021"><span class="cls_021">batch.begin();</span></div>
<div style="position:absolute;left:142.20px;top:159.91px" class="cls_021"><span class="cls_021">// Other render code ommited for brevity</span></div>
<div style="position:absolute;left:142.20px;top:172.15px" class="cls_021"><span class="cls_021">drawScore();</span></div>
<div style="position:absolute;left:142.20px;top:184.39px" class="cls_021"><span class="cls_021">batch.end();</span></div>
<div style="position:absolute;left:126.00px;top:196.63px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:216.37px" class="cls_007"><span class="cls_007">If we now run the game, we should see the score on the screen, and it will go up</span></div>
<div style="position:absolute;left:108.00px;top:228.97px" class="cls_007"><span class="cls_007">every time we make the snake eat the apple. Excellent!</span></div>
<div style="position:absolute;left:108.00px;top:483.73px" class="cls_007"><span class="cls_007">I hope you had a good play and reached a high score; however, you probably have</span></div>
<div style="position:absolute;left:108.00px;top:496.33px" class="cls_007"><span class="cls_007">noticed a bug in the game! Yes, that's right; we don't reset the score when we restart</span></div>
<div style="position:absolute;left:108.00px;top:508.93px" class="cls_007"><span class="cls_007">the game. This mean a player can grow their score indefinitely! Let's update our</span></div>
<div style="position:absolute;left:108.00px;top:521.53px" class="cls_009"><span class="cls_009">doRestart()</span><span class="cls_007"> method to reset the score:</span></div>
<div style="position:absolute;left:126.00px;top:542.47px" class="cls_021"><span class="cls_021">private void doRestart() {</span></div>
<div style="position:absolute;left:142.20px;top:554.71px" class="cls_021"><span class="cls_021">// Other code ommited for brevity</span></div>
<div style="position:absolute;left:142.20px;top:566.95px" class="cls_021"><span class="cls_021">score = 0;</span></div>
<div style="position:absolute;left:126.00px;top:579.19px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:598.93px" class="cls_007"><span class="cls_007">Now it will reset and the player will start from zero every time!</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 52 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:54536px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background070.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 3</span></div>
<div style="position:absolute;left:108.00px;top:111.92px" class="cls_019"><span class="cls_019">Handling different screen sizes</span></div>
<div style="position:absolute;left:108.00px;top:136.90px" class="cls_007"><span class="cls_007">On to the final topic of this chapter. One important aspect of game development</span></div>
<div style="position:absolute;left:108.00px;top:149.50px" class="cls_007"><span class="cls_007">that needs to be addressed, especially in the world of mobile gaming, is the varying</span></div>
<div style="position:absolute;left:108.00px;top:162.10px" class="cls_007"><span class="cls_007">screen sizes that a game can be played on.</span></div>
<div style="position:absolute;left:108.00px;top:183.34px" class="cls_007"><span class="cls_007">Currently, our Snake game is just running against whatever native screen size we</span></div>
<div style="position:absolute;left:108.00px;top:195.94px" class="cls_007"><span class="cls_007">have configured in our </span><span class="cls_009">DesktopLauncher</span><span class="cls_007"> class. If you look at this you will see that</span></div>
<div style="position:absolute;left:108.01px;top:208.54px" class="cls_007"><span class="cls_007">in fact we haven't configured any; we have just used the default LibGDX desktop</span></div>
<div style="position:absolute;left:108.01px;top:221.14px" class="cls_007"><span class="cls_007">configuration of 640 x 480 pixels.</span></div>
<div style="position:absolute;left:108.01px;top:242.38px" class="cls_007"><span class="cls_007">You might now be wondering why this actually matters. Let's take our Snake game</span></div>
<div style="position:absolute;left:108.01px;top:254.98px" class="cls_007"><span class="cls_007">as an example. We currently create a grid of 32 x 32 pixels in which our snake moves</span></div>
<div style="position:absolute;left:108.01px;top:267.58px" class="cls_007"><span class="cls_007">around. If the screen size is suddenly doubled, our grid will double in size too. This</span></div>
<div style="position:absolute;left:108.01px;top:280.18px" class="cls_007"><span class="cls_007">means it would take the snake twice as long to traverse the screen than it took earlier.</span></div>
<div style="position:absolute;left:108.01px;top:292.78px" class="cls_007"><span class="cls_007">However, also consider what would would happen if the screen size was half that</span></div>
<div style="position:absolute;left:108.01px;top:305.38px" class="cls_007"><span class="cls_007">size; in that case, the grid would also be half the size.</span></div>
<div style="position:absolute;left:108.01px;top:326.62px" class="cls_007"><span class="cls_007">Maybe this is what you might want in your game, or maybe it isn't. From my</span></div>
<div style="position:absolute;left:108.01px;top:339.22px" class="cls_007"><span class="cls_007">experience, I can tell you it probably isn't what you want.</span></div>
<div style="position:absolute;left:108.01px;top:360.47px" class="cls_007"><span class="cls_007">If you want to play about with the screen size, feel free. You can change the values</span></div>
<div style="position:absolute;left:108.01px;top:373.06px" class="cls_007"><span class="cls_007">on the </span><span class="cls_009">LwjglApplicationConfiguration</span><span class="cls_007"> class as follows:</span></div>
<div style="position:absolute;left:126.00px;top:394.00px" class="cls_021"><span class="cls_021">public static void main (String[] arg) {</span></div>
<div style="position:absolute;left:147.60px;top:406.24px" class="cls_021"><span class="cls_021">LwjglApplicationConfiguration config = new</span></div>
<div style="position:absolute;left:147.60px;top:417.04px" class="cls_021"><span class="cls_021">LwjglApplicationConfiguration();</span></div>
<div style="position:absolute;left:147.60px;top:429.28px" class="cls_021"><span class="cls_021">config.width = 640;</span></div>
<div style="position:absolute;left:147.60px;top:441.52px" class="cls_021"><span class="cls_021">config.height = 480;</span></div>
<div style="position:absolute;left:147.60px;top:453.76px" class="cls_021"><span class="cls_021">new LwjglApplication(new SnakeGame(), config);</span></div>
<div style="position:absolute;left:126.00px;top:466.00px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 53 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:55338px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background071.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Making That Snake Slick</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">I suggest that you try different values and see how it changes the game. If you like,</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">enable the code to draw the grid on the screen. You should find that, at 640 x 480, we</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">have 20 cells going across; if you double the screen size, it is now 40! You can try out</span></div>
<div style="position:absolute;left:108.00px;top:152.29px" class="cls_007"><span class="cls_007">different aspect ratios as well. You will even find that, if you use values that are not a</span></div>
<div style="position:absolute;left:108.00px;top:164.89px" class="cls_007"><span class="cls_007">multiple of our cell size, 32, the game won't work properly!</span></div>
<div style="position:absolute;left:108.00px;top:540.42px" class="cls_007"><span class="cls_007">In the preceding screenshot, you can see that the game world in which our snake</span></div>
<div style="position:absolute;left:108.00px;top:553.02px" class="cls_007"><span class="cls_007">lives in is now twice the size. I set our screen size to be 1280x960 pixels.</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 54 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:56140px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background072.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 3</span></div>
<div style="position:absolute;left:108.00px;top:112.46px" class="cls_025"><span class="cls_025">Introducing the Viewport</span></div>
<div style="position:absolute;left:108.00px;top:135.44px" class="cls_007"><span class="cls_007">You may want to have a stable playing environment regardless of screen size.</span></div>
<div style="position:absolute;left:108.00px;top:148.04px" class="cls_007"><span class="cls_007">Well, let's talk about how we can achieve this. We can do this by creating a</span></div>
<div style="position:absolute;left:108.00px;top:160.64px" class="cls_007"><span class="cls_007">Viewport instance and a camera instance.</span></div>
<div style="position:absolute;left:108.00px;top:181.89px" class="cls_007"><span class="cls_007">First, what is a viewport?</span></div>
<div style="position:absolute;left:108.00px;top:203.13px" class="cls_007"><span class="cls_007">In LibGDX terms, it is a way to manage a camera, mapping screen coordinates</span></div>
<div style="position:absolute;left:108.00px;top:215.73px" class="cls_007"><span class="cls_007">to the games world's coordinates. LibGDX comes with the following Viewport</span></div>
<div style="position:absolute;left:108.00px;top:228.33px" class="cls_007"><span class="cls_007">implementations, but you can also create your own:</span></div>
<div style="position:absolute;left:126.00px;top:249.57px" class="cls_007"><span class="cls_007">•  StretchViewport</span></div>
<div style="position:absolute;left:126.00px;top:266.48px" class="cls_007"><span class="cls_007">•  FitViewport</span></div>
<div style="position:absolute;left:126.00px;top:283.40px" class="cls_007"><span class="cls_007">•  FillViewport</span></div>
<div style="position:absolute;left:126.00px;top:300.32px" class="cls_007"><span class="cls_007">•  ScreenViewport</span></div>
<div style="position:absolute;left:126.00px;top:317.23px" class="cls_007"><span class="cls_007">•  ExtendedViewport</span></div>
<div style="position:absolute;left:126.00px;top:334.15px" class="cls_007"><span class="cls_007">•  CustomViewport</span></div>
<div style="position:absolute;left:190.08px;top:364.22px" class="cls_024"><span class="cls_024">I am not going to discuss each at length here; you can visit the</span></div>
<div style="position:absolute;left:190.08px;top:375.62px" class="cls_024"><span class="cls_024">LibGDX wiki at </span><A HREF="https://github.com/libgdx/libgdx/wiki/Viewports">https://github.com/libgdx/libgdx/</A> </span></div>
<div style="position:absolute;left:190.08px;top:387.02px" class="cls_009"><span class="cls_009"> </span><A HREF="https://github.com/libgdx/libgdx/wiki/Viewports">wiki/Viewports</A> <span class="cls_024"> to see them in action.</span></div>
<div style="position:absolute;left:108.00px;top:412.76px" class="cls_007"><span class="cls_007">I suppose the next logical question you are now asking is, "What's a camera?"</span></div>
<div style="position:absolute;left:108.00px;top:434.01px" class="cls_007"><span class="cls_007">Again, in LibGDX, a camera gives us the ability to change the player's view on the</span></div>
<div style="position:absolute;left:108.00px;top:446.61px" class="cls_007"><span class="cls_007">world. We can create a camera and use it to zoom in and out, rotate, and project</span></div>
<div style="position:absolute;left:108.00px;top:459.21px" class="cls_007"><span class="cls_007">points to/from the screen to the world space.</span></div>
<div style="position:absolute;left:108.00px;top:480.45px" class="cls_007"><span class="cls_007">LibGDX has two camera implementations:</span></div>
<div style="position:absolute;left:126.00px;top:501.69px" class="cls_007"><span class="cls_007">•  Orthographic</span></div>
<div style="position:absolute;left:126.00px;top:518.60px" class="cls_007"><span class="cls_007">•  Perspective</span></div>
<div style="position:absolute;left:107.99px;top:539.85px" class="cls_007"><span class="cls_007">We are going to focus solely on the first one, as the latter is used for 3D.</span></div>
<div style="position:absolute;left:198.72px;top:569.90px" class="cls_024"><span class="cls_024">For more information on the orthographic camera, you can</span></div>
<div style="position:absolute;left:198.72px;top:581.30px" class="cls_024"><span class="cls_024">check out the LibGDX wiki at </span><A HREF="https://github.com/libgdx/libgdx/wiki/Orthographic-camera">https://github.com/</A> </span></div>
<div style="position:absolute;left:198.72px;top:592.70px" class="cls_009"><span class="cls_009"> </span><A HREF="https://github.com/libgdx/libgdx/wiki/Orthographic-camera">libgdx/libgdx/wiki/Orthographic-camera</A> <span class="cls_024">.</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 55 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:56942px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background073.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Making That Snake Slick</span></div>
<div style="position:absolute;left:108.00px;top:112.46px" class="cls_025"><span class="cls_025">Using the Viewport</span></div>
<div style="position:absolute;left:108.00px;top:135.44px" class="cls_007"><span class="cls_007">Now that we know of the existence of viewports, let's get one into our Snake game.</span></div>
<div style="position:absolute;left:108.00px;top:156.69px" class="cls_007"><span class="cls_007">First, we need to declare our world size. This is what the camera and Viewport will</span></div>
<div style="position:absolute;left:108.00px;top:169.29px" class="cls_007"><span class="cls_007">work to when displaying the game world to the player. So, let's add the following to</span></div>
<div style="position:absolute;left:108.00px;top:181.88px" class="cls_007"><span class="cls_007">our </span><span class="cls_009">GameScreen</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:126.00px;top:202.82px" class="cls_021"><span class="cls_021">private static final float WORLD_WIDTH = 640;</span></div>
<div style="position:absolute;left:126.00px;top:215.06px" class="cls_021"><span class="cls_021">private static final float WORLD_HEIGHT = 480;</span></div>
<div style="position:absolute;left:108.00px;top:234.80px" class="cls_007"><span class="cls_007">Now, what I am going to say might sound a touch confusing. We need to stop</span></div>
<div style="position:absolute;left:108.00px;top:247.40px" class="cls_007"><span class="cls_007">thinking in pixels. I know, I know, what did we just define? A world of 640 x 480.</span></div>
<div style="position:absolute;left:108.00px;top:260.00px" class="cls_007"><span class="cls_007">But these dimensions aren't pixels now; the screen size is pixels and these could be</span></div>
<div style="position:absolute;left:108.00px;top:272.60px" class="cls_007"><span class="cls_007">anything. These are just units: the player's view on the world is going to be 640 units</span></div>
<div style="position:absolute;left:108.00px;top:285.20px" class="cls_007"><span class="cls_007">wide and 480 units high.</span></div>
<div style="position:absolute;left:108.00px;top:306.45px" class="cls_007"><span class="cls_007">Next, let's define our viewport and camera:</span></div>
<div style="position:absolute;left:126.00px;top:327.38px" class="cls_021"><span class="cls_021">private Viewport viewport;</span></div>
<div style="position:absolute;left:126.00px;top:339.62px" class="cls_021"><span class="cls_021">private Camera camera;</span></div>
<div style="position:absolute;left:126.00px;top:364.10px" class="cls_021"><span class="cls_021">public void show() {</span></div>
<div style="position:absolute;left:142.20px;top:376.34px" class="cls_021"><span class="cls_021">camera = new OrthographicCamera(Gdx.graphics.getWidth(),</span></div>
<div style="position:absolute;left:142.20px;top:387.14px" class="cls_021"><span class="cls_021">Gdx.graphics.getHeight());</span></div>
<div style="position:absolute;left:142.20px;top:399.38px" class="cls_021"><span class="cls_021">camera.position.set(WORLD_WIDTH / 2, WORLD_HEIGHT / 2, 0);</span></div>
<div style="position:absolute;left:142.20px;top:411.62px" class="cls_021"><span class="cls_021">camera.update();</span></div>
<div style="position:absolute;left:142.20px;top:423.86px" class="cls_021"><span class="cls_021">viewport = new FitViewport(WORLD_WIDTH, WORLD_HEIGHT, camera);</span></div>
<div style="position:absolute;left:142.20px;top:436.10px" class="cls_021"><span class="cls_021">//Other code ommited for brevity</span></div>
<div style="position:absolute;left:131.40px;top:448.34px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:468.08px" class="cls_007"><span class="cls_007">So, what we have done here is initialize a camera and point it to the center of our game</span></div>
<div style="position:absolute;left:108.00px;top:480.68px" class="cls_007"><span class="cls_007">world. We then tell it to call </span><span class="cls_009">update()</span><span class="cls_007">, which recalculates the camera's projection and</span></div>
<div style="position:absolute;left:108.00px;top:493.28px" class="cls_007"><span class="cls_007">view. This needs to be done any time we interact with the camera ourselves.</span></div>
<div style="position:absolute;left:108.00px;top:514.52px" class="cls_007"><span class="cls_007">Finally, we instantiate a </span><span class="cls_009">FitViewport</span><span class="cls_007"> viewport class. Why </span><span class="cls_009">FitViewport</span><span class="cls_007">? Well, this</span></div>
<div style="position:absolute;left:108.00px;top:527.12px" class="cls_007"><span class="cls_007">will maintain the aspect ratio of the game world irrespective of the screen size. The</span></div>
<div style="position:absolute;left:108.00px;top:539.72px" class="cls_007"><span class="cls_007">only downside is you may get a black bar border—similar to what you get when you</span></div>
<div style="position:absolute;left:108.00px;top:552.32px" class="cls_007"><span class="cls_007">watch old 4:3 TV shows on your 16:9 TV.</span></div>
<div style="position:absolute;left:108.00px;top:573.57px" class="cls_007"><span class="cls_007">Next, we need to do a little-find-and replace. Previously, we used the following lines</span></div>
<div style="position:absolute;left:108.00px;top:586.17px" class="cls_007"><span class="cls_007">of code to access the screen size:</span></div>
<div style="position:absolute;left:126.00px;top:607.10px" class="cls_021"><span class="cls_021">Gdx.graphics.getWidth()</span></div>
<div style="position:absolute;left:126.00px;top:619.34px" class="cls_021"><span class="cls_021">Gdx.graphics.getHeight()</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 56 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:57744px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background074.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 3</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">However, these return the actual screen size, something we no longer work in. So we</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">need to replace these references with the following:</span></div>
<div style="position:absolute;left:126.00px;top:148.03px" class="cls_021"><span class="cls_021">viewport.getWorldWidth()</span></div>
<div style="position:absolute;left:126.00px;top:160.27px" class="cls_021"><span class="cls_021">viewport.getWorldHeight()</span></div>
<div style="position:absolute;left:108.00px;top:180.01px" class="cls_007"><span class="cls_007">You will notice some errors pop up. These will be related to the phase we have gone</span></div>
<div style="position:absolute;left:108.00px;top:192.61px" class="cls_007"><span class="cls_007">from, working in integers from the </span><span class="cls_009">Gdx.graphics</span><span class="cls_007"> calls to working in floats from the</span></div>
<div style="position:absolute;left:108.00px;top:205.21px" class="cls_009"><span class="cls_009">viewport</span><span class="cls_007"> calls.</span></div>
<div style="position:absolute;left:108.00px;top:226.45px" class="cls_007"><span class="cls_007">Just update the members of the </span><span class="cls_009">GameScreen</span><span class="cls_007"> class to be floats rather than integers.</span></div>
<div style="position:absolute;left:108.00px;top:239.05px" class="cls_007"><span class="cls_007">Additionally, in the </span><span class="cls_009">checkAndPlaceApple()</span><span class="cls_007"> method, we need to cast our maths to</span></div>
<div style="position:absolute;left:108.00px;top:251.65px" class="cls_007"><span class="cls_007">an </span><span class="cls_009">int</span><span class="cls_007"> as the </span><span class="cls_009">MathUtils.random()</span><span class="cls_007"> method will interpret them as floats and will not</span></div>
<div style="position:absolute;left:108.00px;top:264.25px" class="cls_007"><span class="cls_007">place our apple correctly anymore:</span></div>
<div style="position:absolute;left:126.00px;top:285.19px" class="cls_021"><span class="cls_021">appleX = MathUtils.random((int) (viewport.getWorldWidth() / SNAKE_</span></div>
<div style="position:absolute;left:126.00px;top:295.99px" class="cls_021"><span class="cls_021">MOVEMENT) - 1) * SNAKE_MOVEMENT;</span></div>
<div style="position:absolute;left:126.00px;top:308.23px" class="cls_021"><span class="cls_021">appleY = MathUtils.random((int) (viewport.getWorldHeight() / SNAKE_</span></div>
<div style="position:absolute;left:126.00px;top:319.03px" class="cls_021"><span class="cls_021">MOVEMENT) - 1) * SNAKE_MOVEMENT;</span></div>
<div style="position:absolute;left:108.00px;top:338.77px" class="cls_007"><span class="cls_007">This will do the trick!</span></div>
<div style="position:absolute;left:108.00px;top:360.02px" class="cls_007"><span class="cls_007">Finally, to ensure that our batch instance renders everything in our world, we need</span></div>
<div style="position:absolute;left:108.00px;top:372.61px" class="cls_007"><span class="cls_007">to update the project and also update the view of the cameras. So, update the </span><span class="cls_009">draw()</span></div>
<div style="position:absolute;left:108.00px;top:385.21px" class="cls_007"><span class="cls_007">method with the following:</span></div>
<div style="position:absolute;left:126.00px;top:406.15px" class="cls_021"><span class="cls_021">private void draw() {</span></div>
<div style="position:absolute;left:142.20px;top:418.39px" class="cls_021"><span class="cls_021">batch.setProjectionMatrix(camera.projection);</span></div>
<div style="position:absolute;left:142.20px;top:430.63px" class="cls_021"><span class="cls_021">batch.setTransformMatrix(camera.view);</span></div>
<div style="position:absolute;left:142.20px;top:442.87px" class="cls_021"><span class="cls_021">batch.begin();</span></div>
<div style="position:absolute;left:142.20px;top:455.11px" class="cls_021"><span class="cls_021">// Code ommited for brevity</span></div>
<div style="position:absolute;left:126.00px;top:467.35px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:487.09px" class="cls_007"><span class="cls_007">While we are at it, we should do the same for our grid:</span></div>
<div style="position:absolute;left:126.00px;top:508.03px" class="cls_021"><span class="cls_021">private void drawGrid() {</span></div>
<div style="position:absolute;left:142.20px;top:520.27px" class="cls_021"><span class="cls_021">shapeRenderer.setProjectionMatrix(camera.projection);</span></div>
<div style="position:absolute;left:142.20px;top:532.51px" class="cls_021"><span class="cls_021">shapeRenderer.setTransformMatrix(camera.view);</span></div>
<div style="position:absolute;left:142.20px;top:544.75px" class="cls_021"><span class="cls_021">shapeRenderer.begin(ShapeRenderer.ShapeType.Line);</span></div>
<div style="position:absolute;left:142.20px;top:556.99px" class="cls_021"><span class="cls_021">// Code omitted for brevity</span></div>
<div style="position:absolute;left:126.00px;top:569.23px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 57 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:58546px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background075.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Making That Snake Slick</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Now when you run the game, regardless of the screen size, our game world will</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">always be a 20 x 15 cell grid for our snake to slither around!</span></div>
<div style="position:absolute;left:108.00px;top:496.91px" class="cls_007"><span class="cls_007">The preceding screenshot is taken at the same screen size as the previous screenshot</span></div>
<div style="position:absolute;left:108.00px;top:509.51px" class="cls_007"><span class="cls_007">but our game world is now consistent with our game.</span></div>
<div style="position:absolute;left:108.00px;top:530.75px" class="cls_007"><span class="cls_007">I would like to end this topic with a suggestion. Go try out the other viewport</span></div>
<div style="position:absolute;left:108.00px;top:543.35px" class="cls_007"><span class="cls_007">classes; nothing bad will happen, but have a play with different viewports and</span></div>
<div style="position:absolute;left:108.00px;top:555.95px" class="cls_007"><span class="cls_007">different screen sizes so you get an idea of what each one does.</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 58 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:59348px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background076.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 3</span></div>
<div style="position:absolute;left:108.00px;top:111.92px" class="cls_019"><span class="cls_019">Summary</span></div>
<div style="position:absolute;left:108.00px;top:136.90px" class="cls_007"><span class="cls_007">Well, that's the end of our Snake game. Over the course of this chapter, we took our</span></div>
<div style="position:absolute;left:108.00px;top:149.50px" class="cls_007"><span class="cls_007">humble Snake game from a very simple concept and fleshed it out with some game</span></div>
<div style="position:absolute;left:108.00px;top:162.10px" class="cls_007"><span class="cls_007">concepts, high scores, game states, and better collision handling. We had a chance to</span></div>
<div style="position:absolute;left:108.00px;top:174.70px" class="cls_007"><span class="cls_007">look at a couple of concepts that will make game development easier going forward:</span></div>
<div style="position:absolute;left:108.00px;top:187.30px" class="cls_007"><span class="cls_007">the </span><span class="cls_009">ShapeRenderer</span><span class="cls_007"> class for debugging, and viewports for managing different</span></div>
<div style="position:absolute;left:108.00px;top:199.90px" class="cls_007"><span class="cls_007">screen sizes and allowing us to work in a consistent world.</span></div>
<div style="position:absolute;left:108.00px;top:221.14px" class="cls_007"><span class="cls_007">In the next chapter, we will start building a game similar to the one that was a viral</span></div>
<div style="position:absolute;left:108.00px;top:233.74px" class="cls_007"><span class="cls_007">smash when it came out. Don't worry; it isn't something to get into a flap about.</span></div>
<div style="position:absolute;left:108.00px;top:246.34px" class="cls_007"><span class="cls_007">We will look at using LibGDX's Scene2D for easy UI development, spritesheets to</span></div>
<div style="position:absolute;left:108.00px;top:258.94px" class="cls_007"><span class="cls_007">compact our artwork, and screens to help break up our game.</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 59 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:60150px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background077.jpg" width=612 height=792></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:60150px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background078.jpg" width=612 height=792></div>
<div style="position:absolute;left:285.58px;top:218.96px" class="cls_014"><span class="cls_014">What the Flap Is</span></div>
<div style="position:absolute;left:282.16px;top:254.96px" class="cls_014"><span class="cls_014">the Hype About?</span></div>
<div style="position:absolute;left:108.00px;top:308.66px" class="cls_007"><span class="cls_007">Back in 2013, there was a game featuring a little bird that flapped onto the scene in a</span></div>
<div style="position:absolute;left:108.00px;top:321.26px" class="cls_007"><span class="cls_007">way only most indie games makers can dream of, that game was Flappy Bird. In this</span></div>
<div style="position:absolute;left:108.00px;top:333.86px" class="cls_007"><span class="cls_007">chapter, we are going to look at doing what most people did in 2014, make a Flappy</span></div>
<div style="position:absolute;left:108.00px;top:346.46px" class="cls_007"><span class="cls_007">Bird clone!</span></div>
<div style="position:absolute;left:108.00px;top:367.70px" class="cls_007"><span class="cls_007">We will cover the following topics:</span></div>
<div style="position:absolute;left:126.00px;top:388.94px" class="cls_007"><span class="cls_007">•  Why Flappy Bird?</span></div>
<div style="position:absolute;left:126.00px;top:405.86px" class="cls_007"><span class="cls_007">•  The project setup</span></div>
<div style="position:absolute;left:126.00px;top:422.78px" class="cls_007"><span class="cls_007">•  Creating Flappee Bee</span></div>
<div style="position:absolute;left:126.00px;top:439.69px" class="cls_007"><span class="cls_007">•  Flapping Flappee Bee</span></div>
<div style="position:absolute;left:126.00px;top:456.61px" class="cls_007"><span class="cls_007">•  Flower power obstacles</span></div>
<div style="position:absolute;left:126.00px;top:473.52px" class="cls_007"><span class="cls_007">•  Textures and animations</span></div>
<div style="position:absolute;left:126.00px;top:490.44px" class="cls_007"><span class="cls_007">•  GUI creation with Scene2D</span></div>
<div style="position:absolute;left:126.00px;top:507.35px" class="cls_007"><span class="cls_007">•  The Start screen and disposal</span></div>
<div style="position:absolute;left:108.00px;top:539.88px" class="cls_019"><span class="cls_019">Why Flappy Bird?</span></div>
<div style="position:absolute;left:108.00px;top:564.86px" class="cls_007"><span class="cls_007">Flappy Bird has to be, perhaps, the best definition of an overnight success. So much</span></div>
<div style="position:absolute;left:108.00px;top:577.46px" class="cls_007"><span class="cls_007">so that the developers who made it ended up pulling it off the app stores as they</span></div>
<div style="position:absolute;left:108.00px;top:590.06px" class="cls_007"><span class="cls_007">couldn't handle the sudden coverage the game got. Luckily, for the addicted many,</span></div>
<div style="position:absolute;left:108.00px;top:602.66px" class="cls_007"><span class="cls_007">they put it back.</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 61 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:60952px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background079.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">What the Flap Is the Hype About?</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">The premise of this game is, like Snake, straightforward. You just have to guide your</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">character through an infinite series of gates, which are in different positions. To do</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">this, you need to tap the screen. Tapping the screen causes the character to move</span></div>
<div style="position:absolute;left:108.00px;top:152.29px" class="cls_007"><span class="cls_007">upward. When you are not tapping, it will dive down. You gain a point for every</span></div>
<div style="position:absolute;left:108.00px;top:164.89px" class="cls_007"><span class="cls_007">gate you go through, and the game is over when your character collides with a gate.</span></div>
<div style="position:absolute;left:108.00px;top:186.14px" class="cls_007"><span class="cls_007">Simple, yet it is excruciatingly difficult to play and do well. This was the main driver</span></div>
<div style="position:absolute;left:108.00px;top:198.74px" class="cls_007"><span class="cls_007">for the people who kept coming back.</span></div>
<div style="position:absolute;left:108.00px;top:231.23px" class="cls_019"><span class="cls_019">The project setup</span></div>
<div style="position:absolute;left:108.00px;top:256.21px" class="cls_007"><span class="cls_007">Ok, new game, new project. We will start with a blank canvas; so go through and</span></div>
<div style="position:absolute;left:108.00px;top:268.81px" class="cls_007"><span class="cls_007">create a project like we did in the previous example.</span></div>
<div style="position:absolute;left:108.00px;top:290.05px" class="cls_007"><span class="cls_007">Using the LibGDX Project Generator, call the game </span><span class="cls_009">FlappeeBee</span><span class="cls_007"> and give it a game</span></div>
<div style="position:absolute;left:108.00px;top:302.65px" class="cls_007"><span class="cls_007">class name of </span><span class="cls_009">FlappeeBeeGame</span><span class="cls_007">.</span></div>
<div style="position:absolute;left:108.00px;top:323.90px" class="cls_007"><span class="cls_007">The package can be anything you like, and then set the destination to wherever you</span></div>
<div style="position:absolute;left:108.00px;top:336.50px" class="cls_007"><span class="cls_007">wish to keep your code. Finally, uncheck every checkbox except </span><span class="cls_023">Desktop</span><span class="cls_007">.</span></div>
<div style="position:absolute;left:108.00px;top:357.74px" class="cls_007"><span class="cls_007">Once this is done, click on </span><span class="cls_023">Generate</span><span class="cls_007"> and then import the project into your choice</span></div>
<div style="position:absolute;left:108.00px;top:370.34px" class="cls_007"><span class="cls_007">of IDE.</span></div>
<div style="position:absolute;left:108.00px;top:400.27px" class="cls_025"><span class="cls_025">Setting up the GameScreen class</span></div>
<div style="position:absolute;left:108.00px;top:423.25px" class="cls_007"><span class="cls_007">With this being a fresh project, hot off the generator. It will have the default Hello</span></div>
<div style="position:absolute;left:108.00px;top:435.85px" class="cls_007"><span class="cls_007">World! game inside. Just bear this in mind for the moment.</span></div>
<div style="position:absolute;left:108.00px;top:457.09px" class="cls_007"><span class="cls_007">Next, we create our own </span><span class="cls_009">GameScreen</span><span class="cls_007"> class. Remember, when you create this, we just</span></div>
<div style="position:absolute;left:108.00px;top:469.69px" class="cls_007"><span class="cls_007">need it to extend </span><span class="cls_009">ScreenAdaptor</span><span class="cls_007">:</span></div>
<div style="position:absolute;left:126.00px;top:490.63px" class="cls_021"><span class="cls_021">public class GameScreen extends ScreenAdapter {</span></div>
<div style="position:absolute;left:126.00px;top:502.87px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:522.61px" class="cls_007"><span class="cls_007">The preceding code is what you should have in your </span><span class="cls_009">GameScreen</span><span class="cls_007"> class for now.</span></div>
<div style="position:absolute;left:108.00px;top:535.21px" class="cls_007"><span class="cls_007">So, next we need to populate it with a few things that you might recognize from</span></div>
<div style="position:absolute;left:108.00px;top:547.81px" class="cls_007"><span class="cls_007">the Snake game.</span></div>
<div style="position:absolute;left:108.00px;top:569.05px" class="cls_007"><span class="cls_007">First, let's give the game a world to live in. As </span><span class="cls_009">FlappeeBee</span><span class="cls_007"> will be a portrait game,</span></div>
<div style="position:absolute;left:108.01px;top:581.65px" class="cls_007"><span class="cls_007">we can just switch the values we used before:</span></div>
<div style="position:absolute;left:136.80px;top:602.59px" class="cls_021"><span class="cls_021">private static final float WORLD_WIDTH = 480;</span></div>
<div style="position:absolute;left:136.80px;top:614.83px" class="cls_021"><span class="cls_021">private static final float WORLD_HEIGHT = 640;</span></div>
<div style="position:absolute;left:108.00px;top:634.57px" class="cls_007"><span class="cls_007">Add the preceding code to your </span><span class="cls_009">GameScreen</span><span class="cls_007"> class.</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 62 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:61754px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background080.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 4</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Next, let's set up the objects that are going to be doing the heavy lifting of rendering</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">and view handling:</span></div>
<div style="position:absolute;left:136.80px;top:148.03px" class="cls_021"><span class="cls_021">private ShapeRenderer shapeRenderer;</span></div>
<div style="position:absolute;left:136.80px;top:160.27px" class="cls_021"><span class="cls_021">private Viewport viewport;</span></div>
<div style="position:absolute;left:136.80px;top:172.51px" class="cls_021"><span class="cls_021">private Camera camera;</span></div>
<div style="position:absolute;left:136.80px;top:184.75px" class="cls_021"><span class="cls_021">private SpriteBatch batch;</span></div>
<div style="position:absolute;left:108.00px;top:204.49px" class="cls_007"><span class="cls_007">Add the preceding members to the class, and then let's create the following methods</span></div>
<div style="position:absolute;left:108.00px;top:217.09px" class="cls_007"><span class="cls_007">as well:</span></div>
<div style="position:absolute;left:136.80px;top:238.03px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:136.80px;top:250.27px" class="cls_021"><span class="cls_021">public void resize(int width, int height) {</span></div>
<div style="position:absolute;left:147.60px;top:262.51px" class="cls_021"><span class="cls_021">viewport.update(width, height);</span></div>
<div style="position:absolute;left:136.80px;top:274.75px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:296.83px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:136.80px;top:309.07px" class="cls_021"><span class="cls_021">public void show() {</span></div>
<div style="position:absolute;left:147.60px;top:321.31px" class="cls_021"><span class="cls_021">camera = new OrthographicCamera();</span></div>
<div style="position:absolute;left:147.60px;top:333.55px" class="cls_021"><span class="cls_021">camera.position.set(WORLD_WIDTH / 2, WORLD_HEIGHT / 2, 0);</span></div>
<div style="position:absolute;left:147.60px;top:345.79px" class="cls_021"><span class="cls_021">camera.update();</span></div>
<div style="position:absolute;left:147.60px;top:358.03px" class="cls_021"><span class="cls_021">viewport = new FitViewport(WORLD_WIDTH, WORLD_HEIGHT, camera);</span></div>
<div style="position:absolute;left:147.60px;top:370.27px" class="cls_021"><span class="cls_021">shapeRenderer = new ShapeRenderer();</span></div>
<div style="position:absolute;left:147.60px;top:382.51px" class="cls_021"><span class="cls_021">batch = new SpriteBatch();</span></div>
<div style="position:absolute;left:136.80px;top:394.75px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:416.83px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:136.80px;top:429.07px" class="cls_021"><span class="cls_021">public void render(float delta) {</span></div>
<div style="position:absolute;left:147.60px;top:441.31px" class="cls_021"><span class="cls_021">clearScreen();</span></div>
<div style="position:absolute;left:147.60px;top:453.55px" class="cls_021"><span class="cls_021">batch.setProjectionMatrix(camera.projection);</span></div>
<div style="position:absolute;left:147.60px;top:465.79px" class="cls_021"><span class="cls_021">batch.setTransformMatrix(camera.view);</span></div>
<div style="position:absolute;left:147.60px;top:478.03px" class="cls_021"><span class="cls_021">batch.begin();</span></div>
<div style="position:absolute;left:147.60px;top:490.27px" class="cls_021"><span class="cls_021">batch.end();</span></div>
<div style="position:absolute;left:136.80px;top:502.51px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:524.59px" class="cls_021"><span class="cls_021">private void clearScreen() {</span></div>
<div style="position:absolute;left:147.60px;top:536.83px" class="cls_021"><span class="cls_021">Gdx.gl.glClearColor(Color.BLACK.r, Color.BLACK.g,</span></div>
<div style="position:absolute;left:147.60px;top:547.63px" class="cls_021"><span class="cls_021">Color.BLACK.b, Color.BLACK.a);</span></div>
<div style="position:absolute;left:147.60px;top:559.86px" class="cls_021"><span class="cls_021">Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);</span></div>
<div style="position:absolute;left:136.80px;top:572.10px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:591.85px" class="cls_007"><span class="cls_007">Now, our </span><span class="cls_009">GameScreen</span><span class="cls_007"> class is ready to rock and roll!</span></div>
<div style="position:absolute;left:108.00px;top:613.10px" class="cls_007"><span class="cls_007">Our final setup task before we dive into making FlappeeBee is to update the</span></div>
<div style="position:absolute;left:108.00px;top:625.69px" class="cls_009"><span class="cls_009">FlappeeBeeGame</span><span class="cls_007"> class. If you remember how the </span><span class="cls_009">SnakeGame</span><span class="cls_007"> class looked,</span></div>
<div style="position:absolute;left:108.00px;top:638.29px" class="cls_007"><span class="cls_007">this will look very familiar to you, especially as it makes the class very simple.</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 63 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:62556px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background081.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">What the Flap Is the Hype About?</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">First, change the parent class to </span><span class="cls_009">Game</span><span class="cls_007"> and then remove all the code from the body of</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">the class and add the following code:</span></div>
<div style="position:absolute;left:136.80px;top:148.03px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:136.80px;top:160.27px" class="cls_021"><span class="cls_021">public void create() {</span></div>
<div style="position:absolute;left:147.60px;top:172.51px" class="cls_021"><span class="cls_021">setScreen(new GameScreen());</span></div>
<div style="position:absolute;left:136.80px;top:184.75px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:204.49px" class="cls_007"><span class="cls_007">Excellent! With this added, we can now start! But before we go, I will just give a</span></div>
<div style="position:absolute;left:108.00px;top:217.09px" class="cls_007"><span class="cls_007">recap of what we have set up here.</span></div>
<div style="position:absolute;left:108.00px;top:238.33px" class="cls_007"><span class="cls_007">Our </span><span class="cls_009">GameScreen</span><span class="cls_007"> class uses the screens functionality in LibGDX to help make</span></div>
<div style="position:absolute;left:108.00px;top:250.93px" class="cls_007"><span class="cls_007">managing the lifecycle of a game easier along with logically splitting the game up.</span></div>
<div style="position:absolute;left:108.00px;top:272.17px" class="cls_007"><span class="cls_007">The </span><span class="cls_009">Viewport</span><span class="cls_007"> parameter helps with projecting our game world onto the screen of</span></div>
<div style="position:absolute;left:108.00px;top:284.77px" class="cls_007"><span class="cls_007">the player. The </span><span class="cls_009">Camera</span><span class="cls_007"> parameter is maintained by the </span><span class="cls_009">Viewport</span><span class="cls_007"> parameter and</span></div>
<div style="position:absolute;left:108.00px;top:297.37px" class="cls_007"><span class="cls_007">we use it to update the </span><span class="cls_009">SpriteBatch</span><span class="cls_007"> parameter so that our world is projected and</span></div>
<div style="position:absolute;left:108.00px;top:309.97px" class="cls_007"><span class="cls_007">transformed correctly on to the players' screen. Finally, we have the </span><span class="cls_009">ShapeRenderer</span></div>
<div style="position:absolute;left:108.00px;top:322.57px" class="cls_007"><span class="cls_007">class; this will be useful to debug our collisions and placeholders for our game</span></div>
<div style="position:absolute;left:108.00px;top:335.17px" class="cls_007"><span class="cls_007">objects before we use the art.</span></div>
<div style="position:absolute;left:108.00px;top:367.67px" class="cls_019"><span class="cls_019">Creating Flappee Bee</span></div>
<div style="position:absolute;left:108.00px;top:392.65px" class="cls_007"><span class="cls_007">So at this point, we should have a project set up and ready to go. I hope you have</span></div>
<div style="position:absolute;left:108.00px;top:405.25px" class="cls_007"><span class="cls_007">even tried to run it. It should have just shown a black screen, it's not a game yet!</span></div>
<div style="position:absolute;left:108.00px;top:426.50px" class="cls_007"><span class="cls_007">Let's start by breaking this game down into its components so that we can implement</span></div>
<div style="position:absolute;left:108.00px;top:439.10px" class="cls_007"><span class="cls_007">them in a set of smaller steps. This won't be quite how it happens in real life as</span></div>
<div style="position:absolute;left:108.00px;top:451.70px" class="cls_007"><span class="cls_007">sometimes the game's rules might not have been set in stone and so there would be</span></div>
<div style="position:absolute;left:108.00px;top:464.30px" class="cls_007"><span class="cls_007">a chance things would change. However, since we know the game we want to make</span></div>
<div style="position:absolute;left:108.00px;top:476.90px" class="cls_007"><span class="cls_007">and the rules are set, let's do it!</span></div>
<div style="position:absolute;left:108.00px;top:506.83px" class="cls_025"><span class="cls_025">Flappee Bee</span></div>
<div style="position:absolute;left:108.00px;top:529.81px" class="cls_007"><span class="cls_007">The main character in our game is Flappee Bee, which tries to bumble its way</span></div>
<div style="position:absolute;left:108.00px;top:542.41px" class="cls_007"><span class="cls_007">through the flowers.</span></div>
<div style="position:absolute;left:108.00px;top:563.66px" class="cls_007"><span class="cls_007">Let's pretend that we don't have the art on hand to start rendering old Flappee to the</span></div>
<div style="position:absolute;left:108.00px;top:576.25px" class="cls_007"><span class="cls_007">screen. Instead, let's use our </span><span class="cls_009">ShapeRenderer</span><span class="cls_007"> to get things started so we can get the</span></div>
<div style="position:absolute;left:108.00px;top:588.85px" class="cls_007"><span class="cls_007">game playable.</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 64 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:63358px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background082.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 4</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">First, let's create a class that will look after Flappee; it will contain properties that</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">only apply to Flappee, along with the logic to manipulate the character. So, let's</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">create that class called </span><span class="cls_009">Flappee</span><span class="cls_007">. Next, we will populate it with the following code:</span></div>
<div style="position:absolute;left:126.00px;top:160.63px" class="cls_021"><span class="cls_021">public class Flappee {</span></div>
<div style="position:absolute;left:136.80px;top:185.11px" class="cls_021"><span class="cls_021">private static final float COLLISION_RADIUS = 24f;</span></div>
<div style="position:absolute;left:136.80px;top:197.35px" class="cls_021"><span class="cls_021">private final Circle collisionCircle;</span></div>
<div style="position:absolute;left:136.80px;top:221.83px" class="cls_021"><span class="cls_021">private float x = 0;</span></div>
<div style="position:absolute;left:136.80px;top:234.07px" class="cls_021"><span class="cls_021">private float y = 0;</span></div>
<div style="position:absolute;left:136.80px;top:258.55px" class="cls_021"><span class="cls_021">public Flappee() {</span></div>
<div style="position:absolute;left:147.60px;top:270.79px" class="cls_021"><span class="cls_021">collisionCircle = new Circle(x,y, COLLISION_RADIUS);</span></div>
<div style="position:absolute;left:136.80px;top:283.03px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:307.51px" class="cls_021"><span class="cls_021">public void drawDebug(ShapeRenderer shapeRenderer) {</span></div>
<div style="position:absolute;left:147.60px;top:319.75px" class="cls_021"><span class="cls_021">shapeRenderer.circle(collisionCircle.x, collisionCircle.y,</span></div>
<div style="position:absolute;left:147.60px;top:330.55px" class="cls_021"><span class="cls_021">collisionCircle.radius);</span></div>
<div style="position:absolute;left:136.80px;top:342.79px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:355.03px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:374.77px" class="cls_007"><span class="cls_007">Now, we'll discuss what we have added here; first, we have defined a collision area</span></div>
<div style="position:absolute;left:108.00px;top:387.37px" class="cls_007"><span class="cls_007">for Flappee, in this instance, it is a circle.</span></div>
<div style="position:absolute;left:108.00px;top:408.62px" class="cls_007"><span class="cls_007">Why did I pick a circle? I am sure you must be wondering. Well, for me, it is the one</span></div>
<div style="position:absolute;left:108.00px;top:421.22px" class="cls_007"><span class="cls_007">that best represents a real life bee—particularly the Bumble Bee. Now, I suppose you</span></div>
<div style="position:absolute;left:108.00px;top:433.82px" class="cls_007"><span class="cls_007">are wondering why I am using a radius of 24? Before I answer that, I will just quickly</span></div>
<div style="position:absolute;left:108.00px;top:446.41px" class="cls_007"><span class="cls_007">explain that the constructor I am using for the </span><span class="cls_009">Circle</span><span class="cls_007"> class takes three properties: </span><span class="cls_020">x</span><span class="cls_007">,</span></div>
<div style="position:absolute;left:108.00px;top:459.01px" class="cls_020"><span class="cls_020">y</span><span class="cls_007">, and the radius. As we don't know where Flappee will bee (read be)—I think I will</span></div>
<div style="position:absolute;left:108.00px;top:471.61px" class="cls_007"><span class="cls_007">be restricted to one pun per book at this rate—we can just set the </span><span class="cls_020">x</span><span class="cls_007"> and </span><span class="cls_020">y</span><span class="cls_007"> coordinates</span></div>
<div style="position:absolute;left:108.00px;top:484.21px" class="cls_007"><span class="cls_007">of the circle to be the default of (0,0). As for the radius, well being the author of this</span></div>
<div style="position:absolute;left:108.00px;top:496.81px" class="cls_007"><span class="cls_007">book, I know what is going to happen later and what the size of the art asset is that</span></div>
<div style="position:absolute;left:108.00px;top:509.41px" class="cls_007"><span class="cls_007">will use. So, for now the radius is arbitrary, but it won't be the same later. Trust me</span></div>
<div style="position:absolute;left:108.00px;top:522.01px" class="cls_007"><span class="cls_007">on this one.</span></div>
<div style="position:absolute;left:108.00px;top:543.25px" class="cls_007"><span class="cls_007">Finally, we created a render method where we can pass </span><span class="cls_009">ShapeRenderer</span><span class="cls_007"> in and draw</span></div>
<div style="position:absolute;left:108.00px;top:555.85px" class="cls_007"><span class="cls_007">our circle.</span></div>
<div style="position:absolute;left:108.00px;top:577.09px" class="cls_007"><span class="cls_007">Now, we have Flappee; let's add him to the </span><span class="cls_009">GameScreen</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:131.40px;top:598.03px" class="cls_021"><span class="cls_021">private Flappee flappee = new Flappee();</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 65 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:64160px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background083.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">What the Flap Is the Hype About?</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Then, update the </span><span class="cls_009">render()</span><span class="cls_007"> method to draw Flappee:</span></div>
<div style="position:absolute;left:126.00px;top:135.43px" class="cls_021"><span class="cls_021">public void render(float delta) {</span></div>
<div style="position:absolute;left:136.80px;top:147.67px" class="cls_021"><span class="cls_021">/* Other code omitted for brevity */</span></div>
<div style="position:absolute;left:136.80px;top:159.91px" class="cls_021"><span class="cls_021">shapeRenderer.setProjectionMatrix(camera.projection);</span></div>
<div style="position:absolute;left:136.80px;top:172.15px" class="cls_021"><span class="cls_021">shapeRenderer.setTransformMatrix(camera.view);</span></div>
<div style="position:absolute;left:136.80px;top:184.39px" class="cls_021"><span class="cls_021">shapeRenderer.begin(ShapeRenderer.ShapeType.Line);</span></div>
<div style="position:absolute;left:136.80px;top:196.63px" class="cls_021"><span class="cls_021">flappee.drawDebug(shapeRenderer);</span></div>
<div style="position:absolute;left:136.80px;top:208.87px" class="cls_021"><span class="cls_021">shapeRenderer.end();</span></div>
<div style="position:absolute;left:126.00px;top:221.11px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:240.85px" class="cls_007"><span class="cls_007">Now, let's fire up the </span><span class="cls_009">desktop:run</span><span class="cls_007"> task in this project and see what we get!</span></div>
<div style="position:absolute;left:108.00px;top:262.09px" class="cls_007"><span class="cls_007">Oh! Before you do, we should update our </span><span class="cls_009">DesktopLauncher</span><span class="cls_007"> class so we can specify</span></div>
<div style="position:absolute;left:108.00px;top:274.69px" class="cls_007"><span class="cls_007">a sensible screen size; 240 x 320 should suffice:</span></div>
<div style="position:absolute;left:126.00px;top:295.63px" class="cls_021"><span class="cls_021">public class DesktopLauncher {</span></div>
<div style="position:absolute;left:136.80px;top:307.87px" class="cls_021"><span class="cls_021">public static void main (String[] arg) {</span></div>
<div style="position:absolute;left:147.60px;top:320.11px" class="cls_021"><span class="cls_021">LwjglApplicationConfiguration config = new</span></div>
<div style="position:absolute;left:147.60px;top:330.91px" class="cls_021"><span class="cls_021">LwjglApplicationConfiguration();</span></div>
<div style="position:absolute;left:147.60px;top:343.15px" class="cls_021"><span class="cls_021">config.height = 320;</span></div>
<div style="position:absolute;left:147.60px;top:355.39px" class="cls_021"><span class="cls_021">config.width = 240;</span></div>
<div style="position:absolute;left:147.60px;top:367.63px" class="cls_021"><span class="cls_021">new LwjglApplication(new FlappeeBeeGame(), config);</span></div>
<div style="position:absolute;left:136.80px;top:379.87px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:392.11px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:411.85px" class="cls_007"><span class="cls_007">Let's take a look at the following screenshot:</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 66 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:64962px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background084.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 4</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Well, that wasn't what we were expecting, was it?</span></div>
<div style="position:absolute;left:108.00px;top:135.74px" class="cls_007"><span class="cls_007">Hands up who thought that the x and y coordinates were going to be at the bottom</span></div>
<div style="position:absolute;left:108.00px;top:148.34px" class="cls_007"><span class="cls_007">left of the circle and not the center? Now, hands up who read the JavaDoc and knew</span></div>
<div style="position:absolute;left:108.00px;top:160.94px" class="cls_007"><span class="cls_007">this was going to happen?</span></div>
<div style="position:absolute;left:108.00px;top:182.18px" class="cls_007"><span class="cls_007">Well, to be honest, this doesn't affect us that much going forward. We will just have</span></div>
<div style="position:absolute;left:108.00px;top:194.78px" class="cls_007"><span class="cls_007">to remember this when it comes to rendering the texture over the top as we will need</span></div>
<div style="position:absolute;left:108.00px;top:207.38px" class="cls_007"><span class="cls_007">to offset the texture to compensate for this.</span></div>
<div style="position:absolute;left:108.00px;top:228.62px" class="cls_007"><span class="cls_007">The next question we need to answer is, "where do we place Flappee on the screen?"</span></div>
<div style="position:absolute;left:108.00px;top:241.22px" class="cls_007"><span class="cls_007">Well, let's think about the gameplay here: the player taps the screen, the character</span></div>
<div style="position:absolute;left:108.00px;top:253.82px" class="cls_007"><span class="cls_007">flies up on tap, and down on no tap, and obstacles come along from the right. As</span></div>
<div style="position:absolute;left:108.00px;top:266.42px" class="cls_007"><span class="cls_007">what is commonly found in software development, there are several different ways</span></div>
<div style="position:absolute;left:108.00px;top:279.02px" class="cls_007"><span class="cls_007">to solve this problem. You can have the character fly through the world with the</span></div>
<div style="position:absolute;left:108.00px;top:291.62px" class="cls_007"><span class="cls_007">obstacles being static, or you can have the obstacles moving horizontally through the</span></div>
<div style="position:absolute;left:108.00px;top:304.22px" class="cls_007"><span class="cls_007">world and the character being static (in the horizontal plane at least).</span></div>
<div style="position:absolute;left:108.00px;top:325.46px" class="cls_007"><span class="cls_007">Considering that we will want to randomly generate obstacles, I will say we go with</span></div>
<div style="position:absolute;left:108.00px;top:338.06px" class="cls_007"><span class="cls_007">the latter of these two ideas.</span></div>
<div style="position:absolute;left:108.00px;top:359.30px" class="cls_007"><span class="cls_007">This means that Flappee will consistently be in the same x coordinate in the world</span></div>
<div style="position:absolute;left:108.00px;top:371.90px" class="cls_007"><span class="cls_007">space but the y coordinate will vary depending on the input. So, let's place him in</span></div>
<div style="position:absolute;left:108.00px;top:384.50px" class="cls_007"><span class="cls_007">an appropriate place.</span></div>
<div style="position:absolute;left:108.00px;top:405.73px" class="cls_007"><span class="cls_007">Firstly, let's update our </span><span class="cls_009">Flappee</span><span class="cls_007"> class so we can manipulate his starting position:</span></div>
<div style="position:absolute;left:126.00px;top:426.67px" class="cls_021"><span class="cls_021">public void setPosition(float x, float y) {</span></div>
<div style="position:absolute;left:136.80px;top:438.91px" class="cls_021"><span class="cls_021">this.x = x;</span></div>
<div style="position:absolute;left:136.80px;top:451.15px" class="cls_021"><span class="cls_021">this.y = y;</span></div>
<div style="position:absolute;left:136.80px;top:463.39px" class="cls_021"><span class="cls_021">updateCollisionCircle();</span></div>
<div style="position:absolute;left:136.80px;top:475.63px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:497.71px" class="cls_021"><span class="cls_021">private void updateCollisionCircle() {</span></div>
<div style="position:absolute;left:147.60px;top:509.95px" class="cls_021"><span class="cls_021">collisionCircle.setX(x);</span></div>
<div style="position:absolute;left:147.60px;top:522.19px" class="cls_021"><span class="cls_021">collisionCircle.setY(y);</span></div>
<div style="position:absolute;left:136.80px;top:534.43px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:554.17px" class="cls_007"><span class="cls_007">What we are doing here is applying the given x and y values to the class members,</span></div>
<div style="position:absolute;left:108.00px;top:566.77px" class="cls_007"><span class="cls_007">and then updating our circle to match that position.</span></div>
<div style="position:absolute;left:108.00px;top:588.01px" class="cls_007"><span class="cls_007">Next, add a method call to the </span><span class="cls_009">GameScreen</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:136.80px;top:608.95px" class="cls_021"><span class="cls_021">public void show() {</span></div>
<div style="position:absolute;left:147.60px;top:621.19px" class="cls_021"><span class="cls_021">/** Code omitted for brevity **/</span></div>
<div style="position:absolute;left:147.60px;top:633.43px" class="cls_021"><span class="cls_021">flappee.setPosition(WORLD_WIDTH / 4, WORLD_HEIGHT / 2);</span></div>
<div style="position:absolute;left:136.80px;top:645.67px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 67 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:65764px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background085.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">What the Flap Is the Hype About?</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Here, we set the position to be precisely a quarter of the width of our world area and</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">half of the world height.</span></div>
<div style="position:absolute;left:108.00px;top:148.34px" class="cls_007"><span class="cls_007">Let's run our project again and see what we get!:</span></div>
<div style="position:absolute;left:108.00px;top:396.53px" class="cls_007"><span class="cls_007">Much better! I can see this game coming together already! No? You don't? Ah OK,</span></div>
<div style="position:absolute;left:108.00px;top:409.13px" class="cls_007"><span class="cls_007">let's start making Flappee move.</span></div>
<div style="position:absolute;left:108.00px;top:439.07px" class="cls_025"><span class="cls_025">Flapping Flappee</span></div>
<div style="position:absolute;left:108.00px;top:462.05px" class="cls_007"><span class="cls_007">Our next step will be moving the character in an up and down motion. As we know,</span></div>
<div style="position:absolute;left:108.00px;top:474.65px" class="cls_007"><span class="cls_007">if there isn't any input, then Flappee will just fall down from its flight, and if we are</span></div>
<div style="position:absolute;left:108.00px;top:487.25px" class="cls_007"><span class="cls_007">true to the original, then it should be a pretty steep dive too!</span></div>
<div style="position:absolute;left:108.00px;top:508.49px" class="cls_007"><span class="cls_007">We will need to add a couple of properties to our </span><span class="cls_009">Flappee</span><span class="cls_007"> class to take the dive into</span></div>
<div style="position:absolute;left:108.01px;top:521.09px" class="cls_007"><span class="cls_007">consideration. We will need to know not only the speed that Flappee is subjected</span></div>
<div style="position:absolute;left:108.01px;top:533.69px" class="cls_007"><span class="cls_007">to, but also how quickly that speed should change, that is, the acceleration. Add the</span></div>
<div style="position:absolute;left:108.01px;top:546.29px" class="cls_007"><span class="cls_007">following code to our </span><span class="cls_009">Flappee</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:136.80px;top:567.23px" class="cls_021"><span class="cls_021">private static final float DIVE_ACCEL = 0.30F;</span></div>
<div style="position:absolute;left:136.80px;top:579.47px" class="cls_021"><span class="cls_021">private float ySpeed = 0;</span></div>
<div style="position:absolute;left:108.00px;top:599.21px" class="cls_007"><span class="cls_007">So, here we have the acceleration </span><span class="cls_009">DIVE_ACCEL</span><span class="cls_007">, which is going to be the rate of</span></div>
<div style="position:absolute;left:108.00px;top:611.81px" class="cls_007"><span class="cls_007">change and </span><span class="cls_009">ySpeed</span><span class="cls_007">, which we will use to keep track of the speed—in this case</span></div>
<div style="position:absolute;left:108.00px;top:624.41px" class="cls_007"><span class="cls_007">on vertically.</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 68 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:66566px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background086.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 4</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Next, let's add an </span><span class="cls_009">update()</span><span class="cls_007"> method that can be called:</span></div>
<div style="position:absolute;left:136.80px;top:135.43px" class="cls_021"><span class="cls_021">public void update() {</span></div>
<div style="position:absolute;left:147.60px;top:147.67px" class="cls_021"><span class="cls_021">ySpeed -= DIVE_ACCEL;</span></div>
<div style="position:absolute;left:147.60px;top:159.91px" class="cls_021"><span class="cls_021">setPosition(x, y + ySpeed);</span></div>
<div style="position:absolute;left:136.80px;top:172.15px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:191.89px" class="cls_007"><span class="cls_007">Here, we have our speed being updated and then applied to Flappee's position.</span></div>
<div style="position:absolute;left:108.00px;top:213.13px" class="cls_007"><span class="cls_007">Finally, add a call to the </span><span class="cls_009">GameScreen</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:126.00px;top:234.07px" class="cls_021"><span class="cls_021">public void render(float delta) {</span></div>
<div style="position:absolute;left:136.80px;top:246.31px" class="cls_021"><span class="cls_021">/* Code omitted for brevity */</span></div>
<div style="position:absolute;left:136.80px;top:258.55px" class="cls_021"><span class="cls_021">update(delta);</span></div>
<div style="position:absolute;left:126.00px;top:270.79px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:295.27px" class="cls_021"><span class="cls_021">private void update(float delta) {</span></div>
<div style="position:absolute;left:136.80px;top:307.51px" class="cls_021"><span class="cls_021">flappee.update();</span></div>
<div style="position:absolute;left:126.00px;top:319.75px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:339.49px" class="cls_007"><span class="cls_007">If you run the project now, you will see our white circle drop just out of view.</span></div>
<div style="position:absolute;left:108.00px;top:360.74px" class="cls_007"><span class="cls_007">Our next task is to have Flappee fly up in response to some input from the player.</span></div>
<div style="position:absolute;left:108.00px;top:373.34px" class="cls_007"><span class="cls_007">What we will do is use the space bar for this task.</span></div>
<div style="position:absolute;left:108.00px;top:394.57px" class="cls_007"><span class="cls_007">First, let's add the acceleration required for flying up in the </span><span class="cls_009">Flappee</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:136.80px;top:415.51px" class="cls_021"><span class="cls_021">private static final float FLY_ACCEL = 5F;</span></div>
<div style="position:absolute;left:108.00px;top:435.25px" class="cls_007"><span class="cls_007">I would like to point out that the values I used for the acceleration came from trial</span></div>
<div style="position:absolute;left:108.00px;top:447.85px" class="cls_007"><span class="cls_007">and error. Feel free, once we are done here, to go through and try different values!</span></div>
<div style="position:absolute;left:108.00px;top:469.10px" class="cls_007"><span class="cls_007">Next, we need to create a method that will cause the manipulation upon input:</span></div>
<div style="position:absolute;left:136.80px;top:490.03px" class="cls_021"><span class="cls_021">public void flyUp() {</span></div>
<div style="position:absolute;left:147.60px;top:502.27px" class="cls_021"><span class="cls_021">ySpeed = FLY_ACCEL;</span></div>
<div style="position:absolute;left:147.60px;top:514.51px" class="cls_021"><span class="cls_021">setPosition(x, y + ySpeed);</span></div>
<div style="position:absolute;left:136.80px;top:526.75px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:546.49px" class="cls_007"><span class="cls_007">Here, we cancel any current speed and set it to our flying up acceleration, then we</span></div>
<div style="position:absolute;left:108.00px;top:559.09px" class="cls_007"><span class="cls_007">update Flappee's position.</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 69 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:67368px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background087.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">What the Flap Is the Hype About?</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Finally, in our </span><span class="cls_009">GameScreen</span><span class="cls_007"> class, we need to add some input detection and call the</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_009"><span class="cls_009">flyUp()</span><span class="cls_007"> method. Let's update our </span><span class="cls_009">update()</span><span class="cls_007"> method with the following:</span></div>
<div style="position:absolute;left:136.80px;top:148.03px" class="cls_021"><span class="cls_021">private void update(float delta) {</span></div>
<div style="position:absolute;left:147.60px;top:160.27px" class="cls_021"><span class="cls_021">flappee.update();</span></div>
<div style="position:absolute;left:147.60px;top:172.51px" class="cls_021"><span class="cls_021">if (Gdx.input.isKeyPressed(Input.Keys.SPACE)) flappee.flyUp();</span></div>
<div style="position:absolute;left:136.80px;top:184.75px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:204.49px" class="cls_007"><span class="cls_007">By pressing the spacebar, we call our </span><span class="cls_009">flyUp()</span><span class="cls_007"> method.</span></div>
<div style="position:absolute;left:108.00px;top:225.74px" class="cls_007"><span class="cls_007">Run the project and you can now try this out. Just watch out, Flappee will fly off the</span></div>
<div style="position:absolute;left:108.00px;top:238.34px" class="cls_007"><span class="cls_007">screen if you aren't careful!</span></div>
<div style="position:absolute;left:108.00px;top:259.58px" class="cls_007"><span class="cls_007">In fact, let's sneak that code in now, as it will be useful later on!</span></div>
<div style="position:absolute;left:108.00px;top:280.81px" class="cls_007"><span class="cls_007">Create the following method in our </span><span class="cls_009">GameScreen</span><span class="cls_007"> class and add a call to the</span></div>
<div style="position:absolute;left:108.00px;top:293.41px" class="cls_009"><span class="cls_009">update</span><span class="cls_007"> method:</span></div>
<div style="position:absolute;left:136.80px;top:314.35px" class="cls_021"><span class="cls_021">private void blockFlappeeLeavingTheWorld() {</span></div>
<div style="position:absolute;left:147.60px;top:326.59px" class="cls_021"><span class="cls_021">flappee.setPosition(flappee.getX(),</span></div>
<div style="position:absolute;left:147.60px;top:337.39px" class="cls_021"><span class="cls_021">MathUtils.clamp(flappee.getY(), 0, WORLD_HEIGHT));</span></div>
<div style="position:absolute;left:136.80px;top:349.63px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:361.87px" class="cls_021"><span class="cls_021">private void update(float delta) {</span></div>
<div style="position:absolute;left:147.60px;top:374.11px" class="cls_021"><span class="cls_021">flappee.update();</span></div>
<div style="position:absolute;left:147.60px;top:386.35px" class="cls_021"><span class="cls_021">if (Gdx.input.isKeyPressed(Input.Keys.SPACE)) flappee.flyUp();</span></div>
<div style="position:absolute;left:147.60px;top:398.59px" class="cls_021"><span class="cls_021">blockFlappeeLeavingTheWorld();</span></div>
<div style="position:absolute;left:136.80px;top:410.83px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:430.57px" class="cls_007"><span class="cls_007">Here, we use a handy method called </span><span class="cls_009">clamp()</span><span class="cls_007"> from the LibGDX </span><span class="cls_009">MathUtils</span><span class="cls_007"> class.</span></div>
<div style="position:absolute;left:108.00px;top:443.17px" class="cls_007"><span class="cls_007">This allows us to bound a value between a lower and an upper limit. This class</span></div>
<div style="position:absolute;left:108.00px;top:455.77px" class="cls_007"><span class="cls_007">has several useful methods, feel free to check out the JavaDoc on the LibGDX at</span></div>
<div style="position:absolute;left:108.00px;top:468.17px" class="cls_009"><span class="cls_009"> </span><A HREF="http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/math/MathUtils.html">http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/</A> </div>
<div style="position:absolute;left:108.00px;top:479.77px" class="cls_009"><span class="cls_009"> </span><A HREF="http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/math/MathUtils.html">math/MathUtils.html</A> <span class="cls_007"> for more information.</span></div>
<div style="position:absolute;left:108.00px;top:501.02px" class="cls_007"><span class="cls_007">Now, our little circle won't go off screen.</span></div>
<div style="position:absolute;left:108.00px;top:530.95px" class="cls_025"><span class="cls_025">Flower power obstacles</span></div>
<div style="position:absolute;left:108.00px;top:553.93px" class="cls_007"><span class="cls_007">With Flappee going up and down, we now need to introduce some obstacles for</span></div>
<div style="position:absolute;left:108.00px;top:566.53px" class="cls_007"><span class="cls_007">him to avoid. From an artistic perspective, this is going to take the form of a flower,</span></div>
<div style="position:absolute;left:108.00px;top:579.13px" class="cls_007"><span class="cls_007">but in terms of our collision detection and shape rendering, it will take the form of</span></div>
<div style="position:absolute;left:108.00px;top:591.73px" class="cls_007"><span class="cls_007">something along the lines of a lollipop. However, you might be thinking there are</span></div>
<div style="position:absolute;left:108.00px;top:604.33px" class="cls_007"><span class="cls_007">two obstacles that come at once, one from the ceiling and one from the floor, and</span></div>
<div style="position:absolute;left:108.00px;top:616.93px" class="cls_007"><span class="cls_007">that's perfectly fine. All we will need to do is invert one to get the other. Let's start</span></div>
<div style="position:absolute;left:108.00px;top:629.53px" class="cls_007"><span class="cls_007">working on the one on the floor.</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 70 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:68170px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background088.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 4</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">First, let's create a class that is going to be looking after this obstacle. Let's call it</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_009"><span class="cls_009">Flower</span><span class="cls_007">; the make up of this class is going to be similar to the </span><span class="cls_009">Flappee</span><span class="cls_007"> class, in that</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">there will be collision areas, a way to set the position, a way to update the collision</span></div>
<div style="position:absolute;left:108.00px;top:152.29px" class="cls_007"><span class="cls_007">areas, and, of course, a debug render method. The following is the code listing for</span></div>
<div style="position:absolute;left:108.00px;top:164.89px" class="cls_007"><span class="cls_007">the </span><span class="cls_009">Flower</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:126.00px;top:185.83px" class="cls_021"><span class="cls_021">public class Flower {</span></div>
<div style="position:absolute;left:136.80px;top:210.31px" class="cls_021"><span class="cls_021">private static final float COLLISION_RECTANGLE_WIDTH = 13f;</span></div>
<div style="position:absolute;left:136.80px;top:222.55px" class="cls_021"><span class="cls_021">private static final float COLLISION_RECTANGLE_HEIGHT = 447f;</span></div>
<div style="position:absolute;left:136.80px;top:234.79px" class="cls_021"><span class="cls_021">private static final float COLLISION_CIRCLE_RADIUS = 33f;</span></div>
<div style="position:absolute;left:136.80px;top:247.03px" class="cls_021"><span class="cls_021">private final Circle collisionCircle;</span></div>
<div style="position:absolute;left:136.80px;top:259.27px" class="cls_021"><span class="cls_021">private final Rectangle collisionRectangle;</span></div>
<div style="position:absolute;left:136.80px;top:283.75px" class="cls_021"><span class="cls_021">private float x = 0;</span></div>
<div style="position:absolute;left:136.80px;top:295.99px" class="cls_021"><span class="cls_021">private float y = 0;</span></div>
<div style="position:absolute;left:136.80px;top:320.47px" class="cls_021"><span class="cls_021">public Flower() {</span></div>
<div style="position:absolute;left:147.60px;top:332.71px" class="cls_021"><span class="cls_021">this.collisionRectangle = new Rectangle(x, y,</span></div>
<div style="position:absolute;left:147.60px;top:343.51px" class="cls_021"><span class="cls_021">COLLISION_RECTANGLE_WIDTH, COLLISION_RECTANGLE_HEIGHT);</span></div>
<div style="position:absolute;left:147.60px;top:355.75px" class="cls_021"><span class="cls_021">this.collisionCircle = new Circle(x + collisionRectangle.width</span></div>
<div style="position:absolute;left:147.60px;top:366.55px" class="cls_021"><span class="cls_021">/ 2, y + collisionRectangle.height, COLLISION_CIRCLE_RADIUS);</span></div>
<div style="position:absolute;left:136.80px;top:378.79px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:403.27px" class="cls_021"><span class="cls_021">public void setPosition(float x) {</span></div>
<div style="position:absolute;left:147.60px;top:415.51px" class="cls_021"><span class="cls_021">this.x = x;</span></div>
<div style="position:absolute;left:147.60px;top:427.75px" class="cls_021"><span class="cls_021">updateCollisionCircle();</span></div>
<div style="position:absolute;left:147.60px;top:439.99px" class="cls_021"><span class="cls_021">updateCollisionRectangle();</span></div>
<div style="position:absolute;left:136.80px;top:452.23px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:476.71px" class="cls_021"><span class="cls_021">private void updateCollisionCircle() {</span></div>
<div style="position:absolute;left:147.60px;top:488.95px" class="cls_021"><span class="cls_021">collisionCircle.setX(x + collisionRectangle.width / 2);</span></div>
<div style="position:absolute;left:136.80px;top:501.19px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:525.67px" class="cls_021"><span class="cls_021">private void updateCollisionRectangle() {</span></div>
<div style="position:absolute;left:147.60px;top:537.91px" class="cls_021"><span class="cls_021">collisionRectangle.setX(x);</span></div>
<div style="position:absolute;left:136.80px;top:550.15px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:574.63px" class="cls_021"><span class="cls_021">public void drawDebug(ShapeRenderer shapeRenderer) {</span></div>
<div style="position:absolute;left:147.60px;top:586.87px" class="cls_021"><span class="cls_021">shapeRenderer.circle(collisionCircle.x, collisionCircle.y,</span></div>
<div style="position:absolute;left:147.60px;top:597.67px" class="cls_021"><span class="cls_021">collisionCircle.radius);</span></div>
<div style="position:absolute;left:147.60px;top:609.91px" class="cls_021"><span class="cls_021">shapeRenderer.rect(collisionRectangle.x, collisionRectangle.y,</span></div>
<div style="position:absolute;left:147.60px;top:620.71px" class="cls_021"><span class="cls_021">collisionRectangle.width, collisionRectangle.height);</span></div>
<div style="position:absolute;left:136.80px;top:632.95px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:645.19px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 71 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:68972px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background089.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">What the Flap Is the Hype About?</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">I am not going to go into too much detail of the class till now, as it is fairly</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">self-explanatory and is similar to the </span><span class="cls_009">Flappee</span><span class="cls_007"> class. The one thing I would</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">like to point out is the positioning of the circle:</span></div>
<div style="position:absolute;left:126.00px;top:160.63px" class="cls_021"><span class="cls_021">private void updateCollisionCircle() {</span></div>
<div style="position:absolute;left:136.80px;top:172.87px" class="cls_021"><span class="cls_021">collisionCircle.setX(x + collisionRectangle.width / 2);</span></div>
<div style="position:absolute;left:136.80px;top:185.11px" class="cls_021"><span class="cls_021">collisionCircle.setY(y + collisionRectangle.height);</span></div>
<div style="position:absolute;left:126.00px;top:197.35px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:217.09px" class="cls_007"><span class="cls_007">As you can see from the preceding code snippet, we position the circle relative to the</span></div>
<div style="position:absolute;left:108.00px;top:229.69px" class="cls_007"><span class="cls_007">rectangle. This is done so that when it is placed on the screen, the circle will be at the</span></div>
<div style="position:absolute;left:108.00px;top:242.29px" class="cls_007"><span class="cls_007">top of the rectangle and centrally aligned.</span></div>
<div style="position:absolute;left:108.00px;top:263.53px" class="cls_007"><span class="cls_007">If we quickly add the </span><span class="cls_009">Flower</span><span class="cls_007"> class to the </span><span class="cls_009">GameScreen</span><span class="cls_007"> class and draw it out, we get</span></div>
<div style="position:absolute;left:108.00px;top:276.13px" class="cls_007"><span class="cls_007">the following:</span></div>
<div style="position:absolute;left:108.00px;top:546.81px" class="cls_007"><span class="cls_007">As you can see from the image, we get the shape we are looking, just positioned in</span></div>
<div style="position:absolute;left:108.00px;top:559.41px" class="cls_007"><span class="cls_007">a place where we don't want it. You might be wondering at this stage, "why is it so</span></div>
<div style="position:absolute;left:108.00px;top:572.01px" class="cls_007"><span class="cls_007">tall?" Well, if you recall, in the original game, the heights varied according to the</span></div>
<div style="position:absolute;left:108.00px;top:584.61px" class="cls_007"><span class="cls_007">obstacles. This is going to be pretty much the limit that we will allow the bottom</span></div>
<div style="position:absolute;left:108.00px;top:597.21px" class="cls_007"><span class="cls_007">obstacle to come up to.</span></div>
<div style="position:absolute;left:108.00px;top:618.46px" class="cls_007"><span class="cls_007">Next, we need to start making it scroll across the screen.</span></div>
<div style="position:absolute;left:108.00px;top:639.70px" class="cls_007"><span class="cls_007">Moving the obstacle is really just an act of updating the </span><span class="cls_020">x</span><span class="cls_007"> position of the flower.</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 72 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:69774px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background090.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 4</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">First, let's add a constant to define the speed at which we want our obstacle to move</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">across the screen:</span></div>
<div style="position:absolute;left:126.00px;top:148.03px" class="cls_021"><span class="cls_021">private static final float MAX_SPEED_PER_SECOND = 100F;</span></div>
<div style="position:absolute;left:108.00px;top:167.77px" class="cls_007"><span class="cls_007">Then, let's create an </span><span class="cls_009">update()</span><span class="cls_007"> method for the </span><span class="cls_009">Flower</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:126.00px;top:188.71px" class="cls_021"><span class="cls_021">public void update(float delta) {</span></div>
<div style="position:absolute;left:136.80px;top:200.95px" class="cls_021"><span class="cls_021">setPosition(x - (MAX_SPEED_PER_SECOND * delta));</span></div>
<div style="position:absolute;left:126.00px;top:213.19px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:232.93px" class="cls_007"><span class="cls_007">So, what we are saying here is that we want our flower to move across the screen at</span></div>
<div style="position:absolute;left:108.00px;top:245.53px" class="cls_007"><span class="cls_007">100 world units a second. We achieve this by multiplying the given constant with a</span></div>
<div style="position:absolute;left:108.00px;top:258.13px" class="cls_007"><span class="cls_007">delta value we get from LibGDX. This delta value is the time since the last render of</span></div>
<div style="position:absolute;left:108.00px;top:270.73px" class="cls_007"><span class="cls_007">the screen, and given that we are running at 60 frames a second, it should be around</span></div>
<div style="position:absolute;left:108.00px;top:283.33px" class="cls_007"><span class="cls_007">the value of 0.016667.</span></div>
<div style="position:absolute;left:108.00px;top:304.57px" class="cls_007"><span class="cls_007">Next, let's update our </span><span class="cls_009">GameScreen</span><span class="cls_007"> class to allow for creating, updating, and</span></div>
<div style="position:absolute;left:108.00px;top:317.17px" class="cls_007"><span class="cls_007">removing our obstacles, or flowers, as they move across the screen.</span></div>
<div style="position:absolute;left:108.00px;top:338.41px" class="cls_007"><span class="cls_007">First, we need to hold all the references we have to the </span><span class="cls_009">Flower</span><span class="cls_007"> class, and we can do</span></div>
<div style="position:absolute;left:108.00px;top:351.01px" class="cls_007"><span class="cls_007">this using one of LibGDX's data types, the </span><span class="cls_009">Array</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:126.00px;top:371.95px" class="cls_021"><span class="cls_021">private Array&lt;Flower> flowers = new Array&lt;Flower>();</span></div>
<div style="position:absolute;left:108.00px;top:391.69px" class="cls_007"><span class="cls_007">Next, we are going to create a method to create our flowers for us, which is as follows:</span></div>
<div style="position:absolute;left:126.00px;top:412.63px" class="cls_021"><span class="cls_021">private void createNewFlower() {</span></div>
<div style="position:absolute;left:136.80px;top:424.87px" class="cls_021"><span class="cls_021">Flower newFlower = new Flower();</span></div>
<div style="position:absolute;left:136.80px;top:437.11px" class="cls_021"><span class="cls_021">newFlower.setPosition(WORLD_WIDTH + Flower.WIDTH);</span></div>
<div style="position:absolute;left:136.80px;top:449.35px" class="cls_021"><span class="cls_021">flowers.add(newFlower);</span></div>
<div style="position:absolute;left:126.00px;top:461.59px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:481.33px" class="cls_007"><span class="cls_007">Here, we have the </span><span class="cls_009">Flower</span><span class="cls_007"> class being instantiated and then set to a position that is</span></div>
<div style="position:absolute;left:108.00px;top:493.93px" class="cls_007"><span class="cls_007">the </span><span class="cls_009">WORLD_WIDTH</span><span class="cls_007"> value with the addition of the width of the flower, which in this</span></div>
<div style="position:absolute;left:108.00px;top:506.53px" class="cls_007"><span class="cls_007">case, is in the </span><span class="cls_009">Flower</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:147.60px;top:527.47px" class="cls_021"><span class="cls_021">public static final float WIDTH = COLLISION_CIRCLE_RADIUS * 2;</span></div>
<div style="position:absolute;left:108.00px;top:547.21px" class="cls_007"><span class="cls_007">We then add it to the array. We now need to decide a way to check whether we need</span></div>
<div style="position:absolute;left:108.00px;top:559.81px" class="cls_007"><span class="cls_007">to create a new </span><span class="cls_009">Flower</span><span class="cls_007"> instance. There are two situations we need to consider when</span></div>
<div style="position:absolute;left:108.00px;top:572.41px" class="cls_007"><span class="cls_007">we need to create a new </span><span class="cls_009">Flower</span><span class="cls_007"> instance. The first instance being that there aren't</span></div>
<div style="position:absolute;left:108.00px;top:585.01px" class="cls_007"><span class="cls_007">any flowers at all and the second if the last added </span><span class="cls_009">Flower</span><span class="cls_007"> instance has crossed a</span></div>
<div style="position:absolute;left:108.00px;top:597.61px" class="cls_007"><span class="cls_007">certain threshold. This will allow us to have a consistent gap between our obstacles.</span></div>
<div style="position:absolute;left:108.00px;top:610.21px" class="cls_007"><span class="cls_007">We can do this with the following method:</span></div>
<div style="position:absolute;left:126.00px;top:631.15px" class="cls_021"><span class="cls_021">private void checkIfNewFlowerIsNeeded() {</span></div>
<div style="position:absolute;left:136.80px;top:643.39px" class="cls_021"><span class="cls_021">if (flowers.size == 0) {</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 73 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:70576px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background091.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">What the Flap Is the Hype About?</span></div>
<div style="position:absolute;left:147.60px;top:114.01px" class="cls_021"><span class="cls_021">createNewFlower();</span></div>
<div style="position:absolute;left:136.80px;top:126.25px" class="cls_021"><span class="cls_021">} else {</span></div>
<div style="position:absolute;left:147.60px;top:138.49px" class="cls_021"><span class="cls_021">Flower flower = flowers.peek();</span></div>
<div style="position:absolute;left:147.60px;top:150.73px" class="cls_021"><span class="cls_021">if (flower.getX() &lt; WORLD_WIDTH - GAP_BETWEEN_FLOWERS) {</span></div>
<div style="position:absolute;left:158.40px;top:162.97px" class="cls_021"><span class="cls_021">createNewFlower();</span></div>
<div style="position:absolute;left:147.60px;top:175.21px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:187.45px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:199.69px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:219.42px" class="cls_007"><span class="cls_007">So, as you can see, we are satisfying both criteria. If the array is empty, this means</span></div>
<div style="position:absolute;left:108.00px;top:232.02px" class="cls_007"><span class="cls_007">there are no obstacles - this will of course be the case at the start of the game.</span></div>
<div style="position:absolute;left:108.00px;top:244.62px" class="cls_007"><span class="cls_007">Otherwise if there are items in the array then we can go ahead and handle the</span></div>
<div style="position:absolute;left:108.00px;top:257.22px" class="cls_007"><span class="cls_007">obstacles. We do this by using the </span><span class="cls_009">peek()</span><span class="cls_007"> method (this looks at the last added object)</span></div>
<div style="position:absolute;left:108.00px;top:269.82px" class="cls_007"><span class="cls_007">and we test the x position of the obstacle, if the position is less then our constant</span></div>
<div style="position:absolute;left:108.00px;top:282.42px" class="cls_007"><span class="cls_007">value—</span><span class="cls_009">GAP_BETWEEN_FLOWERS</span><span class="cls_007">—away from the right end edge of the world we add</span></div>
<div style="position:absolute;left:108.00px;top:295.02px" class="cls_007"><span class="cls_007">another obstacle to the array.</span></div>
<div style="position:absolute;left:108.00px;top:316.26px" class="cls_007"><span class="cls_007">The </span><span class="cls_009">GAP_BETWEEN_FLOWERS</span><span class="cls_007"> value in this case is:</span></div>
<div style="position:absolute;left:126.00px;top:337.20px" class="cls_021"><span class="cls_021">private static final float GAP_BETWEEN_FLOWERS = 200F;</span></div>
<div style="position:absolute;left:108.00px;top:356.94px" class="cls_007"><span class="cls_007">The number might sound arbitrary, but again, this is just from trial and error of what</span></div>
<div style="position:absolute;left:108.00px;top:369.54px" class="cls_007"><span class="cls_007">feels right; feel free to change this number to see a different effect!</span></div>
<div style="position:absolute;left:108.00px;top:390.78px" class="cls_007"><span class="cls_007">The final part, before we get to the code to update our obstacles, is to check whether</span></div>
<div style="position:absolute;left:108.00px;top:403.38px" class="cls_007"><span class="cls_007">we want to remove the first one in the array, as this is the one that will be the furthest</span></div>
<div style="position:absolute;left:108.00px;top:415.98px" class="cls_007"><span class="cls_007">left. We do this as follows:</span></div>
<div style="position:absolute;left:126.00px;top:436.92px" class="cls_021"><span class="cls_021">private void removeFlowersIfPassed() {</span></div>
<div style="position:absolute;left:136.80px;top:449.16px" class="cls_021"><span class="cls_021">if (flowers.size > 0) {</span></div>
<div style="position:absolute;left:147.60px;top:461.40px" class="cls_021"><span class="cls_021">Flower firstFlower = flowers.first();</span></div>
<div style="position:absolute;left:147.60px;top:473.64px" class="cls_021"><span class="cls_021">if (firstFlower.getX() &lt; -Flower.WIDTH) {</span></div>
<div style="position:absolute;left:158.40px;top:485.88px" class="cls_021"><span class="cls_021">flowers.removeValue(firstFlower, true);</span></div>
<div style="position:absolute;left:147.60px;top:498.12px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:510.36px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:522.60px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:542.34px" class="cls_007"><span class="cls_007">We check whether the array contains obstacles; if it does, get the first obstacle</span></div>
<div style="position:absolute;left:108.00px;top:554.94px" class="cls_007"><span class="cls_007">in the array and test the x position. Now, you might be wondering why we are</span></div>
<div style="position:absolute;left:108.00px;top:567.54px" class="cls_007"><span class="cls_007">using—</span><span class="cls_009">FLOWER_WIDTH</span><span class="cls_007"> here as our comparison and not just </span><span class="cls_009">0</span><span class="cls_007">, the left hand edge</span></div>
<div style="position:absolute;left:108.00px;top:580.14px" class="cls_007"><span class="cls_007">of the screen. If we set it to </span><span class="cls_009">0</span><span class="cls_007">, then the flower will just disappear from view and</span></div>
<div style="position:absolute;left:108.00px;top:592.74px" class="cls_007"><span class="cls_007">would look a bit unconventional, as you would expect the flower to drift off to</span></div>
<div style="position:absolute;left:108.00px;top:605.34px" class="cls_007"><span class="cls_007">the left of and move out of your view. Additionally, </span><span class="cls_009">-Flower.WIDTH</span><span class="cls_007"> is just</span></div>
<div style="position:absolute;left:108.00px;top:617.94px" class="cls_007"><span class="cls_007">shorthand for </span><span class="cls_009">0 - Flower.WIDTH</span><span class="cls_007">.</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 74 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:71378px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background092.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 4</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Now, we have all the tools for our army of flower obstacles. We just need to</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">package them together and have the obstacles rendered! The following code</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">is in the </span><span class="cls_009">GameScreen</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:126.00px;top:160.63px" class="cls_021"><span class="cls_021">private void update(float delta) {</span></div>
<div style="position:absolute;left:136.80px;top:172.87px" class="cls_021"><span class="cls_021">/* Code omitted for brevity */</span></div>
<div style="position:absolute;left:136.80px;top:185.11px" class="cls_021"><span class="cls_021">updateFlowers(delta);</span></div>
<div style="position:absolute;left:126.00px;top:197.35px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:209.59px" class="cls_021"><span class="cls_021">private void updateFlowers(float delta) {</span></div>
<div style="position:absolute;left:136.80px;top:221.83px" class="cls_021"><span class="cls_021">for (Flower flower : flowers) {</span></div>
<div style="position:absolute;left:147.60px;top:234.07px" class="cls_021"><span class="cls_021">flower.update(delta);</span></div>
<div style="position:absolute;left:136.80px;top:246.31px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:258.55px" class="cls_021"><span class="cls_021">checkIfNewFlowerIsNeeded();</span></div>
<div style="position:absolute;left:136.80px;top:270.79px" class="cls_021"><span class="cls_021">removeFlowersIfPassed();</span></div>
<div style="position:absolute;left:126.00px;top:283.03px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:295.27px" class="cls_021"><span class="cls_021">private void drawDebug() {</span></div>
<div style="position:absolute;left:136.80px;top:307.51px" class="cls_021"><span class="cls_021">/* Code omitted for brevity */</span></div>
<div style="position:absolute;left:136.80px;top:319.75px" class="cls_021"><span class="cls_021">for (Flower flower : flowers) {</span></div>
<div style="position:absolute;left:147.60px;top:331.99px" class="cls_021"><span class="cls_021">flower.drawDebug(shapeRenderer);</span></div>
<div style="position:absolute;left:136.80px;top:344.23px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:356.47px" class="cls_021"><span class="cls_021">/* Code omitted for brevity */</span></div>
<div style="position:absolute;left:126.00px;top:368.71px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:388.45px" class="cls_007"><span class="cls_007">With all that in place, if we now run the project, you should hopefully see something</span></div>
<div style="position:absolute;left:108.00px;top:401.05px" class="cls_007"><span class="cls_007">similar to the following screenshot:</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 75 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:72180px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background093.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">What the Flap Is the Hype About?</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">With the obstacles scrolling across the screen, if you start pressing the spacebar, you</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">can almost make a game out of this.</span></div>
<div style="position:absolute;left:108.00px;top:148.34px" class="cls_007"><span class="cls_007">Let's now turn our attention to varying the height of these obstacles. This is easily</span></div>
<div style="position:absolute;left:108.00px;top:160.94px" class="cls_007"><span class="cls_007">done by specifying a </span><span class="cls_020">y</span><span class="cls_007"> value upon the creation of our flowers.</span></div>
<div style="position:absolute;left:108.00px;top:182.17px" class="cls_007"><span class="cls_007">First, let's define our constant for the height offset in the </span><span class="cls_009">Flower</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:126.00px;top:203.11px" class="cls_021"><span class="cls_021">private static final float HEIGHT_OFFSET = -400f;</span></div>
<div style="position:absolute;left:108.00px;top:222.85px" class="cls_007"><span class="cls_007">Now in our constructor, let's set our </span><span class="cls_020">y</span><span class="cls_007"> value:</span></div>
<div style="position:absolute;left:126.00px;top:243.79px" class="cls_021"><span class="cls_021">public Flower() {</span></div>
<div style="position:absolute;left:136.80px;top:256.03px" class="cls_021"><span class="cls_021">this.y = MathUtils.random(HEIGHT_OFFSET);</span></div>
<div style="position:absolute;left:136.80px;top:268.27px" class="cls_021"><span class="cls_021">/** Code omitted for brevity **/</span></div>
<div style="position:absolute;left:126.00px;top:280.51px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:300.25px" class="cls_007"><span class="cls_007">What we are saying here is that we want our y value to be a negative number</span></div>
<div style="position:absolute;left:108.00px;top:312.85px" class="cls_007"><span class="cls_007">between 0 and 400. This means our flower can either stand at 447 world units high or</span></div>
<div style="position:absolute;left:108.00px;top:325.45px" class="cls_007"><span class="cls_007">be as low down as 47. Again, I chose this number after some trial and error, feel free</span></div>
<div style="position:absolute;left:108.00px;top:338.05px" class="cls_007"><span class="cls_007">to play around and try something different.</span></div>
<div style="position:absolute;left:108.00px;top:599.43px" class="cls_007"><span class="cls_007">Hopefully, you now get something similar when you play the game!</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 76 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:72982px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background094.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 4</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">The last task to do with our obstacles is to have an upside down obstacle coming</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">from the ceiling. This can be tackled in multiple ways but we can use a simple</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">approach of just reflecting the collision areas in the </span><span class="cls_009">Flower</span><span class="cls_007"> class. We can start by</span></div>
<div style="position:absolute;left:108.00px;top:152.29px" class="cls_007"><span class="cls_007">adding the new collision areas, as shown in the following code:</span></div>
<div style="position:absolute;left:126.00px;top:173.23px" class="cls_021"><span class="cls_021">private static final float DISTANCE_BETWEEN_FLOOR_AND_CEILING =</span></div>
<div style="position:absolute;left:126.00px;top:184.03px" class="cls_021"><span class="cls_021">225F;</span></div>
<div style="position:absolute;left:126.00px;top:196.27px" class="cls_021"><span class="cls_021">private final Circle floorCollisionCircle;</span></div>
<div style="position:absolute;left:126.00px;top:208.51px" class="cls_021"><span class="cls_021">private final Rectangle floorCollisionRectangle;</span></div>
<div style="position:absolute;left:126.00px;top:220.75px" class="cls_021"><span class="cls_021">private final Circle ceilingCollisionCircle;</span></div>
<div style="position:absolute;left:126.00px;top:232.99px" class="cls_021"><span class="cls_021">private final Rectangle ceilingCollisionRectangle;</span></div>
<div style="position:absolute;left:126.00px;top:245.23px" class="cls_021"><span class="cls_021">public Flower() {</span></div>
<div style="position:absolute;left:136.80px;top:257.47px" class="cls_021"><span class="cls_021">this.y = MathUtils.random(HEIGHT_OFFSET);</span></div>
<div style="position:absolute;left:136.80px;top:269.71px" class="cls_021"><span class="cls_021">this.floorCollisionRectangle = new Rectangle(x, y,</span></div>
<div style="position:absolute;left:136.80px;top:280.51px" class="cls_021"><span class="cls_021">COLLISION_RECTANGLE_WIDTH, COLLISION_RECTANGLE_HEIGHT);</span></div>
<div style="position:absolute;left:136.80px;top:292.75px" class="cls_021"><span class="cls_021">this.floorCollisionCircle = new Circle(x +</span></div>
<div style="position:absolute;left:136.80px;top:303.55px" class="cls_021"><span class="cls_021">floorCollisionRectangle.width / 2, y +</span></div>
<div style="position:absolute;left:136.80px;top:314.35px" class="cls_021"><span class="cls_021">floorCollisionRectangle.height, COLLISION_CIRCLE_RADIUS);</span></div>
<div style="position:absolute;left:136.80px;top:338.83px" class="cls_021"><span class="cls_021">this.ceilingCollisionRectangle = new Rectangle(x,</span></div>
<div style="position:absolute;left:136.80px;top:349.63px" class="cls_021"><span class="cls_021">floorCollisionCircle.y + DISTANCE_BETWEEN_FLOOR_AND_CEILING,</span></div>
<div style="position:absolute;left:136.80px;top:360.43px" class="cls_021"><span class="cls_021">COLLISION_RECTANGLE_WIDTH, COLLISION_RECTANGLE_HEIGHT);</span></div>
<div style="position:absolute;left:136.80px;top:372.67px" class="cls_021"><span class="cls_021">this.ceilingCollisionCircle = new Circle(x +</span></div>
<div style="position:absolute;left:136.80px;top:383.47px" class="cls_021"><span class="cls_021">ceilingCollisionRectangle.width / 2,</span></div>
<div style="position:absolute;left:136.80px;top:394.27px" class="cls_021"><span class="cls_021">ceilingCollisionRectangle.y, COLLISION_CIRCLE_RADIUS);</span></div>
<div style="position:absolute;left:126.00px;top:406.51px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:426.25px" class="cls_007"><span class="cls_007">It should be noted here that I have changed the names of the existing collision zones</span></div>
<div style="position:absolute;left:108.00px;top:438.85px" class="cls_007"><span class="cls_007">to make it clear where they are.</span></div>
<div style="position:absolute;left:108.00px;top:460.09px" class="cls_007"><span class="cls_007">So, here I added a constant—</span><span class="cls_009">DISTANCE_BETWEEN_FLOOR_AND_CEILING</span><span class="cls_007">. This will be</span></div>
<div style="position:absolute;left:108.00px;top:472.69px" class="cls_007"><span class="cls_007">the gap the player has to get Flappee through. Then, in the constructor, we create our</span></div>
<div style="position:absolute;left:108.00px;top:485.29px" class="cls_007"><span class="cls_007">new collision areas. This time, their positions are offset using the new constant and</span></div>
<div style="position:absolute;left:108.00px;top:497.89px" class="cls_007"><span class="cls_007">are relative to the position of the floor collision circle. The distance, again, is from</span></div>
<div style="position:absolute;left:108.00px;top:510.49px" class="cls_007"><span class="cls_007">trial and error.</span></div>
<div style="position:absolute;left:108.00px;top:531.73px" class="cls_007"><span class="cls_007">We can now update the other methods in the </span><span class="cls_009">Flower</span><span class="cls_007"> class to take these new collision</span></div>
<div style="position:absolute;left:108.00px;top:544.33px" class="cls_007"><span class="cls_007">areas into account:</span></div>
<div style="position:absolute;left:126.00px;top:565.27px" class="cls_021"><span class="cls_021">private void updateCollisionCircle() {</span></div>
<div style="position:absolute;left:136.80px;top:577.51px" class="cls_021"><span class="cls_021">floorCollisionCircle.setX(x + floorCollisionRectangle.width /</span></div>
<div style="position:absolute;left:136.80px;top:588.31px" class="cls_021"><span class="cls_021">2);</span></div>
<div style="position:absolute;left:136.80px;top:600.55px" class="cls_021"><span class="cls_021">ceilingCollisionCircle.setX(x + ceilingCollisionRectangle.width</span></div>
<div style="position:absolute;left:136.80px;top:611.35px" class="cls_021"><span class="cls_021">/ 2);</span></div>
<div style="position:absolute;left:126.00px;top:623.59px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:645.67px" class="cls_021"><span class="cls_021">private void updateCollisionRectangle() {</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 77 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:73784px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background095.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">What the Flap Is the Hype About?</span></div>
<div style="position:absolute;left:136.80px;top:114.01px" class="cls_021"><span class="cls_021">floorCollisionRectangle.setX(x);</span></div>
<div style="position:absolute;left:136.80px;top:126.25px" class="cls_021"><span class="cls_021">ceilingCollisionRectangle.setX(x);</span></div>
<div style="position:absolute;left:126.00px;top:138.49px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:162.97px" class="cls_021"><span class="cls_021">public void drawDebug(ShapeRenderer shapeRenderer) {</span></div>
<div style="position:absolute;left:136.80px;top:175.21px" class="cls_021"><span class="cls_021">shapeRenderer.circle(floorCollisionCircle.x,</span></div>
<div style="position:absolute;left:136.80px;top:186.01px" class="cls_021"><span class="cls_021">floorCollisionCircle.y, floorCollisionCircle.radius);</span></div>
<div style="position:absolute;left:136.80px;top:198.25px" class="cls_021"><span class="cls_021">shapeRenderer.rect(floorCollisionRectangle.x,</span></div>
<div style="position:absolute;left:136.80px;top:209.05px" class="cls_021"><span class="cls_021">floorCollisionRectangle.y, floorCollisionRectangle.width,</span></div>
<div style="position:absolute;left:136.80px;top:219.85px" class="cls_021"><span class="cls_021">floorCollisionRectangle.height);</span></div>
<div style="position:absolute;left:136.80px;top:232.09px" class="cls_021"><span class="cls_021">shapeRenderer.circle(ceilingCollisionCircle.x,</span></div>
<div style="position:absolute;left:136.80px;top:242.89px" class="cls_021"><span class="cls_021">ceilingCollisionCircle.y, ceilingCollisionCircle.radius);</span></div>
<div style="position:absolute;left:136.80px;top:255.13px" class="cls_021"><span class="cls_021">shapeRenderer.rect(ceilingCollisionRectangle.x,</span></div>
<div style="position:absolute;left:136.80px;top:265.93px" class="cls_021"><span class="cls_021">ceilingCollisionRectangle.y, ceilingCollisionRectangle.width,</span></div>
<div style="position:absolute;left:136.80px;top:276.73px" class="cls_021"><span class="cls_021">ceilingCollisionRectangle.height);</span></div>
<div style="position:absolute;left:126.00px;top:288.97px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:308.70px" class="cls_007"><span class="cls_007">When running our project, we should now have what almost resembles a skeleton</span></div>
<div style="position:absolute;left:108.00px;top:321.30px" class="cls_007"><span class="cls_007">version of our target game!</span></div>
<div style="position:absolute;left:108.00px;top:577.68px" class="cls_019"><span class="cls_019">Collisions</span></div>
<div style="position:absolute;left:108.00px;top:602.66px" class="cls_007"><span class="cls_007">Well, so far so good. However, we haven't implemented any collision handling.</span></div>
<div style="position:absolute;left:108.00px;top:615.26px" class="cls_007"><span class="cls_007">Luckily, LibGDX contains really useful tools to check for collision between the</span></div>
<div style="position:absolute;left:108.00px;top:627.86px" class="cls_007"><span class="cls_007">shapes that we are using. This is going to make our lives a lot easier.</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 78 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:74586px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background096.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 4</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">The one class we will use is the </span><span class="cls_009">Intersector</span><span class="cls_007"> class. To find out more, visit </span><A HREF="http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/math/Intersector.html">http://</A> </span></div>
<div style="position:absolute;left:108.00px;top:126.89px" class="cls_009"><span class="cls_009"> </span><A HREF="http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/math/Intersector.html">libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/math/</A> </div>
<div style="position:absolute;left:108.00px;top:138.49px" class="cls_009"><span class="cls_009"> </span><A HREF="http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/math/Intersector.html">Intersector.html</A> <span class="cls_007"> and take a look at its API, you will see all sorts of useful methods</span></div>
<div style="position:absolute;left:108.00px;top:151.09px" class="cls_007"><span class="cls_007">there. However, we are only going to use two of them:</span></div>
<div style="position:absolute;left:126.00px;top:172.03px" class="cls_021"><span class="cls_021">boolean overlaps(Circle c1, Circle c2)</span></div>
<div style="position:absolute;left:126.00px;top:184.27px" class="cls_021"><span class="cls_021">boolean overlaps(Circle c, Rectangle r)</span></div>
<div style="position:absolute;left:108.00px;top:204.01px" class="cls_007"><span class="cls_007">These will return </span><span class="cls_009">true</span><span class="cls_007"> if the shapes overlap.</span></div>
<div style="position:absolute;left:108.00px;top:225.25px" class="cls_007"><span class="cls_007">So, let's add a method to our </span><span class="cls_009">Flower</span><span class="cls_007"> class that will take an instance of </span><span class="cls_009">Flappee</span><span class="cls_007"> in</span></div>
<div style="position:absolute;left:108.00px;top:237.85px" class="cls_007"><span class="cls_007">and check the collision areas, as follows:</span></div>
<div style="position:absolute;left:126.00px;top:258.79px" class="cls_021"><span class="cls_021">public boolean isFlappeeColliding(Flappee flappee) {</span></div>
<div style="position:absolute;left:136.80px;top:271.03px" class="cls_021"><span class="cls_021">Circle flappeeCollisionCircle = flappee.getCollisionCircle();</span></div>
<div style="position:absolute;left:136.80px;top:283.27px" class="cls_021"><span class="cls_021">return</span></div>
<div style="position:absolute;left:136.80px;top:295.51px" class="cls_021"><span class="cls_021">Intersector.overlaps(flappeeCollisionCircle,</span></div>
<div style="position:absolute;left:136.80px;top:306.31px" class="cls_021"><span class="cls_021">ceilingCollisionCircle) ||</span></div>
<div style="position:absolute;left:136.80px;top:318.55px" class="cls_021"><span class="cls_021">Intersector.overlaps(flappeeCollisionCircle,</span></div>
<div style="position:absolute;left:136.80px;top:329.35px" class="cls_021"><span class="cls_021">floorCollisionCircle) ||</span></div>
<div style="position:absolute;left:136.80px;top:341.59px" class="cls_021"><span class="cls_021">Intersector.overlaps(flappeeCollisionCircle,</span></div>
<div style="position:absolute;left:136.80px;top:352.39px" class="cls_021"><span class="cls_021">ceilingCollisionRectangle) ||</span></div>
<div style="position:absolute;left:136.80px;top:364.63px" class="cls_021"><span class="cls_021">Intersector.overlaps(flappeeCollisionCircle,</span></div>
<div style="position:absolute;left:136.80px;top:375.43px" class="cls_021"><span class="cls_021">floorCollisionRectangle);</span></div>
<div style="position:absolute;left:126.00px;top:387.67px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:407.41px" class="cls_007"><span class="cls_007">This should also take place before adding the getter to the </span><span class="cls_009">Flappee</span><span class="cls_007"> class; otherwise,</span></div>
<div style="position:absolute;left:108.00px;top:420.01px" class="cls_007"><span class="cls_007">this code will not compile. All we are doing here. What we are doing here, is checking</span></div>
<div style="position:absolute;left:108.00px;top:432.61px" class="cls_007"><span class="cls_007">the different collision areas and returning </span><span class="cls_009">true</span><span class="cls_007"> if at least one of them overlapped.</span></div>
<div style="position:absolute;left:108.00px;top:453.85px" class="cls_007"><span class="cls_007">Now, let's plug this into the </span><span class="cls_009">GameScreen</span><span class="cls_007"> class. We can create a method to iterate the</span></div>
<div style="position:absolute;left:108.00px;top:466.45px" class="cls_007"><span class="cls_007">obstacles in play and check for collision, as follows:</span></div>
<div style="position:absolute;left:126.00px;top:487.39px" class="cls_021"><span class="cls_021">private boolean checkForCollision() {</span></div>
<div style="position:absolute;left:136.80px;top:499.63px" class="cls_021"><span class="cls_021">for (Flower flower : flowers) {</span></div>
<div style="position:absolute;left:147.60px;top:511.87px" class="cls_021"><span class="cls_021">if (flower.isFlappeeColliding(flappee)) {</span></div>
<div style="position:absolute;left:153.00px;top:524.11px" class="cls_021"><span class="cls_021">return true;</span></div>
<div style="position:absolute;left:147.60px;top:536.35px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:548.59px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:560.83px" class="cls_021"><span class="cls_021">return false;</span></div>
<div style="position:absolute;left:126.00px;top:573.07px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 79 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:75388px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background097.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">What the Flap Is the Hype About?</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Then, in our </span><span class="cls_009">update()</span><span class="cls_007"> method, we can check for the following code snippet:</span></div>
<div style="position:absolute;left:126.00px;top:135.43px" class="cls_021"><span class="cls_021">private void update(float delta) {</span></div>
<div style="position:absolute;left:136.80px;top:147.67px" class="cls_021"><span class="cls_021">updateFlappee();</span></div>
<div style="position:absolute;left:136.80px;top:159.91px" class="cls_021"><span class="cls_021">updateFlowers(delta);</span></div>
<div style="position:absolute;left:136.80px;top:172.15px" class="cls_021"><span class="cls_021">if (checkForCollision()) {</span></div>
<div style="position:absolute;left:147.60px;top:184.39px" class="cls_021"><span class="cls_021">restart();</span></div>
<div style="position:absolute;left:136.80px;top:196.63px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:208.87px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:228.61px" class="cls_007"><span class="cls_007">I snuck a little </span><span class="cls_009">restart</span><span class="cls_007"> method in there, which is as follows:</span></div>
<div style="position:absolute;left:126.00px;top:249.55px" class="cls_021"><span class="cls_021">private void restart() {</span></div>
<div style="position:absolute;left:136.80px;top:261.79px" class="cls_021"><span class="cls_021">flappee.setPosition(WORLD_WIDTH / 4, WORLD_HEIGHT / 2);</span></div>
<div style="position:absolute;left:136.80px;top:274.03px" class="cls_021"><span class="cls_021">flowers.clear();</span></div>
<div style="position:absolute;left:136.80px;top:286.27px" class="cls_021"><span class="cls_021">score = 0;</span></div>
<div style="position:absolute;left:126.00px;top:298.51px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:318.25px" class="cls_007"><span class="cls_007">So now, when Flappee collides with any of the obstacles, the game will—quite</span></div>
<div style="position:absolute;left:108.00px;top:330.85px" class="cls_007"><span class="cls_007">crudely, mind you—restart.</span></div>
<div style="position:absolute;left:108.00px;top:360.79px" class="cls_025"><span class="cls_025">Scoring</span></div>
<div style="position:absolute;left:108.00px;top:383.77px" class="cls_007"><span class="cls_007">Finally, to make this more game-like, we will need to add some scoring. The original</span></div>
<div style="position:absolute;left:108.00px;top:396.37px" class="cls_007"><span class="cls_007">game gave the player a point every time they cleared an obstacle, so let's do the same.</span></div>
<div style="position:absolute;left:108.00px;top:417.62px" class="cls_007"><span class="cls_007">To do this, we need to consider a few things. First, we will need a way to identify</span></div>
<div style="position:absolute;left:108.00px;top:430.22px" class="cls_007"><span class="cls_007">whether the player has cleared an obstacle. Second, we need to ensure that we only</span></div>
<div style="position:absolute;left:108.00px;top:442.82px" class="cls_007"><span class="cls_007">reward the player once for each obstacle cleared; finally, how are we going to display</span></div>
<div style="position:absolute;left:108.00px;top:455.42px" class="cls_007"><span class="cls_007">the score to the player?</span></div>
<div style="position:absolute;left:108.00px;top:476.66px" class="cls_007"><span class="cls_007">Let's tackle this first issue. We should award a point when the x coordinate of</span></div>
<div style="position:absolute;left:108.00px;top:489.26px" class="cls_007"><span class="cls_007">Flappee is greater than the x coordinate of the obstacle; remember, the obstacles</span></div>
<div style="position:absolute;left:108.00px;top:501.86px" class="cls_007"><span class="cls_007">move, Flappee does not. This, as it turns out, is quite straightforward; in our</span></div>
<div style="position:absolute;left:108.00px;top:514.45px" class="cls_009"><span class="cls_009">GameScreen</span><span class="cls_007"> class, let's add a property to look after the score:</span></div>
<div style="position:absolute;left:126.00px;top:533.95px" class="cls_021"><span class="cls_021">private int score = 0;</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 80 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:76190px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background098.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 4</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Next, let's have a method to update the score, given the parameters we just discussed:</span></div>
<div style="position:absolute;left:126.00px;top:135.43px" class="cls_021"><span class="cls_021">private void updateScore() {</span></div>
<div style="position:absolute;left:136.80px;top:147.67px" class="cls_021"><span class="cls_021">Flower flower = flowers.first();</span></div>
<div style="position:absolute;left:136.80px;top:159.91px" class="cls_021"><span class="cls_021">if (flower.getX() &lt; flappee.getX()) {</span></div>
<div style="position:absolute;left:147.60px;top:172.15px" class="cls_021"><span class="cls_021">score++;</span></div>
<div style="position:absolute;left:136.80px;top:184.39px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:196.63px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:216.37px" class="cls_007"><span class="cls_007">Finally, add the following code snippet to our </span><span class="cls_009">update()</span><span class="cls_007"> method:</span></div>
<div style="position:absolute;left:126.00px;top:237.31px" class="cls_021"><span class="cls_021">private void update(float delta) {</span></div>
<div style="position:absolute;left:136.80px;top:249.55px" class="cls_021"><span class="cls_021">updateFlappee();</span></div>
<div style="position:absolute;left:136.80px;top:261.79px" class="cls_021"><span class="cls_021">updateFlowers(delta);</span></div>
<div style="position:absolute;left:136.80px;top:274.03px" class="cls_021"><span class="cls_021">updateScore();</span></div>
<div style="position:absolute;left:136.80px;top:286.27px" class="cls_021"><span class="cls_021">if (checkForCollision()) {</span></div>
<div style="position:absolute;left:147.60px;top:298.51px" class="cls_021"><span class="cls_021">restart();</span></div>
<div style="position:absolute;left:136.80px;top:310.75px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:322.99px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:342.73px" class="cls_007"><span class="cls_007">Now, when you play the game, a score will add up. However, it will add up quickly.</span></div>
<div style="position:absolute;left:108.00px;top:355.33px" class="cls_007"><span class="cls_007">As the obstacle passes Flappee, the game will still validate the </span><span class="cls_009">updateScore()</span><span class="cls_007"> as</span></div>
<div style="position:absolute;left:108.00px;top:367.93px" class="cls_007"><span class="cls_007">Flappee is passing an obstacle. So the player will get multiple points for clearing</span></div>
<div style="position:absolute;left:108.00px;top:380.53px" class="cls_007"><span class="cls_007">the same obstacle! This is something we don't want to do. So, how do we go about</span></div>
<div style="position:absolute;left:108.00px;top:393.13px" class="cls_007"><span class="cls_007">solving this problem? One way is to add a flag to the obstacle to say we have claimed</span></div>
<div style="position:absolute;left:108.00px;top:405.73px" class="cls_007"><span class="cls_007">the point for it.</span></div>
<div style="position:absolute;left:108.00px;top:426.97px" class="cls_007"><span class="cls_007">In our </span><span class="cls_009">Flower</span><span class="cls_007"> class, let's add a Boolean flag:</span></div>
<div style="position:absolute;left:126.00px;top:447.91px" class="cls_021"><span class="cls_021">private boolean pointClaimed = false;</span></div>
<div style="position:absolute;left:108.00px;top:467.65px" class="cls_007"><span class="cls_007">Next, let's add some access methods:</span></div>
<div style="position:absolute;left:126.00px;top:488.59px" class="cls_021"><span class="cls_021">public boolean isPointClaimed() {</span></div>
<div style="position:absolute;left:136.80px;top:500.83px" class="cls_021"><span class="cls_021">return pointClaimed;</span></div>
<div style="position:absolute;left:126.00px;top:513.07px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:537.55px" class="cls_021"><span class="cls_021">public void markPointClaimed() {</span></div>
<div style="position:absolute;left:136.80px;top:549.79px" class="cls_021"><span class="cls_021">pointClaimed = true;</span></div>
<div style="position:absolute;left:126.00px;top:562.03px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 81 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:76992px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background099.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">What the Flap Is the Hype About?</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Now, let's update our </span><span class="cls_009">updateScore()</span><span class="cls_007"> method in the </span><span class="cls_009">GameScreen</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:126.00px;top:135.43px" class="cls_021"><span class="cls_021">private void updateScore() {</span></div>
<div style="position:absolute;left:136.80px;top:147.67px" class="cls_021"><span class="cls_021">Flower flower = flowers.first();</span></div>
<div style="position:absolute;left:136.80px;top:159.91px" class="cls_021"><span class="cls_021">if (flower.getX() &lt; flappee.getX() && !flower.isPointClaimed())</span></div>
<div style="position:absolute;left:136.80px;top:170.71px" class="cls_021"><span class="cls_021">{</span></div>
<div style="position:absolute;left:147.60px;top:182.95px" class="cls_021"><span class="cls_021">flower.markPointClaimed();</span></div>
<div style="position:absolute;left:147.60px;top:195.19px" class="cls_021"><span class="cls_021">score++;</span></div>
<div style="position:absolute;left:136.80px;top:207.43px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:219.67px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:239.41px" class="cls_007"><span class="cls_007">Hooray! Now only a single point will be added to the player's score.</span></div>
<div style="position:absolute;left:108.00px;top:260.66px" class="cls_007"><span class="cls_007">Finally, let's have the score shown on the screen. This is going to be fairly similar to</span></div>
<div style="position:absolute;left:108.00px;top:273.26px" class="cls_007"><span class="cls_007">what we did with the Snake game.</span></div>
<div style="position:absolute;left:108.00px;top:294.49px" class="cls_007"><span class="cls_007">Let's add </span><span class="cls_009">BitmapFont</span><span class="cls_007"> to our </span><span class="cls_009">GameScreen</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:126.00px;top:315.43px" class="cls_021"><span class="cls_021">private BitmapFont bitmapFont;</span></div>
<div style="position:absolute;left:126.00px;top:327.67px" class="cls_021"><span class="cls_021">private GlyphLayout glyphLayout;</span></div>
<div style="position:absolute;left:126.00px;top:339.91px" class="cls_021"><span class="cls_021">public void show() {</span></div>
<div style="position:absolute;left:136.80px;top:352.15px" class="cls_021"><span class="cls_021">/** Code omitted for brevity **/</span></div>
<div style="position:absolute;left:136.80px;top:364.39px" class="cls_021"><span class="cls_021">bitmapFont = new BitmapFont();</span></div>
<div style="position:absolute;left:136.80px;top:376.63px" class="cls_021"><span class="cls_021">glyphLayout = new GlyphLayout();</span></div>
<div style="position:absolute;left:126.00px;top:388.87px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:408.61px" class="cls_007"><span class="cls_007">Next, let's reuse the </span><span class="cls_009">drawScore()</span><span class="cls_007"> method from our Snake game:</span></div>
<div style="position:absolute;left:126.00px;top:429.55px" class="cls_021"><span class="cls_021">private void drawScore() {</span></div>
<div style="position:absolute;left:136.80px;top:441.79px" class="cls_021"><span class="cls_021">String scoreAsString = Integer.toString(score);</span></div>
<div style="position:absolute;left:136.80px;top:454.03px" class="cls_021"><span class="cls_021">glyphLayout.setText(bitmapFont, scoreAsString);</span></div>
<div style="position:absolute;left:136.80px;top:466.27px" class="cls_021"><span class="cls_021">bitmapFont.draw(batch, scoreAsString,) (viewport.getWorldWidth()</span></div>
<div style="position:absolute;left:136.80px;top:477.07px" class="cls_021"><span class="cls_021">- glyphLayout.width / 2, (4 * viewport.getWorldHeight() / 5) -</span></div>
<div style="position:absolute;left:136.80px;top:487.87px" class="cls_021"><span class="cls_021">glyphLayout.height / 2);</span></div>
<div style="position:absolute;left:126.00px;top:500.11px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 82 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:77794px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background100.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 4</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Finally, what we can do is extract the actual drawing code from the </span><span class="cls_009">render()</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">method into its own </span><span class="cls_009">draw()</span><span class="cls_007"> method:</span></div>
<div style="position:absolute;left:126.00px;top:148.03px" class="cls_021"><span class="cls_021">private void draw() {</span></div>
<div style="position:absolute;left:136.80px;top:160.27px" class="cls_021"><span class="cls_021">batch.setProjectionMatrix(camera.projection);</span></div>
<div style="position:absolute;left:136.80px;top:172.51px" class="cls_021"><span class="cls_021">batch.setTransformMatrix(camera.view);</span></div>
<div style="position:absolute;left:136.80px;top:184.75px" class="cls_021"><span class="cls_021">batch.begin();</span></div>
<div style="position:absolute;left:136.80px;top:196.99px" class="cls_021"><span class="cls_021">drawScore();</span></div>
<div style="position:absolute;left:136.80px;top:209.23px" class="cls_021"><span class="cls_021">batch.end();</span></div>
<div style="position:absolute;left:126.00px;top:221.47px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:241.21px" class="cls_007"><span class="cls_007">Excellent! Let's run our project and see the results:</span></div>
<div style="position:absolute;left:108.00px;top:492.69px" class="cls_007"><span class="cls_007">Perfect, a bit small on the font size. However, remember we are using the default</span></div>
<div style="position:absolute;left:108.00px;top:505.29px" class="cls_007"><span class="cls_007">font. Later on, we will explore using our fonts!</span></div>
<div style="position:absolute;left:108.00px;top:526.53px" class="cls_007"><span class="cls_007">We now have a game; however, it is rather lacking in the art department. Luckily,</span></div>
<div style="position:absolute;left:108.00px;top:539.13px" class="cls_007"><span class="cls_007">our game artist has just delivered the assets for the game!</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 83 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:78596px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background101.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">What the Flap Is the Hype About?</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Here is a selection of the assets we will use!:</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 84 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:79398px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background102.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 4</span></div>
<div style="position:absolute;left:108.00px;top:111.92px" class="cls_019"><span class="cls_019">Adding textures and animations</span></div>
<div style="position:absolute;left:108.00px;top:136.90px" class="cls_007"><span class="cls_007">We now have our assets. Let's add them to the assets folder in our project and start</span></div>
<div style="position:absolute;left:108.00px;top:149.50px" class="cls_007"><span class="cls_007">adding them into the game.</span></div>
<div style="position:absolute;left:108.00px;top:170.74px" class="cls_007"><span class="cls_007">First up, let's add the background (</span><span class="cls_009">bg.png</span><span class="cls_007">). This is a relatively simple affair; like we</span></div>
<div style="position:absolute;left:108.01px;top:183.34px" class="cls_007"><span class="cls_007">did earlier, we create a </span><span class="cls_009">Texture</span><span class="cls_007"> object that represents the background, then draw it.</span></div>
<div style="position:absolute;left:108.00px;top:195.94px" class="cls_007"><span class="cls_007">So, in the </span><span class="cls_009">GameScreen</span><span class="cls_007"> class, add the following code:</span></div>
<div style="position:absolute;left:126.00px;top:216.88px" class="cls_021"><span class="cls_021">private Texture background;</span></div>
<div style="position:absolute;left:126.00px;top:241.36px" class="cls_021"><span class="cls_021">public void show() {</span></div>
<div style="position:absolute;left:136.80px;top:253.60px" class="cls_021"><span class="cls_021">/** Code omitted for brevity **/</span></div>
<div style="position:absolute;left:136.80px;top:265.84px" class="cls_021"><span class="cls_021">background = new Texture(Gdx.files.internal("bg.png"));</span></div>
<div style="position:absolute;left:126.00px;top:278.08px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:302.56px" class="cls_021"><span class="cls_021">private void draw() {</span></div>
<div style="position:absolute;left:136.80px;top:314.80px" class="cls_021"><span class="cls_021">batch.setProjectionMatrix(camera.projection);</span></div>
<div style="position:absolute;left:136.80px;top:327.04px" class="cls_021"><span class="cls_021">batch.setTransformMatrix(camera.view);</span></div>
<div style="position:absolute;left:136.80px;top:339.28px" class="cls_021"><span class="cls_021">batch.begin();</span></div>
<div style="position:absolute;left:136.80px;top:351.52px" class="cls_021"><span class="cls_021">batch.draw(background, 0, 0);</span></div>
<div style="position:absolute;left:136.80px;top:363.76px" class="cls_021"><span class="cls_021">drawScore();</span></div>
<div style="position:absolute;left:136.80px;top:376.00px" class="cls_021"><span class="cls_021">batch.end();</span></div>
<div style="position:absolute;left:126.00px;top:388.24px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:407.98px" class="cls_007"><span class="cls_007">Let's run it and see how it looks:</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 85 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:80200px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background103.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">What the Flap Is the Hype About?</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Excellent, we are almost there! OK, let's not kid ourselves, we still have more to do.</span></div>
<div style="position:absolute;left:108.00px;top:135.74px" class="cls_007"><span class="cls_007">Next, let's bring those flowers to life.</span></div>
<div style="position:absolute;left:108.00px;top:156.97px" class="cls_007"><span class="cls_007">First up, let's modify our </span><span class="cls_009">Flower</span><span class="cls_007"> class to take two </span><span class="cls_009">Texture</span><span class="cls_007"> objects, which will</span></div>
<div style="position:absolute;left:108.00px;top:169.57px" class="cls_007"><span class="cls_007">represent the top and bottom flowers. So, add the following code to your </span><span class="cls_009">Flower</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:126.00px;top:190.51px" class="cls_021"><span class="cls_021">private final Texture floorTexture;</span></div>
<div style="position:absolute;left:126.00px;top:202.75px" class="cls_021"><span class="cls_021">private final Texture ceilingTexture;</span></div>
<div style="position:absolute;left:126.00px;top:227.23px" class="cls_021"><span class="cls_021">public Flower(Texture floorTexture,Texture ceilingTexture) {</span></div>
<div style="position:absolute;left:136.80px;top:239.47px" class="cls_021"><span class="cls_021">this.floorTexture = floorTexture;</span></div>
<div style="position:absolute;left:136.80px;top:251.71px" class="cls_021"><span class="cls_021">this.ceilingTexture = ceilingTexture;</span></div>
<div style="position:absolute;left:136.80px;top:263.95px" class="cls_021"><span class="cls_021">/ ** Code omitted for brevity **/</span></div>
<div style="position:absolute;left:126.00px;top:276.19px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:295.93px" class="cls_007"><span class="cls_007">Now, we need to render these, so let's create a </span><span class="cls_009">draw()</span><span class="cls_007"> method:</span></div>
<div style="position:absolute;left:126.00px;top:316.87px" class="cls_021"><span class="cls_021">public void draw(SpriteBatch batch) {</span></div>
<div style="position:absolute;left:136.80px;top:329.11px" class="cls_021"><span class="cls_021">batch.draw(floorTexture, floorCollisionRectangle.getX(),</span></div>
<div style="position:absolute;left:136.80px;top:339.91px" class="cls_021"><span class="cls_021">floorCollisionRectangle.getY());</span></div>
<div style="position:absolute;left:136.80px;top:352.15px" class="cls_021"><span class="cls_021">batch.draw(ceilingTexture, ceilingCollisionRectangle.getX(),</span></div>
<div style="position:absolute;left:136.80px;top:362.95px" class="cls_021"><span class="cls_021">ceilingCollisionRectangle.getY());</span></div>
<div style="position:absolute;left:126.00px;top:375.19px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:394.93px" class="cls_007"><span class="cls_007">For the coordinates of the flower textures, we will use their corresponding collision</span></div>
<div style="position:absolute;left:108.00px;top:407.53px" class="cls_007"><span class="cls_007">rectangles' </span><span class="cls_020">x</span><span class="cls_007"> and </span><span class="cls_020">y</span><span class="cls_007"> values.</span></div>
<div style="position:absolute;left:108.00px;top:428.77px" class="cls_007"><span class="cls_007">Next, let's update our </span><span class="cls_009">GameScreen</span><span class="cls_007"> class. You might find that your IDE is now</span></div>
<div style="position:absolute;left:108.00px;top:441.37px" class="cls_007"><span class="cls_007">complaining about the </span><span class="cls_009">Flower</span><span class="cls_007"> class, as we changed the constructor signature:</span></div>
<div style="position:absolute;left:126.00px;top:462.31px" class="cls_021"><span class="cls_021">private Texture flowerBottom;</span></div>
<div style="position:absolute;left:126.00px;top:474.55px" class="cls_021"><span class="cls_021">private Texture flowerTop;</span></div>
<div style="position:absolute;left:126.00px;top:486.79px" class="cls_021"><span class="cls_021">public void show() {</span></div>
<div style="position:absolute;left:136.80px;top:499.03px" class="cls_021"><span class="cls_021">/** Code omitted for brevity **/</span></div>
<div style="position:absolute;left:136.80px;top:511.27px" class="cls_021"><span class="cls_021">flowerBottom = new</span></div>
<div style="position:absolute;left:136.80px;top:522.07px" class="cls_021"><span class="cls_021">Texture(Gdx.files.internal("flowerBottom.png"));</span></div>
<div style="position:absolute;left:136.80px;top:534.31px" class="cls_021"><span class="cls_021">flowerTop = new Texture(Gdx.files.internal("flowerTop.png"));</span></div>
<div style="position:absolute;left:126.00px;top:546.55px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:558.79px" class="cls_021"><span class="cls_021">private void createNewFlower() {</span></div>
<div style="position:absolute;left:136.80px;top:571.03px" class="cls_021"><span class="cls_021">Flower newFlower = new Flower(flowerBottom, flowerTop);</span></div>
<div style="position:absolute;left:136.80px;top:583.27px" class="cls_021"><span class="cls_021">newFlower.setPosition(WORLD_WIDTH + Flower.WIDTH);</span></div>
<div style="position:absolute;left:136.80px;top:595.51px" class="cls_021"><span class="cls_021">flowers.add(newFlower);</span></div>
<div style="position:absolute;left:126.00px;top:607.75px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:627.49px" class="cls_007"><span class="cls_007">So, here we define our textures and then pass them to our </span><span class="cls_009">Flower</span><span class="cls_007"> class. Now we just</span></div>
<div style="position:absolute;left:108.00px;top:640.09px" class="cls_007"><span class="cls_007">need to add a call to our </span><span class="cls_009">draw()</span><span class="cls_007"> method.</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 86 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:81002px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background104.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 4</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">First, create a method called </span><span class="cls_009">drawFlowers()</span><span class="cls_007">. This will iterate over the </span><span class="cls_009">Flower</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">objects and call the </span><span class="cls_009">draw()</span><span class="cls_007"> method for us:</span></div>
<div style="position:absolute;left:126.00px;top:148.03px" class="cls_021"><span class="cls_021">private void drawFlowers() {</span></div>
<div style="position:absolute;left:136.80px;top:160.27px" class="cls_021"><span class="cls_021">for (Flower flower : flowers) {</span></div>
<div style="position:absolute;left:147.60px;top:172.51px" class="cls_021"><span class="cls_021">flower.draw(batch);</span></div>
<div style="position:absolute;left:136.80px;top:184.75px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:196.99px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:216.73px" class="cls_007"><span class="cls_007">Finally, add a call to this method in our main </span><span class="cls_009">draw()</span><span class="cls_007"> method:</span></div>
<div style="position:absolute;left:126.00px;top:237.67px" class="cls_021"><span class="cls_021">private void draw() {</span></div>
<div style="position:absolute;left:136.80px;top:249.91px" class="cls_021"><span class="cls_021">batch.setProjectionMatrix(camera.projection);</span></div>
<div style="position:absolute;left:136.80px;top:262.15px" class="cls_021"><span class="cls_021">batch.setTransformMatrix(camera.view);</span></div>
<div style="position:absolute;left:136.80px;top:274.39px" class="cls_021"><span class="cls_021">batch.begin();</span></div>
<div style="position:absolute;left:136.80px;top:286.63px" class="cls_021"><span class="cls_021">batch.draw(background, 0, 0);</span></div>
<div style="position:absolute;left:136.80px;top:298.87px" class="cls_021"><span class="cls_021">drawFlowers();</span></div>
<div style="position:absolute;left:136.80px;top:311.11px" class="cls_021"><span class="cls_021">drawScore();</span></div>
<div style="position:absolute;left:136.80px;top:323.35px" class="cls_021"><span class="cls_021">batch.end();</span></div>
<div style="position:absolute;left:126.00px;top:335.59px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:355.33px" class="cls_007"><span class="cls_007">Good stuff! I think we should run our project and see what happens!</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 87 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:81804px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background105.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">What the Flap Is the Hype About?</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Oh! they are not where we were expecting them to be. This can be for a number of</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">reasons, for instance, and in this case, our artist has added some padding around</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">the texture for our flower. So, what we need to do is make the center of our flower</span></div>
<div style="position:absolute;left:108.00px;top:152.29px" class="cls_007"><span class="cls_007">texture relative to the center of the collision area.</span></div>
<div style="position:absolute;left:108.00px;top:173.54px" class="cls_007"><span class="cls_007">Since we know that our collision circle's </span><span class="cls_020">x</span><span class="cls_007"> value is the center of the collision area, we</span></div>
<div style="position:absolute;left:108.00px;top:186.14px" class="cls_007"><span class="cls_007">can use that as our reference point. Then, to get our texture's </span><span class="cls_020">x</span><span class="cls_007"> value, we just subtract</span></div>
<div style="position:absolute;left:108.00px;top:198.73px" class="cls_007"><span class="cls_007">half the width of our texture from the collision circle's </span><span class="cls_009">x</span><span class="cls_007"> value, as follows:</span></div>
<div style="position:absolute;left:126.00px;top:219.67px" class="cls_021"><span class="cls_021">float textureX = floorCollisionCircle.x - floorTexture.getWidth()</span></div>
<div style="position:absolute;left:126.00px;top:230.47px" class="cls_021"><span class="cls_021">/ 2;</span></div>
<div style="position:absolute;left:108.00px;top:250.21px" class="cls_007"><span class="cls_007">Of course, it will still appear out of alignment on the </span><span class="cls_009">y</span><span class="cls_007"> axis. To fix this we need adjust</span></div>
<div style="position:absolute;left:108.00px;top:262.81px" class="cls_007"><span class="cls_007">the position of the texture by our </span><span class="cls_009">COLLISION_CIRCLE_RADIUS</span><span class="cls_007">. So we can just add</span></div>
<div style="position:absolute;left:108.00px;top:275.41px" class="cls_007"><span class="cls_007">that value to our </span><span class="cls_020">y</span><span class="cls_007"> as follows:</span></div>
<div style="position:absolute;left:126.00px;top:296.35px" class="cls_021"><span class="cls_021">float textureY = floorCollisionRectangle.getY() +</span></div>
<div style="position:absolute;left:126.00px;top:307.15px" class="cls_021"><span class="cls_021">COLLISION_CIRCLE_RADIUS;</span></div>
<div style="position:absolute;left:108.00px;top:326.89px" class="cls_007"><span class="cls_007">Let's put all the preceding explainations together in a little method:</span></div>
<div style="position:absolute;left:126.00px;top:347.83px" class="cls_021"><span class="cls_021">private void drawFloorFlower(SpriteBatch batch) {</span></div>
<div style="position:absolute;left:136.80px;top:360.07px" class="cls_021"><span class="cls_021">float textureX = floorCollisionCircle.x -</span></div>
<div style="position:absolute;left:136.80px;top:370.87px" class="cls_021"><span class="cls_021">floorTexture.getWidth() / 2;</span></div>
<div style="position:absolute;left:136.80px;top:383.11px" class="cls_021"><span class="cls_021">float textureY = floorCollisionRectangle.getY() +</span></div>
<div style="position:absolute;left:136.80px;top:393.91px" class="cls_021"><span class="cls_021">COLLISION_CIRCLE_RADIUS;</span></div>
<div style="position:absolute;left:136.80px;top:406.15px" class="cls_021"><span class="cls_021">batch.draw(floorTexture, textureX, textureY);</span></div>
<div style="position:absolute;left:126.00px;top:418.39px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:438.13px" class="cls_007"><span class="cls_007">Now, update the </span><span class="cls_009">draw()</span><span class="cls_007"> method:</span></div>
<div style="position:absolute;left:126.00px;top:459.07px" class="cls_021"><span class="cls_021">public void draw(SpriteBatch batch) {</span></div>
<div style="position:absolute;left:136.80px;top:471.31px" class="cls_021"><span class="cls_021">drawFloorFlower(batch);</span></div>
<div style="position:absolute;left:136.80px;top:483.55px" class="cls_021"><span class="cls_021">batch.draw(ceilingTexture, ceilingCollisionRectangle.getX(),</span></div>
<div style="position:absolute;left:136.80px;top:494.35px" class="cls_021"><span class="cls_021">ceilingCollisionRectangle.getY());</span></div>
<div style="position:absolute;left:126.00px;top:506.59px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 88 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:82606px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background106.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 4</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Let's now run our project.</span></div>
<div style="position:absolute;left:108.00px;top:398.96px" class="cls_007"><span class="cls_007">Perfect! Now, let's update the flower at the top by adding the following to your</span></div>
<div style="position:absolute;left:108.00px;top:411.56px" class="cls_009"><span class="cls_009">Flower</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:126.00px;top:432.50px" class="cls_021"><span class="cls_021">private void drawCeilingFlower(SpriteBatch batch) {</span></div>
<div style="position:absolute;left:136.80px;top:444.74px" class="cls_021"><span class="cls_021">float textureX = ceilingCollisionCircle.x -</span></div>
<div style="position:absolute;left:136.80px;top:455.54px" class="cls_021"><span class="cls_021">ceilingTexture.getWidth() / 2;</span></div>
<div style="position:absolute;left:136.80px;top:467.78px" class="cls_021"><span class="cls_021">float textureY = ceilingCollisionRectangle.getY() -</span></div>
<div style="position:absolute;left:136.80px;top:478.58px" class="cls_021"><span class="cls_021">COLLISION_CIRCLE_RADIUS;</span></div>
<div style="position:absolute;left:136.80px;top:490.82px" class="cls_021"><span class="cls_021">batch.draw(ceilingTexture, textureX, textureY);</span></div>
<div style="position:absolute;left:126.00px;top:503.06px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:522.80px" class="cls_007"><span class="cls_007">At first glance, it might look like the same mathematics as the bottom flower, but the</span></div>
<div style="position:absolute;left:108.00px;top:535.40px" class="cls_007"><span class="cls_007">difference here is that we subtract the circle radius from the </span><span class="cls_009">y</span><span class="cls_007"> position to move the</span></div>
<div style="position:absolute;left:108.00px;top:548.00px" class="cls_007"><span class="cls_007">image down.</span></div>
<div style="position:absolute;left:108.00px;top:569.24px" class="cls_007"><span class="cls_007">Update the </span><span class="cls_009">Flower draw()</span><span class="cls_007"> method again:</span></div>
<div style="position:absolute;left:126.00px;top:590.18px" class="cls_021"><span class="cls_021">public void draw(SpriteBatch batch) {</span></div>
<div style="position:absolute;left:136.80px;top:602.42px" class="cls_021"><span class="cls_021">drawFloorFlower(batch);</span></div>
<div style="position:absolute;left:136.80px;top:614.66px" class="cls_021"><span class="cls_021">drawCeilingFlower(batch);</span></div>
<div style="position:absolute;left:126.00px;top:626.90px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 89 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:83408px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background107.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">What the Flap Is the Hype About?</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Again, let's run the project.</span></div>
<div style="position:absolute;left:108.00px;top:411.40px" class="cls_007"><span class="cls_007">Spot on! Congratulate yourself. Just Flappee to bring to life now.</span></div>
<div style="position:absolute;left:108.00px;top:432.64px" class="cls_007"><span class="cls_007">To bring Flappee to life, we go through a similar process to the one we did for the</span></div>
<div style="position:absolute;left:108.00px;top:445.24px" class="cls_007"><span class="cls_007">flowers. First, let's update our </span><span class="cls_009">Flappee</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:126.00px;top:466.18px" class="cls_021"><span class="cls_021">private final Texture flappeeTexture;</span></div>
<div style="position:absolute;left:126.00px;top:478.42px" class="cls_021"><span class="cls_021">public Flappee(Texture flappeeTexture) {</span></div>
<div style="position:absolute;left:136.80px;top:490.66px" class="cls_021"><span class="cls_021">this.flappeeTexture = flappeeTexture;</span></div>
<div style="position:absolute;left:136.80px;top:502.90px" class="cls_021"><span class="cls_021">/** Code omitted for brevity **/</span></div>
<div style="position:absolute;left:126.00px;top:515.14px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:527.38px" class="cls_021"><span class="cls_021">public void draw(SpriteBatch batch) {</span></div>
<div style="position:absolute;left:136.80px;top:539.62px" class="cls_021"><span class="cls_021">batch.draw(flappeeTexture, collisionCircle.x,</span></div>
<div style="position:absolute;left:136.80px;top:550.42px" class="cls_021"><span class="cls_021">collisionCircle.y);</span></div>
<div style="position:absolute;left:126.00px;top:562.66px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 90 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:84210px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background108.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 4</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">The astute among you might be asking why we are passing in our </span><span class="cls_009">Texture</span><span class="cls_007"> object</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">when we can get hold of a </span><span class="cls_009">FileHandle</span><span class="cls_007"> instance statically and just create it in the</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">constructor. Yes, you are correct, there is nothing to stop you from doing that. I have</span></div>
<div style="position:absolute;left:108.00px;top:152.29px" class="cls_007"><span class="cls_007">taken this approach, so that all our textures are created in the same place, that is,</span></div>
<div style="position:absolute;left:108.00px;top:164.89px" class="cls_009"><span class="cls_009">GameScreen</span><span class="cls_007">, so it can be responsible for their life cycle, that is, dispose them when</span></div>
<div style="position:absolute;left:108.01px;top:177.49px" class="cls_007"><span class="cls_007">we no longer need them. You can handle the disposal in the </span><span class="cls_009">Flappee</span><span class="cls_007"> class, but you</span></div>
<div style="position:absolute;left:108.00px;top:190.09px" class="cls_007"><span class="cls_007">might find that when stuff like this is hidden, it gets overlooked and before you</span></div>
<div style="position:absolute;left:108.00px;top:202.69px" class="cls_007"><span class="cls_007">know it, you are running out of memory because new textures keep getting created</span></div>
<div style="position:absolute;left:108.00px;top:215.29px" class="cls_007"><span class="cls_007">and are never disposed of.</span></div>
<div style="position:absolute;left:108.00px;top:236.53px" class="cls_007"><span class="cls_007">Once again, we need to update our </span><span class="cls_009">GameScreen</span><span class="cls_007"> class to reflect this change:</span></div>
<div style="position:absolute;left:126.00px;top:257.47px" class="cls_021"><span class="cls_021">private Texture flappeeTexture;</span></div>
<div style="position:absolute;left:126.00px;top:269.71px" class="cls_021"><span class="cls_021">public void show() {</span></div>
<div style="position:absolute;left:136.80px;top:281.95px" class="cls_021"><span class="cls_021">/** Code omitted for brevity **/</span></div>
<div style="position:absolute;left:136.80px;top:294.19px" class="cls_021"><span class="cls_021">flappeeTexture = new Texture(Gdx.files.internal("bee.png"));</span></div>
<div style="position:absolute;left:136.80px;top:306.43px" class="cls_021"><span class="cls_021">flappee = new Flappee(flappeeTexture);</span></div>
<div style="position:absolute;left:136.80px;top:318.67px" class="cls_021"><span class="cls_021">flappee.setPosition(WORLD_WIDTH / 4, WORLD_HEIGHT / 2);</span></div>
<div style="position:absolute;left:126.00px;top:330.91px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:343.15px" class="cls_021"><span class="cls_021">private void draw() {</span></div>
<div style="position:absolute;left:136.80px;top:355.39px" class="cls_021"><span class="cls_021">batch.setProjectionMatrix(camera.projection);</span></div>
<div style="position:absolute;left:136.80px;top:367.63px" class="cls_021"><span class="cls_021">batch.setTransformMatrix(camera.view);</span></div>
<div style="position:absolute;left:136.80px;top:379.87px" class="cls_021"><span class="cls_021">batch.begin();</span></div>
<div style="position:absolute;left:136.80px;top:392.11px" class="cls_021"><span class="cls_021">batch.draw(background, 0, 0);</span></div>
<div style="position:absolute;left:136.80px;top:404.35px" class="cls_021"><span class="cls_021">drawFlowers();</span></div>
<div style="position:absolute;left:136.80px;top:416.59px" class="cls_021"><span class="cls_021">flappee.draw(batch);</span></div>
<div style="position:absolute;left:136.80px;top:428.83px" class="cls_021"><span class="cls_021">drawScore();</span></div>
<div style="position:absolute;left:136.80px;top:441.07px" class="cls_021"><span class="cls_021">batch.end();</span></div>
<div style="position:absolute;left:126.00px;top:453.31px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 91 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:85012px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background109.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">What the Flap Is the Hype About?</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">In the preceding code listing, you will notice that we placed the construction of</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">the </span><span class="cls_009">Flappee</span><span class="cls_007"> object above the </span><span class="cls_009">setPosition()</span><span class="cls_007"> method call. You might be aware</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">that if we did this the other way around, we would get the dreaded </span><span class="cls_009">NullPointer</span></div>
<div style="position:absolute;left:108.00px;top:152.29px" class="cls_007"><span class="cls_007">exception. Now, if we run our project, we will hopefully see a Flappee buzzing away</span></div>
<div style="position:absolute;left:108.00px;top:164.89px" class="cls_007"><span class="cls_007">on the screen!</span></div>
<div style="position:absolute;left:108.00px;top:474.87px" class="cls_007"><span class="cls_007">Oh no! First, he isn't where we expect him to be, and second, there are two! How did</span></div>
<div style="position:absolute;left:108.00px;top:487.47px" class="cls_007"><span class="cls_007">this happen?</span></div>
<div style="position:absolute;left:108.00px;top:508.71px" class="cls_007"><span class="cls_007">Well, truthfully, I knew this was going to happen. Take a look at the </span><span class="cls_009">bee.png</span><span class="cls_007"> image</span></div>
<div style="position:absolute;left:108.00px;top:521.31px" class="cls_007"><span class="cls_007">we used for our texture. It contains two bees, this will come in useful later on when</span></div>
<div style="position:absolute;left:108.00px;top:533.91px" class="cls_007"><span class="cls_007">we are looking at animating Flappee. But for now, we only want a single bee.</span></div>
<div style="position:absolute;left:108.00px;top:555.15px" class="cls_007"><span class="cls_007">How do we do this? Well luckily, LibGDX's </span><span class="cls_009">TextureRegion</span><span class="cls_007"> class comes with</span></div>
<div style="position:absolute;left:108.00px;top:567.75px" class="cls_007"><span class="cls_007">a </span><span class="cls_009">split()</span><span class="cls_007"> method that will slice up our image into a two-dimensional array of</span></div>
<div style="position:absolute;left:108.00px;top:580.35px" class="cls_009"><span class="cls_009">TextureRegions</span><span class="cls_007">. A </span><span class="cls_009">TextureRegion</span><span class="cls_007"> class is exactly what it says it is, a region of</span></div>
<div style="position:absolute;left:108.00px;top:592.95px" class="cls_007"><span class="cls_007">a texture. If you look at the code (yey for open source software!) you will see it</span></div>
<div style="position:absolute;left:108.00px;top:605.55px" class="cls_007"><span class="cls_007">contains a reference to the parent texture and a set of coordinates of the region this</span></div>
<div style="position:absolute;left:108.00px;top:618.15px" class="cls_007"><span class="cls_007">object will cover.</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 92 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:85814px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background110.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 4</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">So, we know what a </span><span class="cls_009">TextureRegion</span><span class="cls_007"> is, but how do we implement it into our game?</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">First, we need to know the size, in pixels, we want for each region. In the case of</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">Flappee, it is 118x x 118px. Next, we need to take our </span><span class="cls_009">Texture</span><span class="cls_007"> object and make it</span></div>
<div style="position:absolute;left:108.00px;top:152.29px" class="cls_009"><span class="cls_009">TextureRegion</span><span class="cls_007">, so we can call </span><span class="cls_009">split()</span><span class="cls_007"> and get our array of images.</span></div>
<div style="position:absolute;left:108.00px;top:173.53px" class="cls_007"><span class="cls_007">Let's update our </span><span class="cls_009">Flappee</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:126.00px;top:194.47px" class="cls_021"><span class="cls_021">private static final int TILE_WIDTH = 118;</span></div>
<div style="position:absolute;left:126.00px;top:206.71px" class="cls_021"><span class="cls_021">private static final int TILE_HEIGHT = 118;</span></div>
<div style="position:absolute;left:126.00px;top:231.19px" class="cls_021"><span class="cls_021">public Flappee(Texture flappeeTexture) {</span></div>
<div style="position:absolute;left:136.80px;top:243.43px" class="cls_021"><span class="cls_021">this.flappeeTexture = new</span></div>
<div style="position:absolute;left:136.80px;top:254.23px" class="cls_021"><span class="cls_021">TextureRegion(flappeeTexture).split(TILE_WIDTH,</span></div>
<div style="position:absolute;left:136.80px;top:265.03px" class="cls_021"><span class="cls_021">TILE_HEIGHT)[0][0];</span></div>
<div style="position:absolute;left:136.80px;top:277.27px" class="cls_021"><span class="cls_021">collisionCircle = new Circle(x, y, COLLISION_RADIUS);</span></div>
<div style="position:absolute;left:126.00px;top:289.51px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:309.25px" class="cls_007"><span class="cls_007">We refer to the size of region we want with the </span><span class="cls_009">TILE</span><span class="cls_007"> constants. It makes sense to</span></div>
<div style="position:absolute;left:108.00px;top:321.85px" class="cls_007"><span class="cls_007">refer to them as tiles, as that is essentially what we are doing, turning our texture into</span></div>
<div style="position:absolute;left:108.00px;top:334.45px" class="cls_007"><span class="cls_007">tiles. Then, we are specifying that we want the tile in the first column and first row.</span></div>
<div style="position:absolute;left:108.00px;top:355.70px" class="cls_007"><span class="cls_007">Let's have a run and check the output.</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 93 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:86616px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background111.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">What the Flap Is the Hype About?</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Almost there, let's now sort out that offset.</span></div>
<div style="position:absolute;left:108.00px;top:135.73px" class="cls_007"><span class="cls_007">Similar to what we did in the </span><span class="cls_009">Flower</span><span class="cls_007"> class, we center our texture relative to the</span></div>
<div style="position:absolute;left:108.00px;top:148.33px" class="cls_007"><span class="cls_007">center of the collision circle:</span></div>
<div style="position:absolute;left:126.00px;top:169.27px" class="cls_021"><span class="cls_021">public void draw(SpriteBatch batch) {</span></div>
<div style="position:absolute;left:136.80px;top:181.51px" class="cls_021"><span class="cls_021">float textureX = collisionCircle.x -</span></div>
<div style="position:absolute;left:136.80px;top:192.31px" class="cls_021"><span class="cls_021">flappeeTexture.getRegionWidth() / 2;</span></div>
<div style="position:absolute;left:136.80px;top:204.55px" class="cls_021"><span class="cls_021">float textureY = collisionCircle.y -</span></div>
<div style="position:absolute;left:136.80px;top:215.35px" class="cls_021"><span class="cls_021">flappeeTexture.getRegionHeight() / 2;</span></div>
<div style="position:absolute;left:136.80px;top:227.59px" class="cls_021"><span class="cls_021">batch.draw(flappeeTexture, textureX, textureY);</span></div>
<div style="position:absolute;left:126.00px;top:239.83px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:259.57px" class="cls_007"><span class="cls_007">Run it up and check it out! It should be bang on. Now for added effect, turn off the</span></div>
<div style="position:absolute;left:108.00px;top:272.17px" class="cls_007"><span class="cls_007">call to </span><span class="cls_009">drawDebug()</span><span class="cls_007"> in the </span><span class="cls_009">GameScreen</span><span class="cls_007"> class.</span></div>
<div style="position:absolute;left:108.00px;top:582.15px" class="cls_007"><span class="cls_007">Now it is looking pretty much like a game! However, we have the opportunity</span></div>
<div style="position:absolute;left:108.00px;top:594.75px" class="cls_007"><span class="cls_007">to animate Flappee as we have a second asset. Let's look at how to make Flappee</span></div>
<div style="position:absolute;left:108.00px;top:607.35px" class="cls_007"><span class="cls_007">come to life.</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 94 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:87418px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background112.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 4</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Once again, LibGDX saves the day with a very useful class called </span><span class="cls_009">Animation</span><span class="cls_007">. An</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_009"><span class="cls_009">Animation</span><span class="cls_007"> class essentially holds an array of </span><span class="cls_009">TextureRegions</span><span class="cls_007"> and, when given a set</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">frame duration and a state timer, it can tell you which </span><span class="cls_009">TextureRegion</span><span class="cls_007"> parameter to</span></div>
<div style="position:absolute;left:108.00px;top:152.29px" class="cls_007"><span class="cls_007">draw. It has a variety of different play modes as well:</span></div>
<div style="position:absolute;left:126.00px;top:173.54px" class="cls_007"><span class="cls_007">•  Normal</span></div>
<div style="position:absolute;left:126.00px;top:190.45px" class="cls_007"><span class="cls_007">•  Reversed</span></div>
<div style="position:absolute;left:126.00px;top:207.37px" class="cls_007"><span class="cls_007">•  Loop</span></div>
<div style="position:absolute;left:126.00px;top:224.28px" class="cls_007"><span class="cls_007">•  Loop reversed</span></div>
<div style="position:absolute;left:126.00px;top:241.20px" class="cls_007"><span class="cls_007">•  Loop pingpong</span></div>
<div style="position:absolute;left:126.00px;top:258.11px" class="cls_007"><span class="cls_007">•  Loop random</span></div>
<div style="position:absolute;left:107.99px;top:279.35px" class="cls_007"><span class="cls_007">Visit the JavaDoc at </span><A HREF="http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/graphics/g2d/Animation.PlayMode.html">http://libgdx.badlogicgames.com/nightlies/docs/</A> </span></div>
<div style="position:absolute;left:108.00px;top:291.97px" class="cls_009"><span class="cls_009"> </span><A HREF="http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/graphics/g2d/Animation.PlayMode.html">api/com/badlogic/gdx/graphics/g2d/Animation.PlayMode.html</A> <span class="cls_007"> for more</span></div>
<div style="position:absolute;left:108.00px;top:304.57px" class="cls_007"><span class="cls_007">information.</span></div>
<div style="position:absolute;left:108.00px;top:325.81px" class="cls_007"><span class="cls_007">These modes affect how the </span><span class="cls_009">Animation</span><span class="cls_007"> class decides which </span><span class="cls_009">TextureRegion</span></div>
<div style="position:absolute;left:108.00px;top:338.41px" class="cls_007"><span class="cls_007">parameter should be shown.</span></div>
<div style="position:absolute;left:108.00px;top:359.65px" class="cls_007"><span class="cls_007">Great! Let's get it into Flappee. First, we remove the old reference to </span><span class="cls_009">TextureRegion</span></div>
<div style="position:absolute;left:108.00px;top:372.25px" class="cls_007"><span class="cls_007">that we had in the class and replace it with an </span><span class="cls_009">Animation</span><span class="cls_007"> reference:</span></div>
<div style="position:absolute;left:126.00px;top:393.19px" class="cls_021"><span class="cls_021">private final Animation animation;</span></div>
<div style="position:absolute;left:108.00px;top:412.93px" class="cls_007"><span class="cls_007">Next, we update the constructor to instantiate the </span><span class="cls_009">Animation</span><span class="cls_007"> class with an array of</span></div>
<div style="position:absolute;left:108.00px;top:425.53px" class="cls_009"><span class="cls_009">TextureRegion</span><span class="cls_007"> parameters:</span></div>
<div style="position:absolute;left:126.00px;top:446.47px" class="cls_021"><span class="cls_021">public Flappee(Texture flappeeTexture) {</span></div>
<div style="position:absolute;left:136.80px;top:458.71px" class="cls_021"><span class="cls_021">TextureRegion[][] flappeeTextures = new</span></div>
<div style="position:absolute;left:136.80px;top:469.51px" class="cls_021"><span class="cls_021">TextureRegion(flappeeTexture).split(TILE_WIDTH, TILE_HEIGHT);</span></div>
<div style="position:absolute;left:136.80px;top:493.99px" class="cls_021"><span class="cls_021">animation = new Animation(FRAME_DURATION,flappeeTextures[0][0],</span></div>
<div style="position:absolute;left:136.80px;top:504.79px" class="cls_021"><span class="cls_021">flappeeTextures[0][1]);</span></div>
<div style="position:absolute;left:136.80px;top:517.03px" class="cls_021"><span class="cls_021">animation.setPlayMode(Animation.PlayMode.LOOP);</span></div>
<div style="position:absolute;left:136.80px;top:541.51px" class="cls_021"><span class="cls_021">collisionCircle = new Circle(x, y, COLLISION_RADIUS);</span></div>
<div style="position:absolute;left:126.00px;top:553.75px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:573.49px" class="cls_007"><span class="cls_007">So, similar to what we did earlier, we split the textures and then pass in the</span></div>
<div style="position:absolute;left:108.00px;top:586.09px" class="cls_007"><span class="cls_007">references to the tile. In this case, it is row zero and columns zero and one.</span></div>
<div style="position:absolute;left:108.00px;top:598.69px" class="cls_007"><span class="cls_007">We also specify a </span><span class="cls_009">FRAME_DURATION</span><span class="cls_007"> constant:</span></div>
<div style="position:absolute;left:126.00px;top:619.63px" class="cls_021"><span class="cls_021">private static final float FRAME_DURATION = 0.25F;</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 95 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:88220px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background113.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">What the Flap Is the Hype About?</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Set </span><span class="cls_009">PlayMode</span><span class="cls_007"> to </span><span class="cls_009">LOOP</span><span class="cls_007">.</span></div>
<div style="position:absolute;left:108.00px;top:135.74px" class="cls_007"><span class="cls_007">Next, we add an animation timer:</span></div>
<div style="position:absolute;left:126.00px;top:156.67px" class="cls_021"><span class="cls_021">private float animationTimer = 0;</span></div>
<div style="position:absolute;left:108.00px;top:176.41px" class="cls_007"><span class="cls_007">We increment this value on every update call, so this means we need to update our</span></div>
<div style="position:absolute;left:108.00px;top:189.01px" class="cls_009"><span class="cls_009">update()</span><span class="cls_007"> method to do this:</span></div>
<div style="position:absolute;left:126.00px;top:209.95px" class="cls_021"><span class="cls_021">public void update(float delta) {</span></div>
<div style="position:absolute;left:136.80px;top:222.19px" class="cls_021"><span class="cls_021">animationTimer += delta;</span></div>
<div style="position:absolute;left:136.80px;top:234.43px" class="cls_021"><span class="cls_021">ySpeed -= DIVE_ACCEL;</span></div>
<div style="position:absolute;left:136.80px;top:246.67px" class="cls_021"><span class="cls_021">setPosition(x, y + ySpeed);</span></div>
<div style="position:absolute;left:126.00px;top:258.91px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:278.65px" class="cls_007"><span class="cls_007">Finally, we update our </span><span class="cls_009">draw()</span><span class="cls_007"> method to access the </span><span class="cls_009">Animation</span><span class="cls_007"> class and return the</span></div>
<div style="position:absolute;left:108.00px;top:291.25px" class="cls_009"><span class="cls_009">TextureRegion</span><span class="cls_007"> parameter we want to render:</span></div>
<div style="position:absolute;left:126.00px;top:312.19px" class="cls_021"><span class="cls_021">public void draw(SpriteBatch batch) {</span></div>
<div style="position:absolute;left:136.80px;top:324.43px" class="cls_021"><span class="cls_021">TextureRegion flappeeTexture =</span></div>
<div style="position:absolute;left:136.80px;top:335.23px" class="cls_021"><span class="cls_021">animation.getKeyFrame(animationTimer);</span></div>
<div style="position:absolute;left:136.80px;top:347.47px" class="cls_021"><span class="cls_021">float textureX = collisionCircle.x -</span></div>
<div style="position:absolute;left:136.80px;top:358.27px" class="cls_021"><span class="cls_021">flappeeTexture.getRegionWidth() / 2;</span></div>
<div style="position:absolute;left:136.80px;top:370.51px" class="cls_021"><span class="cls_021">float textureY = collisionCircle.y -</span></div>
<div style="position:absolute;left:136.80px;top:381.31px" class="cls_021"><span class="cls_021">flappeeTexture.getRegionHeight() / 2;</span></div>
<div style="position:absolute;left:136.80px;top:393.55px" class="cls_021"><span class="cls_021">batch.draw(flappeeTexture, textureX, textureY);</span></div>
<div style="position:absolute;left:126.00px;top:405.79px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:425.53px" class="cls_007"><span class="cls_007">Excellent, Flappee has been updated! However, we need to update our </span><span class="cls_009">GameScreen</span></div>
<div style="position:absolute;left:108.00px;top:438.13px" class="cls_007"><span class="cls_007">class to reflect the change in our </span><span class="cls_009">Flappee</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:126.00px;top:459.07px" class="cls_021"><span class="cls_021">private void update(float delta) {</span></div>
<div style="position:absolute;left:136.80px;top:471.31px" class="cls_021"><span class="cls_021">updateFlappee(delta);</span></div>
<div style="position:absolute;left:136.80px;top:483.55px" class="cls_021"><span class="cls_021">updateFlowers(delta);</span></div>
<div style="position:absolute;left:136.80px;top:495.79px" class="cls_021"><span class="cls_021">updateScore();</span></div>
<div style="position:absolute;left:136.80px;top:508.03px" class="cls_021"><span class="cls_021">if (checkForCollision()) {</span></div>
<div style="position:absolute;left:147.60px;top:520.27px" class="cls_021"><span class="cls_021">restart();</span></div>
<div style="position:absolute;left:136.80px;top:532.51px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:544.75px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:556.99px" class="cls_021"><span class="cls_021">private void updateFlappee(float delta) {</span></div>
<div style="position:absolute;left:136.80px;top:569.23px" class="cls_021"><span class="cls_021">flappee.update(delta);</span></div>
<div style="position:absolute;left:136.80px;top:581.47px" class="cls_021"><span class="cls_021">if (Gdx.input.isKeyPressed(Input.Keys.SPACE)) flappee.flyUp();</span></div>
<div style="position:absolute;left:136.80px;top:593.71px" class="cls_021"><span class="cls_021">blockFlappeeLeavingTheWorld();</span></div>
<div style="position:absolute;left:126.00px;top:605.95px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:625.69px" class="cls_007"><span class="cls_007">Superb! We are now ready to run our project and see Flappee buzz!</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 96 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:89022px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background114.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 4</span></div>
<div style="position:absolute;left:108.00px;top:111.92px" class="cls_019"><span class="cls_019">GUI creation with Scene2D</span></div>
<div style="position:absolute;left:108.00px;top:136.90px" class="cls_007"><span class="cls_007">We have our game, but you may be wondering why we haven't done anything with</span></div>
<div style="position:absolute;left:108.00px;top:149.50px" class="cls_007"><span class="cls_007">the lifecycle of the game, like we did with Snake. Well, that is because we are going</span></div>
<div style="position:absolute;left:108.00px;top:162.10px" class="cls_007"><span class="cls_007">to add new screens that will appear at the start and the end. But before we get on to</span></div>
<div style="position:absolute;left:108.00px;top:174.70px" class="cls_007"><span class="cls_007">creating and making the new screens, I want to talk about a really useful set of UI</span></div>
<div style="position:absolute;left:108.00px;top:187.30px" class="cls_007"><span class="cls_007">tools LibGDX offers for making UIs, Scene2D. Well, what is it?</span></div>
<div style="position:absolute;left:108.00px;top:208.54px" class="cls_007"><span class="cls_007">According the LibGDX wiki page:</span></div>
<div style="position:absolute;left:129.60px;top:230.14px" class="cls_020"><span class="cls_020">"Scene2d is a 2D scene graph for building applications and UIs using a hierarchy</span></div>
<div style="position:absolute;left:129.60px;top:242.74px" class="cls_020"><span class="cls_020">of actors."</span></div>
<div style="position:absolute;left:108.00px;top:264.34px" class="cls_007"><span class="cls_007">At its core, Scene2d is made of three classes:</span></div>
<div style="position:absolute;left:126.00px;top:285.58px" class="cls_007"><span class="cls_007">•</span><span class="cls_009">  Actor</span><span class="cls_007">: This contains the position, size (rectangular only), origin, scale,</span></div>
<div style="position:absolute;left:143.99px;top:298.18px" class="cls_007"><span class="cls_007">rotation, and color.</span></div>
<div style="position:absolute;left:126.00px;top:315.10px" class="cls_007"><span class="cls_007">•</span><span class="cls_009">  Group</span><span class="cls_007">: This is an </span><span class="cls_009">Actor</span><span class="cls_007"> class that can contain other actors and children.</span></div>
<div style="position:absolute;left:126.00px;top:332.02px" class="cls_007"><span class="cls_007">•</span><span class="cls_009">  Stage</span><span class="cls_007">: This class has a </span><span class="cls_009">Camera</span><span class="cls_007"> class, a </span><span class="cls_009">SpriteBatch</span><span class="cls_007"> class, and a </span><span class="cls_009">Group</span><span class="cls_007"> class.</span></div>
<div style="position:absolute;left:144.00px;top:344.62px" class="cls_007"><span class="cls_007">It orchestrates the updating, drawing, and input handling for all the children</span></div>
<div style="position:absolute;left:144.00px;top:357.22px" class="cls_007"><span class="cls_007">in its </span><span class="cls_009">Group</span><span class="cls_007">.</span></div>
<div style="position:absolute;left:108.00px;top:378.46px" class="cls_007"><span class="cls_007">Of course, this wouldn't be LibGDX if it stopped there. There is a whole host of</span></div>
<div style="position:absolute;left:108.00px;top:391.06px" class="cls_007"><span class="cls_007">useful classes subclassed from the </span><span class="cls_009">Actor</span><span class="cls_007"> classes.</span></div>
<div style="position:absolute;left:108.00px;top:412.30px" class="cls_007"><span class="cls_007">Here is a link to the reference page for an </span><span class="cls_009">Actor</span><span class="cls_007"> class: </span><A HREF="http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/scenes/scene2d/Actor.html">http://libgdx.</A> </span></div>
<div style="position:absolute;left:108.00px;top:424.70px" class="cls_009"><span class="cls_009"> </span><A HREF="http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/scenes/scene2d/Actor.html">badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/scenes/scene2d/</A> </div>
<div style="position:absolute;left:108.00px;top:436.30px" class="cls_009"><span class="cls_009"> </span><A HREF="http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/scenes/scene2d/Actor.html">Actor.html</A> <span class="cls_007">.</span></div>
<div style="position:absolute;left:108.01px;top:457.54px" class="cls_007"><span class="cls_007">I suggest that you take a look at the hierarchy so you can get a feel of how powerful</span></div>
<div style="position:absolute;left:108.01px;top:470.14px" class="cls_007"><span class="cls_007">Scene2d really is!</span></div>
<div style="position:absolute;left:108.00px;top:500.08px" class="cls_025"><span class="cls_025">The Stage class</span></div>
<div style="position:absolute;left:108.00px;top:523.06px" class="cls_007"><span class="cls_007">Let's have a quick chat about the </span><span class="cls_009">Stage</span><span class="cls_007"> class before we get on to using it. A </span><span class="cls_009">Stage</span></div>
<div style="position:absolute;left:108.00px;top:535.66px" class="cls_007"><span class="cls_007">class has two core methods that have to be called in order for it to work:</span></div>
<div style="position:absolute;left:126.00px;top:556.60px" class="cls_021"><span class="cls_021">act(float delta);</span></div>
<div style="position:absolute;left:126.00px;top:568.84px" class="cls_021"><span class="cls_021">draw();</span></div>
<div style="position:absolute;left:108.00px;top:588.58px" class="cls_007"><span class="cls_007">The first method, </span><span class="cls_009">act()</span><span class="cls_007">, will go through and update all the child </span><span class="cls_009">Actor</span><span class="cls_007"> classes in</span></div>
<div style="position:absolute;left:108.00px;top:601.18px" class="cls_007"><span class="cls_007">the graph. Each </span><span class="cls_009">Actor</span><span class="cls_007"> has its own </span><span class="cls_009">act()</span><span class="cls_007"> method, so it is this class that is called. It is</span></div>
<div style="position:absolute;left:108.00px;top:613.78px" class="cls_007"><span class="cls_007">useful to know this, as you may want to implement your own </span><span class="cls_009">Actor</span><span class="cls_007"> implementation</span></div>
<div style="position:absolute;left:108.00px;top:626.38px" class="cls_007"><span class="cls_007">and you might want to do some specific work in every frame.</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 97 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:89824px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background115.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">What the Flap Is the Hype About?</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">The second method, </span><span class="cls_009">draw()</span><span class="cls_007">, will render the UI graph to the screen. As you can</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">imagine, this really simplifies the code of your game!</span></div>
<div style="position:absolute;left:108.00px;top:148.33px" class="cls_007"><span class="cls_007">One last key thing to mention is that the </span><span class="cls_009">Stage</span><span class="cls_007"> class is also an </span><span class="cls_009">InputProcessor</span><span class="cls_007">,</span></div>
<div style="position:absolute;left:108.00px;top:160.93px" class="cls_007"><span class="cls_007">this allows for it to fire off input events to the child </span><span class="cls_009">Actor</span><span class="cls_007"> classes. This means that</span></div>
<div style="position:absolute;left:108.00px;top:173.53px" class="cls_007"><span class="cls_007">LibGDX needs to be told to use this class:</span></div>
<div style="position:absolute;left:126.00px;top:194.47px" class="cls_021"><span class="cls_021">Gdx.input.setInputProcessor(stage);</span></div>
<div style="position:absolute;left:108.00px;top:214.21px" class="cls_007"><span class="cls_007">It is really that simple to get up and running with Scene2d, however, more on that</span></div>
<div style="position:absolute;left:108.00px;top:226.81px" class="cls_007"><span class="cls_007">later. I would like to finish off telling you about the wonders of Scene2d.</span></div>
<div style="position:absolute;left:108.00px;top:256.75px" class="cls_025"><span class="cls_025">The Actor class</span></div>
<div style="position:absolute;left:108.00px;top:279.73px" class="cls_007"><span class="cls_007">An </span><span class="cls_009">Actor</span><span class="cls_007"> class keeps track of all sorts of useful information about itself. A particular</span></div>
<div style="position:absolute;left:108.00px;top:292.33px" class="cls_007"><span class="cls_007">one I use often is the rotation of the </span><span class="cls_009">Actor</span><span class="cls_007"> class. This is useful when it comes to</span></div>
<div style="position:absolute;left:108.00px;top:304.93px" class="cls_007"><span class="cls_007">rendering the </span><span class="cls_009">Actor</span><span class="cls_007"> class as Scene2d automatically takes care of the rendering with</span></div>
<div style="position:absolute;left:108.00px;top:317.53px" class="cls_007"><span class="cls_007">rotation! The same applies to the scaling as well. This means we can focus more on</span></div>
<div style="position:absolute;left:108.00px;top:330.13px" class="cls_007"><span class="cls_007">making our game than building the UI.</span></div>
<div style="position:absolute;left:108.00px;top:351.37px" class="cls_007"><span class="cls_007">The </span><span class="cls_009">Actor</span><span class="cls_007"> classes also have a concept called </span><span class="cls_009">Actions</span><span class="cls_007"> associated to them. An </span><span class="cls_009">Action</span></div>
<div style="position:absolute;left:108.00px;top:363.97px" class="cls_007"><span class="cls_007">class is designed to manipulate the </span><span class="cls_009">Actor</span><span class="cls_007"> class in some way, perhaps to move, scale,</span></div>
<div style="position:absolute;left:108.00px;top:376.57px" class="cls_007"><span class="cls_007">rotate, hide, or show it. The list goes on, you can build your own </span><span class="cls_009">Action</span><span class="cls_007"> classes as</span></div>
<div style="position:absolute;left:108.00px;top:389.17px" class="cls_007"><span class="cls_007">well! As an added bonus, there is the ability to chain together a sequence of </span><span class="cls_009">Action</span></div>
<div style="position:absolute;left:108.00px;top:401.77px" class="cls_007"><span class="cls_007">classes either in parallel or in a sequence. This gives us endless possibilities.</span></div>
<div style="position:absolute;left:108.00px;top:423.01px" class="cls_007"><span class="cls_007">So what kind of </span><span class="cls_009">Actors</span><span class="cls_007"> would we commonly use? Well, I can't speak for everyone</span></div>
<div style="position:absolute;left:108.00px;top:435.61px" class="cls_007"><span class="cls_007">who uses it but the classes you will find in my code are:</span></div>
<div style="position:absolute;left:126.00px;top:456.85px" class="cls_007"><span class="cls_007">•</span><span class="cls_009">  Labels</span><span class="cls_007">: These are used to display text</span></div>
<div style="position:absolute;left:126.00px;top:473.77px" class="cls_007"><span class="cls_007">•</span><span class="cls_009">  ImageButtons</span><span class="cls_007">/</span><span class="cls_009">Buttons</span><span class="cls_007">: This UI element has three states, namely normal,</span></div>
<div style="position:absolute;left:144.00px;top:486.37px" class="cls_007"><span class="cls_007">pressed, and checked</span></div>
<div style="position:absolute;left:108.00px;top:507.62px" class="cls_007"><span class="cls_007">For more information on the Scene2d.ui components, check out LibGDX's wiki page</span></div>
<div style="position:absolute;left:108.00px;top:520.21px" class="cls_007"><span class="cls_007">at </span><A HREF="https://github.com/libgdx/libgdx/wiki/Scene2d.ui">https://github.com/libgdx/libgdx/wiki/Scene2d.ui</A> </span><span class="cls_007">.</span></div>
<div style="position:absolute;left:108.00px;top:541.46px" class="cls_007"><span class="cls_007">Finally, before we dive in and start making some UIs, this is just a small portion</span></div>
<div style="position:absolute;left:108.00px;top:554.06px" class="cls_007"><span class="cls_007">of what the Scene2d toolkit can do. We are just looking at the basics for now. We</span></div>
<div style="position:absolute;left:108.00px;top:566.66px" class="cls_007"><span class="cls_007">didn't cover, for example, the skinning or the styling aspects that can make the</span></div>
<div style="position:absolute;left:108.00px;top:579.26px" class="cls_007"><span class="cls_007">more complex UI easier to manage. With that said, let's crack on and make our</span></div>
<div style="position:absolute;left:108.00px;top:591.86px" class="cls_007"><span class="cls_007">new screens.</span></div>
<div style="position:absolute;left:295.37px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 98 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:90626px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background116.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 4</span></div>
<div style="position:absolute;left:108.00px;top:111.92px" class="cls_019"><span class="cls_019">The Start screen and disposal</span></div>
<div style="position:absolute;left:108.00px;top:136.90px" class="cls_007"><span class="cls_007">So, here we are back with Flappee Bee. The first thing we should tackle is having a</span></div>
<div style="position:absolute;left:108.00px;top:149.50px" class="cls_007"><span class="cls_007">Start screen, or menu screen, depending on what you want to call it. This </span><span class="cls_009">Screen</span></div>
<div style="position:absolute;left:108.00px;top:162.10px" class="cls_007"><span class="cls_007">class will be built entirely with Scene2d.ui components and you will be mesmerized</span></div>
<div style="position:absolute;left:108.00px;top:174.70px" class="cls_007"><span class="cls_007">by how awesome all this is.</span></div>
<div style="position:absolute;left:108.00px;top:195.94px" class="cls_007"><span class="cls_007">First things first; let's decide what we will have on our start screen. We will need a</span></div>
<div style="position:absolute;left:108.00px;top:208.54px" class="cls_007"><span class="cls_007">play button and some text, perhaps also a title image on the screen.</span></div>
<div style="position:absolute;left:108.00px;top:229.78px" class="cls_007"><span class="cls_007">Let's create our </span><span class="cls_009">StartScreen</span><span class="cls_007"> class and add the </span><span class="cls_009">Stage</span><span class="cls_007"> classes to it:</span></div>
<div style="position:absolute;left:126.00px;top:250.72px" class="cls_021"><span class="cls_021">public class StartScreen extends ScreenAdapter {</span></div>
<div style="position:absolute;left:136.80px;top:275.20px" class="cls_021"><span class="cls_021">private static final float WORLD_WIDTH = 480;</span></div>
<div style="position:absolute;left:136.80px;top:287.44px" class="cls_021"><span class="cls_021">private static final float WORLD_HEIGHT = 640;</span></div>
<div style="position:absolute;left:136.80px;top:311.92px" class="cls_021"><span class="cls_021">private Stage stage;</span></div>
<div style="position:absolute;left:136.80px;top:336.40px" class="cls_021"><span class="cls_021">public void show() {</span></div>
<div style="position:absolute;left:147.60px;top:348.64px" class="cls_021"><span class="cls_021">stage = new Stage(new FitViewport(WORLD_WIDTH, WORLD_HEIGHT));</span></div>
<div style="position:absolute;left:147.60px;top:360.88px" class="cls_021"><span class="cls_021">Gdx.input.setInputProcessor(stage);</span></div>
<div style="position:absolute;left:136.80px;top:373.12px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:397.60px" class="cls_021"><span class="cls_021">public void resize(int width, int height) {</span></div>
<div style="position:absolute;left:147.60px;top:409.84px" class="cls_021"><span class="cls_021">stage.getViewport().update(width, height, true);</span></div>
<div style="position:absolute;left:136.80px;top:422.08px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:446.56px" class="cls_021"><span class="cls_021">public void render(float delta) {</span></div>
<div style="position:absolute;left:147.60px;top:458.80px" class="cls_021"><span class="cls_021">stage.act(delta);</span></div>
<div style="position:absolute;left:147.60px;top:471.04px" class="cls_021"><span class="cls_021">stage.draw();</span></div>
<div style="position:absolute;left:136.80px;top:483.28px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:495.52px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:515.26px" class="cls_007"><span class="cls_007">As you can see, we are using concepts that should now be familiar to you - the use</span></div>
<div style="position:absolute;left:108.00px;top:527.86px" class="cls_007"><span class="cls_007">of the </span><span class="cls_009">Viewport</span><span class="cls_007"> class and our world sizes. We tell LibGDX to use our </span><span class="cls_009">Stage</span><span class="cls_007"> as the</span></div>
<div style="position:absolute;left:108.00px;top:540.46px" class="cls_009"><span class="cls_009">InputProcessor</span><span class="cls_007">, we have our </span><span class="cls_009">Stage</span><span class="cls_007"> instance call </span><span class="cls_009">act()</span><span class="cls_007"> and </span><span class="cls_009">draw()</span><span class="cls_007">. I would</span></div>
<div style="position:absolute;left:108.00px;top:553.06px" class="cls_007"><span class="cls_007">say we are all set to add our first actor.</span></div>
<div style="position:absolute;left:108.00px;top:574.30px" class="cls_007"><span class="cls_007">Our first actor is going to be the background image, this means we will use the </span><span class="cls_009">Image</span></div>
<div style="position:absolute;left:108.00px;top:586.90px" class="cls_007"><span class="cls_007">class. To do this, we will need to create a reference to our background texture, then</span></div>
<div style="position:absolute;left:108.00px;top:599.50px" class="cls_007"><span class="cls_007">pass it to the </span><span class="cls_009">Image</span><span class="cls_007"> class, and then add it to the </span><span class="cls_009">Stage</span><span class="cls_007"> instance, as follows:</span></div>
<div style="position:absolute;left:126.00px;top:620.44px" class="cls_021"><span class="cls_021">private Texture backgroundTexture;</span></div>
<div style="position:absolute;left:126.00px;top:632.68px" class="cls_021"><span class="cls_021">public void show() {</span></div>
<div style="position:absolute;left:136.80px;top:644.92px" class="cls_021"><span class="cls_021">stage = new Stage(new FitViewport(WORLD_WIDTH, WORLD_HEIGHT));</span></div>
<div style="position:absolute;left:295.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 99 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:91428px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background117.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">What the Flap Is the Hype About?</span></div>
<div style="position:absolute;left:136.80px;top:114.01px" class="cls_021"><span class="cls_021">Gdx.input.setInputProcessor(stage);</span></div>
<div style="position:absolute;left:136.80px;top:138.49px" class="cls_021"><span class="cls_021">backgroundTexture = new Texture(Gdx.files.internal("bg.png"));</span></div>
<div style="position:absolute;left:136.80px;top:150.73px" class="cls_021"><span class="cls_021">Image background = new Image(backgroundTexture);</span></div>
<div style="position:absolute;left:136.80px;top:175.21px" class="cls_021"><span class="cls_021">stage.addActor(background);</span></div>
<div style="position:absolute;left:126.00px;top:187.45px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:207.18px" class="cls_007"><span class="cls_007">Before we run our project, we will need to update our </span><span class="cls_009">FlappeeBeeGame</span><span class="cls_007"> class to point</span></div>
<div style="position:absolute;left:108.00px;top:219.78px" class="cls_007"><span class="cls_007">to our new </span><span class="cls_009">Screen</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:126.00px;top:240.72px" class="cls_021"><span class="cls_021">public void create() {</span></div>
<div style="position:absolute;left:136.80px;top:252.96px" class="cls_021"><span class="cls_021">setScreen(new StartScreen());</span></div>
<div style="position:absolute;left:126.00px;top:265.20px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:284.94px" class="cls_007"><span class="cls_007">Excellent! Now let's fire it up and see what we get.</span></div>
<div style="position:absolute;left:108.00px;top:306.18px" class="cls_007"><span class="cls_007">Hopefully, you would have just seen the background on its own, which is awesome.</span></div>
<div style="position:absolute;left:108.00px;top:318.78px" class="cls_007"><span class="cls_007">Now look back at the code. You haven't had to worry about the rendering code as all</span></div>
<div style="position:absolute;left:108.00px;top:331.38px" class="cls_007"><span class="cls_007">the stage has taken care of that.</span></div>
<div style="position:absolute;left:108.00px;top:352.62px" class="cls_007"><span class="cls_007">Next, let's add a play button to the screen. To do this, we will use the </span><span class="cls_009">ImageButton</span></div>
<div style="position:absolute;left:108.00px;top:365.22px" class="cls_007"><span class="cls_007">class. We have two images on hand for the play button; one when the button is</span></div>
<div style="position:absolute;left:108.00px;top:377.82px" class="cls_007"><span class="cls_007">in a normal state and one when it is pressed in. If you look at the code for the</span></div>
<div style="position:absolute;left:108.00px;top:390.42px" class="cls_009"><span class="cls_009">ImageButton</span><span class="cls_007"> class, you will see there is a constructor that looks like it was made just</span></div>
<div style="position:absolute;left:108.00px;top:403.02px" class="cls_007"><span class="cls_007">for us! Let's take a look at the following code:</span></div>
<div style="position:absolute;left:126.00px;top:423.96px" class="cls_021"><span class="cls_021">public ImageButton (Drawable imageUp, Drawable imageDown)</span></div>
<div style="position:absolute;left:108.00px;top:443.70px" class="cls_007"><span class="cls_007">Aha! You might be wondering why these </span><span class="cls_009">Drawable</span><span class="cls_007"> classes are here, you were</span></div>
<div style="position:absolute;left:108.00px;top:456.30px" class="cls_007"><span class="cls_007">probably expecting the </span><span class="cls_009">Texture</span><span class="cls_007">/</span><span class="cls_009">TextureRegion</span><span class="cls_007"> classes. Well, textures can come in</span></div>
<div style="position:absolute;left:108.00px;top:468.90px" class="cls_007"><span class="cls_007">a variety of different ways, so by LibGDX being done this way, they aren't tied to the</span></div>
<div style="position:absolute;left:108.00px;top:481.50px" class="cls_009"><span class="cls_009">Texture</span><span class="cls_007"> class.</span></div>
<div style="position:absolute;left:108.00px;top:502.74px" class="cls_007"><span class="cls_007">Ok, so then, how do we use it? Well, it is pretty straightforward; let's update our</span></div>
<div style="position:absolute;left:108.00px;top:515.34px" class="cls_009"><span class="cls_009">StartScreen</span><span class="cls_007"> with the following code:</span></div>
<div style="position:absolute;left:126.00px;top:536.28px" class="cls_021"><span class="cls_021">private Texture playTexture;</span></div>
<div style="position:absolute;left:126.00px;top:548.52px" class="cls_021"><span class="cls_021">private Texture playPressTexture;</span></div>
<div style="position:absolute;left:126.00px;top:560.76px" class="cls_021"><span class="cls_021">public void show() {</span></div>
<div style="position:absolute;left:136.80px;top:573.00px" class="cls_021"><span class="cls_021">/** Code omitted for brevity **/</span></div>
<div style="position:absolute;left:136.80px;top:585.24px" class="cls_021"><span class="cls_021">playTexture = new Texture(Gdx.files.internal("play.png"));</span></div>
<div style="position:absolute;left:136.80px;top:597.48px" class="cls_021"><span class="cls_021">playPressTexture = new</span></div>
<div style="position:absolute;left:136.80px;top:608.28px" class="cls_021"><span class="cls_021">Texture(Gdx.files.internal("playPress.png"));</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 100 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:92230px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background118.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 4</span></div>
<div style="position:absolute;left:136.80px;top:114.01px" class="cls_021"><span class="cls_021">ImageButton play = new ImageButton(new TextureRegionDrawable(new</span></div>
<div style="position:absolute;left:136.80px;top:124.81px" class="cls_021"><span class="cls_021">TextureRegion(playTexture)), new TextureRegionDrawable(new</span></div>
<div style="position:absolute;left:136.80px;top:135.61px" class="cls_021"><span class="cls_021">TextureRegion(playPressTexture)));</span></div>
<div style="position:absolute;left:136.80px;top:147.85px" class="cls_021"><span class="cls_021">stage.addActor(play);</span></div>
<div style="position:absolute;left:126.00px;top:160.09px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:179.82px" class="cls_007"><span class="cls_007">Here, we create our textures, then we create </span><span class="cls_009">TextureRegionDrawables</span><span class="cls_007">, a </span><span class="cls_009">Drawable</span></div>
<div style="position:absolute;left:108.00px;top:192.42px" class="cls_007"><span class="cls_007">subclass, to hold our textures in. We then instantiate the </span><span class="cls_009">ImageButton</span><span class="cls_007"> class and add</span></div>
<div style="position:absolute;left:108.00px;top:205.02px" class="cls_007"><span class="cls_007">it to the stage.</span></div>
<div style="position:absolute;left:108.00px;top:226.26px" class="cls_007"><span class="cls_007">Let's start the game and see how it looks!</span></div>
<div style="position:absolute;left:108.00px;top:494.39px" class="cls_007"><span class="cls_007">Yay! Provided you see what I see, you should have the button there. Also, if you</span></div>
<div style="position:absolute;left:108.00px;top:506.99px" class="cls_007"><span class="cls_007">click on it, you will see that it switches the texture for use to the depressed texture.</span></div>
<div style="position:absolute;left:108.00px;top:519.59px" class="cls_007"><span class="cls_007">Looking pretty smart! Even if the placement is not where we want it to be yet.</span></div>
<div style="position:absolute;left:108.00px;top:540.83px" class="cls_007"><span class="cls_007">Let's fix the positioning before we move on to adding the title. The </span><span class="cls_009">Actor</span><span class="cls_007"> class has a</span></div>
<div style="position:absolute;left:108.00px;top:553.43px" class="cls_007"><span class="cls_007">really interesting method signature for setting a position. There is the standard:</span></div>
<div style="position:absolute;left:126.00px;top:574.37px" class="cls_021"><span class="cls_021">public void setPosition (float x, float y)</span></div>
<div style="position:absolute;left:108.00px;top:594.11px" class="cls_007"><span class="cls_007">This will position the actor relative to its bottom-left corner. However, there is also</span></div>
<div style="position:absolute;left:108.00px;top:606.71px" class="cls_007"><span class="cls_007">this method:</span></div>
<div style="position:absolute;left:126.00px;top:627.65px" class="cls_021"><span class="cls_021">public void setPosition (float x, float y, int alignment)</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 101 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:93032px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background119.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">What the Flap Is the Hype About?</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">This, with the added alignment parameter, allows us to change the anchor point</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">from the bottom-left corner to somewhere else. Check out the </span><span class="cls_009">Align</span><span class="cls_007"> class here</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">to see the options:</span></div>
<div style="position:absolute;left:126.00px;top:160.63px" class="cls_021"><span class="cls_021">public class Align {</span></div>
<div style="position:absolute;left:136.80px;top:172.87px" class="cls_021"><span class="cls_021">static public final int center = 1 &lt;&lt; 0;</span></div>
<div style="position:absolute;left:136.80px;top:185.11px" class="cls_021"><span class="cls_021">static public final int top = 1 &lt;&lt; 1;</span></div>
<div style="position:absolute;left:136.80px;top:197.35px" class="cls_021"><span class="cls_021">static public final int bottom = 1 &lt;&lt; 2;</span></div>
<div style="position:absolute;left:136.80px;top:209.59px" class="cls_021"><span class="cls_021">static public final int left = 1 &lt;&lt; 3;</span></div>
<div style="position:absolute;left:136.80px;top:221.83px" class="cls_021"><span class="cls_021">static public final int right = 1 &lt;&lt; 4;</span></div>
<div style="position:absolute;left:136.80px;top:246.31px" class="cls_021"><span class="cls_021">static public final int topLeft = top | left;</span></div>
<div style="position:absolute;left:136.80px;top:258.55px" class="cls_021"><span class="cls_021">static public final int topRight = top | right;</span></div>
<div style="position:absolute;left:136.80px;top:270.79px" class="cls_021"><span class="cls_021">static public final int bottomLeft = bottom | left;</span></div>
<div style="position:absolute;left:136.80px;top:283.03px" class="cls_021"><span class="cls_021">static public final int bottomRight = bottom | right;</span></div>
<div style="position:absolute;left:126.00px;top:295.27px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:315.01px" class="cls_007"><span class="cls_007">We will look at using the </span><span class="cls_009">center</span><span class="cls_007"> alignment. Update our </span><span class="cls_009">StartScreen</span><span class="cls_007"> class with</span></div>
<div style="position:absolute;left:108.00px;top:327.61px" class="cls_007"><span class="cls_007">the following code:</span></div>
<div style="position:absolute;left:126.00px;top:348.55px" class="cls_021"><span class="cls_021">play.setPosition(WORLD_WIDTH / 2, WORLD_HEIGHT / 4, Align.center);</span></div>
<div style="position:absolute;left:108.00px;top:368.29px" class="cls_007"><span class="cls_007">We can add it just after we instantiate the </span><span class="cls_009">ImageButton</span><span class="cls_007"> class. So, what we are saying</span></div>
<div style="position:absolute;left:108.00px;top:380.89px" class="cls_007"><span class="cls_007">here is, place the button at the center of the width and a quarter of the way up the</span></div>
<div style="position:absolute;left:108.00px;top:393.49px" class="cls_007"><span class="cls_007">screen relative to the center point. If we didn't have this functionality, we would</span></div>
<div style="position:absolute;left:108.00px;top:406.09px" class="cls_007"><span class="cls_007">have to work it out ourselves, with something like the following code:</span></div>
<div style="position:absolute;left:126.00px;top:427.03px" class="cls_021"><span class="cls_021">play.setPosition(WORLD_WIDTH / 2 - play.getWidth() / 2, WORLD_HEIGHT /</span></div>
<div style="position:absolute;left:126.00px;top:437.83px" class="cls_021"><span class="cls_021">4 - play.getHeight() / 2);</span></div>
<div style="position:absolute;left:108.00px;top:457.57px" class="cls_007"><span class="cls_007">But yay for less code now! Plus the less code means less chance of making mistakes.</span></div>
<div style="position:absolute;left:108.00px;top:478.82px" class="cls_007"><span class="cls_007">I hope you can see by now, how easy it is to build a UI with the Scene2d toolkit.</span></div>
<div style="position:absolute;left:108.00px;top:491.42px" class="cls_007"><span class="cls_007">Admittedly, we have only added a single button, but it's a small step in the</span></div>
<div style="position:absolute;left:108.00px;top:504.02px" class="cls_007"><span class="cls_007">right direction.</span></div>
<div style="position:absolute;left:108.00px;top:525.26px" class="cls_007"><span class="cls_007">Our final act for artwork on the screen is placing the title texture. So, going through</span></div>
<div style="position:absolute;left:108.00px;top:537.85px" class="cls_007"><span class="cls_007">the same process as earlier, with the background, we need to update our </span><span class="cls_009">StartScreen</span></div>
<div style="position:absolute;left:108.00px;top:550.45px" class="cls_007"><span class="cls_007">class with a title texture and then add it to the stage:</span></div>
<div style="position:absolute;left:126.00px;top:571.39px" class="cls_021"><span class="cls_021">private Texture titleTexture;</span></div>
<div style="position:absolute;left:126.00px;top:583.63px" class="cls_021"><span class="cls_021">public void show() {</span></div>
<div style="position:absolute;left:136.80px;top:595.87px" class="cls_021"><span class="cls_021">/* Code omitted for brevity */</span></div>
<div style="position:absolute;left:136.80px;top:608.11px" class="cls_021"><span class="cls_021">titleTexture = new Texture(Gdx.files.internal("title.png"));</span></div>
<div style="position:absolute;left:136.80px;top:620.35px" class="cls_021"><span class="cls_021">Image title = new Image(titleTexture);</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 102 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:93834px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background120.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 4</span></div>
<div style="position:absolute;left:136.80px;top:114.01px" class="cls_021"><span class="cls_021">title.setPosition(WORLD_WIDTH /2, 3 * WORLD_HEIGHT / 4,</span></div>
<div style="position:absolute;left:136.80px;top:124.81px" class="cls_021"><span class="cls_021">Align.center);</span></div>
<div style="position:absolute;left:136.80px;top:137.05px" class="cls_021"><span class="cls_021">stage.addActor(title);</span></div>
<div style="position:absolute;left:126.00px;top:149.29px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:169.02px" class="cls_007"><span class="cls_007">Here, we are just placing it above the play button.</span></div>
<div style="position:absolute;left:108.00px;top:190.26px" class="cls_007"><span class="cls_007">If we run the project, we should get the following output:</span></div>
<div style="position:absolute;left:108.00px;top:444.62px" class="cls_007"><span class="cls_007">We are almost there! Now, we just need to hook up what to do when you tap the</span></div>
<div style="position:absolute;left:108.00px;top:457.22px" class="cls_007"><span class="cls_007">play button, as you are going to want to start the game.</span></div>
<div style="position:absolute;left:108.00px;top:478.46px" class="cls_007"><span class="cls_007">To do this, we need to add a listener to the play button and react to when it is called.</span></div>
<div style="position:absolute;left:108.00px;top:491.06px" class="cls_007"><span class="cls_007">LibGDX has an interface called </span><span class="cls_009">EventListener</span><span class="cls_007"> that is used throughout Scene2d</span></div>
<div style="position:absolute;left:108.00px;top:503.66px" class="cls_007"><span class="cls_007">to propagate the events through the graph. Now, we can just take this interface to</span></div>
<div style="position:absolute;left:108.00px;top:516.26px" class="cls_007"><span class="cls_007">create our own implementation, where we check for a mouse click and then react.</span></div>
<div style="position:absolute;left:108.00px;top:528.86px" class="cls_007"><span class="cls_007">However, thankfully, someone has already created a useful class that does the bulk</span></div>
<div style="position:absolute;left:108.00px;top:541.46px" class="cls_007"><span class="cls_007">of the heavy lifting!</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 103 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:94636px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background121.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">What the Flap Is the Hype About?</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">It is the </span><span class="cls_009">ActorGestureListener</span><span class="cls_007"> class, which contains lots of methods we can chose</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">to override if we wish to react to them, as follows:</span></div>
<div style="position:absolute;left:126.00px;top:148.03px" class="cls_021"><span class="cls_021">touchDown (InputEvent event, float x, float y, int pointer, int</span></div>
<div style="position:absolute;left:126.00px;top:158.83px" class="cls_021"><span class="cls_021">button) {}</span></div>
<div style="position:absolute;left:126.00px;top:183.31px" class="cls_021"><span class="cls_021">touchUp (InputEvent event, float x, float y, int pointer, int</span></div>
<div style="position:absolute;left:126.00px;top:194.11px" class="cls_021"><span class="cls_021">button) {}</span></div>
<div style="position:absolute;left:126.00px;top:218.59px" class="cls_021"><span class="cls_021">tap (InputEvent event, float x, float y, int count, int button) {}</span></div>
<div style="position:absolute;left:126.00px;top:230.83px" class="cls_021"><span class="cls_021">boolean longPress (Actor actor, float x, float y) { return false;}</span></div>
<div style="position:absolute;left:126.00px;top:255.31px" class="cls_021"><span class="cls_021">fling (InputEvent event, float velocityX, float velocityY, int</span></div>
<div style="position:absolute;left:126.00px;top:266.11px" class="cls_021"><span class="cls_021">button) {}</span></div>
<div style="position:absolute;left:126.00px;top:290.59px" class="cls_021"><span class="cls_021">pan (InputEvent event, float x, float y, float deltaX, float</span></div>
<div style="position:absolute;left:126.00px;top:301.39px" class="cls_021"><span class="cls_021">deltaY) {}</span></div>
<div style="position:absolute;left:126.00px;top:325.87px" class="cls_021"><span class="cls_021">zoom (InputEvent event, float initialDistance, float distance) {}</span></div>
<div style="position:absolute;left:126.00px;top:350.35px" class="cls_021"><span class="cls_021">pinch (InputEvent event, Vector2 initialPointer1, Vector2</span></div>
<div style="position:absolute;left:126.00px;top:361.15px" class="cls_021"><span class="cls_021">initialPointer2, Vector2 pointer1, Vector2 pointer2) {}</span></div>
<div style="position:absolute;left:108.00px;top:380.89px" class="cls_007"><span class="cls_007">We are interested in the </span><span class="cls_009">tap</span><span class="cls_007"> method. As we would like to do something when the</span></div>
<div style="position:absolute;left:108.00px;top:393.49px" class="cls_007"><span class="cls_007">user taps the button. To do this, we need to instantiate and override the method and</span></div>
<div style="position:absolute;left:108.00px;top:406.09px" class="cls_007"><span class="cls_007">then add this listener to the play button object, as follows:</span></div>
<div style="position:absolute;left:126.00px;top:427.03px" class="cls_021"><span class="cls_021">play.addListener(new ActorGestureListener() {</span></div>
<div style="position:absolute;left:136.80px;top:439.27px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:136.80px;top:451.51px" class="cls_021"><span class="cls_021">public void tap(InputEvent event, float x, float y, int count,</span></div>
<div style="position:absolute;left:136.80px;top:462.31px" class="cls_021"><span class="cls_021">int button) {</span></div>
<div style="position:absolute;left:147.60px;top:474.55px" class="cls_021"><span class="cls_021">super.tap(event, x, y, count, button);</span></div>
<div style="position:absolute;left:147.60px;top:486.79px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:499.03px" class="cls_021"><span class="cls_021">});</span></div>
<div style="position:absolute;left:108.00px;top:518.77px" class="cls_007"><span class="cls_007">Now, every time the button is tapped, that method will get called. We just now need</span></div>
<div style="position:absolute;left:108.00px;top:531.37px" class="cls_007"><span class="cls_007">to decide what we are going to do with it. This, thankfully, is a pretty simple answer,</span></div>
<div style="position:absolute;left:108.00px;top:543.97px" class="cls_007"><span class="cls_007">as we want to start the game!</span></div>
<div style="position:absolute;left:108.00px;top:565.21px" class="cls_007"><span class="cls_007">To do this, we need to change the </span><span class="cls_009">Screen</span><span class="cls_007"> object that the </span><span class="cls_009">Game</span><span class="cls_007"> object currently has</span></div>
<div style="position:absolute;left:108.00px;top:577.81px" class="cls_007"><span class="cls_007">referenced. This means we will need access to the </span><span class="cls_009">Game</span><span class="cls_007"> object in our code. Let's do</span></div>
<div style="position:absolute;left:108.00px;top:590.41px" class="cls_007"><span class="cls_007">this by adding it as a constructor parameter to our </span><span class="cls_009">StartScreen</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:126.00px;top:609.91px" class="cls_021"><span class="cls_021">private final Game game;</span></div>
<div style="position:absolute;left:126.00px;top:622.15px" class="cls_021"><span class="cls_021">public StartScreen(Game game) {</span></div>
<div style="position:absolute;left:136.80px;top:634.39px" class="cls_021"><span class="cls_021">this.game = game;</span></div>
<div style="position:absolute;left:126.00px;top:646.63px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 104 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:95438px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background122.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 4</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Next, let's update our </span><span class="cls_009">tap</span><span class="cls_007"> method to change the screen:</span></div>
<div style="position:absolute;left:126.00px;top:135.43px" class="cls_021"><span class="cls_021">public void tap(InputEvent event, float x, float y, int count, int</span></div>
<div style="position:absolute;left:126.00px;top:146.23px" class="cls_021"><span class="cls_021">button) {</span></div>
<div style="position:absolute;left:136.80px;top:158.47px" class="cls_021"><span class="cls_021">super.tap(event, x, y, count, button);</span></div>
<div style="position:absolute;left:136.80px;top:170.71px" class="cls_021"><span class="cls_021">game.setScreen(new GameScreen());</span></div>
<div style="position:absolute;left:126.00px;top:182.95px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:202.69px" class="cls_007"><span class="cls_007">Perfect. Finally, we need to update our </span><span class="cls_009">FlappyBeeGame</span><span class="cls_007"> class to pass in a reference</span></div>
<div style="position:absolute;left:107.99px;top:215.29px" class="cls_007"><span class="cls_007">to itself:</span></div>
<div style="position:absolute;left:126.00px;top:236.23px" class="cls_021"><span class="cls_021">public void create() {</span></div>
<div style="position:absolute;left:136.80px;top:248.47px" class="cls_021"><span class="cls_021">setScreen(new StartScreen(this));</span></div>
<div style="position:absolute;left:126.00px;top:260.71px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:280.45px" class="cls_007"><span class="cls_007">Done!</span></div>
<div style="position:absolute;left:108.00px;top:301.70px" class="cls_007"><span class="cls_007">Run the project and see what happens; tapping on </span><span class="cls_023">Play</span><span class="cls_007"> will start the game.</span></div>
<div style="position:absolute;left:108.00px;top:322.94px" class="cls_007"><span class="cls_007">We are not using Scene2D to its fullest potential, yet, you can see how easy it is</span></div>
<div style="position:absolute;left:108.00px;top:335.54px" class="cls_007"><span class="cls_007">to create a UI that is simple and clear code it; just imagine if we had to do all that</span></div>
<div style="position:absolute;left:108.00px;top:348.14px" class="cls_007"><span class="cls_007">by hand!</span></div>
<div style="position:absolute;left:108.00px;top:378.07px" class="cls_025"><span class="cls_025">The dispose() method</span></div>
<div style="position:absolute;left:108.00px;top:401.05px" class="cls_007"><span class="cls_007">Before we close this chapter, I want to quickly show you how to dispose of your</span></div>
<div style="position:absolute;left:108.00px;top:413.65px" class="cls_007"><span class="cls_007">assets in an appropriate manner. We haven't done this so far as we have been</span></div>
<div style="position:absolute;left:108.00px;top:426.25px" class="cls_007"><span class="cls_007">continually using our textures throughout the life of the game. However, here we</span></div>
<div style="position:absolute;left:108.00px;top:438.85px" class="cls_007"><span class="cls_007">have a that a player will see, then go into the game, and probably never see this</span></div>
<div style="position:absolute;left:108.00px;top:451.45px" class="cls_007"><span class="cls_007">screen again in this instance of the game. This means we are giving away vital</span></div>
<div style="position:absolute;left:108.00px;top:464.05px" class="cls_007"><span class="cls_007">memory allocation to textures that can be freed up! Also, our </span><span class="cls_009">Stage</span><span class="cls_007"> instance needs</span></div>
<div style="position:absolute;left:108.00px;top:476.65px" class="cls_007"><span class="cls_007">to clean up after itself.</span></div>
<div style="position:absolute;left:108.00px;top:497.89px" class="cls_007"><span class="cls_007">Doing this is pretty basic stuff, so we should add it now. In our </span><span class="cls_009">StartScreen</span><span class="cls_007"> class,</span></div>
<div style="position:absolute;left:108.00px;top:510.49px" class="cls_007"><span class="cls_007">let's override the </span><span class="cls_009">dispose()</span><span class="cls_007"> method and call </span><span class="cls_009">dispose</span><span class="cls_007"> on everything we wish to clear:</span></div>
<div style="position:absolute;left:126.00px;top:531.43px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:126.00px;top:543.67px" class="cls_021"><span class="cls_021">public void dispose() {</span></div>
<div style="position:absolute;left:136.80px;top:555.91px" class="cls_021"><span class="cls_021">stage.dispose();</span></div>
<div style="position:absolute;left:136.80px;top:568.15px" class="cls_021"><span class="cls_021">backgroundTexture.dispose();</span></div>
<div style="position:absolute;left:136.80px;top:580.39px" class="cls_021"><span class="cls_021">playTexture.dispose();</span></div>
<div style="position:absolute;left:136.80px;top:592.63px" class="cls_021"><span class="cls_021">playPressTexture.dispose();</span></div>
<div style="position:absolute;left:136.80px;top:604.87px" class="cls_021"><span class="cls_021">titleTexture.dispose();</span></div>
<div style="position:absolute;left:126.00px;top:617.11px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 105 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:96240px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background123.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">What the Flap Is the Hype About?</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">As you can see, all the textures and the stage are disposed of. Next, since </span><span class="cls_009">dispose</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">isn't called for us automatically, we need to explicitly say when we want to clear up.</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">Luckily, we know when this will happen—when we switch screens, of course! Let's</span></div>
<div style="position:absolute;left:108.00px;top:152.29px" class="cls_007"><span class="cls_007">take a look at the following code snippet:</span></div>
<div style="position:absolute;left:126.00px;top:173.23px" class="cls_021"><span class="cls_021">play.addListener(new ActorGestureListener() {</span></div>
<div style="position:absolute;left:136.80px;top:185.47px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:136.80px;top:197.71px" class="cls_021"><span class="cls_021">public void tap(InputEvent event, float x, float y, int count,</span></div>
<div style="position:absolute;left:136.80px;top:208.51px" class="cls_021"><span class="cls_021">int button) {</span></div>
<div style="position:absolute;left:147.60px;top:220.75px" class="cls_021"><span class="cls_021">super.tap(event, x, y, count, button);</span></div>
<div style="position:absolute;left:147.60px;top:232.99px" class="cls_021"><span class="cls_021">game.setScreen(new GameScreen());</span></div>
<div style="position:absolute;left:147.60px;top:245.23px" class="cls_021"><span class="cls_021">dispose();</span></div>
<div style="position:absolute;left:136.80px;top:257.47px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:269.71px" class="cls_021"><span class="cls_021">});</span></div>
<div style="position:absolute;left:108.00px;top:289.45px" class="cls_007"><span class="cls_007">Excellent. With what we are doing, the impact will be small; however, it is a good</span></div>
<div style="position:absolute;left:108.00px;top:302.05px" class="cls_007"><span class="cls_007">practice to get into the habit of cleaning up after yourself, as when you get on to</span></div>
<div style="position:absolute;left:108.00px;top:314.65px" class="cls_007"><span class="cls_007">making bigger and more demanding games—this could be a time saver!</span></div>
<div style="position:absolute;left:108.00px;top:347.15px" class="cls_019"><span class="cls_019">Summary</span></div>
<div style="position:absolute;left:108.00px;top:372.13px" class="cls_007"><span class="cls_007">Well, that was an epic chapter. Hopefully, by now, you are getting to grips with</span></div>
<div style="position:absolute;left:108.00px;top:384.73px" class="cls_007"><span class="cls_007">creating a game in LibGDX. In this chapter, we made a Flappy Bird clone—Flappee</span></div>
<div style="position:absolute;left:108.00px;top:397.33px" class="cls_007"><span class="cls_007">Bee. We looked at animations and implemented them for the main character. We</span></div>
<div style="position:absolute;left:108.00px;top:409.93px" class="cls_007"><span class="cls_007">were also introduced to the Scene2d toolkit, which we used to create a GUI for a start</span></div>
<div style="position:absolute;left:108.00px;top:422.53px" class="cls_007"><span class="cls_007">screen. Finally, we ended with a look at disposing of memory-based assets that are</span></div>
<div style="position:absolute;left:108.00px;top:435.13px" class="cls_007"><span class="cls_007">no longer in use, ensuring that our games are as memory-efficient as possible.</span></div>
<div style="position:absolute;left:108.00px;top:456.38px" class="cls_007"><span class="cls_007">Coming up in the next chapter, we will take Flappee Bee further. We will look at the</span></div>
<div style="position:absolute;left:108.00px;top:468.97px" class="cls_009"><span class="cls_009">AssetManager</span><span class="cls_007"> and see how it can make our lives easier with regards to our texture</span></div>
<div style="position:absolute;left:108.00px;top:481.57px" class="cls_007"><span class="cls_007">handling. Also, in conjunction with that, we will create a </span><span class="cls_009">LoadingScreen</span><span class="cls_007"> class. You</span></div>
<div style="position:absolute;left:108.00px;top:494.17px" class="cls_007"><span class="cls_007">will also learn about packing your assets into a single texture to perform better.</span></div>
<div style="position:absolute;left:108.00px;top:506.77px" class="cls_007"><span class="cls_007">Finally, we will look at using our own fonts in the game.</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 106 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:97042px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background124.jpg" width=612 height=792></div>
<div style="position:absolute;left:200.51px;top:218.96px" class="cls_014"><span class="cls_014">Making Your Bird More</span></div>
<div style="position:absolute;left:342.29px;top:254.96px" class="cls_014"><span class="cls_014">Flightworthy</span></div>
<div style="position:absolute;left:108.00px;top:308.66px" class="cls_007"><span class="cls_007">Flappee Bee is flying pretty fine now, don't you think? However, we are still not</span></div>
<div style="position:absolute;left:108.00px;top:321.26px" class="cls_007"><span class="cls_007">done! This chapter will focus a bit more on the tools available to us in </span><span class="cls_023">LibGDX</span><span class="cls_007">.</span></div>
<div style="position:absolute;left:108.00px;top:333.86px" class="cls_007"><span class="cls_007">We will take a look at the </span><span class="cls_009">AssetManager</span><span class="cls_007"> class and see how it can be used to make</span></div>
<div style="position:absolute;left:108.00px;top:346.46px" class="cls_007"><span class="cls_007">our life better. We will then use it to create a loading screen so that we can load our</span></div>
<div style="position:absolute;left:108.00px;top:359.06px" class="cls_007"><span class="cls_007">textures and at the same time provide feedback to the user that the game is doing</span></div>
<div style="position:absolute;left:108.00px;top:371.66px" class="cls_007"><span class="cls_007">something. We will then take this a step further and look at how we can combine our</span></div>
<div style="position:absolute;left:108.00px;top:384.26px" class="cls_007"><span class="cls_007">assets into a single entity and explain why this is a good habit to get into. Finally,</span></div>
<div style="position:absolute;left:108.00px;top:396.86px" class="cls_007"><span class="cls_007">we will look at Hiero, the font converter, which is built into LibGDX to allow us to</span></div>
<div style="position:absolute;left:108.00px;top:409.46px" class="cls_007"><span class="cls_007">convert and style fonts as we desire.</span></div>
<div style="position:absolute;left:108.00px;top:430.70px" class="cls_007"><span class="cls_007">The following topics will be covered in this chapter:</span></div>
<div style="position:absolute;left:126.00px;top:451.94px" class="cls_007"><span class="cls_007">•  Loading assets asynchronously with the </span><span class="cls_009">AssetManager</span><span class="cls_007"> class</span></div>
<div style="position:absolute;left:126.00px;top:468.86px" class="cls_007"><span class="cls_007">•  Creating a loading screen</span></div>
<div style="position:absolute;left:126.00px;top:485.77px" class="cls_007"><span class="cls_007">•  Using a texture packer to combine all the assets into a single texture</span></div>
<div style="position:absolute;left:126.00px;top:502.69px" class="cls_007"><span class="cls_007">•  Hiero—the LibGDX font converter</span></div>
<div style="position:absolute;left:108.00px;top:533.04px" class="cls_019"><span class="cls_019">Let's load up them assets!</span></div>
<div style="position:absolute;left:108.00px;top:558.02px" class="cls_007"><span class="cls_007">So, what is this </span><span class="cls_009">AssetManager</span><span class="cls_007"> class that we want to take a look at? Well, according</span></div>
<div style="position:absolute;left:108.00px;top:570.62px" class="cls_007"><span class="cls_007">to the documentation what it does is:</span></div>
<div style="position:absolute;left:177.84px;top:601.97px" class="cls_024"><span class="cls_024">Loads and stores assets such as textures, bitmap fonts, tile maps,</span></div>
<div style="position:absolute;left:177.84px;top:613.37px" class="cls_024"><span class="cls_024">sounds, music, and so on. Visit the following link for more details:</span></div>
<div style="position:absolute;left:177.84px;top:624.77px" class="cls_009"><span class="cls_009"> </span><A HREF="http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/assets/AssetManager.html">http://libgdx.badlogicgames.com/nightlies/docs/api/</A> </div>
<div style="position:absolute;left:177.84px;top:636.17px" class="cls_009"><span class="cls_009"> </span><A HREF="http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/assets/AssetManager.html">com/badlogic/gdx/assets/AssetManager.html</A> </div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 107 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:97844px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background125.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Making Your Bird More Flightworthy</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">You might be wondering what it can do for us. Well, truthfully, it won't actually</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">make an impact on the game we have here. The amount of assets we have isn't that</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">large in number or size. So then, why are we looking at it? Because, later down the</span></div>
<div style="position:absolute;left:108.00px;top:152.29px" class="cls_007"><span class="cls_007">line, when you make your own awesome, amazing games, you will need to know</span></div>
<div style="position:absolute;left:108.00px;top:164.89px" class="cls_007"><span class="cls_007">about tools like this that will make your life easier!</span></div>
<div style="position:absolute;left:108.00px;top:186.14px" class="cls_007"><span class="cls_007">Right now, Flappee Bee only has about seven textures with the biggest being the</span></div>
<div style="position:absolute;left:108.00px;top:198.74px" class="cls_007"><span class="cls_007">background which is 480 x 640 pixels in size. Having this amount of textures, of this</span></div>
<div style="position:absolute;left:108.00px;top:211.34px" class="cls_007"><span class="cls_007">size isn't going to cause us that much of a problem. However, what if we suddenly</span></div>
<div style="position:absolute;left:108.00px;top:223.94px" class="cls_007"><span class="cls_007">have lots of textures—equally not as good, but we will cover that later—or our</span></div>
<div style="position:absolute;left:108.00px;top:236.54px" class="cls_007"><span class="cls_007">textures are at a higher resolution? The second one is more likely to occur; my artist</span></div>
<div style="position:absolute;left:108.00px;top:249.14px" class="cls_007"><span class="cls_007">loves HD textures!</span></div>
<div style="position:absolute;left:108.00px;top:270.38px" class="cls_007"><span class="cls_007">You might now be wondering what the impact would be if you were to have lots of</span></div>
<div style="position:absolute;left:108.00px;top:282.98px" class="cls_007"><span class="cls_007">large separate textures, and you are right to think this. Right now, with our textures</span></div>
<div style="position:absolute;left:108.00px;top:295.58px" class="cls_007"><span class="cls_007">being small and not as numerous they are loaded without delay. However, the</span></div>
<div style="position:absolute;left:108.00px;top:308.18px" class="cls_007"><span class="cls_007">moment they become bigger, they will appear to pause the game to the player. In</span></div>
<div style="position:absolute;left:108.00px;top:320.78px" class="cls_007"><span class="cls_007">Flappee Bee's case, it will be as the user presses the </span><span class="cls_023">Start</span><span class="cls_007"> button; if our textures were</span></div>
<div style="position:absolute;left:108.00px;top:333.38px" class="cls_007"><span class="cls_007">huge, it would appear to the player the game had crashed as the hardware was loading</span></div>
<div style="position:absolute;left:108.00px;top:345.97px" class="cls_007"><span class="cls_007">the texture. While we can't completely negate this pause by using the </span><span class="cls_009">AssetManager</span></div>
<div style="position:absolute;left:108.00px;top:358.57px" class="cls_007"><span class="cls_007">class, as certain assets will need to be loaded on the rendering thread, we can provide</span></div>
<div style="position:absolute;left:108.00px;top:371.17px" class="cls_007"><span class="cls_007">feedback to on the loading player the progress.</span></div>
<div style="position:absolute;left:108.00px;top:392.41px" class="cls_007"><span class="cls_007">Just to reiterate at this stage, Flappee Bee probably doesn't need this </span><span class="cls_009">AssetManager</span></div>
<div style="position:absolute;left:108.00px;top:405.01px" class="cls_007"><span class="cls_007">parameter as the resource loading is negligible at this stage. However, I see this as a</span></div>
<div style="position:absolute;left:108.00px;top:417.61px" class="cls_007"><span class="cls_007">great opportunity to use it as we can look at it in the most simple case. Most of the</span></div>
<div style="position:absolute;left:108.00px;top:430.21px" class="cls_007"><span class="cls_007">time, it will be your decision as a game-maker whether you want to use it. According</span></div>
<div style="position:absolute;left:108.00px;top:442.81px" class="cls_007"><span class="cls_007">to the LibGDX wiki page, the reasons why you would want to use the </span><span class="cls_009">AssetManager</span></div>
<div style="position:absolute;left:108.00px;top:455.41px" class="cls_007"><span class="cls_007">parameter are as follows:</span></div>
<div style="position:absolute;left:126.00px;top:476.66px" class="cls_007"><span class="cls_007">•  Loading of most resources is done asynchronously, so you can display a</span></div>
<div style="position:absolute;left:144.00px;top:489.26px" class="cls_007"><span class="cls_007">reactive loading screen while things load.</span></div>
<div style="position:absolute;left:126.00px;top:506.17px" class="cls_007"><span class="cls_007">•  Assets are reference counted. If two assets, A and B, both depend on another</span></div>
<div style="position:absolute;left:144.00px;top:518.77px" class="cls_007"><span class="cls_007">asset C, C won't be disposed until A and B have been disposed. This also</span></div>
<div style="position:absolute;left:144.00px;top:531.37px" class="cls_007"><span class="cls_007">means that if you load an asset multiple times, it will actually be shared and</span></div>
<div style="position:absolute;left:144.00px;top:543.97px" class="cls_007"><span class="cls_007">only take up one lot of memory!</span></div>
<div style="position:absolute;left:126.00px;top:560.89px" class="cls_007"><span class="cls_007">•  It is a single place to store all your assets.</span></div>
<div style="position:absolute;left:126.00px;top:577.80px" class="cls_007"><span class="cls_007">•  It allows you to transparently implement things such as caches.</span></div>
<div style="position:absolute;left:107.99px;top:599.04px" class="cls_007"><span class="cls_007">Personally, I always start all my games with the </span><span class="cls_009">AssetManager</span><span class="cls_007"> parameter enabled!</span></div>
<div style="position:absolute;left:108.00px;top:611.65px" class="cls_007"><span class="cls_007">But like I said, I know what my artist is going want to provide me with.</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 108 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:98646px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background126.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 5</span></div>
<div style="position:absolute;left:172.08px;top:124.13px" class="cls_024"><span class="cls_024">Before we start using </span><span class="cls_009">AssetManager</span><span class="cls_024">, it might be worth just</span></div>
<div style="position:absolute;left:172.08px;top:135.38px" class="cls_024"><span class="cls_024">checking out the wiki page on the LibGDX website: </span><span class="cls_009">https://</span></div>
<div style="position:absolute;left:172.08px;top:146.63px" class="cls_009"><span class="cls_009"> </span><A HREF=" https://github.com/libgdx/libgdx/wiki/Managing-your-assets">github.com/libgdx/libgdx/wiki/Managing-</A>your-assets</div>
<div style="position:absolute;left:108.00px;top:172.46px" class="cls_007"><span class="cls_007">This will give you a better idea of what else it can do, as here, we are just going to</span></div>
<div style="position:absolute;left:108.00px;top:185.06px" class="cls_007"><span class="cls_007">focus on loading the textures.</span></div>
<div style="position:absolute;left:108.00px;top:215.00px" class="cls_025"><span class="cls_025">Implementing the AssetManager parameter</span></div>
<div style="position:absolute;left:108.00px;top:237.98px" class="cls_007"><span class="cls_007">Now, enough talk, lets code! In Flappee Bee, we currently have four textures that</span></div>
<div style="position:absolute;left:108.00px;top:250.58px" class="cls_007"><span class="cls_007">are used:</span></div>
<div style="position:absolute;left:126.00px;top:271.82px" class="cls_007"><span class="cls_007">•</span><span class="cls_009">  bg.png</span></div>
<div style="position:absolute;left:126.00px;top:288.74px" class="cls_007"><span class="cls_007">•</span><span class="cls_009">  flowerBottom.png</span></div>
<div style="position:absolute;left:126.00px;top:305.66px" class="cls_007"><span class="cls_007">•</span><span class="cls_009">  flowerTop.png</span></div>
<div style="position:absolute;left:126.00px;top:322.58px" class="cls_007"><span class="cls_007">•</span><span class="cls_009">  bee.png</span></div>
<div style="position:absolute;left:108.00px;top:343.82px" class="cls_007"><span class="cls_007">We will load these textures and keep them around forever. However, if we were</span></div>
<div style="position:absolute;left:108.00px;top:356.42px" class="cls_007"><span class="cls_007">to have the game reload the </span><span class="cls_009">GameScreen</span><span class="cls_007"> class at any point, the textures would be</span></div>
<div style="position:absolute;left:108.00px;top:369.02px" class="cls_007"><span class="cls_007">reloaded afresh, and since we are not disposing of the previous textures, we would just</span></div>
<div style="position:absolute;left:108.00px;top:381.62px" class="cls_007"><span class="cls_007">fill up the memory. The </span><span class="cls_009">AssetManager</span><span class="cls_007"> parameter will ensure that we don't do that!</span></div>
<div style="position:absolute;left:108.00px;top:402.86px" class="cls_007"><span class="cls_007">First things first, we need to add our </span><span class="cls_009">AssetManager</span><span class="cls_007"> to our </span><span class="cls_009">GameScreen</span><span class="cls_007"> class, and</span></div>
<div style="position:absolute;left:108.00px;top:415.46px" class="cls_007"><span class="cls_007">add the following to the </span><span class="cls_009">GameScreen</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:126.00px;top:436.40px" class="cls_021"><span class="cls_021">private final AssetManager assetManager = new AssetManager();</span></div>
<div style="position:absolute;left:126.00px;top:448.64px" class="cls_021"><span class="cls_021">public GameScreen() {</span></div>
<div style="position:absolute;left:136.80px;top:460.88px" class="cls_021"><span class="cls_021">assetManager.load("bg.png", Texture.class);</span></div>
<div style="position:absolute;left:136.80px;top:473.12px" class="cls_021"><span class="cls_021">assetManager.load("flowerBottom.png", Texture.class);</span></div>
<div style="position:absolute;left:136.80px;top:485.36px" class="cls_021"><span class="cls_021">assetManager.load("flowerTop.png", Texture.class);</span></div>
<div style="position:absolute;left:136.80px;top:497.60px" class="cls_021"><span class="cls_021">assetManager.load("bee.png", Texture.class);</span></div>
<div style="position:absolute;left:136.80px;top:509.84px" class="cls_021"><span class="cls_021">assetManager.finishLoading();</span></div>
<div style="position:absolute;left:126.00px;top:522.08px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:541.82px" class="cls_007"><span class="cls_007">In the preceding code, we have instantiated the </span><span class="cls_009">AssetManager</span><span class="cls_007"> then we have</span></div>
<div style="position:absolute;left:108.00px;top:554.42px" class="cls_007"><span class="cls_007">instructed which assets to load and their type. In this case, these are just of type</span></div>
<div style="position:absolute;left:108.00px;top:567.02px" class="cls_009"><span class="cls_009">Texture</span><span class="cls_007">. Finally, we round it off by telling the manager to pause until it finishes</span></div>
<div style="position:absolute;left:108.00px;top:579.62px" class="cls_007"><span class="cls_007">loading. As certain aspects of the texture loading are done asynchronously and</span></div>
<div style="position:absolute;left:108.00px;top:592.22px" class="cls_007"><span class="cls_007">others are done synchronously, if we don't add the call to the </span><span class="cls_009">finishLoading()</span></div>
<div style="position:absolute;left:108.00px;top:604.82px" class="cls_007"><span class="cls_007">method, then there is a chance we will crash our game when it tries to access</span></div>
<div style="position:absolute;left:108.00px;top:617.42px" class="cls_007"><span class="cls_007">something that doesn't exist. Right now, this would still cause a pause in our</span></div>
<div style="position:absolute;left:108.00px;top:630.02px" class="cls_007"><span class="cls_007">rendering, but let's finish adding the </span><span class="cls_009">AssetManager</span><span class="cls_007"> and then look at rectifying it.</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 109 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:99448px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background127.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Making Your Bird More Flightworthy</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Next, we need to change the way we access the textures. Let's update the code in our</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_009"><span class="cls_009">show()</span><span class="cls_007"> method to reflect the new way:</span></div>
<div style="position:absolute;left:126.00px;top:148.03px" class="cls_021"><span class="cls_021">public void show(){</span></div>
<div style="position:absolute;left:136.80px;top:160.27px" class="cls_021"><span class="cls_021">// Code omitted for brevity</span></div>
<div style="position:absolute;left:136.80px;top:172.51px" class="cls_021"><span class="cls_021">background = assetManager.get("bg.png");</span></div>
<div style="position:absolute;left:136.80px;top:184.75px" class="cls_021"><span class="cls_021">flowerBottom = assetManager.get("flowerBottom.png");</span></div>
<div style="position:absolute;left:136.80px;top:196.99px" class="cls_021"><span class="cls_021">flowerTop = assetManager.get("flowerTop.png");</span></div>
<div style="position:absolute;left:136.80px;top:209.23px" class="cls_021"><span class="cls_021">flappeeTexture = assetManager.get("bee.png");</span></div>
<div style="position:absolute;left:136.80px;top:221.47px" class="cls_021"><span class="cls_021">// Code omitted for brevity</span></div>
<div style="position:absolute;left:126.00px;top:233.71px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:253.45px" class="cls_007"><span class="cls_007">Here, we no longer control the </span><span class="cls_009">Texture</span><span class="cls_007"> object; we don't even know how the loading is</span></div>
<div style="position:absolute;left:108.00px;top:266.05px" class="cls_007"><span class="cls_007">handled, which from a software development perspective, is great—decoupled code!</span></div>
<div style="position:absolute;left:108.00px;top:287.29px" class="cls_007"><span class="cls_007">We use the </span><span class="cls_009">get()</span><span class="cls_007"> method to return our </span><span class="cls_009">Texture</span><span class="cls_007"> parameter. If you now load the</span></div>
<div style="position:absolute;left:108.00px;top:299.89px" class="cls_007"><span class="cls_007">game, it will run just like it did earlier, except now we are using the power of the</span></div>
<div style="position:absolute;left:108.00px;top:312.49px" class="cls_009"><span class="cls_009">AssetManager</span><span class="cls_007">.</span></div>
<div style="position:absolute;left:108.00px;top:333.73px" class="cls_007"><span class="cls_007">If you would like to see what the </span><span class="cls_009">AssetManager</span><span class="cls_007"> is loading, there is a logger available</span></div>
<div style="position:absolute;left:108.00px;top:346.33px" class="cls_007"><span class="cls_007">that we can set the log level to. Add the following code to the </span><span class="cls_009">GameScreen</span><span class="cls_007"> constructor:</span></div>
<div style="position:absolute;left:126.00px;top:367.27px" class="cls_021"><span class="cls_021">assetManager.getLogger().setLevel(Logger.DEBUG);</span></div>
<div style="position:absolute;left:108.00px;top:387.01px" class="cls_007"><span class="cls_007">Now, when you run the preceding code, you will see the following output trace:</span></div>
<div style="position:absolute;left:126.00px;top:407.95px" class="cls_021"><span class="cls_021">AssetManager: Loading: bg.png, com.badlogic.gdx.graphics.Texture</span></div>
<div style="position:absolute;left:126.00px;top:420.19px" class="cls_021"><span class="cls_021">AssetManager: Loading: flowerBottom.png, com.badlogic.gdx.graphics.</span></div>
<div style="position:absolute;left:126.00px;top:430.99px" class="cls_021"><span class="cls_021">Texture</span></div>
<div style="position:absolute;left:126.00px;top:443.23px" class="cls_021"><span class="cls_021">AssetManager: Loading: flowerTop.png, com.badlogic.gdx.graphics.</span></div>
<div style="position:absolute;left:126.00px;top:454.03px" class="cls_021"><span class="cls_021">Texture</span></div>
<div style="position:absolute;left:126.00px;top:466.27px" class="cls_021"><span class="cls_021">AssetManager: Loading: bee.png, com.badlogic.gdx.graphics.Texture</span></div>
<div style="position:absolute;left:108.00px;top:486.01px" class="cls_007"><span class="cls_007">Perfect!</span></div>
<div style="position:absolute;left:108.00px;top:515.95px" class="cls_025"><span class="cls_025">Loading the loading screen!</span></div>
<div style="position:absolute;left:108.00px;top:538.93px" class="cls_007"><span class="cls_007">Great! We now have the manager in place; however, you might argue that we are</span></div>
<div style="position:absolute;left:108.00px;top:551.53px" class="cls_007"><span class="cls_007">still in the same situation. If our textures were a lot larger or if we had many more,</span></div>
<div style="position:absolute;left:108.00px;top:564.13px" class="cls_007"><span class="cls_007">we would still get a pause.</span></div>
<div style="position:absolute;left:108.00px;top:585.38px" class="cls_007"><span class="cls_007">So what can we do about this? Add a loading screen, of course!</span></div>
<div style="position:absolute;left:108.00px;top:606.62px" class="cls_007"><span class="cls_007">Having a loading screen is a great way to provide information back to the player</span></div>
<div style="position:absolute;left:108.00px;top:619.22px" class="cls_007"><span class="cls_007">that the game is actually doing something rather than giving the appearance that</span></div>
<div style="position:absolute;left:108.00px;top:631.82px" class="cls_007"><span class="cls_007">the game has just crashed.</span></div>
<div style="position:absolute;left:293.36px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 110 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:100250px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background128.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 5</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">First, let's create a new </span><span class="cls_009">Screen</span><span class="cls_007"> subclass, called </span><span class="cls_009">LoadingScreen</span><span class="cls_007">. This class will take</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">a </span><span class="cls_009">FlappeeBeeGame</span><span class="cls_007"> object in the constructor as we move the </span><span class="cls_009">AssetManager</span><span class="cls_007"> object to</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">the </span><span class="cls_009">FlappeeBeeGame</span><span class="cls_007"> class, so we will have only one instance of this class.</span></div>
<div style="position:absolute;left:108.00px;top:160.93px" class="cls_007"><span class="cls_007">Our </span><span class="cls_009">LoadingScreen</span><span class="cls_007"> class should look something like this:</span></div>
<div style="position:absolute;left:126.00px;top:181.87px" class="cls_021"><span class="cls_021">public class LoadingScreen extends ScreenAdapter{</span></div>
<div style="position:absolute;left:136.80px;top:206.35px" class="cls_021"><span class="cls_021">private static final float WORLD_WIDTH = 480;</span></div>
<div style="position:absolute;left:136.80px;top:218.59px" class="cls_021"><span class="cls_021">private static final float WORLD_HEIGHT = 640;</span></div>
<div style="position:absolute;left:136.80px;top:230.83px" class="cls_021"><span class="cls_021">private static final float PROGRESS_BAR_WIDTH = 100;</span></div>
<div style="position:absolute;left:136.80px;top:243.07px" class="cls_021"><span class="cls_021">private static final float PROGRESS_BAR_HEIGHT = 25;</span></div>
<div style="position:absolute;left:136.80px;top:255.31px" class="cls_021"><span class="cls_021">private ShapeRenderer shapeRenderer;</span></div>
<div style="position:absolute;left:136.80px;top:267.55px" class="cls_021"><span class="cls_021">private Viewport viewport;</span></div>
<div style="position:absolute;left:136.80px;top:279.79px" class="cls_021"><span class="cls_021">private Camera camera;</span></div>
<div style="position:absolute;left:136.80px;top:292.03px" class="cls_021"><span class="cls_021">private float progress = 0;</span></div>
<div style="position:absolute;left:136.80px;top:304.27px" class="cls_021"><span class="cls_021">private final FlappeeBeeGame flappeeBeeGame;</span></div>
<div style="position:absolute;left:136.80px;top:316.51px" class="cls_021"><span class="cls_021">public LoadingScreen(FlappeeBeeGame flappeeBeeGame) {</span></div>
<div style="position:absolute;left:147.60px;top:328.75px" class="cls_021"><span class="cls_021">this.flappeeBeeGame = flappeeBeeGame;</span></div>
<div style="position:absolute;left:136.80px;top:340.99px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:365.47px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:136.80px;top:377.71px" class="cls_021"><span class="cls_021">public void resize(int width, int height) {</span></div>
<div style="position:absolute;left:147.60px;top:389.95px" class="cls_021"><span class="cls_021">viewport.update(width, height);</span></div>
<div style="position:absolute;left:136.80px;top:402.19px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:426.67px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:136.80px;top:438.91px" class="cls_021"><span class="cls_021">public void show() {</span></div>
<div style="position:absolute;left:147.60px;top:451.15px" class="cls_021"><span class="cls_021">camera = new OrthographicCamera();</span></div>
<div style="position:absolute;left:147.60px;top:463.39px" class="cls_021"><span class="cls_021">camera.position.set(WORLD_WIDTH / 2, WORLD_HEIGHT / 2, 0);</span></div>
<div style="position:absolute;left:147.60px;top:475.63px" class="cls_021"><span class="cls_021">camera.update();</span></div>
<div style="position:absolute;left:147.60px;top:487.87px" class="cls_021"><span class="cls_021">viewport = new FitViewport(WORLD_WIDTH, WORLD_HEIGHT, camera);</span></div>
<div style="position:absolute;left:147.60px;top:500.11px" class="cls_021"><span class="cls_021">shapeRenderer = new ShapeRenderer();</span></div>
<div style="position:absolute;left:147.60px;top:512.35px" class="cls_021"><span class="cls_021">flappeeBeeGame.getAssetManager().load("bg.png",</span></div>
<div style="position:absolute;left:147.60px;top:523.15px" class="cls_021"><span class="cls_021">Texture.class);</span></div>
<div style="position:absolute;left:147.60px;top:535.39px" class="cls_021"><span class="cls_021">flappeeBeeGame.getAssetManager().load("flowerBottom.png",</span></div>
<div style="position:absolute;left:147.60px;top:546.19px" class="cls_021"><span class="cls_021">Texture.class);</span></div>
<div style="position:absolute;left:147.60px;top:558.43px" class="cls_021"><span class="cls_021">flappeeBeeGame.getAssetManager().load("flowerTop.png",</span></div>
<div style="position:absolute;left:147.60px;top:569.23px" class="cls_021"><span class="cls_021">Texture.class);</span></div>
<div style="position:absolute;left:147.60px;top:581.47px" class="cls_021"><span class="cls_021">flappeeBeeGame.getAssetManager().load("bee.png",</span></div>
<div style="position:absolute;left:147.60px;top:592.27px" class="cls_021"><span class="cls_021">Texture.class);</span></div>
<div style="position:absolute;left:136.80px;top:604.51px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:628.99px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:136.80px;top:641.23px" class="cls_021"><span class="cls_021">public void render(float delta) {</span></div>
<div style="position:absolute;left:294.21px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 111 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:101052px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background129.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Making Your Bird More Flightworthy</span></div>
<div style="position:absolute;left:147.60px;top:114.01px" class="cls_021"><span class="cls_021">update();</span></div>
<div style="position:absolute;left:147.60px;top:126.25px" class="cls_021"><span class="cls_021">clearScreen();</span></div>
<div style="position:absolute;left:147.60px;top:138.49px" class="cls_021"><span class="cls_021">draw();</span></div>
<div style="position:absolute;left:136.80px;top:150.73px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:175.21px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:136.80px;top:187.45px" class="cls_021"><span class="cls_021">public void dispose() {</span></div>
<div style="position:absolute;left:147.60px;top:199.69px" class="cls_021"><span class="cls_021">shapeRenderer.dispose();</span></div>
<div style="position:absolute;left:136.80px;top:211.93px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:236.41px" class="cls_021"><span class="cls_021">private void update() {</span></div>
<div style="position:absolute;left:147.60px;top:248.65px" class="cls_021"><span class="cls_021">if (flappeeBeeGame.getAssetManager().update()) {</span></div>
<div style="position:absolute;left:158.40px;top:260.89px" class="cls_021"><span class="cls_021">flappeeBeeGame.setScreen(new GameScreen());</span></div>
<div style="position:absolute;left:147.60px;top:273.13px" class="cls_021"><span class="cls_021">} else {</span></div>
<div style="position:absolute;left:158.40px;top:285.37px" class="cls_021"><span class="cls_021">progress = flappeeBeeGame.getAssetManager().getProgress();</span></div>
<div style="position:absolute;left:147.60px;top:297.61px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:309.85px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:334.33px" class="cls_021"><span class="cls_021">private void clearScreen() {</span></div>
<div style="position:absolute;left:147.60px;top:346.57px" class="cls_021"><span class="cls_021">Gdx.gl.glClearColor(Color.BLACK.r, Color.BLACK.g,</span></div>
<div style="position:absolute;left:147.60px;top:357.37px" class="cls_021"><span class="cls_021">Color.BLACK.b, Color.BLACK.a);</span></div>
<div style="position:absolute;left:147.60px;top:369.61px" class="cls_021"><span class="cls_021">Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);</span></div>
<div style="position:absolute;left:136.80px;top:381.85px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:406.33px" class="cls_021"><span class="cls_021">private void draw() {</span></div>
<div style="position:absolute;left:147.60px;top:418.57px" class="cls_021"><span class="cls_021">shapeRenderer.setProjectionMatrix(camera.projection);</span></div>
<div style="position:absolute;left:147.60px;top:430.81px" class="cls_021"><span class="cls_021">shapeRenderer.setTransformMatrix(camera.view);</span></div>
<div style="position:absolute;left:147.60px;top:443.05px" class="cls_021"><span class="cls_021">shapeRenderer.begin(ShapeRenderer.ShapeType.Filled);</span></div>
<div style="position:absolute;left:147.60px;top:455.29px" class="cls_021"><span class="cls_021">shapeRenderer.setColor(Color.WHITE);</span></div>
<div style="position:absolute;left:147.60px;top:467.53px" class="cls_021"><span class="cls_021">shapeRenderer.rect(</span></div>
<div style="position:absolute;left:158.40px;top:479.77px" class="cls_021"><span class="cls_021">(WORLD_WIDTH</span></div>
<div style="position:absolute;left:234.00px;top:479.77px" class="cls_021"><span class="cls_021">- PROGRESS_BAR_WIDTH) / 2, (WORLD_HEIGHT</span></div>
<div style="position:absolute;left:460.80px;top:479.77px" class="cls_021"><span class="cls_021">-</span></div>
<div style="position:absolute;left:158.40px;top:490.57px" class="cls_021"><span class="cls_021">PROGRESS_BAR_HEIGHT / 2),</span></div>
<div style="position:absolute;left:158.40px;top:502.81px" class="cls_021"><span class="cls_021">progress * PROGRESS_BAR_WIDTH, PROGRESS_BAR_HEIGHT);</span></div>
<div style="position:absolute;left:147.60px;top:515.05px" class="cls_021"><span class="cls_021">shapeRenderer.end();</span></div>
<div style="position:absolute;left:136.80px;top:527.29px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:539.53px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:559.26px" class="cls_007"><span class="cls_007">Let's break down what we have here. Some of it will be fairly familiar to what we have</span></div>
<div style="position:absolute;left:108.00px;top:571.86px" class="cls_007"><span class="cls_007">done earlier with the </span><span class="cls_009">Camera</span><span class="cls_007">, </span><span class="cls_009">Viewport</span><span class="cls_007">, and </span><span class="cls_009">ShapeRenderer</span><span class="cls_007"> classes. The key point</span></div>
<div style="position:absolute;left:108.00px;top:584.46px" class="cls_007"><span class="cls_007">in this class is that we specify which textures to load in the </span><span class="cls_009">show()</span><span class="cls_007"> method, as shown</span></div>
<div style="position:absolute;left:108.00px;top:597.06px" class="cls_007"><span class="cls_007">here. It should be noted that we have moved the </span><span class="cls_009">AssetManager</span><span class="cls_007"> parameter from the</span></div>
<div style="position:absolute;left:108.00px;top:609.66px" class="cls_009"><span class="cls_009">GameScreen</span><span class="cls_007"> parameter to the </span><span class="cls_009">FlappeeBeeGame</span><span class="cls_007"> class and added a simple getter:</span></div>
<div style="position:absolute;left:126.00px;top:630.60px" class="cls_021"><span class="cls_021">public void show(){</span></div>
<div style="position:absolute;left:136.80px;top:642.84px" class="cls_021"><span class="cls_021">// Code omitted for brevity</span></div>
<div style="position:absolute;left:293.36px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 112 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:101854px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background130.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 5</span></div>
<div style="position:absolute;left:136.80px;top:114.01px" class="cls_021"><span class="cls_021">flappeeBeeGame.getAssetManager().load("bg.png", Texture.class);</span></div>
<div style="position:absolute;left:136.80px;top:126.25px" class="cls_021"><span class="cls_021">flappeeBeeGame.getAssetManager().load("flowerBottom.png",</span></div>
<div style="position:absolute;left:136.80px;top:137.05px" class="cls_021"><span class="cls_021">Texture.class);</span></div>
<div style="position:absolute;left:136.80px;top:149.29px" class="cls_021"><span class="cls_021">flappeeBeeGame.getAssetManager().load("flowerTop.png",</span></div>
<div style="position:absolute;left:136.80px;top:160.09px" class="cls_021"><span class="cls_021">Texture.class);</span></div>
<div style="position:absolute;left:136.80px;top:172.33px" class="cls_021"><span class="cls_021">flappeeBeeGame.getAssetManager().load("bee.png", Texture.class);</span></div>
<div style="position:absolute;left:126.00px;top:184.57px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:204.30px" class="cls_007"><span class="cls_007">Next, in our </span><span class="cls_009">update()</span><span class="cls_007"> method, we add the following code:</span></div>
<div style="position:absolute;left:126.00px;top:225.24px" class="cls_021"><span class="cls_021">private void update() {</span></div>
<div style="position:absolute;left:136.80px;top:237.48px" class="cls_021"><span class="cls_021">if (flappeeBeeGame.getAssetManager().update()) {</span></div>
<div style="position:absolute;left:147.60px;top:249.72px" class="cls_021"><span class="cls_021">flappeeBeeGame.setScreen(new GameScreen());</span></div>
<div style="position:absolute;left:136.80px;top:261.96px" class="cls_021"><span class="cls_021">} else {</span></div>
<div style="position:absolute;left:147.60px;top:274.20px" class="cls_021"><span class="cls_021">progress = flappeeBeeGame.getAssetManager().getProgress();</span></div>
<div style="position:absolute;left:136.80px;top:286.44px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:298.68px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:318.42px" class="cls_007"><span class="cls_007">In the preceding code, you can see that we call the </span><span class="cls_009">update()</span><span class="cls_007"> method on the</span></div>
<div style="position:absolute;left:108.00px;top:331.02px" class="cls_009"><span class="cls_009">AssetManager</span><span class="cls_007"> class this will give us an indication of whether or not it has finished</span></div>
<div style="position:absolute;left:108.00px;top:343.62px" class="cls_007"><span class="cls_007">loading. The manager will return </span><span class="cls_009">true</span><span class="cls_007"> if it is complete, or </span><span class="cls_009">false</span><span class="cls_007"> otherwise. If it</span></div>
<div style="position:absolute;left:108.00px;top:356.22px" class="cls_007"><span class="cls_007">is </span><span class="cls_009">false</span><span class="cls_007">, and there are more assets for the manager to load, we then query how</span></div>
<div style="position:absolute;left:108.00px;top:368.82px" class="cls_007"><span class="cls_007">far along the manager is and store this in a class level field for use later on. If the</span></div>
<div style="position:absolute;left:108.00px;top:381.42px" class="cls_007"><span class="cls_007">manager has completed all the asset loading, we can just change the screen to our</span></div>
<div style="position:absolute;left:108.00px;top:394.02px" class="cls_007"><span class="cls_007">game screen; job done!</span></div>
<div style="position:absolute;left:108.00px;top:415.26px" class="cls_007"><span class="cls_007">Finally, we just need to give the player some sort of visual representation of the</span></div>
<div style="position:absolute;left:108.00px;top:427.86px" class="cls_007"><span class="cls_007">loading screen. There are many different ways this can be achieved; I am sure you</span></div>
<div style="position:absolute;left:108.00px;top:440.46px" class="cls_007"><span class="cls_007">have seen many yourself. Here, we will go with a traditional loading bar, but you</span></div>
<div style="position:absolute;left:108.00px;top:453.06px" class="cls_007"><span class="cls_007">may try out other ways in the future. Just remember, the more visually complex</span></div>
<div style="position:absolute;left:108.00px;top:465.66px" class="cls_007"><span class="cls_007">your loading screen becomes, the more it might need to be loaded itself!</span></div>
<div style="position:absolute;left:108.00px;top:486.91px" class="cls_007"><span class="cls_007">Here is the code that handles the rendering of our progress bar:</span></div>
<div style="position:absolute;left:126.00px;top:507.84px" class="cls_021"><span class="cls_021">private void draw() {</span></div>
<div style="position:absolute;left:136.80px;top:520.08px" class="cls_021"><span class="cls_021">shapeRenderer.setProjectionMatrix(camera.projection);</span></div>
<div style="position:absolute;left:136.80px;top:532.32px" class="cls_021"><span class="cls_021">shapeRenderer.setTransformMatrix(camera.view);</span></div>
<div style="position:absolute;left:136.80px;top:544.56px" class="cls_021"><span class="cls_021">shapeRenderer.begin(ShapeRenderer.ShapeType.Filled);</span></div>
<div style="position:absolute;left:136.80px;top:556.80px" class="cls_021"><span class="cls_021">shapeRenderer.setColor(Color.WHITE);</span></div>
<div style="position:absolute;left:136.80px;top:569.04px" class="cls_021"><span class="cls_021">shapeRenderer.rect(</span></div>
<div style="position:absolute;left:147.60px;top:581.28px" class="cls_021"><span class="cls_021">(WORLD_WIDTH  PROGRESS_BAR_WIDTH) / 2, (WORLD_HEIGHT</span></div>
<div style="position:absolute;left:439.20px;top:581.28px" class="cls_021"><span class="cls_021">-</span></div>
<div style="position:absolute;left:147.60px;top:592.08px" class="cls_021"><span class="cls_021">PROGRESS_BAR_HEIGHT) / 2,</span></div>
<div style="position:absolute;left:136.80px;top:604.32px" class="cls_021"><span class="cls_021">progress * PROGRESS_BAR_WIDTH, PROGRESS_BAR_HEIGHT);</span></div>
<div style="position:absolute;left:136.80px;top:616.56px" class="cls_021"><span class="cls_021">shapeRenderer.end();</span></div>
<div style="position:absolute;left:126.00px;top:628.80px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:293.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 113 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:102656px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background131.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Making Your Bird More Flightworthy</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">The key piece of code is the </span><span class="cls_009">shaperenderer.rect()</span><span class="cls_007"> call. We ask the renderer</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">to draw a filled rectangle in the center of the screen, offset by its maximum sizes.</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">We then calculate the width of the bar in proportion to the loading time. This will</span></div>
<div style="position:absolute;left:108.00px;top:152.29px" class="cls_007"><span class="cls_007">expand the progress bar as more and more assets are loaded.</span></div>
<div style="position:absolute;left:108.00px;top:173.54px" class="cls_007"><span class="cls_007">We now have a loading screen; we just need to hook it to our screen flow. In our</span></div>
<div style="position:absolute;left:108.00px;top:186.13px" class="cls_009"><span class="cls_009">StartScreen</span><span class="cls_007"> parameter we can now update the </span><span class="cls_023">Play</span><span class="cls_007"> button listener to set the</span></div>
<div style="position:absolute;left:108.00px;top:198.73px" class="cls_007"><span class="cls_007">screen to an instance of </span><span class="cls_009">LoadingScreen</span><span class="cls_007">, as shown here. It should be noted that</span></div>
<div style="position:absolute;left:108.00px;top:211.33px" class="cls_007"><span class="cls_007">the game class that we now have in </span><span class="cls_009">StartScreen</span><span class="cls_007"> should be updated to the type</span></div>
<div style="position:absolute;left:108.00px;top:223.93px" class="cls_009"><span class="cls_009">FlappyBeeGame</span><span class="cls_007">:</span></div>
<div style="position:absolute;left:126.00px;top:244.87px" class="cls_021"><span class="cls_021">play.addListener(new ActorGestureListener() {</span></div>
<div style="position:absolute;left:136.80px;top:257.11px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:136.80px;top:269.35px" class="cls_021"><span class="cls_021">public void tap(InputEvent event, float x, float y, int count,</span></div>
<div style="position:absolute;left:136.80px;top:280.15px" class="cls_021"><span class="cls_021">int button) {</span></div>
<div style="position:absolute;left:147.60px;top:292.39px" class="cls_021"><span class="cls_021">super.tap(event, x, y, count, button);</span></div>
<div style="position:absolute;left:147.60px;top:304.63px" class="cls_021"><span class="cls_021">game.setScreen(new LoadingScreen(game));</span></div>
<div style="position:absolute;left:147.60px;top:316.87px" class="cls_021"><span class="cls_021">dispose();</span></div>
<div style="position:absolute;left:136.80px;top:329.11px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:341.35px" class="cls_021"><span class="cls_021">});</span></div>
<div style="position:absolute;left:108.00px;top:361.09px" class="cls_007"><span class="cls_007">If you now launch the game, when you click on </span><span class="cls_023">Start</span><span class="cls_007">, you should get the loading</span></div>
<div style="position:absolute;left:108.00px;top:373.69px" class="cls_007"><span class="cls_007">screen briefly appearing before going to the actual game!</span></div>
<div style="position:absolute;left:293.36px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 114 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:103458px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background132.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 5</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">I agree it isn't much to look at, but it does the job!</span></div>
<div style="position:absolute;left:108.00px;top:135.73px" class="cls_007"><span class="cls_007">To finish off, we can now remove the </span><span class="cls_009">AssetManager</span><span class="cls_007"> object from the </span><span class="cls_009">GameScreen</span></div>
<div style="position:absolute;left:108.00px;top:148.33px" class="cls_007"><span class="cls_007">parameter and just reference the one from the </span><span class="cls_009">FlappeeBeeGame</span><span class="cls_007"> class.</span></div>
<div style="position:absolute;left:108.00px;top:169.57px" class="cls_007"><span class="cls_007">So, update the </span><span class="cls_009">GameScreen</span><span class="cls_007"> so that we now pass in the </span><span class="cls_009">FlappeeBeeGame</span><span class="cls_007"> object, and</span></div>
<div style="position:absolute;left:108.00px;top:182.17px" class="cls_007"><span class="cls_007">then remove the </span><span class="cls_009">AssetManager</span><span class="cls_007"> code we introduced previously. Now, update the</span></div>
<div style="position:absolute;left:108.00px;top:194.77px" class="cls_009"><span class="cls_009">show()</span><span class="cls_007"> method to reference the </span><span class="cls_009">FlappeeBeeGame</span><span class="cls_007"> object, as follows:</span></div>
<div style="position:absolute;left:126.00px;top:215.71px" class="cls_021"><span class="cls_021">public void show(){</span></div>
<div style="position:absolute;left:136.80px;top:227.95px" class="cls_021"><span class="cls_021">// Code omitted for brevity</span></div>
<div style="position:absolute;left:136.80px;top:240.19px" class="cls_021"><span class="cls_021">background = flappeeBeeGame.getAssetManager().get("bg.png");</span></div>
<div style="position:absolute;left:136.80px;top:252.43px" class="cls_021"><span class="cls_021">flowerBottom =</span></div>
<div style="position:absolute;left:136.80px;top:263.23px" class="cls_021"><span class="cls_021">flappeeBeeGame.getAssetManager().get("flowerBottom.png");</span></div>
<div style="position:absolute;left:136.80px;top:275.47px" class="cls_021"><span class="cls_021">flowerTop =</span></div>
<div style="position:absolute;left:136.80px;top:286.27px" class="cls_021"><span class="cls_021">flappeeBeeGame.getAssetManager().get("flowerTop.png");</span></div>
<div style="position:absolute;left:136.80px;top:298.51px" class="cls_021"><span class="cls_021">flappeeTexture =</span></div>
<div style="position:absolute;left:136.80px;top:309.31px" class="cls_021"><span class="cls_021">flappeeBeeGame.getAssetManager().get("bee.png");</span></div>
<div style="position:absolute;left:136.80px;top:321.55px" class="cls_021"><span class="cls_021">// Code omitted for brevity</span></div>
<div style="position:absolute;left:126.00px;top:333.79px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:353.53px" class="cls_007"><span class="cls_007">Now, we will use the textures loaded while this screen is being loaded.</span></div>
<div style="position:absolute;left:108.00px;top:374.78px" class="cls_007"><span class="cls_007">Going forward, there is much more you can do with the loading screen than we have</span></div>
<div style="position:absolute;left:108.00px;top:387.38px" class="cls_007"><span class="cls_007">done here; make it more dynamic with what it loads. Currently, it is very much tied</span></div>
<div style="position:absolute;left:108.00px;top:399.98px" class="cls_007"><span class="cls_007">to the game we have here. If we had multiple screens with different assets associated</span></div>
<div style="position:absolute;left:108.00px;top:412.58px" class="cls_007"><span class="cls_007">with them, it would get quite messy to do it all in one loading screen like we did</span></div>
<div style="position:absolute;left:108.00px;top:425.18px" class="cls_007"><span class="cls_007">here. However, you wouldn't want to load everything at once; essentially, we should</span></div>
<div style="position:absolute;left:108.00px;top:437.78px" class="cls_007"><span class="cls_007">only be loading what we need.</span></div>
<div style="position:absolute;left:108.00px;top:470.27px" class="cls_019"><span class="cls_019">Packing textures</span></div>
<div style="position:absolute;left:108.00px;top:495.25px" class="cls_007"><span class="cls_007">Currently, we have our textures as individual files. For a game the size of Flappee</span></div>
<div style="position:absolute;left:108.00px;top:507.85px" class="cls_007"><span class="cls_007">Bee, that would normally be OK, since during the game we have four files. However,</span></div>
<div style="position:absolute;left:108.00px;top:520.45px" class="cls_007"><span class="cls_007">what would happen if we started adding more and more in-game textures?</span></div>
<div style="position:absolute;left:108.00px;top:533.05px" class="cls_007"><span class="cls_007">Eventually, we would start slowing down the game. The reason for this is that the</span></div>
<div style="position:absolute;left:108.00px;top:545.65px" class="cls_007"><span class="cls_007">underlying OpenGL is performing something called a </span><span class="cls_023">bind</span><span class="cls_007"> for every different</span></div>
<div style="position:absolute;left:108.00px;top:558.25px" class="cls_007"><span class="cls_007">texture it renders. Binding is relatively expensive. To combat this, we can combine</span></div>
<div style="position:absolute;left:108.00px;top:570.85px" class="cls_007"><span class="cls_007">our assets into a single sheet, ah! You might be thinking, "But now I have to know</span></div>
<div style="position:absolute;left:108.00px;top:583.45px" class="cls_007"><span class="cls_007">where in the sheet the image is?", "What pixels to cut out?", and "What if they are</span></div>
<div style="position:absolute;left:108.00px;top:596.05px" class="cls_007"><span class="cls_007">rotated or white-space trimmed to save space in the image?" Well, fear not; LibGDX</span></div>
<div style="position:absolute;left:108.00px;top:608.65px" class="cls_007"><span class="cls_007">has a tool for this that will save us time—</span><span class="cls_009">TexturePacker</span><span class="cls_007">.</span></div>
<div style="position:absolute;left:293.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 115 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:104260px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background133.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Making Your Bird More Flightworthy</span></div>
<div style="position:absolute;left:173.05px;top:129.47px" class="cls_024"><span class="cls_024">Here is a link to the LibGDX wiki that will let you look deeper into the</span></div>
<div style="position:absolute;left:173.05px;top:140.87px" class="cls_024"><span class="cls_024">Texture Packer tool:</span></div>
<div style="position:absolute;left:173.05px;top:155.15px" class="cls_009"><span class="cls_009"> </span><A HREF="https://github.com/libgdx/libgdx/wiki/Texture-packer">https://github.com/libgdx/libgdx/wiki/Texture-packer</A> </div>
<div style="position:absolute;left:108.00px;top:186.46px" class="cls_007"><span class="cls_007">However, before we do this, let me first show you how we can measure the impact of</span></div>
<div style="position:absolute;left:108.00px;top:199.06px" class="cls_007"><span class="cls_007">switching to a single sheet, or </span><span class="cls_023">texture atlas</span><span class="cls_007"> as it is known.</span></div>
<div style="position:absolute;left:108.00px;top:229.00px" class="cls_025"><span class="cls_025">Measuring the impact</span></div>
<div style="position:absolute;left:108.00px;top:251.98px" class="cls_007"><span class="cls_007">We use a class called </span><span class="cls_009">SpriteBatch</span><span class="cls_007">, which keeps track of something that is called a</span></div>
<div style="position:absolute;left:108.00px;top:264.58px" class="cls_007"><span class="cls_007">render call. A render call occurs when the batch flushes out the vertices to the mesh;</span></div>
<div style="position:absolute;left:108.00px;top:277.18px" class="cls_007"><span class="cls_007">this will happen in a number of scenarios but the one we are interested in is when a</span></div>
<div style="position:absolute;left:108.00px;top:289.78px" class="cls_007"><span class="cls_007">texture that is being rendered changes.</span></div>
<div style="position:absolute;left:108.00px;top:311.02px" class="cls_007"><span class="cls_007">Let's measure this, but only after looking at the render calls made in a frame</span></div>
<div style="position:absolute;left:108.00px;top:323.62px" class="cls_007"><span class="cls_007">before and after the change to a texture atlas. We can achieve this by accessing</span></div>
<div style="position:absolute;left:108.00px;top:336.22px" class="cls_007"><span class="cls_007">the </span><span class="cls_009">totalRenderCalls</span><span class="cls_007"> field on the </span><span class="cls_009">SpriteBatch</span><span class="cls_007"> object before and after we draw.</span></div>
<div style="position:absolute;left:108.00px;top:348.82px" class="cls_007"><span class="cls_007">To do so, let's update our </span><span class="cls_009">GameScreen</span><span class="cls_007"> class to do this, with the following code:</span></div>
<div style="position:absolute;left:126.00px;top:369.76px" class="cls_021"><span class="cls_021">private void draw(){</span></div>
<div style="position:absolute;left:136.80px;top:382.00px" class="cls_021"><span class="cls_021">batch.totalRenderCalls = 0;</span></div>
<div style="position:absolute;left:136.80px;top:394.24px" class="cls_021"><span class="cls_021">batch.setProjectionMatrix(camera.projection);</span></div>
<div style="position:absolute;left:136.80px;top:406.48px" class="cls_021"><span class="cls_021">batch.setTransformMatrix(camera.view);</span></div>
<div style="position:absolute;left:136.80px;top:418.72px" class="cls_021"><span class="cls_021">batch.begin();</span></div>
<div style="position:absolute;left:136.80px;top:430.96px" class="cls_021"><span class="cls_021">batch.draw(background, 0, 0);</span></div>
<div style="position:absolute;left:136.80px;top:443.20px" class="cls_021"><span class="cls_021">drawFlowers();</span></div>
<div style="position:absolute;left:136.80px;top:455.44px" class="cls_021"><span class="cls_021">flappee.draw(batch);</span></div>
<div style="position:absolute;left:136.80px;top:467.68px" class="cls_021"><span class="cls_021">drawScore();</span></div>
<div style="position:absolute;left:136.80px;top:479.92px" class="cls_021"><span class="cls_021">batch.end();</span></div>
<div style="position:absolute;left:136.80px;top:492.16px" class="cls_021"><span class="cls_021">Gdx.app.log("Debug", batch.totalRenderCalls);</span></div>
<div style="position:absolute;left:126.00px;top:504.40px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:524.14px" class="cls_007"><span class="cls_007">In the preceding code, we reset the </span><span class="cls_009">totalRenderCalls</span><span class="cls_007"> parameter before the rendering</span></div>
<div style="position:absolute;left:108.00px;top:536.74px" class="cls_007"><span class="cls_007">took place, and we just printed out the field's value once the render happened. I don't</span></div>
<div style="position:absolute;left:108.00px;top:549.34px" class="cls_007"><span class="cls_007">recommend this for production use, as this would occur on every frame, but here,</span></div>
<div style="position:absolute;left:108.00px;top:561.94px" class="cls_007"><span class="cls_007">it will be just fine for now. In fact, it would be a good time to mention the LibGDX</span></div>
<div style="position:absolute;left:108.00px;top:574.54px" class="cls_007"><span class="cls_007">logging; like the majority of logging tools out there, it is fairly simple to use. You can</span></div>
<div style="position:absolute;left:108.00px;top:587.14px" class="cls_007"><span class="cls_007">find more information on the logging tools in the following wiki:</span></div>
<div style="position:absolute;left:108.00px;top:609.38px" class="cls_009"><span class="cls_009"> </span><A HREF="https://github.com/libgdx/libgdx/wiki/Logging">https://github.com/libgdx/libgdx/wiki/Logging</A> </div>
<div style="position:absolute;left:108.00px;top:629.62px" class="cls_007"><span class="cls_007">Once you amend the </span><span class="cls_009">draw()</span><span class="cls_007"> method, run the game and, hopefully, you will have the</span></div>
<div style="position:absolute;left:108.00px;top:642.22px" class="cls_007"><span class="cls_007">same amount of draw calls as I do here, which is five.</span></div>
<div style="position:absolute;left:293.36px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 116 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:105062px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background134.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 5</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">You are probably thinking, "Well, five isn't so bad." To an extent you are right, how we</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">have it now isn't affecting the game—that's the important part here. However, if you</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">don't keep track of something like this, you might start finding the performance slows</span></div>
<div style="position:absolute;left:108.00px;top:152.29px" class="cls_007"><span class="cls_007">down when the draw calls start incrementing as you add more visual components.</span></div>
<div style="position:absolute;left:108.00px;top:173.53px" class="cls_007"><span class="cls_007">With that out of the way, let's load the </span><span class="cls_009">TexturePacker</span><span class="cls_007"> tool.</span></div>
<div style="position:absolute;left:108.00px;top:203.47px" class="cls_025"><span class="cls_025">The GDX-tools TexturePacker</span></div>
<div style="position:absolute;left:108.00px;top:226.45px" class="cls_007"><span class="cls_007">First things first, we need to add the LibGDX tools dependency to our project so we</span></div>
<div style="position:absolute;left:108.00px;top:239.05px" class="cls_007"><span class="cls_007">can access the awesome tools that they provide.</span></div>
<div style="position:absolute;left:108.00px;top:260.29px" class="cls_007"><span class="cls_007">In your </span><span class="cls_009">build.gradle</span><span class="cls_007"> file for the project, update the desktop project entry with the</span></div>
<div style="position:absolute;left:108.00px;top:272.89px" class="cls_007"><span class="cls_007">tools dependency:</span></div>
<div style="position:absolute;left:126.00px;top:293.83px" class="cls_021"><span class="cls_021">project(":desktop") {</span></div>
<div style="position:absolute;left:136.80px;top:304.63px" class="cls_021"><span class="cls_021">apply plugin: "java"</span></div>
<div style="position:absolute;left:136.80px;top:315.43px" class="cls_021"><span class="cls_021">dependencies {</span></div>
<div style="position:absolute;left:147.60px;top:326.23px" class="cls_021"><span class="cls_021">compile project(":core")</span></div>
<div style="position:absolute;left:147.60px;top:337.03px" class="cls_021"><span class="cls_021">compile "com.badlogicgames.gdx:gdx-tools:$gdxVersion"</span></div>
<div style="position:absolute;left:147.60px;top:347.83px" class="cls_021"><span class="cls_021">compile "com.badlogicgames.gdx:gdx-backend-lwjgl:$gdxVersion"</span></div>
<div style="position:absolute;left:147.60px;top:358.63px" class="cls_021"><span class="cls_021">compile "com.badlogicgames.gdx:gdx-</span></div>
<div style="position:absolute;left:147.60px;top:369.43px" class="cls_021"><span class="cls_021">platform:$gdxVersion:natives-desktop"</span></div>
<div style="position:absolute;left:136.80px;top:380.23px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:391.03px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:410.77px" class="cls_007"><span class="cls_007">If you refresh the Gradle project, it will download the dependency and the project</span></div>
<div style="position:absolute;left:108.00px;top:423.37px" class="cls_007"><span class="cls_007">will appear in your dependency list.</span></div>
<div style="position:absolute;left:108.00px;top:444.61px" class="cls_007"><span class="cls_007">To run the </span><span class="cls_009">TexturePacker</span><span class="cls_007"> parameter, we can either call it from the command line</span></div>
<div style="position:absolute;left:108.00px;top:457.21px" class="cls_007"><span class="cls_007">or we can do it in code. Let's take the code route for now, as it will have an added</span></div>
<div style="position:absolute;left:108.00px;top:469.81px" class="cls_007"><span class="cls_007">benefit later on.</span></div>
<div style="position:absolute;left:108.00px;top:491.05px" class="cls_007"><span class="cls_007">As the </span><span class="cls_009">gdx-tools</span><span class="cls_007"> module is now a dependency of the desktop module, we can</span></div>
<div style="position:absolute;left:108.01px;top:503.65px" class="cls_007"><span class="cls_007">update our </span><span class="cls_009">DesktopLauncher</span><span class="cls_007"> class with the following lines of code:</span></div>
<div style="position:absolute;left:126.00px;top:524.59px" class="cls_021"><span class="cls_021">public class DesktopLauncher {</span></div>
<div style="position:absolute;left:136.80px;top:535.39px" class="cls_021"><span class="cls_021">public static void main(String[] arg) throws Exception {</span></div>
<div style="position:absolute;left:147.60px;top:546.19px" class="cls_021"><span class="cls_021">LwjglApplicationConfiguration config = new</span></div>
<div style="position:absolute;left:147.60px;top:556.99px" class="cls_021"><span class="cls_021">LwjglApplicationConfiguration();</span></div>
<div style="position:absolute;left:147.60px;top:567.79px" class="cls_021"><span class="cls_021">config.height = 320;</span></div>
<div style="position:absolute;left:147.60px;top:578.59px" class="cls_021"><span class="cls_021">config.width = 240;</span></div>
<div style="position:absolute;left:147.60px;top:589.39px" class="cls_021"><span class="cls_021">TexturePacker.process("../assets", "../assets",</span></div>
<div style="position:absolute;left:147.60px;top:600.19px" class="cls_021"><span class="cls_021">"flappee_bee_assets");</span></div>
<div style="position:absolute;left:147.60px;top:610.99px" class="cls_021"><span class="cls_021">new LwjglApplication(new FlappeeBeeGame(), config);</span></div>
<div style="position:absolute;left:136.80px;top:621.79px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:632.59px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:293.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 117 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:105864px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background135.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Making Your Bird More Flightworthy</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">In the preceding code, we tell the </span><span class="cls_009">TexturePacker</span><span class="cls_007"> parameter to run before the game</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">launches, and specify the input and output directories and the name we want to give</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">our atlas. There is another method </span><span class="cls_009">signature()</span><span class="cls_007"> which allows for a Settings object to</span></div>
<div style="position:absolute;left:108.00px;top:152.29px" class="cls_007"><span class="cls_007">be passed, but we can use the defaults for now.</span></div>
<div style="position:absolute;left:108.00px;top:173.54px" class="cls_007"><span class="cls_007">If you now run the game, you might not notice anything different, but once the game</span></div>
<div style="position:absolute;left:108.00px;top:186.13px" class="cls_007"><span class="cls_007">has launched, you will see that two files, </span><span class="cls_009">flappee_bee_assets.png</span><span class="cls_007"> and </span><span class="cls_009">flappee_</span></div>
<div style="position:absolute;left:108.00px;top:198.73px" class="cls_009"><span class="cls_009">bee_assets.atlas</span><span class="cls_007">, have appeared in the </span><span class="cls_009">assets</span><span class="cls_007"> directory of the core module.</span></div>
<div style="position:absolute;left:108.00px;top:576.14px" class="cls_007"><span class="cls_007">As we can see in this image, it has taken all the images and placed them into one</span></div>
<div style="position:absolute;left:108.00px;top:588.74px" class="cls_007"><span class="cls_007">image, our texture atlas!</span></div>
<div style="position:absolute;left:108.00px;top:609.98px" class="cls_007"><span class="cls_007">Now, when you make your own games, you may decide to leave that texture</span></div>
<div style="position:absolute;left:108.00px;top:622.58px" class="cls_007"><span class="cls_007">packing code in place, so when you update your assets, they will automatically</span></div>
<div style="position:absolute;left:108.00px;top:635.18px" class="cls_007"><span class="cls_007">get packed for you when you run your desktop build.</span></div>
<div style="position:absolute;left:293.36px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 118 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:106666px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background136.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 5</span></div>
<div style="position:absolute;left:108.00px;top:112.46px" class="cls_025"><span class="cls_025">Using the texture atlas</span></div>
<div style="position:absolute;left:108.00px;top:135.44px" class="cls_007"><span class="cls_007">With our atlas generated, we can move on to using it. But before we do, I just want to</span></div>
<div style="position:absolute;left:108.00px;top:148.04px" class="cls_007"><span class="cls_007">tell you about the other atlas file that was generated, </span><span class="cls_009">flappee_bee_assets.atlas</span><span class="cls_007">.</span></div>
<div style="position:absolute;left:108.00px;top:160.64px" class="cls_007"><span class="cls_007">If you open the file, you will see that it is a text-based document that describes our</span></div>
<div style="position:absolute;left:108.00px;top:173.24px" class="cls_007"><span class="cls_007">atlas, pixel positions, rotations, and so on. This is how LibGDX will know where to</span></div>
<div style="position:absolute;left:108.00px;top:185.84px" class="cls_007"><span class="cls_007">get our textures from when we ask for them.</span></div>
<div style="position:absolute;left:108.00px;top:207.09px" class="cls_007"><span class="cls_007">Our first port of call with updating the game to use the texture atlas is to change the</span></div>
<div style="position:absolute;left:108.00px;top:219.68px" class="cls_009"><span class="cls_009">LoadingScreen</span><span class="cls_007"> class to load the atlas instead of the other assets. We simply switch</span></div>
<div style="position:absolute;left:108.00px;top:232.28px" class="cls_007"><span class="cls_007">out the four calls to the </span><span class="cls_009">load()</span><span class="cls_007"> method with one for the texture atlas, as follows:</span></div>
<div style="position:absolute;left:126.00px;top:253.22px" class="cls_021"><span class="cls_021">public void show() {</span></div>
<div style="position:absolute;left:136.80px;top:265.46px" class="cls_021"><span class="cls_021">super.show();</span></div>
<div style="position:absolute;left:136.80px;top:277.70px" class="cls_021"><span class="cls_021">camera = new OrthographicCamera();</span></div>
<div style="position:absolute;left:136.80px;top:289.94px" class="cls_021"><span class="cls_021">camera.position.set(WORLD_WIDTH / 2, WORLD_HEIGHT / 2, 0);</span></div>
<div style="position:absolute;left:136.80px;top:302.18px" class="cls_021"><span class="cls_021">camera.update();</span></div>
<div style="position:absolute;left:136.80px;top:314.42px" class="cls_021"><span class="cls_021">viewport = new FitViewport(WORLD_WIDTH, WORLD_HEIGHT, camera);</span></div>
<div style="position:absolute;left:136.80px;top:326.66px" class="cls_021"><span class="cls_021">shapeRenderer = new ShapeRenderer();</span></div>
<div style="position:absolute;left:136.80px;top:338.90px" class="cls_021"><span class="cls_021">flappeeBeeGame.getAssetManager().load</span></div>
<div style="position:absolute;left:136.80px;top:349.70px" class="cls_021"><span class="cls_021">("flappee_bee_assets.atlas", TextureAtlas.class);</span></div>
<div style="position:absolute;left:126.00px;top:361.94px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:381.68px" class="cls_007"><span class="cls_007">In the long run, this will make our code cleaner as we have to reference fewer assets!</span></div>
<div style="position:absolute;left:108.00px;top:402.92px" class="cls_007"><span class="cls_007">Next, we need to update our </span><span class="cls_009">GameScreen</span><span class="cls_007"> class to reference the </span><span class="cls_009">TextureAtlas</span><span class="cls_007"> class,</span></div>
<div style="position:absolute;left:108.00px;top:415.52px" class="cls_007"><span class="cls_007">and then assign the regions.</span></div>
<div style="position:absolute;left:108.00px;top:436.76px" class="cls_007"><span class="cls_007">First, we need to switch from using the texture classes to the </span><span class="cls_009">TextureRegion</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:147.60px;top:457.70px" class="cls_021"><span class="cls_021">private TextureRegion background;</span></div>
<div style="position:absolute;left:147.60px;top:469.94px" class="cls_021"><span class="cls_021">private TextureRegion flowerBottom;</span></div>
<div style="position:absolute;left:147.60px;top:482.18px" class="cls_021"><span class="cls_021">private TextureRegion flowerTop;</span></div>
<div style="position:absolute;left:147.60px;top:494.42px" class="cls_021"><span class="cls_021">private TextureRegion flappeeTexture;</span></div>
<div style="position:absolute;left:108.00px;top:514.16px" class="cls_007"><span class="cls_007">Then, we update it to reference the </span><span class="cls_009">TextureAtlas</span><span class="cls_007"> class, in our </span><span class="cls_009">show()</span><span class="cls_007"> method:</span></div>
<div style="position:absolute;left:147.60px;top:535.10px" class="cls_021"><span class="cls_021">TextureAtlas textureAtlas = flappeeBeeGame.getAssetManager().</span></div>
<div style="position:absolute;left:147.60px;top:545.90px" class="cls_021"><span class="cls_021">get("flappee_bee_assets.atlas");</span></div>
<div style="position:absolute;left:147.60px;top:558.14px" class="cls_021"><span class="cls_021">background = textureAtlas.findRegion("bg");</span></div>
<div style="position:absolute;left:147.60px;top:570.38px" class="cls_021"><span class="cls_021">flowerBottom = textureAtlas.findRegion("flowerBottom");</span></div>
<div style="position:absolute;left:147.60px;top:582.62px" class="cls_021"><span class="cls_021">flowerTop = textureAtlas.findRegion("flowerTop");</span></div>
<div style="position:absolute;left:147.60px;top:594.86px" class="cls_021"><span class="cls_021">flappeeTexture = textureAtlas.findRegion("bee");</span></div>
<div style="position:absolute;left:108.00px;top:614.60px" class="cls_007"><span class="cls_007">As you can see in the preceding code, we pull out the texture atlas from the asset</span></div>
<div style="position:absolute;left:108.00px;top:627.20px" class="cls_007"><span class="cls_007">manager and locate the regions by their name. In this case, it is the filename minus</span></div>
<div style="position:absolute;left:108.00px;top:639.80px" class="cls_007"><span class="cls_007">the file extension.</span></div>
<div style="position:absolute;left:293.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 119 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:107468px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background137.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Making Your Bird More Flightworthy</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Finally, you will need to update the </span><span class="cls_009">flappee</span><span class="cls_007"> and </span><span class="cls_009">flower</span><span class="cls_007"> classes to use</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_009"><span class="cls_009">TextureRegion</span><span class="cls_007">, not texture.</span></div>
<div style="position:absolute;left:108.00px;top:148.34px" class="cls_007"><span class="cls_007">Once this is complete, launch the game and you will hopefully see that the game is</span></div>
<div style="position:absolute;left:108.00px;top:160.94px" class="cls_007"><span class="cls_007">working the same as earlier, but the number of draw calls being traced out should</span></div>
<div style="position:absolute;left:108.00px;top:173.54px" class="cls_007"><span class="cls_007">have reduced down to two! It may not seem like it, but we have just massively</span></div>
<div style="position:absolute;left:108.00px;top:186.14px" class="cls_007"><span class="cls_007">reduced the amount of work the game has to do to render images to the screen. As</span></div>
<div style="position:absolute;left:108.00px;top:198.74px" class="cls_007"><span class="cls_007">we discussed at the beginning, you won't really notice the difference with Flappee</span></div>
<div style="position:absolute;left:108.00px;top:211.34px" class="cls_007"><span class="cls_007">Bee, but when you have a game with hundreds of textures, texture atlases really</span></div>
<div style="position:absolute;left:108.00px;top:223.94px" class="cls_007"><span class="cls_007">become your friends!</span></div>
<div style="position:absolute;left:108.00px;top:256.43px" class="cls_019"><span class="cls_019">I need a Hiero!</span></div>
<div style="position:absolute;left:108.00px;top:281.41px" class="cls_007"><span class="cls_007">In the final topic of this chapter, we will address fonts and their usage. So far in our</span></div>
<div style="position:absolute;left:108.00px;top:294.01px" class="cls_007"><span class="cls_007">game, we have used the default font in LibGDX, which is Arial size 15. While this is</span></div>
<div style="position:absolute;left:108.00px;top:306.61px" class="cls_007"><span class="cls_007">good for getting started, it isn't something that you would necessarily want in your</span></div>
<div style="position:absolute;left:108.00px;top:319.21px" class="cls_007"><span class="cls_007">final game. As you can see so far, one of the limitations is that it is too small!</span></div>
<div style="position:absolute;left:108.00px;top:340.46px" class="cls_007"><span class="cls_007">So what can we do? Well, we can use our own fonts of course.</span></div>
<div style="position:absolute;left:108.00px;top:361.70px" class="cls_007"><span class="cls_007">Let's start off by picking your favorite font; I found a font from a free site. There are</span></div>
<div style="position:absolute;left:108.00px;top:374.30px" class="cls_007"><span class="cls_007">plenty around, just do an Internet search and find a font you wish to use.</span></div>
<div style="position:absolute;left:108.00px;top:395.54px" class="cls_007"><span class="cls_007">What you might find is that the font is in what's called a True Type font and this is</span></div>
<div style="position:absolute;left:108.00px;top:408.13px" class="cls_007"><span class="cls_007">usually denoted by the filename having the extension </span><span class="cls_009">.ttf</span><span class="cls_007">—.LibGDX does provide</span></div>
<div style="position:absolute;left:108.00px;top:420.73px" class="cls_007"><span class="cls_007">extensions to the library that will allow us to load this. However, for this exercise,</span></div>
<div style="position:absolute;left:108.00px;top:433.33px" class="cls_007"><span class="cls_007">I would like to introduce you to another tool in the LibGDX armory that I have</span></div>
<div style="position:absolute;left:108.00px;top:445.93px" class="cls_007"><span class="cls_007">used a lot.</span></div>
<div style="position:absolute;left:108.00px;top:467.18px" class="cls_007"><span class="cls_007">That tool is Hiero.</span></div>
<div style="position:absolute;left:108.00px;top:497.11px" class="cls_025"><span class="cls_025">What is Hiero?</span></div>
<div style="position:absolute;left:108.00px;top:520.09px" class="cls_023"><span class="cls_023">Hiero</span><span class="cls_007"> is a bitmap font packing tool. It saves in the Angel Code font format, which</span></div>
<div style="position:absolute;left:108.00px;top:532.69px" class="cls_007"><span class="cls_007">can be used by </span><span class="cls_009">BitmapFont</span><span class="cls_007"> in LibGDX applications:</span></div>
<div style="position:absolute;left:108.00px;top:554.93px" class="cls_009"><span class="cls_009"> </span><A HREF="https://github.com/libgdx/libgdx/wiki/Hiero">https://github.com/libgdx/libgdx/wiki/Hiero</A> </div>
<div style="position:absolute;left:108.00px;top:575.17px" class="cls_007"><span class="cls_007">Hiero is a great little tool that rasterizes TTF fonts and allows various effects to be</span></div>
<div style="position:absolute;left:108.00px;top:587.77px" class="cls_007"><span class="cls_007">applied, such as a drop, shadow, or an outline.</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 120 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:108270px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background138.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 5</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Let's dive in and start using it. You will find the Hiero class in the </span><span class="cls_009">gdx-tools</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">module under the </span><span class="cls_009">com.badlogic.gdx.hiero</span><span class="cls_007"> package. You should be able to run the</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_009"><span class="cls_009">main()</span><span class="cls_007"> method of the Hiero class; if it asks for a module, select Desktop. It will then</span></div>
<div style="position:absolute;left:108.00px;top:152.29px" class="cls_007"><span class="cls_007">load and you will be presented with this screen:</span></div>
<div style="position:absolute;left:108.00px;top:489.91px" class="cls_007"><span class="cls_007">It is a fairly straightforward tool to use; you load the font you want, pick the</span></div>
<div style="position:absolute;left:108.00px;top:502.51px" class="cls_007"><span class="cls_007">desired size, specify the characters you wish to use, add an effect or two, and</span></div>
<div style="position:absolute;left:108.00px;top:515.11px" class="cls_007"><span class="cls_007">then save the output.</span></div>
<div style="position:absolute;left:108.00px;top:536.36px" class="cls_007"><span class="cls_007">First, load your font or pick a system font. This should then appear in the </span><span class="cls_023">Rendering</span></div>
<div style="position:absolute;left:108.00px;top:548.96px" class="cls_007"><span class="cls_007">box. We can keep size </span><span class="cls_023">32</span><span class="cls_007"> for now, but we can revisit this if the font output is too</span></div>
<div style="position:absolute;left:108.00px;top:561.56px" class="cls_007"><span class="cls_007">small for our game.</span></div>
<div style="position:absolute;left:108.00px;top:582.80px" class="cls_007"><span class="cls_007">Next, in the </span><span class="cls_023">Sample Text</span><span class="cls_007"> screen, let's update this with the characters—or glyphs—</span></div>
<div style="position:absolute;left:108.00px;top:595.40px" class="cls_007"><span class="cls_007">we plan to use. Since we are going to use this to represent our score, we can update</span></div>
<div style="position:absolute;left:108.00px;top:608.00px" class="cls_007"><span class="cls_007">this to just contain </span><span class="cls_023">1234567890</span><span class="cls_007">.</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 121 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:109072px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background139.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Making Your Bird More Flightworthy</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Now, select </span><span class="cls_023">Glyph Cache</span><span class="cls_007">; some additional options will appear, these control the</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">texture output of Hiero. If you adjust the page width and page height, you will</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">notice that the Rendering window will update. We should aim to select a size so</span></div>
<div style="position:absolute;left:108.00px;top:152.29px" class="cls_007"><span class="cls_007">all the characters fit in the Rendering window, with minimal wasted space. By</span></div>
<div style="position:absolute;left:108.00px;top:164.89px" class="cls_007"><span class="cls_007">doing this we will reduce the final texture size.</span></div>
<div style="position:absolute;left:108.00px;top:186.14px" class="cls_007"><span class="cls_007">Finally, the fun part—we can now add some effects. I am going to add just a simple</span></div>
<div style="position:absolute;left:108.00px;top:198.74px" class="cls_007"><span class="cls_007">outline to my font, but you can go wild and try different combinations and see what</span></div>
<div style="position:absolute;left:108.00px;top:211.34px" class="cls_007"><span class="cls_007">you get. It's OK, I will wait for you.</span></div>
<div style="position:absolute;left:108.00px;top:232.58px" class="cls_007"><span class="cls_007">Done? Excellent.</span></div>
<div style="position:absolute;left:108.00px;top:253.82px" class="cls_007"><span class="cls_007">Now, we just have to export the font. Select </span><span class="cls_023">Save</span><span class="cls_007"> from the file drop-down menu</span></div>
<div style="position:absolute;left:108.00px;top:266.41px" class="cls_007"><span class="cls_007">and save the font file to the </span><span class="cls_009">assets</span><span class="cls_007"> directory of our game (it is in the code module,</span></div>
<div style="position:absolute;left:108.00px;top:279.01px" class="cls_007"><span class="cls_007">remember?), giving the file a name of </span><span class="cls_009">score.fnt</span><span class="cls_007">—without the quotes.</span></div>
<div style="position:absolute;left:108.00px;top:300.26px" class="cls_007"><span class="cls_007">With that done, if you look in the assets directory, you will see that two files have</span></div>
<div style="position:absolute;left:108.00px;top:312.85px" class="cls_007"><span class="cls_007">appeared: </span><span class="cls_009">score.fnt</span><span class="cls_007"> and </span><span class="cls_009">score.png</span><span class="cls_007">. If you open </span><span class="cls_009">score.png</span><span class="cls_007">, you will notice that it is</span></div>
<div style="position:absolute;left:107.99px;top:325.45px" class="cls_007"><span class="cls_007">what we saw in Hiero's rendering box. If you open the </span><span class="cls_009">score.fnt</span><span class="cls_007"> file, you will notice</span></div>
<div style="position:absolute;left:108.00px;top:338.05px" class="cls_007"><span class="cls_007">that it is essentially a mapping of characters to position in the </span><span class="cls_009">score.png</span><span class="cls_007"> image.</span></div>
<div style="position:absolute;left:108.00px;top:359.30px" class="cls_007"><span class="cls_007">Excellent! We should now be ready to go and use our font over the LibGDX</span></div>
<div style="position:absolute;left:108.00px;top:371.89px" class="cls_007"><span class="cls_007">default. A quick way to do this is to update the </span><span class="cls_009">GameScreen</span><span class="cls_007"> class by updating the</span></div>
<div style="position:absolute;left:108.00px;top:384.49px" class="cls_009"><span class="cls_009">BitmapFont</span><span class="cls_007"> creation to pass in the new font, as follows:</span></div>
<div style="position:absolute;left:126.00px;top:405.43px" class="cls_021"><span class="cls_021">bitmapFont = new BitmapFont(Gdx.files.internal("score.fnt"));</span></div>
<div style="position:absolute;left:108.00px;top:425.17px" class="cls_007"><span class="cls_007">If you do what is given, then it will work. However, the quick thinkers among you</span></div>
<div style="position:absolute;left:108.00px;top:437.77px" class="cls_007"><span class="cls_007">will have realized that we just added another texture! Can't we get it from the texture</span></div>
<div style="position:absolute;left:108.00px;top:450.37px" class="cls_007"><span class="cls_007">atlas? Well, yes, you can!</span></div>
<div style="position:absolute;left:108.00px;top:471.62px" class="cls_007"><span class="cls_007">If you run the texture packing process again, you will see that the font image is now</span></div>
<div style="position:absolute;left:108.00px;top:484.22px" class="cls_007"><span class="cls_007">in the texture atlas, which means we can change the code to the following:</span></div>
<div style="position:absolute;left:126.00px;top:505.15px" class="cls_021"><span class="cls_021">bitmapFont = new BitmapFont(new BitmapFont.BitmapFontData(Gdx.files.</span></div>
<div style="position:absolute;left:126.00px;top:515.95px" class="cls_021"><span class="cls_021">internal("score.fnt"), false), textureAtlas.findRegion("score"),</span></div>
<div style="position:absolute;left:126.00px;top:526.75px" class="cls_021"><span class="cls_021">true);</span></div>
<div style="position:absolute;left:108.00px;top:546.49px" class="cls_007"><span class="cls_007">Awesome! However, we can take it even further. Remember the asset manager we</span></div>
<div style="position:absolute;left:108.00px;top:559.09px" class="cls_007"><span class="cls_007">introduced? Remember how it had that brilliant ability to keep track of assets we</span></div>
<div style="position:absolute;left:108.00px;top:571.69px" class="cls_007"><span class="cls_007">have loaded? Well, we can use it for our font!</span></div>
<div style="position:absolute;left:108.00px;top:592.93px" class="cls_007"><span class="cls_007">In our </span><span class="cls_009">LoadingScreen</span><span class="cls_007"> class, we can add the following code to the </span><span class="cls_009">show()</span><span class="cls_007"> method:</span></div>
<div style="position:absolute;left:147.60px;top:613.87px" class="cls_021"><span class="cls_021">public void show() {</span></div>
<div style="position:absolute;left:158.40px;top:626.11px" class="cls_021"><span class="cls_021">// Code omitted for brevity</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 122 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:109874px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background140.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 5</span></div>
<div style="position:absolute;left:169.20px;top:114.01px" class="cls_021"><span class="cls_021">BitmapFontLoader.BitmapFontParameter bitmapFontParameter =</span></div>
<div style="position:absolute;left:169.20px;top:124.81px" class="cls_021"><span class="cls_021">new BitmapFontLoader.BitmapFontParameter();</span></div>
<div style="position:absolute;left:169.20px;top:137.05px" class="cls_021"><span class="cls_021">bitmapFontParameter.atlasName = "flappee_bee_assets.atlas";</span></div>
<div style="position:absolute;left:169.20px;top:149.29px" class="cls_021"><span class="cls_021">flappeeBeeGame.getAssetManager().load("score.fnt",</span></div>
<div style="position:absolute;left:169.20px;top:160.09px" class="cls_021"><span class="cls_021">BitmapFont.class, bitmapFontParameter);</span></div>
<div style="position:absolute;left:147.60px;top:172.33px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:192.06px" class="cls_007"><span class="cls_007">In the preceding code, we created a parameter object that we can use to specify</span></div>
<div style="position:absolute;left:108.00px;top:204.66px" class="cls_007"><span class="cls_007">where in the texture atlas our font is coming from, among other things. We then</span></div>
<div style="position:absolute;left:108.00px;top:217.26px" class="cls_007"><span class="cls_007">tell the asset manager to load our font.</span></div>
<div style="position:absolute;left:108.00px;top:238.50px" class="cls_007"><span class="cls_007">Then, in our </span><span class="cls_009">GameScreen</span><span class="cls_007"> class, we can change our </span><span class="cls_009">BitmapFont</span><span class="cls_007"> creation code to</span></div>
<div style="position:absolute;left:108.00px;top:251.10px" class="cls_007"><span class="cls_007">the following:</span></div>
<div style="position:absolute;left:126.00px;top:272.04px" class="cls_021"><span class="cls_021">bitmapFont = flappeeBeeGame.getAssetManager().get("score.fnt");</span></div>
<div style="position:absolute;left:108.00px;top:291.78px" class="cls_007"><span class="cls_007">Perfect! Our game textures are all in one place and are centrally managed and we</span></div>
<div style="position:absolute;left:108.00px;top:304.38px" class="cls_007"><span class="cls_007">have less complex code to boot!</span></div>
<div style="position:absolute;left:108.00px;top:568.49px" class="cls_007"><span class="cls_007">As you can see from the preceding screenshot, here is my font being rendered!</span></div>
<div style="position:absolute;left:108.00px;top:589.73px" class="cls_007"><span class="cls_007">You may be wondering through all this why we didn't touch the </span><span class="cls_023">Menu</span><span class="cls_007"> screen</span></div>
<div style="position:absolute;left:108.00px;top:602.33px" class="cls_007"><span class="cls_007">at all. Well, here is your chance to take what you have read in this chapter and</span></div>
<div style="position:absolute;left:108.00px;top:614.93px" class="cls_007"><span class="cls_007">apply it yourself!</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 123 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:110676px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background141.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Making Your Bird More Flightworthy</span></div>
<div style="position:absolute;left:108.00px;top:111.92px" class="cls_019"><span class="cls_019">Summary</span></div>
<div style="position:absolute;left:108.00px;top:136.90px" class="cls_007"><span class="cls_007">In this chapter, we took a step back from creating a game so that you could learn</span></div>
<div style="position:absolute;left:108.00px;top:149.50px" class="cls_007"><span class="cls_007">about how LibGDX can help us to make games that are better performing, easier</span></div>
<div style="position:absolute;left:108.00px;top:162.10px" class="cls_007"><span class="cls_007">to maintain, and are neater overall. We looked at asset managing and the tools that</span></div>
<div style="position:absolute;left:108.00px;top:174.70px" class="cls_007"><span class="cls_007">LibGDX has to help us control and manage our assets throughout the game's life</span></div>
<div style="position:absolute;left:108.00px;top:187.30px" class="cls_007"><span class="cls_007">cycle, simplifying the code required to load and dispose of assets. We then looked</span></div>
<div style="position:absolute;left:108.00px;top:199.90px" class="cls_007"><span class="cls_007">at how to reduce our game's demand on the hardware it runs on by reducing our</span></div>
<div style="position:absolute;left:108.00px;top:212.50px" class="cls_007"><span class="cls_007">textures and transforming them into a single texture asset—a texture atlas. We saw</span></div>
<div style="position:absolute;left:108.00px;top:225.10px" class="cls_007"><span class="cls_007">how we can have this as a transparent step in our development so the atlas is always</span></div>
<div style="position:absolute;left:108.00px;top:237.70px" class="cls_007"><span class="cls_007">up to date. Then, finally, we looked at using our own fonts and exporting them with</span></div>
<div style="position:absolute;left:108.00px;top:250.30px" class="cls_007"><span class="cls_007">the Hiero tool and how we can incorporate these into our game using the texture</span></div>
<div style="position:absolute;left:108.00px;top:262.90px" class="cls_007"><span class="cls_007">packer and the asset manager to manage the fonts for us.</span></div>
<div style="position:absolute;left:108.00px;top:284.14px" class="cls_007"><span class="cls_007">Coming up in the next chapter: we will start a new game. The game we will see next</span></div>
<div style="position:absolute;left:108.00px;top:296.74px" class="cls_007"><span class="cls_007">will be similar to that of a certain Italian plumber's first outing back in 1985. We will</span></div>
<div style="position:absolute;left:108.00px;top:309.34px" class="cls_007"><span class="cls_007">go through how to make a platformer, looking at tile maps to populate the screen</span></div>
<div style="position:absolute;left:108.00px;top:321.94px" class="cls_007"><span class="cls_007">and moving a character around with simple physics utilizing a two-stage collision</span></div>
<div style="position:absolute;left:108.00px;top:334.54px" class="cls_007"><span class="cls_007">detection system.</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 124 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:111478px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background142.jpg" width=612 height=792></div>
<div style="position:absolute;left:318.90px;top:218.96px" class="cls_014"><span class="cls_014">Onto the Next</span></div>
<div style="position:absolute;left:285.60px;top:254.96px" class="cls_014"><span class="cls_014">Platform...Game</span></div>
<div style="position:absolute;left:108.00px;top:308.66px" class="cls_007"><span class="cls_007">In this chapter, we are going to look at making our next game! This is going to be</span></div>
<div style="position:absolute;left:108.00px;top:321.26px" class="cls_007"><span class="cls_007">based off a classic game, Super Mario Bros. Yes, that's right! We are going to look</span></div>
<div style="position:absolute;left:108.00px;top:333.86px" class="cls_007"><span class="cls_007">at making a platformer, a genre made famous and popularized by the famous</span></div>
<div style="position:absolute;left:108.00px;top:346.46px" class="cls_007"><span class="cls_007">plumber and the big N. In this chapter, we will look at reusing everything we have</span></div>
<div style="position:absolute;left:108.00px;top:359.06px" class="cls_007"><span class="cls_007">learned to give us a head start, and then we will get introduced to a new tool named</span></div>
<div style="position:absolute;left:108.00px;top:371.66px" class="cls_007"><span class="cls_007">Tiled—a tile map editor to help us build a simple level. We will then take the output</span></div>
<div style="position:absolute;left:108.00px;top:384.26px" class="cls_007"><span class="cls_007">generated from that tool, and import it into our game using the Tile Map API that</span></div>
<div style="position:absolute;left:108.00px;top:396.86px" class="cls_007"><span class="cls_007">LibGDX has. Next, we will add our character and introduce collision detection</span></div>
<div style="position:absolute;left:108.00px;top:409.46px" class="cls_007"><span class="cls_007">between our character and the tile map we have. Finally, we will add a simple</span></div>
<div style="position:absolute;left:108.00px;top:422.06px" class="cls_007"><span class="cls_007">collectable that our character can collect while traversing our new world.</span></div>
<div style="position:absolute;left:108.00px;top:443.30px" class="cls_007"><span class="cls_007">So, get ready to make our next game! We will cover the following topics in</span></div>
<div style="position:absolute;left:108.00px;top:455.90px" class="cls_007"><span class="cls_007">this chapter:</span></div>
<div style="position:absolute;left:126.00px;top:477.14px" class="cls_007"><span class="cls_007">•  Why and what is a platformer?</span></div>
<div style="position:absolute;left:126.00px;top:494.06px" class="cls_007"><span class="cls_007">•  Reusing what we already have</span></div>
<div style="position:absolute;left:126.00px;top:510.98px" class="cls_007"><span class="cls_007">•  Tile maps - introducing tile map editor</span></div>
<div style="position:absolute;left:126.00px;top:527.89px" class="cls_007"><span class="cls_007">•  Introducing Pete</span></div>
<div style="position:absolute;left:126.00px;top:544.81px" class="cls_007"><span class="cls_007">•  Collision detection revisited</span></div>
<div style="position:absolute;left:126.00px;top:561.72px" class="cls_007"><span class="cls_007">•  Adding a collectable</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 125 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:112280px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background143.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Onto the Next Platform...Game</span></div>
<div style="position:absolute;left:108.00px;top:111.92px" class="cls_019"><span class="cls_019">Why and what is a platformer?</span></div>
<div style="position:absolute;left:108.00px;top:136.90px" class="cls_007"><span class="cls_007">Platforming is a classic gaming genre and concept. So, it makes complete sense that</span></div>
<div style="position:absolute;left:108.00px;top:149.50px" class="cls_007"><span class="cls_007">we should look at it. Every gamer will have played one at some point, jumping</span></div>
<div style="position:absolute;left:108.00px;top:162.10px" class="cls_007"><span class="cls_007">through the levels, collecting power ups, and defeating the foe with the aim of</span></div>
<div style="position:absolute;left:108.00px;top:174.70px" class="cls_007"><span class="cls_007">getting to the end.</span></div>
<div style="position:absolute;left:108.00px;top:195.94px" class="cls_007"><span class="cls_007">Before we dive in, I feel we just need to cover what a platformer is, just in case there</span></div>
<div style="position:absolute;left:108.00px;top:208.54px" class="cls_007"><span class="cls_007">are people who are unaware.</span></div>
<div style="position:absolute;left:108.00px;top:229.78px" class="cls_007"><span class="cls_007">A platform game usually involves the player character jumping through a game</span></div>
<div style="position:absolute;left:108.00px;top:242.38px" class="cls_007"><span class="cls_007">level, essentially going platform to platform, dodging obstacles, and avoiding</span></div>
<div style="position:absolute;left:108.00px;top:254.98px" class="cls_007"><span class="cls_007">traps, such as falling off the edge and out of the game. They can range from</span></div>
<div style="position:absolute;left:108.00px;top:267.58px" class="cls_007"><span class="cls_007">simplistic affairs to complex efforts where advanced concepts are involved, such as</span></div>
<div style="position:absolute;left:108.00px;top:280.18px" class="cls_007"><span class="cls_007">racing against a clock, having the player perform double jumps or wall jumps, or</span></div>
<div style="position:absolute;left:108.00px;top:292.78px" class="cls_007"><span class="cls_007">negotiating movable platforms.</span></div>
<div style="position:absolute;left:108.00px;top:314.02px" class="cls_007"><span class="cls_007">Traditionally, a platform game has the player traveling from the left to the right of</span></div>
<div style="position:absolute;left:108.00px;top:326.63px" class="cls_007"><span class="cls_007">the screen in a linear fashion. The screen will follow the player in what is known as</span></div>
<div style="position:absolute;left:108.00px;top:339.23px" class="cls_007"><span class="cls_007">side-scrolling, allowing the level to be larger than the screen itself.</span></div>
<div style="position:absolute;left:108.00px;top:360.47px" class="cls_007"><span class="cls_007">To start with, our game will be self-contained on the screen. We will look at creating</span></div>
<div style="position:absolute;left:108.00px;top:373.07px" class="cls_007"><span class="cls_007">a side-scrolling game in the next chapter.</span></div>
<div style="position:absolute;left:108.00px;top:403.00px" class="cls_025"><span class="cls_025">Introducing Pete the platformer</span></div>
<div style="position:absolute;left:108.00px;top:425.98px" class="cls_007"><span class="cls_007">Our new game is going to star our new character Pete, in what we will call Pete</span></div>
<div style="position:absolute;left:108.00px;top:438.58px" class="cls_007"><span class="cls_007">the Platformer.</span></div>
<div style="position:absolute;left:108.00px;top:527.22px" class="cls_007"><span class="cls_007">Pete will have full movement from the left to right, as well as jumping.</span></div>
<div style="position:absolute;left:108.00px;top:559.72px" class="cls_019"><span class="cls_019">Game reuse</span></div>
<div style="position:absolute;left:108.00px;top:584.70px" class="cls_007"><span class="cls_007">Right before we dive into looking at tile maps and creating a wonderful world in</span></div>
<div style="position:absolute;left:108.00px;top:597.30px" class="cls_007"><span class="cls_007">which Pete will live, we need to set up our project.</span></div>
<div style="position:absolute;left:108.00px;top:618.54px" class="cls_007"><span class="cls_007">Once you have created the project using the LibGDX setup tool—you should be good</span></div>
<div style="position:absolute;left:108.00px;top:631.14px" class="cls_007"><span class="cls_007">at that by now—we will need to create a </span><span class="cls_009">GameScreen</span><span class="cls_007"> class as before, extending the</span></div>
<div style="position:absolute;left:108.00px;top:643.74px" class="cls_009"><span class="cls_009">ScreenAdapter</span><span class="cls_007"> class.</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 126 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:113082px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background144.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 6</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Remember, we will need the following objects in our </span><span class="cls_009">GameScreen</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:126.00px;top:135.74px" class="cls_007"><span class="cls_007">•</span><span class="cls_009">  ShapeRenderer</span></div>
<div style="position:absolute;left:126.00px;top:152.65px" class="cls_007"><span class="cls_007">•</span><span class="cls_009">  Viewport</span></div>
<div style="position:absolute;left:126.00px;top:169.57px" class="cls_007"><span class="cls_007">•</span><span class="cls_009">  Camera</span></div>
<div style="position:absolute;left:126.00px;top:186.49px" class="cls_007"><span class="cls_007">•</span><span class="cls_009">  SpriteBatch</span></div>
<div style="position:absolute;left:108.00px;top:207.73px" class="cls_007"><span class="cls_007">As this is a platformer, we are going to want a view that is more landscape than we</span></div>
<div style="position:absolute;left:108.00px;top:220.33px" class="cls_007"><span class="cls_007">have had before. So, we will have a world size of 640 x 480:</span></div>
<div style="position:absolute;left:126.00px;top:241.27px" class="cls_021"><span class="cls_021">private static final float WORLD_WIDTH = 640;</span></div>
<div style="position:absolute;left:126.00px;top:253.51px" class="cls_021"><span class="cls_021">private static final float WORLD_HEIGHT = 480;</span></div>
<div style="position:absolute;left:108.00px;top:273.25px" class="cls_007"><span class="cls_007">Then, we will keep the core functionality for updating and rendering. So, hopefully,</span></div>
<div style="position:absolute;left:108.00px;top:285.85px" class="cls_007"><span class="cls_007">your </span><span class="cls_009">GameScreen</span><span class="cls_007"> class looks like the following:</span></div>
<div style="position:absolute;left:126.00px;top:306.79px" class="cls_021"><span class="cls_021">public class GameScreen extends ScreenAdapter {</span></div>
<div style="position:absolute;left:136.80px;top:319.03px" class="cls_021"><span class="cls_021">private static final float WORLD_WIDTH = 640;</span></div>
<div style="position:absolute;left:136.80px;top:331.27px" class="cls_021"><span class="cls_021">private static final float WORLD_HEIGHT = 480;</span></div>
<div style="position:absolute;left:136.80px;top:343.51px" class="cls_021"><span class="cls_021">private ShapeRenderer shapeRenderer;</span></div>
<div style="position:absolute;left:136.80px;top:355.75px" class="cls_021"><span class="cls_021">private Viewport viewport;</span></div>
<div style="position:absolute;left:136.80px;top:367.99px" class="cls_021"><span class="cls_021">private Camera camera;</span></div>
<div style="position:absolute;left:136.80px;top:380.23px" class="cls_021"><span class="cls_021">private SpriteBatch batch;</span></div>
<div style="position:absolute;left:136.80px;top:392.47px" class="cls_021"><span class="cls_021">private final PeteGame peteGame;</span></div>
<div style="position:absolute;left:136.80px;top:404.71px" class="cls_021"><span class="cls_021">public GameScreen(PeteGame peteGame) {</span></div>
<div style="position:absolute;left:147.60px;top:416.95px" class="cls_021"><span class="cls_021">this.peteGame = peteGame;</span></div>
<div style="position:absolute;left:136.80px;top:429.19px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:453.67px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:136.80px;top:465.91px" class="cls_021"><span class="cls_021">public void resize(int width, int height) {</span></div>
<div style="position:absolute;left:147.60px;top:478.15px" class="cls_021"><span class="cls_021">viewport.update(width, height);</span></div>
<div style="position:absolute;left:136.80px;top:490.39px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:514.87px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:136.80px;top:527.11px" class="cls_021"><span class="cls_021">public void show() {</span></div>
<div style="position:absolute;left:147.60px;top:539.35px" class="cls_021"><span class="cls_021">camera = new OrthographicCamera();</span></div>
<div style="position:absolute;left:147.60px;top:551.59px" class="cls_021"><span class="cls_021">camera.position.set(WORLD_WIDTH / 2, WORLD_HEIGHT / 2, 0);</span></div>
<div style="position:absolute;left:147.60px;top:563.83px" class="cls_021"><span class="cls_021">camera.update();</span></div>
<div style="position:absolute;left:147.60px;top:576.07px" class="cls_021"><span class="cls_021">viewport = new FitViewport(WORLD_WIDTH, WORLD_HEIGHT, camera);</span></div>
<div style="position:absolute;left:147.60px;top:588.31px" class="cls_021"><span class="cls_021">shapeRenderer = new ShapeRenderer();</span></div>
<div style="position:absolute;left:147.60px;top:600.55px" class="cls_021"><span class="cls_021">batch = new SpriteBatch();</span></div>
<div style="position:absolute;left:136.80px;top:612.79px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:637.27px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 127 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:113884px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background145.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Onto the Next Platform...Game</span></div>
<div style="position:absolute;left:136.80px;top:114.01px" class="cls_021"><span class="cls_021">public void render(float delta) {</span></div>
<div style="position:absolute;left:147.60px;top:126.25px" class="cls_021"><span class="cls_021">update(delta);</span></div>
<div style="position:absolute;left:147.60px;top:138.49px" class="cls_021"><span class="cls_021">clearScreen();</span></div>
<div style="position:absolute;left:147.60px;top:150.73px" class="cls_021"><span class="cls_021">draw();</span></div>
<div style="position:absolute;left:147.60px;top:162.97px" class="cls_021"><span class="cls_021">drawDebug();</span></div>
<div style="position:absolute;left:136.80px;top:175.21px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:197.28px" class="cls_021"><span class="cls_021">private void update(float delta) {</span></div>
<div style="position:absolute;left:136.80px;top:209.52px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:231.60px" class="cls_021"><span class="cls_021">private void clearScreen() {</span></div>
<div style="position:absolute;left:147.60px;top:243.84px" class="cls_021"><span class="cls_021">Gdx.gl.glClearColor(Color.BLACK.r, Color.BLACK.g,</span></div>
<div style="position:absolute;left:147.60px;top:254.64px" class="cls_021"><span class="cls_021">Color.BLACK.b, Color.BLACK.a);</span></div>
<div style="position:absolute;left:147.60px;top:266.88px" class="cls_021"><span class="cls_021">Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);</span></div>
<div style="position:absolute;left:136.80px;top:279.12px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:301.20px" class="cls_021"><span class="cls_021">private void draw() {</span></div>
<div style="position:absolute;left:147.60px;top:313.44px" class="cls_021"><span class="cls_021">batch.setProjectionMatrix(camera.projection);</span></div>
<div style="position:absolute;left:147.60px;top:325.68px" class="cls_021"><span class="cls_021">batch.setTransformMatrix(camera.view);</span></div>
<div style="position:absolute;left:147.60px;top:337.92px" class="cls_021"><span class="cls_021">batch.begin();</span></div>
<div style="position:absolute;left:147.60px;top:350.16px" class="cls_021"><span class="cls_021">batch.end();</span></div>
<div style="position:absolute;left:136.80px;top:362.40px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:384.47px" class="cls_021"><span class="cls_021">private void drawDebug() {</span></div>
<div style="position:absolute;left:147.60px;top:396.71px" class="cls_021"><span class="cls_021">shapeRenderer.setProjectionMatrix(camera.projection);</span></div>
<div style="position:absolute;left:147.60px;top:408.95px" class="cls_021"><span class="cls_021">shapeRenderer.setTransformMatrix(camera.view);</span></div>
<div style="position:absolute;left:147.60px;top:421.19px" class="cls_021"><span class="cls_021">shapeRenderer.begin(ShapeRenderer.ShapeType.Line);</span></div>
<div style="position:absolute;left:147.60px;top:433.43px" class="cls_021"><span class="cls_021">shapeRenderer.end();</span></div>
<div style="position:absolute;left:136.80px;top:445.67px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:457.91px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:477.66px" class="cls_007"><span class="cls_007">Hopefully, the preceding code listing shouldn't now come to you as a surprise.</span></div>
<div style="position:absolute;left:108.00px;top:498.90px" class="cls_007"><span class="cls_007">Next, we will need to have a loading screen in place, along with </span><span class="cls_009">AssetManager</span><span class="cls_007"> that</span></div>
<div style="position:absolute;left:108.00px;top:511.50px" class="cls_007"><span class="cls_007">we now know and love.</span></div>
<div style="position:absolute;left:108.00px;top:532.74px" class="cls_007"><span class="cls_007">Let's update our game class with the addition of </span><span class="cls_009">AssetManager</span><span class="cls_007">:</span></div>
<div style="position:absolute;left:126.00px;top:553.68px" class="cls_021"><span class="cls_021">public class PeteGame extends Game {</span></div>
<div style="position:absolute;left:136.80px;top:565.92px" class="cls_021"><span class="cls_021">private final AssetManager assetManager = new AssetManager();</span></div>
<div style="position:absolute;left:136.80px;top:588.00px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:136.80px;top:600.24px" class="cls_021"><span class="cls_021">public void create() {</span></div>
<div style="position:absolute;left:147.60px;top:612.48px" class="cls_021"><span class="cls_021">setScreen(new LoadingScreen(this));</span></div>
<div style="position:absolute;left:136.80px;top:624.72px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:646.80px" class="cls_021"><span class="cls_021">public AssetManager getAssetManager() {</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 128 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:114686px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background146.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 6</span></div>
<div style="position:absolute;left:147.60px;top:114.01px" class="cls_021"><span class="cls_021">return assetManager;</span></div>
<div style="position:absolute;left:136.80px;top:126.25px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:138.49px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:158.22px" class="cls_007"><span class="cls_007">Hopefully, your IDE at this stage will be complaining that the </span><span class="cls_009">LoadingScreen</span><span class="cls_007"> class</span></div>
<div style="position:absolute;left:108.00px;top:170.82px" class="cls_007"><span class="cls_007">doesn't exist, which is good, as it doesn't! Let's create it.</span></div>
<div style="position:absolute;left:108.00px;top:192.06px" class="cls_007"><span class="cls_007">Our </span><span class="cls_009">LoadingScreen</span><span class="cls_007"> class is going to be very similar to what we had before, except</span></div>
<div style="position:absolute;left:108.00px;top:204.66px" class="cls_007"><span class="cls_007">we will remove the Flappee Bee references. So, go ahead, create and update your</span></div>
<div style="position:absolute;left:108.00px;top:217.26px" class="cls_009"><span class="cls_009">LoadingScreen</span><span class="cls_007"> class.</span></div>
<div style="position:absolute;left:108.00px;top:238.50px" class="cls_007"><span class="cls_007">Done? Excellent. Hopefully, it will look like the following code:</span></div>
<div style="position:absolute;left:126.00px;top:259.44px" class="cls_021"><span class="cls_021">public class LoadingScreen extends ScreenAdapter {</span></div>
<div style="position:absolute;left:136.80px;top:271.68px" class="cls_021"><span class="cls_021">private static final float WORLD_WIDTH = 640;</span></div>
<div style="position:absolute;left:136.80px;top:283.92px" class="cls_021"><span class="cls_021">private static final float WORLD_HEIGHT = 480;</span></div>
<div style="position:absolute;left:136.80px;top:296.16px" class="cls_021"><span class="cls_021">private static final float PROGRESS_BAR_WIDTH = 100;</span></div>
<div style="position:absolute;left:136.80px;top:308.40px" class="cls_021"><span class="cls_021">private static final float PROGRESS_BAR_HEIGHT = 25;</span></div>
<div style="position:absolute;left:136.80px;top:320.64px" class="cls_021"><span class="cls_021">private ShapeRenderer shapeRenderer;</span></div>
<div style="position:absolute;left:136.80px;top:332.88px" class="cls_021"><span class="cls_021">private Viewport viewport;</span></div>
<div style="position:absolute;left:136.80px;top:345.12px" class="cls_021"><span class="cls_021">private OrthographicCamera</span></div>
<div style="position:absolute;left:136.80px;top:357.36px" class="cls_021"><span class="cls_021">camera;</span></div>
<div style="position:absolute;left:136.80px;top:369.60px" class="cls_021"><span class="cls_021">private float progress = 0;</span></div>
<div style="position:absolute;left:136.80px;top:381.84px" class="cls_021"><span class="cls_021">private final PeteGame peteGame;</span></div>
<div style="position:absolute;left:136.80px;top:394.08px" class="cls_021"><span class="cls_021">public LoadingScreen(PeteGame peteGame) {</span></div>
<div style="position:absolute;left:147.60px;top:406.32px" class="cls_021"><span class="cls_021">this.peteGame = peteGame;</span></div>
<div style="position:absolute;left:136.80px;top:418.56px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:443.04px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:136.80px;top:455.28px" class="cls_021"><span class="cls_021">public void resize(int width, int height) {</span></div>
<div style="position:absolute;left:147.60px;top:467.52px" class="cls_021"><span class="cls_021">viewport.update(width, height);</span></div>
<div style="position:absolute;left:136.80px;top:479.76px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:504.24px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:136.80px;top:516.48px" class="cls_021"><span class="cls_021">public void show() {</span></div>
<div style="position:absolute;left:147.60px;top:528.72px" class="cls_021"><span class="cls_021">camera = new OrthographicCamera();</span></div>
<div style="position:absolute;left:147.60px;top:540.96px" class="cls_021"><span class="cls_021">camera.position.set(WORLD_WIDTH / 2, WORLD_HEIGHT / 2, 0);</span></div>
<div style="position:absolute;left:147.60px;top:553.20px" class="cls_021"><span class="cls_021">camera.update();</span></div>
<div style="position:absolute;left:147.60px;top:565.44px" class="cls_021"><span class="cls_021">viewport = new FitViewport(WORLD_WIDTH, WORLD_HEIGHT, camera);</span></div>
<div style="position:absolute;left:147.60px;top:577.68px" class="cls_021"><span class="cls_021">shapeRenderer = new ShapeRenderer();</span></div>
<div style="position:absolute;left:136.80px;top:589.92px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:614.40px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:136.80px;top:626.64px" class="cls_021"><span class="cls_021">public void render(float delta) {</span></div>
<div style="position:absolute;left:147.60px;top:638.88px" class="cls_021"><span class="cls_021">update();</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 129 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:115488px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background147.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Onto the Next Platform...Game</span></div>
<div style="position:absolute;left:147.60px;top:114.01px" class="cls_021"><span class="cls_021">clearScreen();</span></div>
<div style="position:absolute;left:147.60px;top:126.25px" class="cls_021"><span class="cls_021">draw();</span></div>
<div style="position:absolute;left:136.80px;top:138.49px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:162.97px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:136.80px;top:175.21px" class="cls_021"><span class="cls_021">public void dispose() {</span></div>
<div style="position:absolute;left:147.60px;top:187.45px" class="cls_021"><span class="cls_021">shapeRenderer.dispose();</span></div>
<div style="position:absolute;left:136.80px;top:199.69px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:224.17px" class="cls_021"><span class="cls_021">private void update() {</span></div>
<div style="position:absolute;left:147.60px;top:236.41px" class="cls_021"><span class="cls_021">if (peteGame.getAssetManager().update()) {</span></div>
<div style="position:absolute;left:158.40px;top:248.65px" class="cls_021"><span class="cls_021">peteGame.setScreen(new GameScreen(peteGame));</span></div>
<div style="position:absolute;left:147.60px;top:260.89px" class="cls_021"><span class="cls_021">} else {</span></div>
<div style="position:absolute;left:158.40px;top:273.13px" class="cls_021"><span class="cls_021">progress = peteGame.getAssetManager().getProgress();</span></div>
<div style="position:absolute;left:147.60px;top:285.37px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:297.61px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:322.09px" class="cls_021"><span class="cls_021">private void clearScreen() {</span></div>
<div style="position:absolute;left:147.60px;top:334.33px" class="cls_021"><span class="cls_021">Gdx.gl.glClearColor(Color.BLACK.r, Color.BLACK.g,</span></div>
<div style="position:absolute;left:147.60px;top:345.13px" class="cls_021"><span class="cls_021">Color.BLACK.b, Color.BLACK.a);</span></div>
<div style="position:absolute;left:147.60px;top:357.37px" class="cls_021"><span class="cls_021">Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);</span></div>
<div style="position:absolute;left:136.80px;top:369.61px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:394.09px" class="cls_021"><span class="cls_021">private void draw() {</span></div>
<div style="position:absolute;left:147.60px;top:406.33px" class="cls_021"><span class="cls_021">shapeRenderer.setProjectionMatrix(camera.projection);</span></div>
<div style="position:absolute;left:147.60px;top:418.57px" class="cls_021"><span class="cls_021">shapeRenderer.setTransformMatrix(camera.view);</span></div>
<div style="position:absolute;left:147.60px;top:430.81px" class="cls_021"><span class="cls_021">shapeRenderer.begin(ShapeRenderer.ShapeType.Filled);</span></div>
<div style="position:absolute;left:147.60px;top:443.05px" class="cls_021"><span class="cls_021">shapeRenderer.setColor(Color.WHITE);</span></div>
<div style="position:absolute;left:147.60px;top:455.29px" class="cls_021"><span class="cls_021">shapeRenderer.rect(</span></div>
<div style="position:absolute;left:158.40px;top:467.53px" class="cls_021"><span class="cls_021">(WORLD_WIDTH</span></div>
<div style="position:absolute;left:234.00px;top:467.53px" class="cls_021"><span class="cls_021">- PROGRESS_BAR_WIDTH) / 2, WORLD_HEIGHT / 2 -</span></div>
<div style="position:absolute;left:158.40px;top:478.33px" class="cls_021"><span class="cls_021">PROGRESS_BAR_HEIGHT / 2,</span></div>
<div style="position:absolute;left:158.40px;top:490.57px" class="cls_021"><span class="cls_021">progress * PROGRESS_BAR_WIDTH, PROGRESS_BAR_HEIGHT);</span></div>
<div style="position:absolute;left:147.60px;top:502.81px" class="cls_021"><span class="cls_021">shapeRenderer.end();</span></div>
<div style="position:absolute;left:136.80px;top:515.05px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:527.29px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 130 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:116290px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background148.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 6</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">We have a nice little platform (pun intended!) to start building our game. If you run</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">our project, you should get a nice 640x480px black square on your screen.</span></div>
<div style="position:absolute;left:108.00px;top:148.34px" class="cls_007"><span class="cls_007">If so, we are good to go! If not, just revisit the previous chapters and the games we</span></div>
<div style="position:absolute;left:108.00px;top:160.94px" class="cls_007"><span class="cls_007">made, to see if you missed something.</span></div>
<div style="position:absolute;left:108.00px;top:193.43px" class="cls_019"><span class="cls_019">Tile maps - mapping all over the world!</span></div>
<div style="position:absolute;left:108.00px;top:218.41px" class="cls_007"><span class="cls_007">When platformers first started appearing, on the early game consoles, they took a</span></div>
<div style="position:absolute;left:108.00px;top:231.01px" class="cls_007"><span class="cls_007">tile approach to their levels. Levels were split up into cells, and then each cell would</span></div>
<div style="position:absolute;left:108.00px;top:243.61px" class="cls_007"><span class="cls_007">be assigned an ID that would correspond to a tile in perhaps a texture atlas—ooh,</span></div>
<div style="position:absolute;left:108.00px;top:256.21px" class="cls_007"><span class="cls_007">we know about them! This had the great benefit of reducing the memory footprint,</span></div>
<div style="position:absolute;left:108.00px;top:268.81px" class="cls_007"><span class="cls_007">because you could build an entire level from just a handful of tiles, and that is exactly</span></div>
<div style="position:absolute;left:108.00px;top:281.41px" class="cls_007"><span class="cls_007">what we are going to do.</span></div>
<div style="position:absolute;left:108.00px;top:311.35px" class="cls_025"><span class="cls_025">Introducing Tiled</span></div>
<div style="position:absolute;left:108.00px;top:334.33px" class="cls_007"><span class="cls_007">When we build our level out of tiles, we are going to need a tool to help us visualize</span></div>
<div style="position:absolute;left:108.00px;top:346.93px" class="cls_007"><span class="cls_007">the level as we go ahead. You could go and do it all by hand, drawing it on paper,</span></div>
<div style="position:absolute;left:108.00px;top:359.53px" class="cls_007"><span class="cls_007">noting IDs and cells, and then updating a text file somewhere; however, that will be</span></div>
<div style="position:absolute;left:108.00px;top:372.13px" class="cls_007"><span class="cls_007">slow and cumbersome—take it from someone who used to do that!</span></div>
<div style="position:absolute;left:108.00px;top:393.38px" class="cls_007"><span class="cls_007">So what can we use? Well, I have always been fond of a free-to-use tool called Tiled</span></div>
<div style="position:absolute;left:108.00px;top:405.97px" class="cls_007"><span class="cls_007">(for more information, visit </span><A HREF="http://www.mapeditor.org/">http://www.mapeditor.org/</A> </span><span class="cls_007">). It has an amazing</span></div>
<div style="position:absolute;left:108.00px;top:418.57px" class="cls_007"><span class="cls_007">feature set, multiple layers, and stamping collections of tiles to help with larger</span></div>
<div style="position:absolute;left:108.00px;top:431.17px" class="cls_007"><span class="cls_007">levels. We won't be using all these features. The aim here is to get you used to using</span></div>
<div style="position:absolute;left:108.00px;top:443.77px" class="cls_007"><span class="cls_007">a tool like this, and then you can spread your wings and dive deep into what it can</span></div>
<div style="position:absolute;left:108.00px;top:456.37px" class="cls_007"><span class="cls_007">do when it comes to your own game!</span></div>
<div style="position:absolute;left:108.00px;top:477.62px" class="cls_007"><span class="cls_007">Once you have downloaded Tiled, open it up and we will begin!</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 131 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:117092px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background149.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Onto the Next Platform...Game</span></div>
<div style="position:absolute;left:108.00px;top:112.46px" class="cls_025"><span class="cls_025">Creating a new map</span></div>
<div style="position:absolute;left:108.00px;top:135.44px" class="cls_007"><span class="cls_007">Go to the </span><span class="cls_023">File</span><span class="cls_007"> drop-down menu and select </span><span class="cls_023">New</span><span class="cls_007"> as an option. You will then be</span></div>
<div style="position:absolute;left:108.00px;top:148.04px" class="cls_007"><span class="cls_007">presented with a </span><span class="cls_023">New Map</span><span class="cls_007"> dialog, such as follows:</span></div>
<div style="position:absolute;left:108.00px;top:405.37px" class="cls_007"><span class="cls_007">The first section talks about how our map is going to be saved and presented. We</span></div>
<div style="position:absolute;left:108.00px;top:417.97px" class="cls_007"><span class="cls_007">can keep the same settings as shown in the preceding screenshot. We want our</span></div>
<div style="position:absolute;left:108.00px;top:430.57px" class="cls_007"><span class="cls_007">orientation as </span><span class="cls_023">Orthogonal</span><span class="cls_007"> as we are working on a 2D game. The format, while at this</span></div>
<div style="position:absolute;left:108.00px;top:443.17px" class="cls_007"><span class="cls_007">stage, isn't really that important, but having the map saved in a compressed format</span></div>
<div style="position:absolute;left:108.00px;top:455.77px" class="cls_007"><span class="cls_007">is fine. Finally, in this section, we need the render order to be </span><span class="cls_023">Right Down</span><span class="cls_007">, as this is</span></div>
<div style="position:absolute;left:108.00px;top:468.37px" class="cls_007"><span class="cls_007">how LibGDX will handle reading and rendering the map.</span></div>
<div style="position:absolute;left:108.00px;top:489.61px" class="cls_007"><span class="cls_007">The next two sections cover the map properties. Our art work is 16x16px tiles and</span></div>
<div style="position:absolute;left:108.00px;top:502.21px" class="cls_007"><span class="cls_007">our world is 640x480, so we can set it up with the preceding settings.</span></div>
<div style="position:absolute;left:108.00px;top:523.45px" class="cls_007"><span class="cls_007">Finally, save the project. I have called mine </span><span class="cls_009">pete.tmx</span><span class="cls_007"> and I have saved it into our</span></div>
<div style="position:absolute;left:108.00px;top:536.05px" class="cls_007"><span class="cls_007">assets directory in our core project.</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 132 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:117894px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background150.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 6</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Hopefully, your screen should look like mine.</span></div>
<div style="position:absolute;left:108.00px;top:425.45px" class="cls_007"><span class="cls_007">Our next step is to add our tile texture atlas to the tile layer, so that we can start</span></div>
<div style="position:absolute;left:108.00px;top:438.05px" class="cls_007"><span class="cls_007">creating a level.</span></div>
<div style="position:absolute;left:108.00px;top:459.29px" class="cls_007"><span class="cls_007">To do this, we need to go to the </span><span class="cls_023">Map</span><span class="cls_007"> file option and select the </span><span class="cls_023">New Tileset</span><span class="cls_007"> menu</span></div>
<div style="position:absolute;left:108.00px;top:471.89px" class="cls_007"><span class="cls_007">option. From here, we can import our texture atlas that represents our tile set.</span></div>
<div style="position:absolute;left:108.00px;top:493.13px" class="cls_007"><span class="cls_007">Our texture we are using is called </span><span class="cls_009">floor.png</span><span class="cls_007"> and here is how it looks.</span></div>
<div style="position:absolute;left:108.00px;top:569.78px" class="cls_007"><span class="cls_007">Essentially, we have 18 tiles at a size of 16x16 pixels.</span></div>
<div style="position:absolute;left:108.00px;top:591.02px" class="cls_007"><span class="cls_007">If the tilesets windows don't appear after you import the asset, you can enable it</span></div>
<div style="position:absolute;left:108.00px;top:603.62px" class="cls_007"><span class="cls_007">by going to the </span><span class="cls_023">View</span><span class="cls_007"> option, clicking on the </span><span class="cls_023">Views and ToolBars</span><span class="cls_007"> option, and then</span></div>
<div style="position:absolute;left:108.00px;top:616.22px" class="cls_007"><span class="cls_007">selecting </span><span class="cls_023">tilesets</span><span class="cls_007">.</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 133 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:118696px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background151.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Onto the Next Platform...Game</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Finally, we can build our level. If you have a play around with Tiled, you will find it</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">is quite straightforward to create a level. You select the tile you wish to use and then</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">click where on the screen you want it.</span></div>
<div style="position:absolute;left:108.00px;top:160.94px" class="cls_007"><span class="cls_007">In the following screenshot, you can see the level I created. Going forward, I will be</span></div>
<div style="position:absolute;left:108.00px;top:173.54px" class="cls_007"><span class="cls_007">using this in the game.</span></div>
<div style="position:absolute;left:108.00px;top:484.49px" class="cls_007"><span class="cls_007">Just save the tile map and we are ready.</span></div>
<div style="position:absolute;left:108.00px;top:505.73px" class="cls_007"><span class="cls_007">Great! Now that we have our level, we just need to load it into LibGDX!</span></div>
<div style="position:absolute;left:108.00px;top:535.67px" class="cls_025"><span class="cls_025">The LibGDX Tile Map API</span></div>
<div style="position:absolute;left:108.00px;top:558.65px" class="cls_007"><span class="cls_007">Now that we have our lovely TMX file created by Tiled, we need to load it in</span></div>
<div style="position:absolute;left:108.00px;top:571.25px" class="cls_007"><span class="cls_007">LibGDX so that we can render it. We are going to do this using our </span><span class="cls_009">AssetManager</span></div>
<div style="position:absolute;left:108.00px;top:583.85px" class="cls_007"><span class="cls_007">object, as it will do the heavy lifting for us. However, it doesn't support the TMX file</span></div>
<div style="position:absolute;left:108.00px;top:596.45px" class="cls_007"><span class="cls_007">out of the box, so we need to tell it how to load the TMX file.</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 134 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:119498px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background152.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 6</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">To tell the </span><span class="cls_009">AssetManager</span><span class="cls_007"> object how to load the TMX file, we assign a loader to class</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">type. In this case, our class we want to have once loaded is </span><span class="cls_009">TiledMap</span><span class="cls_007"> and the loader</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">is the </span><span class="cls_009">TmxMapLoader</span><span class="cls_007"> class. For those interested, visit the wiki page for Tile Maps in</span></div>
<div style="position:absolute;left:108.00px;top:152.29px" class="cls_007"><span class="cls_007">LibGDX, at </span><A HREF="https://github.com/libgdx/libgdx/wiki/Tile-maps">https://github.com/libgdx/libgdx/wiki/Tile-maps</A> </span><span class="cls_007">.</span></div>
<div style="position:absolute;left:108.00px;top:173.53px" class="cls_007"><span class="cls_007">Adding the loader is straightforward in the </span><span class="cls_009">create()</span><span class="cls_007"> method of our </span><span class="cls_009">PeteGame</span><span class="cls_007"> class.</span></div>
<div style="position:absolute;left:108.00px;top:186.13px" class="cls_007"><span class="cls_007">Update it so it looks like the following code:</span></div>
<div style="position:absolute;left:126.00px;top:207.07px" class="cls_021"><span class="cls_021">public void create() {</span></div>
<div style="position:absolute;left:136.80px;top:219.31px" class="cls_021"><span class="cls_021">assetManager.setLoader(TiledMap.class, new TmxMapLoader(new</span></div>
<div style="position:absolute;left:136.80px;top:230.11px" class="cls_021"><span class="cls_021">InternalFileHandleResolver()));</span></div>
<div style="position:absolute;left:136.80px;top:242.35px" class="cls_021"><span class="cls_021">setScreen(new LoadingScreen(this));</span></div>
<div style="position:absolute;left:126.00px;top:254.59px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:274.33px" class="cls_007"><span class="cls_007">Here we are just instructing the asset manager that if we want to load an object of</span></div>
<div style="position:absolute;left:108.00px;top:286.93px" class="cls_007"><span class="cls_007">type </span><span class="cls_009">TiledMap</span><span class="cls_007">, then use the </span><span class="cls_009">TmxMapLoader</span><span class="cls_007"> class.</span></div>
<div style="position:absolute;left:108.00px;top:308.17px" class="cls_007"><span class="cls_007">Next, we need to update our </span><span class="cls_009">LoadingScreen</span><span class="cls_007"> class to load the tile map. Update the</span></div>
<div style="position:absolute;left:108.00px;top:320.77px" class="cls_009"><span class="cls_009">show()</span><span class="cls_007"> method as follows:</span></div>
<div style="position:absolute;left:126.00px;top:341.71px" class="cls_021"><span class="cls_021">public void show() {</span></div>
<div style="position:absolute;left:136.80px;top:353.95px" class="cls_021"><span class="cls_021">//Code omitted for brevity</span></div>
<div style="position:absolute;left:136.80px;top:366.19px" class="cls_021"><span class="cls_021">peteGame.getAssetManager().load("pete.tmx", TiledMap.class);</span></div>
<div style="position:absolute;left:126.00px;top:378.43px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:398.17px" class="cls_007"><span class="cls_007">The final step to loading our map is to grab it from the asset manager, so that it is</span></div>
<div style="position:absolute;left:108.00px;top:410.77px" class="cls_007"><span class="cls_007">ready to render. To do this, we need to create a reference to the </span><span class="cls_009">TiledMap</span><span class="cls_007"> class in</span></div>
<div style="position:absolute;left:108.00px;top:423.37px" class="cls_007"><span class="cls_007">the </span><span class="cls_009">GameScreen</span><span class="cls_007"> class as follows:</span></div>
<div style="position:absolute;left:126.00px;top:444.31px" class="cls_021"><span class="cls_021">private TiledMap tiledMap;</span></div>
<div style="position:absolute;left:108.00px;top:464.05px" class="cls_007"><span class="cls_007">Then, in our </span><span class="cls_009">show()</span><span class="cls_007"> method, let's call the </span><span class="cls_009">AssetManager</span><span class="cls_007"> object to get our object:</span></div>
<div style="position:absolute;left:126.00px;top:484.99px" class="cls_021"><span class="cls_021">public void show() {</span></div>
<div style="position:absolute;left:136.80px;top:497.23px" class="cls_021"><span class="cls_021">//Code omitted for brevity</span></div>
<div style="position:absolute;left:136.80px;top:509.47px" class="cls_021"><span class="cls_021">tiledMap = peteGame.getAssetManager().get("pete.tmx");</span></div>
<div style="position:absolute;left:126.00px;top:521.71px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:541.45px" class="cls_007"><span class="cls_007">Excellent. If you run the project now, you will still find we will have a blank screen;</span></div>
<div style="position:absolute;left:108.00px;top:554.05px" class="cls_007"><span class="cls_007">this is because we are not rendering the map yet! To do this, we need to use the</span></div>
<div style="position:absolute;left:108.00px;top:566.65px" class="cls_009"><span class="cls_009">OrthogonalTiledMapRenderer</span><span class="cls_007"> class.</span></div>
<div style="position:absolute;left:108.00px;top:587.89px" class="cls_007"><span class="cls_007">So, in our </span><span class="cls_009">GameScreen</span><span class="cls_007"> class, let's add our </span><span class="cls_009">OrthogonalTiledMapRenderer</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:126.00px;top:608.83px" class="cls_021"><span class="cls_021">private OrthogonalTiledMapRenderer orthogonalTiledMapRenderer;</span></div>
<div style="position:absolute;left:126.00px;top:621.07px" class="cls_021"><span class="cls_021">public void show() {</span></div>
<div style="position:absolute;left:136.80px;top:633.31px" class="cls_021"><span class="cls_021">camera = new OrthographicCamera();</span></div>
<div style="position:absolute;left:136.80px;top:645.55px" class="cls_021"><span class="cls_021">viewport = new FitViewport(WORLD_WIDTH, WORLD_HEIGHT, camera);</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 135 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:120300px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background153.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Onto the Next Platform...Game</span></div>
<div style="position:absolute;left:136.80px;top:114.01px" class="cls_021"><span class="cls_021">viewport.apply(true);</span></div>
<div style="position:absolute;left:136.80px;top:126.25px" class="cls_021"><span class="cls_021">shapeRenderer = new ShapeRenderer();</span></div>
<div style="position:absolute;left:136.80px;top:138.49px" class="cls_021"><span class="cls_021">batch = new SpriteBatch();</span></div>
<div style="position:absolute;left:136.80px;top:150.73px" class="cls_021"><span class="cls_021">tiledMap = peteGame.getAssetManager().get("pete.tmx");</span></div>
<div style="position:absolute;left:136.80px;top:162.97px" class="cls_021"><span class="cls_021">orthogonalTiledMapRenderer = new</span></div>
<div style="position:absolute;left:136.80px;top:173.77px" class="cls_021"><span class="cls_021">OrthogonalTiledMapRenderer(tiledMap, batch);</span></div>
<div style="position:absolute;left:136.80px;top:186.01px" class="cls_021"><span class="cls_021">orthogonalTiledMapRenderer.setView(camera);</span></div>
<div style="position:absolute;left:126.00px;top:198.25px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:217.98px" class="cls_007"><span class="cls_007">So in the preceding code, we have added our renderer. We then construct it with</span></div>
<div style="position:absolute;left:108.00px;top:230.58px" class="cls_007"><span class="cls_007">the tile map that we loaded, and we pass in the </span><span class="cls_009">SpriteBatch</span><span class="cls_007"> instance. Finally, we</span></div>
<div style="position:absolute;left:108.00px;top:243.18px" class="cls_007"><span class="cls_007">set up the view by passing in the camera. We have also changed how our camera is</span></div>
<div style="position:absolute;left:108.00px;top:255.78px" class="cls_007"><span class="cls_007">centered, by calling </span><span class="cls_009">apply(true)</span><span class="cls_007"> on our viewport.</span></div>
<div style="position:absolute;left:108.00px;top:277.02px" class="cls_007"><span class="cls_007">Finally, we just call the </span><span class="cls_009">render()</span><span class="cls_007"> method in our </span><span class="cls_009">draw()</span><span class="cls_007"> method as follows:</span></div>
<div style="position:absolute;left:126.00px;top:297.96px" class="cls_021"><span class="cls_021">private void draw() {</span></div>
<div style="position:absolute;left:136.80px;top:310.20px" class="cls_021"><span class="cls_021">batch.setProjectionMatrix(camera.projection);</span></div>
<div style="position:absolute;left:136.80px;top:322.44px" class="cls_021"><span class="cls_021">batch.setTransformMatrix(camera.view);</span></div>
<div style="position:absolute;left:136.80px;top:334.68px" class="cls_021"><span class="cls_021">orthogonalTiledMapRenderer.render();</span></div>
<div style="position:absolute;left:126.00px;top:346.92px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:366.66px" class="cls_007"><span class="cls_007">As you type out the preceding code, you will find that the renderer has a few</span></div>
<div style="position:absolute;left:108.00px;top:379.26px" class="cls_007"><span class="cls_007">different options for rendering the map. By default, we are telling it to render all</span></div>
<div style="position:absolute;left:108.00px;top:391.86px" class="cls_007"><span class="cls_007">the layers that exist in the map, currently one. However, when you start to do more</span></div>
<div style="position:absolute;left:108.00px;top:404.46px" class="cls_007"><span class="cls_007">complex maps, you might have many layers, and you might wish to render only</span></div>
<div style="position:absolute;left:108.00px;top:417.06px" class="cls_007"><span class="cls_007">certain layers or render them in specific order. You may, hopefully, have also noticed</span></div>
<div style="position:absolute;left:108.00px;top:429.66px" class="cls_007"><span class="cls_007">that we don't call </span><span class="cls_009">begin()</span><span class="cls_007"> or </span><span class="cls_009">end()</span><span class="cls_007"> on the </span><span class="cls_009">SpriteBatch</span><span class="cls_007"> object. This is because it is</span></div>
<div style="position:absolute;left:108.00px;top:442.26px" class="cls_007"><span class="cls_007">done for us in the tile map renderer object! Pretty neat hey?</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 136 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:121102px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background154.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 6</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Excellent. If you run the project, you should get the level that you created appearing</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">on the screen.</span></div>
<div style="position:absolute;left:108.00px;top:459.47px" class="cls_019"><span class="cls_019">Introducing Pete</span></div>
<div style="position:absolute;left:108.00px;top:484.45px" class="cls_007"><span class="cls_007">So far we have created a level using Tiled, and we have implemented tile maps in</span></div>
<div style="position:absolute;left:108.00px;top:497.05px" class="cls_007"><span class="cls_007">LibGDX so that we can see that level. The next step is to introduce our characters</span></div>
<div style="position:absolute;left:108.00px;top:509.65px" class="cls_007"><span class="cls_007">into this world and have them interact with the surroundings.</span></div>
<div style="position:absolute;left:108.00px;top:598.29px" class="cls_007"><span class="cls_007">The preceding image shows Pete, our lovely squirrel! He has four different poses,</span></div>
<div style="position:absolute;left:108.00px;top:610.89px" class="cls_007"><span class="cls_007">two for walking and one each for jumping up and down.</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 137 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:121904px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background155.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Onto the Next Platform...Game</span></div>
<div style="position:absolute;left:108.00px;top:112.46px" class="cls_025"><span class="cls_025">Adding our character</span></div>
<div style="position:absolute;left:108.00px;top:135.44px" class="cls_007"><span class="cls_007">Before we add our textures to Pete, let's go through the process of creating our</span></div>
<div style="position:absolute;left:108.00px;top:148.04px" class="cls_007"><span class="cls_007">character in code and have them interact with the world, then we can implement</span></div>
<div style="position:absolute;left:108.00px;top:160.64px" class="cls_007"><span class="cls_007">the animations.</span></div>
<div style="position:absolute;left:108.00px;top:181.88px" class="cls_007"><span class="cls_007">Let's create class for Pete, I have called it </span><span class="cls_009">Pete</span><span class="cls_007"> and in that class we are going create</span></div>
<div style="position:absolute;left:108.00px;top:194.48px" class="cls_007"><span class="cls_007">the core components for controlling Pete, and also add a basic collision rectangle. This</span></div>
<div style="position:absolute;left:108.00px;top:207.08px" class="cls_007"><span class="cls_007">class is also going to be very similar to the </span><span class="cls_009">Flappee</span><span class="cls_007"> class from the previous chapters.</span></div>
<div style="position:absolute;left:108.00px;top:228.32px" class="cls_007"><span class="cls_007">Here is how the </span><span class="cls_009">Pete</span><span class="cls_007"> class should look:</span></div>
<div style="position:absolute;left:126.00px;top:249.26px" class="cls_021"><span class="cls_021">public class Pete {</span></div>
<div style="position:absolute;left:136.80px;top:261.50px" class="cls_021"><span class="cls_021">private static final float MAX_X_SPEED = 2;</span></div>
<div style="position:absolute;left:136.80px;top:273.74px" class="cls_021"><span class="cls_021">private static final float MAX_Y_SPEED = 2;</span></div>
<div style="position:absolute;left:136.80px;top:285.98px" class="cls_021"><span class="cls_021">public static final int WIDTH = 16;</span></div>
<div style="position:absolute;left:136.80px;top:298.22px" class="cls_021"><span class="cls_021">public static final int HEIGHT = 15;</span></div>
<div style="position:absolute;left:136.80px;top:310.46px" class="cls_021"><span class="cls_021">private final Rectangle collisionRectangle = new Rectangle(0, 0,</span></div>
<div style="position:absolute;left:136.80px;top:321.26px" class="cls_021"><span class="cls_021">WIDTH, HEIGHT);</span></div>
<div style="position:absolute;left:136.80px;top:333.50px" class="cls_021"><span class="cls_021">private float x = 0;</span></div>
<div style="position:absolute;left:136.80px;top:345.74px" class="cls_021"><span class="cls_021">private float y = 0;</span></div>
<div style="position:absolute;left:136.80px;top:357.98px" class="cls_021"><span class="cls_021">private float xSpeed = 0;</span></div>
<div style="position:absolute;left:136.80px;top:370.22px" class="cls_021"><span class="cls_021">private float ySpeed = 0;</span></div>
<div style="position:absolute;left:136.80px;top:382.46px" class="cls_021"><span class="cls_021">public void update() {</span></div>
<div style="position:absolute;left:147.60px;top:394.70px" class="cls_021"><span class="cls_021">Input input = Gdx.input;</span></div>
<div style="position:absolute;left:147.60px;top:406.94px" class="cls_021"><span class="cls_021">if (input.isKeyPressed(Input.Keys.RIGHT)) {</span></div>
<div style="position:absolute;left:158.40px;top:419.18px" class="cls_021"><span class="cls_021">xSpeed = MAX_X_SPEED;</span></div>
<div style="position:absolute;left:147.60px;top:431.42px" class="cls_021"><span class="cls_021">} else if (input.isKeyPressed(Input.Keys.LEFT)) {</span></div>
<div style="position:absolute;left:158.40px;top:443.66px" class="cls_021"><span class="cls_021">xSpeed = -MAX_X_SPEED;</span></div>
<div style="position:absolute;left:147.60px;top:455.90px" class="cls_021"><span class="cls_021">} else {</span></div>
<div style="position:absolute;left:158.40px;top:468.14px" class="cls_021"><span class="cls_021">xSpeed = 0;</span></div>
<div style="position:absolute;left:147.60px;top:480.38px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:147.60px;top:492.62px" class="cls_021"><span class="cls_021">x += xSpeed;</span></div>
<div style="position:absolute;left:147.60px;top:504.86px" class="cls_021"><span class="cls_021">y += ySpeed;</span></div>
<div style="position:absolute;left:147.60px;top:517.10px" class="cls_021"><span class="cls_021">updateCollisionRectangle();</span></div>
<div style="position:absolute;left:136.80px;top:529.34px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:541.58px" class="cls_021"><span class="cls_021">public void drawDebug(ShapeRenderer shapeRenderer) {</span></div>
<div style="position:absolute;left:147.60px;top:553.82px" class="cls_021"><span class="cls_021">shapeRenderer.rect(collisionRectangle.x, collisionRectangle.y,</span></div>
<div style="position:absolute;left:147.60px;top:564.62px" class="cls_021"><span class="cls_021">collisionRectangle.width, collisionRectangle.height);</span></div>
<div style="position:absolute;left:136.80px;top:576.86px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:601.34px" class="cls_021"><span class="cls_021">private void updateCollisionRectangle() {</span></div>
<div style="position:absolute;left:147.60px;top:613.58px" class="cls_021"><span class="cls_021">collisionRectangle.setPosition(x, y);</span></div>
<div style="position:absolute;left:136.80px;top:625.82px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:638.06px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 138 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:122706px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background156.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 6</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">In the preceding code, we first start off by setting up some parameters for Pete, such</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">as maximum speed and how big in world units Pete will be, and we will also define a</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_009"><span class="cls_009">Rectangle</span><span class="cls_007"> object that we will use for collision purposes. Finally, we define variables</span></div>
<div style="position:absolute;left:108.00px;top:152.29px" class="cls_007"><span class="cls_007">that hold information about where in the world Pete is, and his current speed.</span></div>
<div style="position:absolute;left:108.00px;top:173.53px" class="cls_007"><span class="cls_007">Next, we define an </span><span class="cls_009">update()</span><span class="cls_007"> method. This will be called on every game loop cycle</span></div>
<div style="position:absolute;left:108.00px;top:186.13px" class="cls_007"><span class="cls_007">we poll for the player input, depending on the input we assigned for the speed at</span></div>
<div style="position:absolute;left:108.00px;top:198.73px" class="cls_007"><span class="cls_007">which Pete should be moving. So, in this case, let's show that code snippet again:</span></div>
<div style="position:absolute;left:126.00px;top:219.67px" class="cls_021"><span class="cls_021">if (input.isKeyPressed(Input.Keys.RIGHT)) {</span></div>
<div style="position:absolute;left:136.80px;top:231.91px" class="cls_021"><span class="cls_021">xSpeed = MAX_X_SPEED;</span></div>
<div style="position:absolute;left:126.00px;top:244.15px" class="cls_021"><span class="cls_021">} else if (input.isKeyPressed(Input.Keys.LEFT)) {</span></div>
<div style="position:absolute;left:136.80px;top:256.39px" class="cls_021"><span class="cls_021">xSpeed = -MAX_X_SPEED;</span></div>
<div style="position:absolute;left:126.00px;top:268.63px" class="cls_021"><span class="cls_021">} else {</span></div>
<div style="position:absolute;left:136.80px;top:280.87px" class="cls_021"><span class="cls_021">xSpeed = 0;</span></div>
<div style="position:absolute;left:126.00px;top:293.11px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:312.85px" class="cls_007"><span class="cls_007">If the player is pressing right, then we will set the speed to be the maximum speed.</span></div>
<div style="position:absolute;left:108.00px;top:325.45px" class="cls_007"><span class="cls_007">This means Pete will move right—remember our 0,0 position is in the bottom left—</span></div>
<div style="position:absolute;left:108.00px;top:338.05px" class="cls_007"><span class="cls_007">then, if left is pressed, we set the speed to be the negative of the maximum speed,</span></div>
<div style="position:absolute;left:108.00px;top:350.65px" class="cls_007"><span class="cls_007">which means that when we apply it to our x and y variables, it will move Pete left.</span></div>
<div style="position:absolute;left:108.00px;top:363.25px" class="cls_007"><span class="cls_007">Finally, if neither is pressed, then we set the speed to 0.</span></div>
<div style="position:absolute;left:108.00px;top:384.50px" class="cls_007"><span class="cls_007">The final part of the update method is to apply our speed to our x and y variables,</span></div>
<div style="position:absolute;left:108.00px;top:397.10px" class="cls_007"><span class="cls_007">and then update our collision rectangle to the new position—similar to how we did</span></div>
<div style="position:absolute;left:108.00px;top:409.70px" class="cls_007"><span class="cls_007">it in our Flappee Bee game.</span></div>
<div style="position:absolute;left:108.00px;top:430.93px" class="cls_007"><span class="cls_007">The final step to introducing Pete into the game is to add the </span><span class="cls_009">Pete</span><span class="cls_007"> class to the</span></div>
<div style="position:absolute;left:108.00px;top:443.53px" class="cls_009"><span class="cls_009">GameScreen</span><span class="cls_007"> class.</span></div>
<div style="position:absolute;left:108.01px;top:464.78px" class="cls_007"><span class="cls_007">First, add a reference:</span></div>
<div style="position:absolute;left:126.00px;top:485.71px" class="cls_021"><span class="cls_021">private Pete pete;</span></div>
<div style="position:absolute;left:108.00px;top:505.45px" class="cls_007"><span class="cls_007">Then, update our </span><span class="cls_009">show()</span><span class="cls_007"> method to instantiate our class.</span></div>
<div style="position:absolute;left:126.00px;top:526.39px" class="cls_021"><span class="cls_021">public void show() {</span></div>
<div style="position:absolute;left:136.80px;top:538.63px" class="cls_021"><span class="cls_021">// Code omitted for brevity</span></div>
<div style="position:absolute;left:136.80px;top:550.87px" class="cls_021"><span class="cls_021">pete = new Pete();</span></div>
<div style="position:absolute;left:126.00px;top:563.11px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 139 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:123508px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background157.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Onto the Next Platform...Game</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Finally, call the </span><span class="cls_009">update()</span><span class="cls_007"> method in the </span><span class="cls_009">GameScreen</span><span class="cls_007"> class' </span><span class="cls_009">update()</span><span class="cls_007"> method, and</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">the </span><span class="cls_009">drawDebug()</span><span class="cls_007"> method in the corresponding </span><span class="cls_009">drawDebug()</span><span class="cls_007"> method:</span></div>
<div style="position:absolute;left:126.00px;top:148.03px" class="cls_021"><span class="cls_021">private void update(float delta) {</span></div>
<div style="position:absolute;left:136.80px;top:160.27px" class="cls_021"><span class="cls_021">pete.update();</span></div>
<div style="position:absolute;left:126.00px;top:172.51px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:196.99px" class="cls_021"><span class="cls_021">private void drawDebug() {</span></div>
<div style="position:absolute;left:136.80px;top:209.23px" class="cls_021"><span class="cls_021">shapeRenderer.setProjectionMatrix(camera.projection);</span></div>
<div style="position:absolute;left:136.80px;top:221.47px" class="cls_021"><span class="cls_021">shapeRenderer.setTransformMatrix(camera.view);</span></div>
<div style="position:absolute;left:136.80px;top:233.71px" class="cls_021"><span class="cls_021">shapeRenderer.begin(ShapeRenderer.ShapeType.Line);</span></div>
<div style="position:absolute;left:136.80px;top:245.95px" class="cls_021"><span class="cls_021">pete.drawDebug(shapeRenderer);</span></div>
<div style="position:absolute;left:136.80px;top:258.19px" class="cls_021"><span class="cls_021">shapeRenderer.end();</span></div>
<div style="position:absolute;left:126.00px;top:270.43px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:290.17px" class="cls_007"><span class="cls_007">Superb! Now if you run the project, you should get a white box appearing in the</span></div>
<div style="position:absolute;left:108.00px;top:302.77px" class="cls_007"><span class="cls_007">bottom-left corner of your screen that you can control with the left and right arrows</span></div>
<div style="position:absolute;left:108.00px;top:315.37px" class="cls_007"><span class="cls_007">keys on your keyboard!</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 140 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:124310px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background158.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 6</span></div>
<div style="position:absolute;left:108.00px;top:112.46px" class="cls_025"><span class="cls_025">Making Pete jump!</span></div>
<div style="position:absolute;left:108.00px;top:135.44px" class="cls_007"><span class="cls_007">You may have noticed a couple of things.</span></div>
<div style="position:absolute;left:126.00px;top:156.69px" class="cls_007"><span class="cls_007">•  Pete is probably over the top of the level you made—we will come to this.</span></div>
<div style="position:absolute;left:126.00px;top:173.60px" class="cls_007"><span class="cls_007">•  Pete can only move left and right, and can disappear off the edge of</span></div>
<div style="position:absolute;left:143.99px;top:186.20px" class="cls_007"><span class="cls_007">your screen.</span></div>
<div style="position:absolute;left:107.99px;top:207.44px" class="cls_007"><span class="cls_007">Before we address the first point, let's address the second point. As we discussed</span></div>
<div style="position:absolute;left:107.99px;top:220.04px" class="cls_007"><span class="cls_007">at the start of this chapter, a platformer involves making the character jump from</span></div>
<div style="position:absolute;left:107.99px;top:232.64px" class="cls_007"><span class="cls_007">platform to platform. Well, Pete can't jump! Let's make Pete jump!</span></div>
<div style="position:absolute;left:107.99px;top:253.88px" class="cls_007"><span class="cls_007">Let's consider what we need to do to achieve a platforming style jumping</span></div>
<div style="position:absolute;left:107.99px;top:266.48px" class="cls_007"><span class="cls_007">mechanism, as, unfortunately, it isn't as simple as it was moving Pete left or right.</span></div>
<div style="position:absolute;left:107.99px;top:279.08px" class="cls_007"><span class="cls_007">There are certain rules we want to obey.</span></div>
<div style="position:absolute;left:125.99px;top:300.33px" class="cls_007"><span class="cls_007">•  We want to jump to a maximum height, no indefinite jumping.</span></div>
<div style="position:absolute;left:125.99px;top:317.24px" class="cls_007"><span class="cls_007">•  We don't want to let the player jump until Pete has landed, otherwise we</span></div>
<div style="position:absolute;left:143.98px;top:329.84px" class="cls_007"><span class="cls_007">inadvertently give them a flying capability.</span></div>
<div style="position:absolute;left:125.99px;top:346.76px" class="cls_007"><span class="cls_007">•  We don't want to block the player moving left or right during the jump.</span></div>
<div style="position:absolute;left:107.98px;top:368.00px" class="cls_007"><span class="cls_007">Hopefully, those rules sound quite reasonable for a platformer. Now, we know what</span></div>
<div style="position:absolute;left:107.98px;top:380.60px" class="cls_007"><span class="cls_007">we would like to achieve, so let's start by stopping Pete from leaving the screen.</span></div>
<div style="position:absolute;left:107.98px;top:401.84px" class="cls_007"><span class="cls_007">First, we need to provide a way for the game to update Pete's position for when it is</span></div>
<div style="position:absolute;left:107.98px;top:414.44px" class="cls_007"><span class="cls_007">decided that he has left the screen. In our </span><span class="cls_009">Pete</span><span class="cls_007"> class, let's add the following methods:</span></div>
<div style="position:absolute;left:126.00px;top:435.38px" class="cls_021"><span class="cls_021">public void setPosition(float x, float y) {</span></div>
<div style="position:absolute;left:136.80px;top:447.62px" class="cls_021"><span class="cls_021">this.x = x;</span></div>
<div style="position:absolute;left:136.80px;top:459.86px" class="cls_021"><span class="cls_021">this.y = y;</span></div>
<div style="position:absolute;left:136.80px;top:472.10px" class="cls_021"><span class="cls_021">updateCollisionRectangle();</span></div>
<div style="position:absolute;left:126.00px;top:484.34px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:508.82px" class="cls_021"><span class="cls_021">public float getX() {</span></div>
<div style="position:absolute;left:136.80px;top:521.06px" class="cls_021"><span class="cls_021">return x;</span></div>
<div style="position:absolute;left:126.00px;top:533.30px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:557.78px" class="cls_021"><span class="cls_021">public float getY() {</span></div>
<div style="position:absolute;left:136.80px;top:570.02px" class="cls_021"><span class="cls_021">return y;</span></div>
<div style="position:absolute;left:126.00px;top:582.26px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:602.00px" class="cls_007"><span class="cls_007">Here we have added the ability to query the x and y position of Pete, while being</span></div>
<div style="position:absolute;left:108.00px;top:614.60px" class="cls_007"><span class="cls_007">able to set the position which then updates the collision rectangle.</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 141 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:125112px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background159.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Onto the Next Platform...Game</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Next, in our </span><span class="cls_009">GameScreen</span><span class="cls_007"> class, we need to interrogate Pete to find out his position</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">and then put him back into view if needed. So, go back to our </span><span class="cls_009">GameScreen</span><span class="cls_007"> class and</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">add the following method:</span></div>
<div style="position:absolute;left:126.00px;top:160.63px" class="cls_021"><span class="cls_021">private void stopPeteLeavingTheScreen() {</span></div>
<div style="position:absolute;left:136.80px;top:172.87px" class="cls_021"><span class="cls_021">if (pete.getY() &lt; 0) {</span></div>
<div style="position:absolute;left:147.60px;top:185.11px" class="cls_021"><span class="cls_021">pete.setPosition(pete.getX(), 0);</span></div>
<div style="position:absolute;left:136.80px;top:197.35px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:209.59px" class="cls_021"><span class="cls_021">if (pete.getX() &lt; 0) {</span></div>
<div style="position:absolute;left:147.60px;top:221.83px" class="cls_021"><span class="cls_021">pete.setPosition(0, pete.getY());</span></div>
<div style="position:absolute;left:136.80px;top:234.07px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:246.31px" class="cls_021"><span class="cls_021">if (pete.getX() + Pete.WIDTH > WORLD_WIDTH) {</span></div>
<div style="position:absolute;left:147.60px;top:258.55px" class="cls_021"><span class="cls_021">pete.setPosition(WORLD_WIDTH - Pete.WIDTH,</span></div>
<div style="position:absolute;left:147.60px;top:269.35px" class="cls_021"><span class="cls_021">pete.getY());</span></div>
<div style="position:absolute;left:136.80px;top:281.59px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:293.83px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:313.57px" class="cls_007"><span class="cls_007">Hopefully, this code is straightforward to read. We are essentially checking if Pete</span></div>
<div style="position:absolute;left:108.00px;top:326.17px" class="cls_007"><span class="cls_007">has left via the bottom of the screen, then the left, and then the right. You might be</span></div>
<div style="position:absolute;left:108.00px;top:338.77px" class="cls_007"><span class="cls_007">wondering why on the final </span><span class="cls_009">if</span><span class="cls_007"> statement we are looking at Pete's width. Well, if</span></div>
<div style="position:absolute;left:108.00px;top:351.37px" class="cls_007"><span class="cls_007">we don't do that, then he will leave the screen before our code to reposition him is</span></div>
<div style="position:absolute;left:108.00px;top:363.97px" class="cls_007"><span class="cls_007">called, as, remember, our coordinates all work off of the bottom-left side.</span></div>
<div style="position:absolute;left:108.00px;top:385.21px" class="cls_007"><span class="cls_007">Finally, add a call to </span><span class="cls_009">pete</span><span class="cls_007"> method in our </span><span class="cls_009">update()</span><span class="cls_007"> method:</span></div>
<div style="position:absolute;left:126.00px;top:406.15px" class="cls_021"><span class="cls_021">private void update(float delta) {</span></div>
<div style="position:absolute;left:136.80px;top:418.39px" class="cls_021"><span class="cls_021">pete.update();</span></div>
<div style="position:absolute;left:136.80px;top:430.63px" class="cls_021"><span class="cls_021">stopPeteLeavingTheScreen();</span></div>
<div style="position:absolute;left:126.00px;top:442.87px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:462.61px" class="cls_007"><span class="cls_007">Brilliant! Now when you run the game, Pete should not be able to leave the screen.</span></div>
<div style="position:absolute;left:108.00px;top:483.86px" class="cls_007"><span class="cls_007">Ok, so now that we have sorted it out, we can start thinking about making Pete</span></div>
<div style="position:absolute;left:108.00px;top:496.46px" class="cls_007"><span class="cls_007">jump. So, to conform to our rules, we need to have two variables that will help</span></div>
<div style="position:absolute;left:108.00px;top:509.06px" class="cls_007"><span class="cls_007">us control Pete's jumping ability:</span></div>
<div style="position:absolute;left:126.00px;top:529.99px" class="cls_021"><span class="cls_021">private boolean blockJump = false;</span></div>
<div style="position:absolute;left:126.00px;top:542.23px" class="cls_021"><span class="cls_021">private float jumpYDistance = 0;</span></div>
<div style="position:absolute;left:108.00px;top:561.97px" class="cls_007"><span class="cls_007">Add the preceding two variables to our </span><span class="cls_009">Pete</span><span class="cls_007"> class. The </span><span class="cls_009">blockJump</span><span class="cls_007"> variable will be</span></div>
<div style="position:absolute;left:108.00px;top:574.57px" class="cls_007"><span class="cls_007">used to signal to not allow any more up movement and </span><span class="cls_009">jumpYDistance</span><span class="cls_007"> will be used</span></div>
<div style="position:absolute;left:108.01px;top:587.17px" class="cls_007"><span class="cls_007">to keep track of how far Pete will have traveled on the y plane while jumping up.</span></div>
<div style="position:absolute;left:108.01px;top:599.77px" class="cls_007"><span class="cls_007">Next, we should define what is the maximum distance (or height) we want Pete to be</span></div>
<div style="position:absolute;left:108.01px;top:612.37px" class="cls_007"><span class="cls_007">able to jump:</span></div>
<div style="position:absolute;left:126.00px;top:633.31px" class="cls_021"><span class="cls_021">private static final float MAX_JUMP_DISTANCE = 3 * HEIGHT;</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 142 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:125914px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background160.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 6</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Add the preceding line to </span><span class="cls_009">Pete</span><span class="cls_007">; here we are using a value of three times the height</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">of Pete. This may or may not fit the game. The beauty of making games is we can</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">always change these values to help decide what feels fun and enjoyable.</span></div>
<div style="position:absolute;left:108.00px;top:160.94px" class="cls_007"><span class="cls_007">Now that we have those in place, we can start adding some logic to triggering the</span></div>
<div style="position:absolute;left:108.00px;top:173.54px" class="cls_007"><span class="cls_007">jump. Since we are using the arrow keys to control Pete, let's use the up arrow to</span></div>
<div style="position:absolute;left:108.00px;top:186.13px" class="cls_007"><span class="cls_007">trigger the jump action. In the </span><span class="cls_009">update()</span><span class="cls_007"> method of our </span><span class="cls_009">Pete</span><span class="cls_007"> class, let's insert the</span></div>
<div style="position:absolute;left:108.00px;top:198.73px" class="cls_007"><span class="cls_007">following code:</span></div>
<div style="position:absolute;left:126.00px;top:219.67px" class="cls_021"><span class="cls_021">if (input.isKeyPressed(Input.Keys.UP) && !blockJump) {</span></div>
<div style="position:absolute;left:136.80px;top:231.91px" class="cls_021"><span class="cls_021">ySpeed = MAX_Y_SPEED;</span></div>
<div style="position:absolute;left:136.80px;top:244.15px" class="cls_021"><span class="cls_021">jumpYDistance += ySpeed;</span></div>
<div style="position:absolute;left:136.80px;top:256.39px" class="cls_021"><span class="cls_021">blockJump = jumpYDistance > MAX_JUMP_DISTANCE;</span></div>
<div style="position:absolute;left:126.00px;top:268.63px" class="cls_021"><span class="cls_021">} else {</span></div>
<div style="position:absolute;left:136.80px;top:280.87px" class="cls_021"><span class="cls_021">ySpeed = -MAX_Y_SPEED;</span></div>
<div style="position:absolute;left:136.80px;top:293.11px" class="cls_021"><span class="cls_021">blockJump = jumpYDistance > 0;</span></div>
<div style="position:absolute;left:126.00px;top:305.35px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:325.09px" class="cls_007"><span class="cls_007">Place it just before the following lines of code:</span></div>
<div style="position:absolute;left:126.00px;top:346.03px" class="cls_021"><span class="cls_021">x += xSpeed;</span></div>
<div style="position:absolute;left:126.00px;top:358.27px" class="cls_021"><span class="cls_021">y += ySpeed;</span></div>
<div style="position:absolute;left:108.00px;top:378.01px" class="cls_007"><span class="cls_007">"What are we telling Pete to do here?" You might be thinking; well, I am going to</span></div>
<div style="position:absolute;left:108.00px;top:390.61px" class="cls_007"><span class="cls_007">tell you. So, if the player presses up and our </span><span class="cls_009">blockJump</span><span class="cls_007"> variable is </span><span class="cls_009">false</span><span class="cls_007">, we will</span></div>
<div style="position:absolute;left:108.00px;top:403.21px" class="cls_007"><span class="cls_007">set the </span><span class="cls_009">ySpeed</span><span class="cls_007"> variable to the maximum value, we will then increment our variable,</span></div>
<div style="position:absolute;left:108.00px;top:415.81px" class="cls_009"><span class="cls_009">jumpYDistance</span><span class="cls_007">, to keep track of how far Pete has moved, and then we will decide</span></div>
<div style="position:absolute;left:108.00px;top:428.41px" class="cls_007"><span class="cls_007">to block the jump action if that distance traveled has gone above our maximum we</span></div>
<div style="position:absolute;left:108.00px;top:441.01px" class="cls_007"><span class="cls_007">declared before.</span></div>
<div style="position:absolute;left:108.00px;top:462.26px" class="cls_007"><span class="cls_007">If the player isn't pressing up, we set the y value to be the negative maximum and we</span></div>
<div style="position:absolute;left:108.00px;top:474.86px" class="cls_007"><span class="cls_007">will block the jump if the distance traveled is above zero. The reason for doing this is</span></div>
<div style="position:absolute;left:108.00px;top:487.46px" class="cls_007"><span class="cls_007">if the player has released the up key before Pete has traveled the full distance of his</span></div>
<div style="position:absolute;left:108.00px;top:500.06px" class="cls_007"><span class="cls_007">jump. This will allow the player to make smaller jumps.</span></div>
<div style="position:absolute;left:108.00px;top:521.30px" class="cls_007"><span class="cls_007">With that added, if you run the project now and press up, Pete will jump. Now, press</span></div>
<div style="position:absolute;left:108.00px;top:533.90px" class="cls_007"><span class="cls_007">up again. Oh, Pete didn't jump. Well, we should have expected that as we haven't</span></div>
<div style="position:absolute;left:108.00px;top:546.50px" class="cls_007"><span class="cls_007">reset our jump blocking variable. That won't make a good game if Pete can only</span></div>
<div style="position:absolute;left:108.00px;top:559.10px" class="cls_007"><span class="cls_007">jump once.</span></div>
<div style="position:absolute;left:108.00px;top:580.34px" class="cls_007"><span class="cls_007">So, what we should do is provide way for the game to tell Pete if he has landed on</span></div>
<div style="position:absolute;left:108.00px;top:592.94px" class="cls_007"><span class="cls_007">something. Now, we haven't implemented our collision detection on our tile map</span></div>
<div style="position:absolute;left:108.00px;top:605.54px" class="cls_007"><span class="cls_007">yet, but we do land before Pete goes off the bottom of the screen.</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 143 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:126716px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background161.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Onto the Next Platform...Game</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Let's add a </span><span class="cls_009">landed()</span><span class="cls_007"> method to our </span><span class="cls_009">Pete</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:126.00px;top:135.43px" class="cls_021"><span class="cls_021">public void landed() {</span></div>
<div style="position:absolute;left:136.80px;top:147.67px" class="cls_021"><span class="cls_021">blockJump = false;</span></div>
<div style="position:absolute;left:136.80px;top:159.91px" class="cls_021"><span class="cls_021">jumpYDistance = 0;</span></div>
<div style="position:absolute;left:136.80px;top:172.15px" class="cls_021"><span class="cls_021">ySpeed = 0;</span></div>
<div style="position:absolute;left:126.00px;top:184.39px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:204.13px" class="cls_007"><span class="cls_007">As you can see in the preceding code, we are just resetting our jump control</span></div>
<div style="position:absolute;left:108.00px;top:216.73px" class="cls_007"><span class="cls_007">parameters. All we have to do now is have this called from our </span><span class="cls_009">GameScreen</span><span class="cls_007"> class.</span></div>
<div style="position:absolute;left:108.00px;top:229.33px" class="cls_007"><span class="cls_007">So, we just need to update our </span><span class="cls_009">stopPeteLeavingTheScreen()</span><span class="cls_007"> method as follows:</span></div>
<div style="position:absolute;left:126.00px;top:250.27px" class="cls_021"><span class="cls_021">private void stopPeteLeavingTheScreen() {</span></div>
<div style="position:absolute;left:136.80px;top:262.51px" class="cls_021"><span class="cls_021">if (pete.getY() &lt; 0) {</span></div>
<div style="position:absolute;left:147.60px;top:274.75px" class="cls_021"><span class="cls_021">pete.setPosition(pete.getX(), 0);</span></div>
<div style="position:absolute;left:147.60px;top:286.99px" class="cls_021"><span class="cls_021">pete.landed();</span></div>
<div style="position:absolute;left:136.80px;top:299.23px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:311.47px" class="cls_021"><span class="cls_021">if (pete.getX() &lt; 0) {</span></div>
<div style="position:absolute;left:147.60px;top:323.71px" class="cls_021"><span class="cls_021">pete.setPosition(0, pete.getY());</span></div>
<div style="position:absolute;left:136.80px;top:335.95px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:348.19px" class="cls_021"><span class="cls_021">if (pete.getX() + Pete.WIDTH > WORLD_WIDTH) {</span></div>
<div style="position:absolute;left:147.60px;top:360.43px" class="cls_021"><span class="cls_021">pete.setPosition(WORLD_WIDTH - Pete.WIDTH, pete.getY());</span></div>
<div style="position:absolute;left:136.80px;top:372.67px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:384.91px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:404.65px" class="cls_007"><span class="cls_007">Here we have just added the call when Pete has been deemed to leave the screen</span></div>
<div style="position:absolute;left:108.00px;top:417.25px" class="cls_007"><span class="cls_007">from the bottom.</span></div>
<div style="position:absolute;left:108.00px;top:438.50px" class="cls_007"><span class="cls_007">If you run the project now, you will find that you make Pete, or the square that</span></div>
<div style="position:absolute;left:108.00px;top:451.10px" class="cls_007"><span class="cls_007">represents Pete, jump and bounce all over the place!</span></div>
<div style="position:absolute;left:108.00px;top:472.34px" class="cls_007"><span class="cls_007">So there is the basics, of getting a jump mechanic going. Obviously, games will take</span></div>
<div style="position:absolute;left:108.00px;top:484.94px" class="cls_007"><span class="cls_007">this far further when refining the controls. For example, you would have acceleration</span></div>
<div style="position:absolute;left:108.00px;top:497.54px" class="cls_007"><span class="cls_007">and deceleration factors to consider, which would make the jumping feel a touch</span></div>
<div style="position:absolute;left:108.00px;top:510.14px" class="cls_007"><span class="cls_007">more realistic, for example, Pete could gradually slow down as he reached the top of</span></div>
<div style="position:absolute;left:108.00px;top:522.74px" class="cls_007"><span class="cls_007">his jump capability. Also, the concept of gravity could be introduced, which would</span></div>
<div style="position:absolute;left:108.00px;top:535.34px" class="cls_007"><span class="cls_007">affect the movement. But for what we are looking to achieve here, this will do!</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 144 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:127518px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background162.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 6</span></div>
<div style="position:absolute;left:108.00px;top:112.46px" class="cls_025"><span class="cls_025">Adding our artwork</span></div>
<div style="position:absolute;left:108.00px;top:135.44px" class="cls_007"><span class="cls_007">With Pete jumping about and moving around, albeit in square form, we can now</span></div>
<div style="position:absolute;left:108.00px;top:148.04px" class="cls_007"><span class="cls_007">look to bring him alive by added the Pete texture.</span></div>
<div style="position:absolute;left:108.00px;top:169.29px" class="cls_007"><span class="cls_007">Our first step is to add the texture to our asset manager; we can do this in the</span></div>
<div style="position:absolute;left:108.00px;top:181.88px" class="cls_009"><span class="cls_009">LoadingScreen</span><span class="cls_007"> class. Let's update the </span><span class="cls_009">show()</span><span class="cls_007"> method with the following line</span></div>
<div style="position:absolute;left:108.00px;top:194.48px" class="cls_007"><span class="cls_007">of code:</span></div>
<div style="position:absolute;left:126.00px;top:215.42px" class="cls_021"><span class="cls_021">peteGame.getAssetManager().load("pete.png", Texture.class);</span></div>
<div style="position:absolute;left:108.00px;top:235.16px" class="cls_007"><span class="cls_007">Next, we need to update our </span><span class="cls_009">Pete</span><span class="cls_007"> class to take this texture and turn it into an</span></div>
<div style="position:absolute;left:108.00px;top:247.76px" class="cls_007"><span class="cls_007">animation and individual </span><span class="cls_009">TextureRegion</span><span class="cls_007"> objects. So, in our </span><span class="cls_009">Pete</span><span class="cls_007"> class, let's add the</span></div>
<div style="position:absolute;left:108.00px;top:260.36px" class="cls_007"><span class="cls_007">following code:</span></div>
<div style="position:absolute;left:126.00px;top:281.30px" class="cls_021"><span class="cls_021">private float animationTimer = 0;</span></div>
<div style="position:absolute;left:126.00px;top:293.54px" class="cls_021"><span class="cls_021">private final Animation walking;</span></div>
<div style="position:absolute;left:126.00px;top:305.78px" class="cls_021"><span class="cls_021">private final TextureRegion standing;</span></div>
<div style="position:absolute;left:126.00px;top:318.02px" class="cls_021"><span class="cls_021">private final TextureRegion jumpUp;</span></div>
<div style="position:absolute;left:126.00px;top:330.26px" class="cls_021"><span class="cls_021">private final TextureRegion jumpDown;</span></div>
<div style="position:absolute;left:126.00px;top:342.50px" class="cls_021"><span class="cls_021">public Pete(Texture texture) {</span></div>
<div style="position:absolute;left:136.80px;top:354.74px" class="cls_021"><span class="cls_021">TextureRegion[] regions = TextureRegion.split(texture, WIDTH,</span></div>
<div style="position:absolute;left:136.80px;top:365.54px" class="cls_021"><span class="cls_021">HEIGHT)[0];</span></div>
<div style="position:absolute;left:136.80px;top:377.78px" class="cls_021"><span class="cls_021">walking = new Animation(0.25F, regions[0], regions[1]);</span></div>
<div style="position:absolute;left:136.80px;top:390.02px" class="cls_021"><span class="cls_021">walking.setPlayMode(Animation.PlayMode.LOOP);</span></div>
<div style="position:absolute;left:136.80px;top:402.26px" class="cls_021"><span class="cls_021">standing = regions[0];</span></div>
<div style="position:absolute;left:136.80px;top:414.50px" class="cls_021"><span class="cls_021">jumpUp = regions[2];</span></div>
<div style="position:absolute;left:136.80px;top:426.74px" class="cls_021"><span class="cls_021">jumpDown = regions[3];</span></div>
<div style="position:absolute;left:126.00px;top:438.98px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:458.72px" class="cls_007"><span class="cls_007">From the preceding code, you can see we have added references to the textures</span></div>
<div style="position:absolute;left:108.00px;top:471.32px" class="cls_007"><span class="cls_007">and to the animation object we are going to set up. Next we have our constructor,</span></div>
<div style="position:absolute;left:108.00px;top:483.92px" class="cls_007"><span class="cls_007">here we are passing in the texture that represents Pete and we split it into the tiles.</span></div>
<div style="position:absolute;left:108.00px;top:496.52px" class="cls_007"><span class="cls_007">We create our animation; this should all feel familiar as we did essentially the same</span></div>
<div style="position:absolute;left:108.00px;top:509.12px" class="cls_007"><span class="cls_007">thing with Flappee Bee in the previous chapter.</span></div>
<div style="position:absolute;left:108.00px;top:530.36px" class="cls_007"><span class="cls_007">Next, we need to update our </span><span class="cls_009">update()</span><span class="cls_007"> method so that we can update our</span></div>
<div style="position:absolute;left:108.00px;top:542.96px" class="cls_007"><span class="cls_007">animation timer:</span></div>
<div style="position:absolute;left:126.00px;top:563.90px" class="cls_021"><span class="cls_021">public void update(float delta) {</span></div>
<div style="position:absolute;left:136.80px;top:576.14px" class="cls_021"><span class="cls_021">animationTimer += delta;</span></div>
<div style="position:absolute;left:136.80px;top:588.38px" class="cls_021"><span class="cls_021">//Code omitted for brevity</span></div>
<div style="position:absolute;left:126.00px;top:600.62px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 145 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:128320px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background163.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Onto the Next Platform...Game</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Finally, we need to add a </span><span class="cls_009">draw()</span><span class="cls_007"> method. Here, we will pass in our </span><span class="cls_009">SpriteBatch</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">object, considering which image of Pete to draw, depending on what he is doing:</span></div>
<div style="position:absolute;left:126.00px;top:148.03px" class="cls_021"><span class="cls_021">public void draw(Batch batch) {</span></div>
<div style="position:absolute;left:136.80px;top:160.27px" class="cls_021"><span class="cls_021">TextureRegion toDraw = standing;</span></div>
<div style="position:absolute;left:136.80px;top:172.51px" class="cls_021"><span class="cls_021">if (xSpeed != 0) {</span></div>
<div style="position:absolute;left:147.60px;top:184.75px" class="cls_021"><span class="cls_021">toDraw = walking.getKeyFrame(animationTimer);</span></div>
<div style="position:absolute;left:136.80px;top:196.99px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:209.23px" class="cls_021"><span class="cls_021">if (ySpeed > 0) {</span></div>
<div style="position:absolute;left:147.60px;top:221.47px" class="cls_021"><span class="cls_021">toDraw = jumpUp;</span></div>
<div style="position:absolute;left:136.80px;top:233.71px" class="cls_021"><span class="cls_021">} else if (ySpeed &lt; 0) {</span></div>
<div style="position:absolute;left:147.60px;top:245.95px" class="cls_021"><span class="cls_021">toDraw = jumpDown;</span></div>
<div style="position:absolute;left:136.80px;top:258.19px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:282.67px" class="cls_021"><span class="cls_021">if (xSpeed &lt; 0) {</span></div>
<div style="position:absolute;left:147.60px;top:294.91px" class="cls_021"><span class="cls_021">if (!toDraw.isFlipX()) toDraw.flip(true,false);</span></div>
<div style="position:absolute;left:136.80px;top:307.15px" class="cls_021"><span class="cls_021">} else if (xSpeed > 0) {</span></div>
<div style="position:absolute;left:147.60px;top:319.39px" class="cls_021"><span class="cls_021">if (toDraw.isFlipX()) toDraw.flip(true,false);</span></div>
<div style="position:absolute;left:136.80px;top:331.63px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:356.11px" class="cls_021"><span class="cls_021">batch.draw(toDraw, x, y);</span></div>
<div style="position:absolute;left:126.00px;top:368.35px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:388.09px" class="cls_007"><span class="cls_007">So, in the preceding code, we start off assuming Pete is standing. Then, depending</span></div>
<div style="position:absolute;left:108.00px;top:400.69px" class="cls_007"><span class="cls_007">on the speed at which he is moving, we assigned either a frame from the walk</span></div>
<div style="position:absolute;left:108.00px;top:413.29px" class="cls_007"><span class="cls_007">animation or the jumping textures. The reason we have the jump textures check last</span></div>
<div style="position:absolute;left:108.00px;top:425.89px" class="cls_007"><span class="cls_007">is that even if there is a non-zero value for </span><span class="cls_009">xSpeed</span><span class="cls_007">, we still want the jump texture.</span></div>
<div style="position:absolute;left:108.00px;top:447.14px" class="cls_007"><span class="cls_007">Finally, in this method, we look to flip the texture if Pete is facing the other way.</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 146 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:129122px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background164.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 6</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">With that added, update your </span><span class="cls_009">GameScreen</span><span class="cls_007"> class to reflect our changes to the </span><span class="cls_009">Pete</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">class. I trust you can do this! Once you have, run the project, and we should get the</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">following output:</span></div>
<div style="position:absolute;left:108.00px;top:465.13px" class="cls_007"><span class="cls_007">As you can see from the preceding screenshot, and hopefully your screen too, Pete is</span></div>
<div style="position:absolute;left:108.00px;top:477.73px" class="cls_007"><span class="cls_007">being fully animated!</span></div>
<div style="position:absolute;left:108.00px;top:498.97px" class="cls_007"><span class="cls_007">Now onto the collision detection.</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 147 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:129924px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background165.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Onto the Next Platform...Game</span></div>
<div style="position:absolute;left:108.00px;top:111.92px" class="cls_019"><span class="cls_019">Collision detection</span></div>
<div style="position:absolute;left:108.00px;top:136.90px" class="cls_007"><span class="cls_007">So here we are. We have Pete wandering around on the screen, with the ability</span></div>
<div style="position:absolute;left:108.00px;top:149.50px" class="cls_007"><span class="cls_007">to jump, and looking pretty snazzy. We need to take the next step and have him</span></div>
<div style="position:absolute;left:108.00px;top:162.10px" class="cls_007"><span class="cls_007">interact with the level we created.</span></div>
<div style="position:absolute;left:108.00px;top:183.34px" class="cls_007"><span class="cls_007">When it comes to collision detection, there is a vast array of different methods,</span></div>
<div style="position:absolute;left:108.00px;top:195.94px" class="cls_007"><span class="cls_007">concepts, and techniques that get used when making platformers. However, for what</span></div>
<div style="position:absolute;left:108.00px;top:208.54px" class="cls_007"><span class="cls_007">we are trying to achieve here, giving you a taster on using LibGDX to make games,</span></div>
<div style="position:absolute;left:108.00px;top:221.14px" class="cls_007"><span class="cls_007">we can take a simplistic approach.</span></div>
<div style="position:absolute;left:108.00px;top:242.38px" class="cls_007"><span class="cls_007">The approach we are going to take is a two-phase detection. Firstly, we find out what</span></div>
<div style="position:absolute;left:108.00px;top:254.98px" class="cls_007"><span class="cls_007">cells Pete is currently covering, and then we work out if these cells contain the solid</span></div>
<div style="position:absolute;left:108.00px;top:267.58px" class="cls_007"><span class="cls_007">ground tiles. Then, we will resolve the collision by moving Pete out of the cells area.</span></div>
<div style="position:absolute;left:108.00px;top:288.83px" class="cls_007"><span class="cls_007">So, to start with, we need to work out which cells Pete currently covers. We can do</span></div>
<div style="position:absolute;left:108.00px;top:301.42px" class="cls_007"><span class="cls_007">this by, firstly, using Pete's position and size, and then converting that to cells. We</span></div>
<div style="position:absolute;left:108.00px;top:314.02px" class="cls_007"><span class="cls_007">know that our level is 640x480 units big and our cells are 16x16 and, therefore, know</span></div>
<div style="position:absolute;left:108.00px;top:326.63px" class="cls_007"><span class="cls_007">that our grid is 40x30 cells. Given that we know Pete is of size 16x16 as well, we</span></div>
<div style="position:absolute;left:108.00px;top:339.23px" class="cls_007"><span class="cls_007">know, therefore, that the maximum amount of cells he could cover is four, with the</span></div>
<div style="position:absolute;left:108.00px;top:351.83px" class="cls_007"><span class="cls_007">minimum being one.</span></div>
<div style="position:absolute;left:108.00px;top:373.07px" class="cls_007"><span class="cls_007">So let's start coding! First, we should define a class that will contain the information</span></div>
<div style="position:absolute;left:108.00px;top:385.67px" class="cls_007"><span class="cls_007">about the cell that we need. This will know the cell and the x and y cell coordinates</span></div>
<div style="position:absolute;left:108.00px;top:398.26px" class="cls_007"><span class="cls_007">that we will require. I created an inner class in </span><span class="cls_009">GameScreen</span><span class="cls_007"> called </span><span class="cls_009">CollisionCell</span><span class="cls_007">.</span></div>
<div style="position:absolute;left:108.00px;top:410.86px" class="cls_007"><span class="cls_007">The following is the code:</span></div>
<div style="position:absolute;left:126.00px;top:431.80px" class="cls_021"><span class="cls_021">private class CollisionCell {</span></div>
<div style="position:absolute;left:136.80px;top:444.04px" class="cls_021"><span class="cls_021">private final TiledMapTileLayer.Cell cell;</span></div>
<div style="position:absolute;left:136.80px;top:456.28px" class="cls_021"><span class="cls_021">private final int cellX;</span></div>
<div style="position:absolute;left:136.80px;top:468.52px" class="cls_021"><span class="cls_021">private final int cellY;</span></div>
<div style="position:absolute;left:136.80px;top:493.00px" class="cls_021"><span class="cls_021">public CollisionCell(TiledMapTileLayer.Cell cell, int cellX, int</span></div>
<div style="position:absolute;left:136.80px;top:503.80px" class="cls_021"><span class="cls_021">cellY) {</span></div>
<div style="position:absolute;left:147.60px;top:516.04px" class="cls_021"><span class="cls_021">this.cell = cell;</span></div>
<div style="position:absolute;left:147.60px;top:528.28px" class="cls_021"><span class="cls_021">this.cellX = cellX;</span></div>
<div style="position:absolute;left:147.60px;top:540.52px" class="cls_021"><span class="cls_021">this.cellY = cellY;</span></div>
<div style="position:absolute;left:136.80px;top:552.76px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:577.24px" class="cls_021"><span class="cls_021">public boolean isEmpty() {</span></div>
<div style="position:absolute;left:147.60px;top:589.48px" class="cls_021"><span class="cls_021">return cell == null;</span></div>
<div style="position:absolute;left:136.80px;top:601.72px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:613.96px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 148 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:130726px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background166.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 6</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">As you can see in the preceding code, it simply holds information. The only addition</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">is that we add an </span><span class="cls_009">isEmpty()</span><span class="cls_007"> method, as if the cell is null, and it is a blank cell.</span></div>
<div style="position:absolute;left:108.00px;top:148.33px" class="cls_007"><span class="cls_007">In our </span><span class="cls_009">GameScreen</span><span class="cls_007"> class, let's now create a method called</span></div>
<div style="position:absolute;left:108.00px;top:160.93px" class="cls_009"><span class="cls_009">whichCellsDoesPeteCover()</span><span class="cls_007">. This is essentially going to figure out which cells</span></div>
<div style="position:absolute;left:108.00px;top:173.53px" class="cls_007"><span class="cls_007">Pete covers. In this method, we will look at Pete's x and y position in the level, and</span></div>
<div style="position:absolute;left:108.00px;top:186.13px" class="cls_007"><span class="cls_007">then query the tile map for the cells that he covers. The following code shows how</span></div>
<div style="position:absolute;left:108.00px;top:198.73px" class="cls_007"><span class="cls_007">this is achieved:</span></div>
<div style="position:absolute;left:126.00px;top:219.67px" class="cls_021"><span class="cls_021">private Array&lt;CollisionCell> whichCellsDoesPeteCover() {</span></div>
<div style="position:absolute;left:136.80px;top:231.91px" class="cls_021"><span class="cls_021">float x = pete.getX();</span></div>
<div style="position:absolute;left:136.80px;top:244.15px" class="cls_021"><span class="cls_021">float y = pete.getY();</span></div>
<div style="position:absolute;left:136.80px;top:256.39px" class="cls_021"><span class="cls_021">Array&lt;CollisionCell> cellsCovered = new Array&lt;CollisionCell>();</span></div>
<div style="position:absolute;left:136.80px;top:268.63px" class="cls_021"><span class="cls_021">float cellX = x / CELL_SIZE;</span></div>
<div style="position:absolute;left:136.80px;top:280.87px" class="cls_021"><span class="cls_021">float cellY = y / CELL_SIZE;</span></div>
<div style="position:absolute;left:136.80px;top:305.35px" class="cls_021"><span class="cls_021">int bottomLeftCellX = MathUtils.floor(cellX);</span></div>
<div style="position:absolute;left:136.80px;top:317.59px" class="cls_021"><span class="cls_021">int bottomLeftCellY = MathUtils.floor(cellY);</span></div>
<div style="position:absolute;left:136.80px;top:342.07px" class="cls_021"><span class="cls_021">TiledMapTileLayer tiledMapTileLayer = (TiledMapTileLayer)</span></div>
<div style="position:absolute;left:136.80px;top:352.87px" class="cls_021"><span class="cls_021">tiledMap.getLayers().get(0);</span></div>
<div style="position:absolute;left:136.80px;top:377.35px" class="cls_021"><span class="cls_021">cellsCovered.add(new</span></div>
<div style="position:absolute;left:136.80px;top:388.15px" class="cls_021"><span class="cls_021">CollisionCell(tiledMapTileLayer.getCell(bottomLeftCellX,</span></div>
<div style="position:absolute;left:136.80px;top:398.95px" class="cls_021"><span class="cls_021">bottomLeftCellY), bottomLeftCellX, bottomLeftCellY));</span></div>
<div style="position:absolute;left:136.80px;top:423.43px" class="cls_021"><span class="cls_021">if (cellX % 1 != 0 && cellY % 1 != 0) {</span></div>
<div style="position:absolute;left:147.60px;top:435.67px" class="cls_021"><span class="cls_021">int topRightCellX = bottomLeftCellX + 1;</span></div>
<div style="position:absolute;left:147.60px;top:447.91px" class="cls_021"><span class="cls_021">int topRightCellY = bottomLeftCellY + 1;</span></div>
<div style="position:absolute;left:147.60px;top:460.15px" class="cls_021"><span class="cls_021">cellsCovered.add(new</span></div>
<div style="position:absolute;left:147.60px;top:470.95px" class="cls_021"><span class="cls_021">CollisionCell(tiledMapTileLayer.getCell(topRightCellX,</span></div>
<div style="position:absolute;left:147.60px;top:481.75px" class="cls_021"><span class="cls_021">topRightCellY), topRightCellX, topRightCellY));</span></div>
<div style="position:absolute;left:136.80px;top:493.99px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:518.47px" class="cls_021"><span class="cls_021">if (cellX % 1 != 0) {</span></div>
<div style="position:absolute;left:147.60px;top:530.71px" class="cls_021"><span class="cls_021">int bottomRightCellX = bottomLeftCellX + 1;</span></div>
<div style="position:absolute;left:147.60px;top:542.95px" class="cls_021"><span class="cls_021">int bottomRightCellY = bottomLeftCellY;</span></div>
<div style="position:absolute;left:147.60px;top:555.19px" class="cls_021"><span class="cls_021">cellsCovered.add(new</span></div>
<div style="position:absolute;left:147.60px;top:565.99px" class="cls_021"><span class="cls_021">CollisionCell(tiledMapTileLayer.getCell(bottomRightCellX,</span></div>
<div style="position:absolute;left:147.60px;top:576.79px" class="cls_021"><span class="cls_021">bottomRightCellY), bottomRightCellX, bottomRightCellY));</span></div>
<div style="position:absolute;left:136.80px;top:589.03px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:613.51px" class="cls_021"><span class="cls_021">if (cellY % 1 != 0) {</span></div>
<div style="position:absolute;left:147.60px;top:625.75px" class="cls_021"><span class="cls_021">int topLeftCellX = bottomLeftCellX;</span></div>
<div style="position:absolute;left:147.60px;top:637.99px" class="cls_021"><span class="cls_021">int topLeftCellY = bottomLeftCellY + 1;</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 149 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:131528px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background167.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Onto the Next Platform...Game</span></div>
<div style="position:absolute;left:147.60px;top:114.01px" class="cls_021"><span class="cls_021">cellsCovered.add(new</span></div>
<div style="position:absolute;left:147.60px;top:124.81px" class="cls_021"><span class="cls_021">CollisionCell(tiledMapTileLayer.getCell(topLeftCellX,</span></div>
<div style="position:absolute;left:147.60px;top:135.61px" class="cls_021"><span class="cls_021">topLeftCellY), topLeftCellX, topLeftCellY));</span></div>
<div style="position:absolute;left:136.80px;top:147.85px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:160.09px" class="cls_021"><span class="cls_021">return cellsCovered;</span></div>
<div style="position:absolute;left:126.00px;top:172.33px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:192.06px" class="cls_007"><span class="cls_007">In the preceding code, we first get Pete's x and y position; we then divide that by the</span></div>
<div style="position:absolute;left:108.00px;top:204.66px" class="cls_007"><span class="cls_007">size of a cell, which is currently 16 units. This gives us a decimal value of the cell x</span></div>
<div style="position:absolute;left:108.00px;top:217.26px" class="cls_007"><span class="cls_007">and y in the grid.</span></div>
<div style="position:absolute;left:108.00px;top:238.50px" class="cls_007"><span class="cls_007">We gain access to </span><span class="cls_009">TiledMapTiledLayer</span><span class="cls_007"> by cheekily accessing the zero element of</span></div>
<div style="position:absolute;left:108.00px;top:251.10px" class="cls_007"><span class="cls_007">the layers array of the </span><span class="cls_009">TiledMap</span><span class="cls_007">. We can get away with this because we only have</span></div>
<div style="position:absolute;left:108.00px;top:263.70px" class="cls_007"><span class="cls_007">one layer. As your games get more and more complex, there will be multiple layers;</span></div>
<div style="position:absolute;left:108.00px;top:276.30px" class="cls_007"><span class="cls_007">here is where you can start naming the layers and requesting them by name.</span></div>
<div style="position:absolute;left:108.00px;top:297.54px" class="cls_007"><span class="cls_007">Next, we floor those values to give us the bottom-left cell that Pete covers. There is a</span></div>
<div style="position:absolute;left:108.00px;top:310.14px" class="cls_007"><span class="cls_007">chance that this cell is the only cell Pete covers; however, more often than not, there</span></div>
<div style="position:absolute;left:108.00px;top:322.74px" class="cls_007"><span class="cls_007">will be more than one. That is where the next few lines of code come in; we take the</span></div>
<div style="position:absolute;left:108.00px;top:335.34px" class="cls_007"><span class="cls_007">modulus of the </span><span class="cls_009">cellX</span><span class="cls_007"> and </span><span class="cls_009">cellY</span><span class="cls_007"> values to give us the remainder. We can use this</span></div>
<div style="position:absolute;left:108.00px;top:347.94px" class="cls_007"><span class="cls_007">to determine if Pete overlays another cell. So, for example, if the </span><span class="cls_009">cellX</span><span class="cls_007"> value is 3.25,</span></div>
<div style="position:absolute;left:108.00px;top:360.54px" class="cls_007"><span class="cls_007">then the modulus will be 0.25, and, therefore, we know that the next cell along will</span></div>
<div style="position:absolute;left:108.00px;top:373.14px" class="cls_007"><span class="cls_007">contain Pete. We repeat this for the y coordinate, and then if both have a remainder,</span></div>
<div style="position:absolute;left:108.00px;top:385.74px" class="cls_007"><span class="cls_007">we grab the top right most cell.</span></div>
<div style="position:absolute;left:108.00px;top:406.98px" class="cls_007"><span class="cls_007">Finally, we return those cells. This is a good start that we know the cells. Next</span></div>
<div style="position:absolute;left:108.00px;top:419.58px" class="cls_007"><span class="cls_007">we need to look at them and decide how to make Pete react. Luckily, the way</span></div>
<div style="position:absolute;left:108.00px;top:432.18px" class="cls_009"><span class="cls_009">TiledMapLayer</span><span class="cls_007"> works is that if there isn't a tile in the map, then it will be null!</span></div>
<div style="position:absolute;left:108.00px;top:453.42px" class="cls_007"><span class="cls_007">So, our next step is to filter out the array of the null values. Let's add the following</span></div>
<div style="position:absolute;left:108.00px;top:466.02px" class="cls_007"><span class="cls_007">method:</span></div>
<div style="position:absolute;left:126.00px;top:486.96px" class="cls_021"><span class="cls_021">private Array&lt;CollisionCell> filterOutNonTiledCells(Array&lt;CollisionCe</span></div>
<div style="position:absolute;left:126.00px;top:497.76px" class="cls_021"><span class="cls_021">ll> cells) {</span></div>
<div style="position:absolute;left:136.80px;top:510.00px" class="cls_021"><span class="cls_021">for (Iterator&lt;CollisionCell> iter = cells.iterator();</span></div>
<div style="position:absolute;left:136.80px;top:520.80px" class="cls_021"><span class="cls_021">iter.hasNext(); ) {</span></div>
<div style="position:absolute;left:147.60px;top:533.04px" class="cls_021"><span class="cls_021">CollisionCell collisionCell = iter.next();</span></div>
<div style="position:absolute;left:147.60px;top:545.28px" class="cls_021"><span class="cls_021">if (collisionCell.isEmpty()) {</span></div>
<div style="position:absolute;left:158.40px;top:557.52px" class="cls_021"><span class="cls_021">iter.remove();</span></div>
<div style="position:absolute;left:147.60px;top:569.76px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:582.00px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:594.24px" class="cls_021"><span class="cls_021">return cells;</span></div>
<div style="position:absolute;left:126.00px;top:606.48px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 150 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:132330px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background168.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 6</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Here we are simply iterating over the array and ditching the null value. This means</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">that when Pete is in open space, our array will be empty!</span></div>
<div style="position:absolute;left:108.00px;top:148.34px" class="cls_007"><span class="cls_007">Now I think we are ready to handle a collision between Pete and the level!</span></div>
<div style="position:absolute;left:108.00px;top:169.58px" class="cls_007"><span class="cls_007">The first part we will look at is handling Pete landing on the level. If I were you, I</span></div>
<div style="position:absolute;left:108.00px;top:182.18px" class="cls_007"><span class="cls_007">would add a line of code to set a starting position for Pete, so that he is out in the</span></div>
<div style="position:absolute;left:108.00px;top:194.77px" class="cls_007"><span class="cls_007">open and can fall on to the level. Use the </span><span class="cls_009">setPosition()</span><span class="cls_007"> method to achieve this; it</span></div>
<div style="position:absolute;left:108.00px;top:207.37px" class="cls_007"><span class="cls_007">might take some trial and error, but have a play around. Initially, he should just fall</span></div>
<div style="position:absolute;left:108.00px;top:219.97px" class="cls_007"><span class="cls_007">to the bottom of the screen.</span></div>
<div style="position:absolute;left:108.00px;top:241.21px" class="cls_007"><span class="cls_007">Next, let's start to hook up the code we have written. Create a method in </span><span class="cls_009">GameScreen</span></div>
<div style="position:absolute;left:108.00px;top:253.81px" class="cls_007"><span class="cls_007">called </span><span class="cls_009">handlePeteCollision()</span><span class="cls_007">, and let's populate it with the following code:</span></div>
<div style="position:absolute;left:126.00px;top:274.75px" class="cls_021"><span class="cls_021">private void handlePeteCollision() {</span></div>
<div style="position:absolute;left:136.80px;top:286.99px" class="cls_021"><span class="cls_021">Array&lt;CollisionCell> peteCells = whichCellsDoesPeteCover();</span></div>
<div style="position:absolute;left:136.80px;top:299.23px" class="cls_021"><span class="cls_021">peteCells = filterOutNonTiledCells(peteCells);</span></div>
<div style="position:absolute;left:136.80px;top:311.47px" class="cls_021"><span class="cls_021">for (CollisionCell cell : peteCells) {</span></div>
<div style="position:absolute;left:147.60px;top:323.71px" class="cls_021"><span class="cls_021">float cellLevelX = cell.cellX * CELL_SIZE;</span></div>
<div style="position:absolute;left:147.60px;top:335.95px" class="cls_021"><span class="cls_021">float cellLevelY = cell.cellY * CELL_SIZE;</span></div>
<div style="position:absolute;left:147.60px;top:348.19px" class="cls_021"><span class="cls_021">Rectangle intersection = new Rectangle();</span></div>
<div style="position:absolute;left:147.60px;top:360.43px" class="cls_021"><span class="cls_021">Intersector.intersectRectangles(pete.getCollisionRectangle(),</span></div>
<div style="position:absolute;left:147.60px;top:371.23px" class="cls_021"><span class="cls_021">new Rectangle(cellLevelX, cellLevelY, CELL_SIZE, CELL_SIZE),</span></div>
<div style="position:absolute;left:147.60px;top:382.03px" class="cls_021"><span class="cls_021">intersection);</span></div>
<div style="position:absolute;left:147.60px;top:394.27px" class="cls_021"><span class="cls_021">if (intersection.getHeight() &lt; intersection.getWidth()) {</span></div>
<div style="position:absolute;left:158.40px;top:406.51px" class="cls_021"><span class="cls_021">pete.setPosition(pete.getX(), intersection.getY() +</span></div>
<div style="position:absolute;left:158.40px;top:417.31px" class="cls_021"><span class="cls_021">intersection.getHeight());</span></div>
<div style="position:absolute;left:158.40px;top:429.55px" class="cls_021"><span class="cls_021">pete.landed();</span></div>
<div style="position:absolute;left:147.60px;top:441.79px" class="cls_021"><span class="cls_021">} else if (intersection.getWidth() &lt; intersection.getHeight())</span></div>
<div style="position:absolute;left:147.60px;top:452.59px" class="cls_021"><span class="cls_021">{</span></div>
<div style="position:absolute;left:158.40px;top:464.83px" class="cls_021"><span class="cls_021">if (intersection.getX() == pete.getX()) {</span></div>
<div style="position:absolute;left:169.20px;top:477.07px" class="cls_021"><span class="cls_021">pete.setPosition(intersection.getX() +</span></div>
<div style="position:absolute;left:169.20px;top:487.87px" class="cls_021"><span class="cls_021">intersection.getWidth(), pete.getY());</span></div>
<div style="position:absolute;left:158.40px;top:500.11px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:158.40px;top:512.35px" class="cls_021"><span class="cls_021">if (intersection.getX() > pete.getX()) {</span></div>
<div style="position:absolute;left:169.20px;top:524.59px" class="cls_021"><span class="cls_021">pete.setPosition(intersection.getX() - Pete.WIDTH,</span></div>
<div style="position:absolute;left:169.20px;top:535.39px" class="cls_021"><span class="cls_021">pete.getY());</span></div>
<div style="position:absolute;left:158.40px;top:547.63px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:147.60px;top:559.87px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:572.11px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:584.35px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 151 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:133132px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background169.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Onto the Next Platform...Game</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Here we call the </span><span class="cls_009">whichCellsDoesPeteCover()</span><span class="cls_007"> method this provides us with cells</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">Pete overlaps, we then filter these, so only cells which are part of the level are left.</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">We are then iterating over these cells, and here we are using a new-to-us class</span></div>
<div style="position:absolute;left:108.00px;top:152.29px" class="cls_009"><span class="cls_009">Intersector</span><span class="cls_007">; this class is amazing, it contains an insane amount of helper methods</span></div>
<div style="position:absolute;left:108.00px;top:164.89px" class="cls_007"><span class="cls_007">for working out if shapes overlap, and if they do, what the area is that they over lap</span></div>
<div style="position:absolute;left:108.00px;top:177.49px" class="cls_007"><span class="cls_007">by. This is really helpful for us as it will do all the heavy work for us.</span></div>
<div style="position:absolute;left:108.00px;top:198.73px" class="cls_007"><span class="cls_007">So how are we using it? Well, we are using the </span><span class="cls_009">intersectRectangles()</span><span class="cls_007"> methods</span></div>
<div style="position:absolute;left:108.00px;top:211.33px" class="cls_007"><span class="cls_007">that takes two rectangles that will be checked for overlapping, and then a third that</span></div>
<div style="position:absolute;left:108.00px;top:223.93px" class="cls_007"><span class="cls_007">is the area of the overlap. Our two rectangles are Pete's collision zone and the cell</span></div>
<div style="position:absolute;left:108.00px;top:236.53px" class="cls_007"><span class="cls_007">that we are currently iterating over, and we then create a third one. Next comes the</span></div>
<div style="position:absolute;left:108.00px;top:249.13px" class="cls_007"><span class="cls_007">interesting part, Once we have the overlap, we look to see which is bigger: the height</span></div>
<div style="position:absolute;left:108.00px;top:261.73px" class="cls_007"><span class="cls_007">or the width of the overlap. This is important because if we don't take that into</span></div>
<div style="position:absolute;left:108.00px;top:274.33px" class="cls_007"><span class="cls_007">consideration, we might end up moving Pete into a position that doesn't make sense</span></div>
<div style="position:absolute;left:108.00px;top:286.93px" class="cls_007"><span class="cls_007">in the game. So, we look at if the height of the overlap is less than the width, and if</span></div>
<div style="position:absolute;left:108.00px;top:299.53px" class="cls_007"><span class="cls_007">that is the case, then that means Pete is closer to the top or bottom of the cell than</span></div>
<div style="position:absolute;left:108.00px;top:312.13px" class="cls_007"><span class="cls_007">the left and right. This means you can move Pete up, the caveat here is that this only</span></div>
<div style="position:absolute;left:108.00px;top:324.73px" class="cls_007"><span class="cls_007">deals with Pete falling onto cells, rather than jumping up into those cells. If it is the</span></div>
<div style="position:absolute;left:108.00px;top:337.33px" class="cls_007"><span class="cls_007">case that the width is less than the height, we then work out if Pete is to the left or the</span></div>
<div style="position:absolute;left:108.00px;top:349.93px" class="cls_007"><span class="cls_007">right of the cell in question, and then move him back accordingly.</span></div>
<div style="position:absolute;left:108.00px;top:371.17px" class="cls_007"><span class="cls_007">Finally, we just need to add a call to the </span><span class="cls_009">handlePeteCollision()</span><span class="cls_007"> method to our</span></div>
<div style="position:absolute;left:108.00px;top:383.77px" class="cls_009"><span class="cls_009">update()</span><span class="cls_007"> method:</span></div>
<div style="position:absolute;left:126.00px;top:404.71px" class="cls_021"><span class="cls_021">private void update(float delta) {</span></div>
<div style="position:absolute;left:136.80px;top:416.95px" class="cls_021"><span class="cls_021">pete.update(delta);</span></div>
<div style="position:absolute;left:136.80px;top:429.19px" class="cls_021"><span class="cls_021">stopPeteLeavingTheScreen();</span></div>
<div style="position:absolute;left:136.80px;top:441.43px" class="cls_021"><span class="cls_021">handlePeteCollision();</span></div>
<div style="position:absolute;left:126.00px;top:453.67px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:473.41px" class="cls_007"><span class="cls_007">Hopefully, now when you run the project, you will have Pete jumping around</span></div>
<div style="position:absolute;left:108.00px;top:486.01px" class="cls_007"><span class="cls_007">your level.</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 152 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:133934px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background170.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 6</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Excellent! We have the beginnings of a platformer; while it won't rival Super</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">Mario at this point, hopefully, it gives you a great starting point for your future</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">platforming games.</span></div>
<div style="position:absolute;left:108.00px;top:472.07px" class="cls_019"><span class="cls_019">Adding a collectable</span></div>
<div style="position:absolute;left:108.00px;top:497.05px" class="cls_007"><span class="cls_007">We almost have a platforming game! Admittedly, it doesn't do much—yet! But hey,</span></div>
<div style="position:absolute;left:108.00px;top:509.65px" class="cls_007"><span class="cls_007">let's change that. One of the main components of a platformer is having something</span></div>
<div style="position:absolute;left:108.00px;top:522.25px" class="cls_007"><span class="cls_007">for the player to collect. Considering Pete is a squirrel, I guess it is only right that he</span></div>
<div style="position:absolute;left:108.00px;top:534.85px" class="cls_007"><span class="cls_007">collects acorns.</span></div>
<div style="position:absolute;left:108.00px;top:556.09px" class="cls_007"><span class="cls_007">To add our collectable to the game, we are going to need to do a couple of things.</span></div>
<div style="position:absolute;left:108.00px;top:568.69px" class="cls_007"><span class="cls_007">Firstly, we need to find a way for us to place the collectables in the game in an</span></div>
<div style="position:absolute;left:108.00px;top:581.29px" class="cls_007"><span class="cls_007">easy-to-do manner , next, have them successfully load that information into LibGDX,</span></div>
<div style="position:absolute;left:108.00px;top:593.89px" class="cls_007"><span class="cls_007">and then, finally, have the interaction between Pete and the acorn.</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 153 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:134736px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background171.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Onto the Next Platform...Game</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Our acorn will look as follows:</span></div>
<div style="position:absolute;left:108.00px;top:191.14px" class="cls_007"><span class="cls_007">So, what can we use to place the acorn(s) in the level? Well, luckily, we have been</span></div>
<div style="position:absolute;left:108.00px;top:203.74px" class="cls_007"><span class="cls_007">using a certain mapping tool in this chapter that we can use to do this. Yup, that's</span></div>
<div style="position:absolute;left:108.00px;top:216.34px" class="cls_007"><span class="cls_007">right! Tiled has the capability to help us.</span></div>
<div style="position:absolute;left:108.00px;top:237.58px" class="cls_007"><span class="cls_007">In Tiled, our first task is to add our acorn image as a tileset so that we can use it.</span></div>
<div style="position:absolute;left:108.00px;top:250.18px" class="cls_007"><span class="cls_007">Simply select </span><span class="cls_023">New Tileset</span><span class="cls_007"> from the </span><span class="cls_023">Map</span><span class="cls_007"> menu, navigate to the acorn image, and</span></div>
<div style="position:absolute;left:108.00px;top:262.78px" class="cls_007"><span class="cls_007">select it. This should now appear in our </span><span class="cls_023">Tilesets</span><span class="cls_007"> pane.</span></div>
<div style="position:absolute;left:108.00px;top:575.19px" class="cls_007"><span class="cls_007">Next, we add a new layer,  but this time we are going to add an object layer. From</span></div>
<div style="position:absolute;left:108.00px;top:587.79px" class="cls_007"><span class="cls_007">the </span><span class="cls_023">Layer</span><span class="cls_007"> drop-down menu, select </span><span class="cls_023">Add Object Layer</span><span class="cls_007">. You will now be given the</span></div>
<div style="position:absolute;left:108.00px;top:600.39px" class="cls_007"><span class="cls_007">option to name it, call it </span><span class="cls_009">Collectables</span><span class="cls_007">.</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 154 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:135538px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background172.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 6</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Make sure the </span><span class="cls_023">Collectables</span><span class="cls_007"> layer is selected, and return to the acorn tileset. Then,</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">select the insert tile button on the toolbar before finally selecting the acorn. Now</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">we can start placing them on the level.</span></div>
<div style="position:absolute;left:108.00px;top:160.94px" class="cls_007"><span class="cls_007">Hopefully, you should end up something like the following screenshot:</span></div>
<div style="position:absolute;left:108.00px;top:473.35px" class="cls_007"><span class="cls_007">With our acorns placed, our next step is to query the layer in LibGDX to access the</span></div>
<div style="position:absolute;left:108.00px;top:485.95px" class="cls_007"><span class="cls_007">location of the acorns.</span></div>
<div style="position:absolute;left:108.00px;top:507.19px" class="cls_007"><span class="cls_007">Our first task here is to create an </span><span class="cls_009">Acorn</span><span class="cls_007"> class, which will contain the texture and</span></div>
<div style="position:absolute;left:108.00px;top:519.79px" class="cls_007"><span class="cls_007">location of the acorn. Create the following class:</span></div>
<div style="position:absolute;left:126.00px;top:540.73px" class="cls_021"><span class="cls_021">public class Acorn {</span></div>
<div style="position:absolute;left:136.80px;top:552.97px" class="cls_021"><span class="cls_021">public static final int WIDTH = 16;</span></div>
<div style="position:absolute;left:136.80px;top:565.21px" class="cls_021"><span class="cls_021">public static final int HEIGHT = 16;</span></div>
<div style="position:absolute;left:136.80px;top:577.45px" class="cls_021"><span class="cls_021">private final Rectangle collision;</span></div>
<div style="position:absolute;left:136.80px;top:589.69px" class="cls_021"><span class="cls_021">private final Texture texture;</span></div>
<div style="position:absolute;left:136.80px;top:601.93px" class="cls_021"><span class="cls_021">private final float x;</span></div>
<div style="position:absolute;left:136.80px;top:614.17px" class="cls_021"><span class="cls_021">private final float y;</span></div>
<div style="position:absolute;left:136.80px;top:626.41px" class="cls_021"><span class="cls_021">public Acorn(Texture texture, float x, float y) {</span></div>
<div style="position:absolute;left:147.60px;top:638.65px" class="cls_021"><span class="cls_021">this.texture = texture;</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 155 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:136340px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background173.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Onto the Next Platform...Game</span></div>
<div style="position:absolute;left:147.60px;top:114.01px" class="cls_021"><span class="cls_021">this.x = x;</span></div>
<div style="position:absolute;left:147.60px;top:126.25px" class="cls_021"><span class="cls_021">this.y = y;</span></div>
<div style="position:absolute;left:147.60px;top:138.49px" class="cls_021"><span class="cls_021">this.collision = new Rectangle(x,y, WIDTH,HEIGHT);</span></div>
<div style="position:absolute;left:136.80px;top:150.73px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:175.21px" class="cls_021"><span class="cls_021">public void draw(Batch batch) {</span></div>
<div style="position:absolute;left:147.60px;top:187.45px" class="cls_021"><span class="cls_021">batch.draw(texture, x, y);</span></div>
<div style="position:absolute;left:136.80px;top:199.69px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:211.93px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:231.66px" class="cls_007"><span class="cls_007">Let's now add an array of acorns to our </span><span class="cls_009">GameScreen</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:126.00px;top:252.60px" class="cls_021"><span class="cls_021">private Array&lt;Acorn> acorns = new Array&lt;Acorn>();</span></div>
<div style="position:absolute;left:108.00px;top:272.34px" class="cls_007"><span class="cls_007">Next, we need to add a method to our </span><span class="cls_009">GameScreen</span><span class="cls_007"> class that will extract the</span></div>
<div style="position:absolute;left:108.00px;top:284.94px" class="cls_007"><span class="cls_007">information from the </span><span class="cls_009">TiledMap</span><span class="cls_007"> object. Again, add the following method to your</span></div>
<div style="position:absolute;left:108.00px;top:297.54px" class="cls_009"><span class="cls_009">GameScreen</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:126.00px;top:318.48px" class="cls_021"><span class="cls_021">private void populateAcorns() {</span></div>
<div style="position:absolute;left:136.80px;top:330.72px" class="cls_021"><span class="cls_021">MapLayer mapLayer = tiledMap.getLayers().get("Collectables");</span></div>
<div style="position:absolute;left:136.80px;top:342.96px" class="cls_021"><span class="cls_021">for (MapObject mapObject : mapLayer.getObjects()) {</span></div>
<div style="position:absolute;left:147.60px;top:355.20px" class="cls_021"><span class="cls_021">acorns.add(</span></div>
<div style="position:absolute;left:158.40px;top:367.44px" class="cls_021"><span class="cls_021">new Acorn(peteGame.getAssetManager().get("acorn.png",</span></div>
<div style="position:absolute;left:158.40px;top:378.24px" class="cls_021"><span class="cls_021">Texture.class),</span></div>
<div style="position:absolute;left:169.20px;top:390.48px" class="cls_021"><span class="cls_021">mapObject.getProperties().get("x", Float.class),</span></div>
<div style="position:absolute;left:169.20px;top:402.72px" class="cls_021"><span class="cls_021">mapObject.getProperties().get("y", Float.class)</span></div>
<div style="position:absolute;left:158.40px;top:414.96px" class="cls_021"><span class="cls_021">)</span></div>
<div style="position:absolute;left:147.60px;top:427.20px" class="cls_021"><span class="cls_021">);</span></div>
<div style="position:absolute;left:136.80px;top:439.44px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:451.68px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:471.42px" class="cls_007"><span class="cls_007">Here we are requesting the layer from the </span><span class="cls_009">TiledMap</span><span class="cls_007"> object that we created and called</span></div>
<div style="position:absolute;left:108.00px;top:484.02px" class="cls_009"><span class="cls_009">Collectables</span><span class="cls_007">. Next we are iterating over the </span><span class="cls_009">MapObject</span><span class="cls_007"> instances that this layer</span></div>
<div style="position:absolute;left:108.00px;top:496.62px" class="cls_007"><span class="cls_007">contains. For each </span><span class="cls_009">MapObject</span><span class="cls_007"> we are creating an </span><span class="cls_009">Acorn</span><span class="cls_007"> instance and adding to our</span></div>
<div style="position:absolute;left:108.00px;top:509.22px" class="cls_007"><span class="cls_007">acorns array. The </span><span class="cls_020">x</span><span class="cls_007"> and </span><span class="cls_020">y</span><span class="cls_007"> coordinates are located in the properties of the </span><span class="cls_009">MapObject</span></div>
<div style="position:absolute;left:108.00px;top:521.82px" class="cls_007"><span class="cls_007">class, hence why we need to extract them like we do. This is actually a pretty neat</span></div>
<div style="position:absolute;left:108.00px;top:534.42px" class="cls_007"><span class="cls_007">way, as in the future you could add your own properties in Tiled and then access</span></div>
<div style="position:absolute;left:108.00px;top:547.02px" class="cls_007"><span class="cls_007">them this way.</span></div>
<div style="position:absolute;left:108.00px;top:568.26px" class="cls_007"><span class="cls_007">Next, we update our </span><span class="cls_009">draw()</span><span class="cls_007"> method to render our acorns:</span></div>
<div style="position:absolute;left:126.00px;top:589.20px" class="cls_021"><span class="cls_021">private void draw() {</span></div>
<div style="position:absolute;left:136.80px;top:601.44px" class="cls_021"><span class="cls_021">//Code omitted for brevity</span></div>
<div style="position:absolute;left:136.80px;top:613.68px" class="cls_021"><span class="cls_021">for (Acorn acorn : acorns) {</span></div>
<div style="position:absolute;left:147.60px;top:625.92px" class="cls_021"><span class="cls_021">acorn.draw(batch);</span></div>
<div style="position:absolute;left:136.80px;top:638.16px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 156 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:137142px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background174.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 6</span></div>
<div style="position:absolute;left:136.80px;top:114.01px" class="cls_021"><span class="cls_021">pete.draw(batch);</span></div>
<div style="position:absolute;left:136.80px;top:126.25px" class="cls_021"><span class="cls_021">batch.end();</span></div>
<div style="position:absolute;left:126.00px;top:138.49px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:158.22px" class="cls_007"><span class="cls_007">Next, we need to add our </span><span class="cls_009">populateAcorns()</span><span class="cls_007"> method call to our </span><span class="cls_009">show()</span><span class="cls_007"> method</span></div>
<div style="position:absolute;left:108.00px;top:170.82px" class="cls_007"><span class="cls_007">as follows:</span></div>
<div style="position:absolute;left:126.00px;top:191.76px" class="cls_021"><span class="cls_021">public void show() {</span></div>
<div style="position:absolute;left:136.80px;top:204.00px" class="cls_021"><span class="cls_021">// Code ommitted for brevity</span></div>
<div style="position:absolute;left:136.80px;top:216.24px" class="cls_021"><span class="cls_021">populateAcorns();</span></div>
<div style="position:absolute;left:126.00px;top:228.48px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:248.22px" class="cls_007"><span class="cls_007">Finally, we need to add our acorn texture to our asset manager in the loading screen;</span></div>
<div style="position:absolute;left:108.00px;top:260.82px" class="cls_007"><span class="cls_007">otherwise, it won't get loaded! So, update the </span><span class="cls_009">show()</span><span class="cls_007"> method of our </span><span class="cls_009">LoadingScreen</span></div>
<div style="position:absolute;left:108.00px;top:273.42px" class="cls_007"><span class="cls_007">class with the following code:</span></div>
<div style="position:absolute;left:126.00px;top:294.36px" class="cls_021"><span class="cls_021">peteGame.getAssetManager().load("acorn.png", Texture.class);</span></div>
<div style="position:absolute;left:108.00px;top:314.10px" class="cls_007"><span class="cls_007">We should now be ready to rock and roll! If you load up the game, you should now</span></div>
<div style="position:absolute;left:108.00px;top:326.70px" class="cls_007"><span class="cls_007">be presented with acorns.</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 157 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:137944px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background175.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Onto the Next Platform...Game</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Excellent! We are almost there. You may notice that nothing happens when Pete</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">passes over the acorns. Well, that's what we are going to look at next. Just a quick</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">collision check, then we can remove them from the screen!</span></div>
<div style="position:absolute;left:108.00px;top:160.93px" class="cls_007"><span class="cls_007">Let's add the following code to our </span><span class="cls_009">GameScreen</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:126.00px;top:181.87px" class="cls_021"><span class="cls_021">private void handlePeteCollisionWithAcorn() {</span></div>
<div style="position:absolute;left:136.80px;top:194.11px" class="cls_021"><span class="cls_021">for (Iterator&lt;Acorn> iter = acorns.iterator(); iter.hasNext(); )</span></div>
<div style="position:absolute;left:136.80px;top:204.91px" class="cls_021"><span class="cls_021">{</span></div>
<div style="position:absolute;left:147.60px;top:217.15px" class="cls_021"><span class="cls_021">Acorn acorn = iter.next();</span></div>
<div style="position:absolute;left:147.60px;top:229.39px" class="cls_021"><span class="cls_021">if (pete.getCollisionRectangle().</span></div>
<div style="position:absolute;left:147.60px;top:240.19px" class="cls_021"><span class="cls_021">overlaps(acorn.getCollisionRectangle())){</span></div>
<div style="position:absolute;left:158.40px;top:252.43px" class="cls_021"><span class="cls_021">iter.remove();</span></div>
<div style="position:absolute;left:147.60px;top:264.67px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:276.91px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:289.15px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:308.89px" class="cls_007"><span class="cls_007">Here we are iterating over our </span><span class="cls_009">Acorn</span><span class="cls_007"> objects, and checking to see if Pete overlaps</span></div>
<div style="position:absolute;left:108.00px;top:321.49px" class="cls_007"><span class="cls_007">with any of them. If they do, we remove the acorn.</span></div>
<div style="position:absolute;left:108.00px;top:342.73px" class="cls_007"><span class="cls_007">Finally, add a call to this method in our </span><span class="cls_009">update()</span><span class="cls_007"> method:</span></div>
<div style="position:absolute;left:126.00px;top:363.67px" class="cls_021"><span class="cls_021">private void update(float delta) {</span></div>
<div style="position:absolute;left:136.80px;top:375.91px" class="cls_021"><span class="cls_021">pete.update(delta);</span></div>
<div style="position:absolute;left:136.80px;top:388.15px" class="cls_021"><span class="cls_021">stopPeteLeavingTheScreen();</span></div>
<div style="position:absolute;left:136.80px;top:400.39px" class="cls_021"><span class="cls_021">handlePeteCollision();</span></div>
<div style="position:absolute;left:136.80px;top:412.63px" class="cls_021"><span class="cls_021">handlePeteCollisionWithAcorn();</span></div>
<div style="position:absolute;left:126.00px;top:424.87px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:444.61px" class="cls_007"><span class="cls_007">Now if you run the project, you will find that acorns will disappear when Pete comes</span></div>
<div style="position:absolute;left:108.00px;top:457.21px" class="cls_007"><span class="cls_007">in contact with them! Awesome! We have the basis here for a good platforming</span></div>
<div style="position:absolute;left:108.00px;top:469.81px" class="cls_007"><span class="cls_007">game. While nothing happens when you collect the acorns, we have covered</span></div>
<div style="position:absolute;left:108.00px;top:482.41px" class="cls_007"><span class="cls_007">a couple of things in previous chapters that can be reused to have an outcome.</span></div>
<div style="position:absolute;left:108.00px;top:495.01px" class="cls_007"><span class="cls_007">I shall leave that as an exercise for you, the reader, to have a go at. You can do it!</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 158 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:138746px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background176.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 6</span></div>
<div style="position:absolute;left:108.00px;top:111.92px" class="cls_019"><span class="cls_019">Summary</span></div>
<div style="position:absolute;left:108.00px;top:136.90px" class="cls_007"><span class="cls_007">Well, what a chapter we had there. We created the beginnings of our own</span></div>
<div style="position:absolute;left:108.00px;top:149.50px" class="cls_007"><span class="cls_007">platforming game, we looked at a really useful tool for level creation, Tiled, and</span></div>
<div style="position:absolute;left:108.00px;top:162.10px" class="cls_007"><span class="cls_007">we saw how using LibGDX, we can take the output of Tiled and easily gain access</span></div>
<div style="position:absolute;left:108.00px;top:174.70px" class="cls_007"><span class="cls_007">to that information inside our game, using the Tiled Map API. We did some</span></div>
<div style="position:absolute;left:108.00px;top:187.30px" class="cls_007"><span class="cls_007">simple collision detection between our characters and the landscape to create our</span></div>
<div style="position:absolute;left:108.00px;top:199.90px" class="cls_007"><span class="cls_007">platforming experiencing and then we went through the process of adding game</span></div>
<div style="position:absolute;left:108.00px;top:212.50px" class="cls_007"><span class="cls_007">objects—the acorn!—to the game.</span></div>
<div style="position:absolute;left:108.00px;top:233.74px" class="cls_007"><span class="cls_007">Coming up in the next chapter, you will look at taking the game further by having</span></div>
<div style="position:absolute;left:108.00px;top:246.34px" class="cls_007"><span class="cls_007">the level bigger than the screen, and introduce scrolling! So, we can really give the</span></div>
<div style="position:absolute;left:108.00px;top:258.94px" class="cls_007"><span class="cls_007">game the feel of a platformer. You will also take a look at using sounds in our game</span></div>
<div style="position:absolute;left:108.00px;top:271.54px" class="cls_007"><span class="cls_007">so we can bring it to life!</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 159 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:139548px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background177.jpg" width=612 height=792></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:139548px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background178.jpg" width=612 height=792></div>
<div style="position:absolute;left:200.50px;top:218.96px" class="cls_014"><span class="cls_014">Extending the Platform</span></div>
<div style="position:absolute;left:108.00px;top:272.66px" class="cls_007"><span class="cls_007">In the previous chapter, we looked at how to create a simple platform game, where</span></div>
<div style="position:absolute;left:108.00px;top:285.26px" class="cls_007"><span class="cls_007">we used a new tool, </span><span class="cls_023">Tiled</span><span class="cls_007">, that allowed us to create a level and used the Tiled Maps</span></div>
<div style="position:absolute;left:108.00px;top:297.86px" class="cls_007"><span class="cls_007">API of LibGDX to bring it to life. However, our game was confined to a single screen.</span></div>
<div style="position:absolute;left:108.00px;top:310.46px" class="cls_007"><span class="cls_007">As most of you will be aware, to really take our game to the next level, the level itself</span></div>
<div style="position:absolute;left:108.00px;top:323.06px" class="cls_007"><span class="cls_007">should usually be bigger than the screen.</span></div>
<div style="position:absolute;left:108.00px;top:344.30px" class="cls_007"><span class="cls_007">In this chapter, we are going to look at how to extend the level and how to move</span></div>
<div style="position:absolute;left:108.00px;top:356.90px" class="cls_007"><span class="cls_007">the camera with Pete as he traverses through our new world. Once we have that,</span></div>
<div style="position:absolute;left:108.00px;top:369.50px" class="cls_007"><span class="cls_007">we can then move on to the next topic, which is adding sounds. In this, we will</span></div>
<div style="position:absolute;left:108.00px;top:382.10px" class="cls_007"><span class="cls_007">introduce you to the use of music and sound effects. We will cover the following</span></div>
<div style="position:absolute;left:108.00px;top:394.70px" class="cls_007"><span class="cls_007">topics in this chapter:</span></div>
<div style="position:absolute;left:126.00px;top:415.94px" class="cls_007"><span class="cls_007">•  Increasing the level length</span></div>
<div style="position:absolute;left:126.00px;top:432.86px" class="cls_007"><span class="cls_007">•  Introducing camera scroll</span></div>
<div style="position:absolute;left:126.00px;top:449.78px" class="cls_007"><span class="cls_007">•  Making sounds</span></div>
<div style="position:absolute;left:126.00px;top:466.69px" class="cls_007"><span class="cls_007">•  Playing music</span></div>
<div style="position:absolute;left:108.00px;top:499.20px" class="cls_019"><span class="cls_019">Increasing the level</span></div>
<div style="position:absolute;left:108.00px;top:524.18px" class="cls_007"><span class="cls_007">The idea we have here is simple enough to start off with. I am sure many of you will</span></div>
<div style="position:absolute;left:108.00px;top:536.78px" class="cls_007"><span class="cls_007">have figured out that the first thing we need to do is extend the map in Tiled and add</span></div>
<div style="position:absolute;left:108.00px;top:549.38px" class="cls_007"><span class="cls_007">some extra tiles to the layer. If so, you would be correct! So, let's reopen Tiled and</span></div>
<div style="position:absolute;left:108.00px;top:561.98px" class="cls_007"><span class="cls_007">extend that map.</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 161 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:140350px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background179.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Extending the Platform</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Just in case you have forgotten, this is where we left our map the last time:</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 162 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:141152px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background180.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 7</span></div>
<div style="position:absolute;left:108.00px;top:112.46px" class="cls_025"><span class="cls_025">Resizing the Map</span></div>
<div style="position:absolute;left:108.00px;top:135.44px" class="cls_007"><span class="cls_007">If you go to the </span><span class="cls_023">Map</span><span class="cls_007"> drop-down menu and select </span><span class="cls_023">Resize Map</span><span class="cls_007">, you will be presented</span></div>
<div style="position:absolute;left:108.00px;top:148.04px" class="cls_007"><span class="cls_007">with a dialog box that has the current width and height, in tiles, of our map. If you</span></div>
<div style="position:absolute;left:108.00px;top:160.64px" class="cls_007"><span class="cls_007">simply double the width value and click on </span><span class="cls_023">OK</span><span class="cls_007">, you will find that your map is now</span></div>
<div style="position:absolute;left:108.00px;top:173.24px" class="cls_007"><span class="cls_007">twice the size of the width, as shown in the following screenshot:</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 163 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:141954px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background181.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Extending the Platform</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Hopefully, your screen looks somewhat similar to mine. Next, we need to add some</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">more tiles to our </span><span class="cls_023">Tile Layer</span><span class="cls_007">. Feel free to create yours as you wish; the </span><span class="cls_023">Tile Layer</span><span class="cls_007"> that</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">I created looks like the one shown in the following screenshot:</span></div>
<div style="position:absolute;left:108.00px;top:452.11px" class="cls_007"><span class="cls_007">As you can see, this is a simple mirror image of what we already have.</span></div>
<div style="position:absolute;left:108.00px;top:473.35px" class="cls_007"><span class="cls_007">If you try to run the project now, you will find that Pete is still constrained within the</span></div>
<div style="position:absolute;left:108.00px;top:485.95px" class="cls_007"><span class="cls_007">screen. He can't access the rest of the level! Let's fix this now.</span></div>
<div style="position:absolute;left:108.00px;top:507.19px" class="cls_007"><span class="cls_007">Before we do this, let's just think about what we need to do here. We need to:</span></div>
<div style="position:absolute;left:126.00px;top:528.43px" class="cls_007"><span class="cls_007">•  Allow Pete to move off the screen</span></div>
<div style="position:absolute;left:126.00px;top:545.35px" class="cls_007"><span class="cls_007">•  Move the camera so that it follows Pete when he moves across the screen</span></div>
<div style="position:absolute;left:126.00px;top:562.27px" class="cls_007"><span class="cls_007">•  Stop Pete from wandering off at the end of the level!</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 164 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:142756px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background182.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 7</span></div>
<div style="position:absolute;left:108.00px;top:112.46px" class="cls_025"><span class="cls_025">Allowing Pete to leave the screen</span></div>
<div style="position:absolute;left:108.00px;top:135.44px" class="cls_007"><span class="cls_007">First, let's tackle the problem of Pete moving off the screen. If we look</span></div>
<div style="position:absolute;left:108.00px;top:148.04px" class="cls_007"><span class="cls_007">at our </span><span class="cls_009">GameScreen</span><span class="cls_007"> class again, we can see that we have a method called</span></div>
<div style="position:absolute;left:108.00px;top:160.64px" class="cls_009"><span class="cls_009">stopPeteLeavingTheScreen()</span><span class="cls_007">. Here is the code for it in case you have forgotten:</span></div>
<div style="position:absolute;left:126.00px;top:181.58px" class="cls_021"><span class="cls_021">private void stopPeteLeavingTheScreen() {</span></div>
<div style="position:absolute;left:136.80px;top:193.82px" class="cls_021"><span class="cls_021">if (pete.getY() &lt; 0) {</span></div>
<div style="position:absolute;left:147.60px;top:206.06px" class="cls_021"><span class="cls_021">pete.setPosition(pete.getX(), 0);</span></div>
<div style="position:absolute;left:147.60px;top:218.30px" class="cls_021"><span class="cls_021">pete.landed();</span></div>
<div style="position:absolute;left:136.80px;top:230.54px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:242.78px" class="cls_021"><span class="cls_021">if (pete.getX() &lt; 0) {</span></div>
<div style="position:absolute;left:147.60px;top:255.02px" class="cls_021"><span class="cls_021">pete.setPosition(0, pete.getY());</span></div>
<div style="position:absolute;left:136.80px;top:267.26px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:279.50px" class="cls_021"><span class="cls_021">if (pete.getX() + Pete.WIDTH > WORLD_WIDTH) {</span></div>
<div style="position:absolute;left:147.60px;top:291.74px" class="cls_021"><span class="cls_021">pete.setPosition(WORLD_WIDTH - Pete.WIDTH, pete.getY());</span></div>
<div style="position:absolute;left:136.80px;top:303.98px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:316.22px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:335.96px" class="cls_007"><span class="cls_007">We are interested in the last part of the code. Currently, we are saying that if the</span></div>
<div style="position:absolute;left:108.00px;top:348.56px" class="cls_007"><span class="cls_007">right-hand side of Pete (Pete's </span><span class="cls_020">x</span><span class="cls_007"> coordinate plus his width) is greater than the width</span></div>
<div style="position:absolute;left:108.00px;top:361.16px" class="cls_007"><span class="cls_007">of the world, according to the camera, then we need to reset his position. However,</span></div>
<div style="position:absolute;left:108.00px;top:373.76px" class="cls_007"><span class="cls_007">we need to update the same as the level's width as well. So, let's update the method</span></div>
<div style="position:absolute;left:108.00px;top:386.36px" class="cls_007"><span class="cls_007">as follows:</span></div>
<div style="position:absolute;left:126.00px;top:407.30px" class="cls_021"><span class="cls_021">private void stopPeteLeavingTheScreen() {</span></div>
<div style="position:absolute;left:136.80px;top:419.54px" class="cls_021"><span class="cls_021">if (pete.getY() &lt; 0) {</span></div>
<div style="position:absolute;left:147.60px;top:431.78px" class="cls_021"><span class="cls_021">pete.setPosition(pete.getX(), 0);</span></div>
<div style="position:absolute;left:147.60px;top:444.02px" class="cls_021"><span class="cls_021">pete.landed();</span></div>
<div style="position:absolute;left:136.80px;top:456.26px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:468.50px" class="cls_021"><span class="cls_021">if (pete.getX() &lt; 0) {</span></div>
<div style="position:absolute;left:147.60px;top:480.74px" class="cls_021"><span class="cls_021">pete.setPosition(0, pete.getY());</span></div>
<div style="position:absolute;left:136.80px;top:492.98px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:505.22px" class="cls_021"><span class="cls_021">TiledMapTileLayer tiledMapTileLayer = (TiledMapTileLayer)</span></div>
<div style="position:absolute;left:136.80px;top:516.02px" class="cls_021"><span class="cls_021">tiledMap.getLayers().get(0);</span></div>
<div style="position:absolute;left:136.80px;top:528.26px" class="cls_021"><span class="cls_021">float levelWidth =  tiledMapTileLayer.getWidth() *</span></div>
<div style="position:absolute;left:136.80px;top:539.06px" class="cls_021"><span class="cls_021">tiledMapTileLayer.getTileWidth();</span></div>
<div style="position:absolute;left:136.80px;top:551.30px" class="cls_021"><span class="cls_021">if (pete.getX() + Pete.WIDTH > levelWidth) {</span></div>
<div style="position:absolute;left:147.60px;top:563.54px" class="cls_021"><span class="cls_021">pete.setPosition(levelWidth - Pete.WIDTH, pete.getY());</span></div>
<div style="position:absolute;left:136.80px;top:575.78px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:588.02px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:607.76px" class="cls_007"><span class="cls_007">As you can see, we get a reference to the layer that we require. Then, we calculate the</span></div>
<div style="position:absolute;left:108.00px;top:620.36px" class="cls_007"><span class="cls_007">level's width and finally update the condition statement.</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 165 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:143558px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background183.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Extending the Platform</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">If you run the project now, you will find that you can make Pete go off the screen</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">and come back.</span></div>
<div style="position:absolute;left:108.00px;top:148.34px" class="cls_007"><span class="cls_007">Part one achieved! Next, we need to be able to move the camera.</span></div>
<div style="position:absolute;left:108.00px;top:178.27px" class="cls_025"><span class="cls_025">The camera sees it all</span></div>
<div style="position:absolute;left:108.00px;top:201.25px" class="cls_007"><span class="cls_007">Because we are only going to scroll to the left or right, we don't need to worry about</span></div>
<div style="position:absolute;left:108.00px;top:213.85px" class="cls_007"><span class="cls_007">updating the </span><span class="cls_020">y</span><span class="cls_007"> axis of our camera. However, if you wanted up and down scrolling,</span></div>
<div style="position:absolute;left:108.00px;top:226.45px" class="cls_007"><span class="cls_007">what we will do here will apply to the </span><span class="cls_020">y</span><span class="cls_007"> axis as well, for when the responsibility</span></div>
<div style="position:absolute;left:108.00px;top:239.05px" class="cls_007"><span class="cls_007">comes upon you to implement your own game.</span></div>
<div style="position:absolute;left:108.00px;top:260.29px" class="cls_007"><span class="cls_007">Our first step is to create a method that will update the camera. In our </span><span class="cls_009">GameScreen</span></div>
<div style="position:absolute;left:108.00px;top:272.89px" class="cls_007"><span class="cls_007">class, let's create a method called </span><span class="cls_009">updateCameraX()</span><span class="cls_007">—we will do this as we are only</span></div>
<div style="position:absolute;left:108.00px;top:285.49px" class="cls_007"><span class="cls_007">going to update the </span><span class="cls_020">x</span><span class="cls_007"> coordinate.</span></div>
<div style="position:absolute;left:108.00px;top:306.74px" class="cls_007"><span class="cls_007">You can see this method in the following code:</span></div>
<div style="position:absolute;left:126.00px;top:327.67px" class="cls_021"><span class="cls_021">private void updateCameraX() {</span></div>
<div style="position:absolute;left:136.80px;top:339.91px" class="cls_021"><span class="cls_021">camera.position.set(pete.getX(), camera.position.y,</span></div>
<div style="position:absolute;left:136.80px;top:350.71px" class="cls_021"><span class="cls_021">camera.position.z);</span></div>
<div style="position:absolute;left:136.80px;top:362.95px" class="cls_021"><span class="cls_021">camera.update();</span></div>
<div style="position:absolute;left:136.80px;top:375.19px" class="cls_021"><span class="cls_021">orthogonalTiledMapRenderer.setView(camera);</span></div>
<div style="position:absolute;left:126.00px;top:387.43px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:407.17px" class="cls_007"><span class="cls_007">Here, you can see that we are setting the position of the camera to be that of Pete's,</span></div>
<div style="position:absolute;left:108.00px;top:419.77px" class="cls_007"><span class="cls_007">updating the camera, and then updating the view on the </span><span class="cls_009">TileMapRenderer</span><span class="cls_007"> parameter.</span></div>
<div style="position:absolute;left:108.00px;top:441.01px" class="cls_007"><span class="cls_007">Next, we will add a call to this method in our </span><span class="cls_009">update()</span><span class="cls_007"> method.</span></div>
<div style="position:absolute;left:108.00px;top:462.26px" class="cls_007"><span class="cls_007">If you run the project now, you should hopefully see that the camera is centered</span></div>
<div style="position:absolute;left:108.00px;top:474.86px" class="cls_007"><span class="cls_007">around Pete on the </span><span class="cls_020">x</span><span class="cls_007"> axis:</span></div>
<div style="position:absolute;left:126.00px;top:495.79px" class="cls_021"><span class="cls_021">private void update(float delta) {</span></div>
<div style="position:absolute;left:136.80px;top:508.03px" class="cls_021"><span class="cls_021">pete.update(delta);</span></div>
<div style="position:absolute;left:136.80px;top:520.27px" class="cls_021"><span class="cls_021">stopPeteLeavingTheScreen();</span></div>
<div style="position:absolute;left:136.80px;top:532.51px" class="cls_021"><span class="cls_021">handlePeteCollision();</span></div>
<div style="position:absolute;left:136.80px;top:544.75px" class="cls_021"><span class="cls_021">handlePeteCollisionWithAcorn();</span></div>
<div style="position:absolute;left:136.80px;top:556.99px" class="cls_021"><span class="cls_021">updateCameraX();</span></div>
<div style="position:absolute;left:126.00px;top:569.23px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 166 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:144360px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background184.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 7</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">However, you might have spotted the flaw in what we have just done. Let's look at</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">the following image:</span></div>
<div style="position:absolute;left:108.00px;top:452.53px" class="cls_007"><span class="cls_007">So, by centering the camera around Pete, we have exposed what is outside our level.</span></div>
<div style="position:absolute;left:108.00px;top:465.13px" class="cls_007"><span class="cls_007">In some games, this might actually be desirable. However, let's lock this position</span></div>
<div style="position:absolute;left:108.00px;top:477.73px" class="cls_007"><span class="cls_007">down so we don't expose what is happening in our game's behind-the-scenes!</span></div>
<div style="position:absolute;left:108.00px;top:498.97px" class="cls_007"><span class="cls_007">To do this, we will need to update our </span><span class="cls_009">updateCameraX()</span><span class="cls_007"> method to take into</span></div>
<div style="position:absolute;left:108.00px;top:511.57px" class="cls_007"><span class="cls_007">consideration Pete's position and only update the camera if he is in the middle</span></div>
<div style="position:absolute;left:108.00px;top:524.17px" class="cls_007"><span class="cls_007">of our level.</span></div>
<div style="position:absolute;left:108.00px;top:545.41px" class="cls_007"><span class="cls_007">Update the method with the following code:</span></div>
<div style="position:absolute;left:126.00px;top:566.35px" class="cls_021"><span class="cls_021">private void updateCameraX() {</span></div>
<div style="position:absolute;left:136.80px;top:578.59px" class="cls_021"><span class="cls_021">TiledMapTileLayer tiledMapTileLayer = (TiledMapTileLayer)</span></div>
<div style="position:absolute;left:136.80px;top:589.39px" class="cls_021"><span class="cls_021">tiledMap.getLayers().get(0);</span></div>
<div style="position:absolute;left:136.80px;top:601.63px" class="cls_021"><span class="cls_021">float levelWidth = tiledMapTileLayer.getWidth() *</span></div>
<div style="position:absolute;left:136.80px;top:612.43px" class="cls_021"><span class="cls_021">tiledMapTileLayer.getTileWidth();</span></div>
<div style="position:absolute;left:136.80px;top:624.67px" class="cls_021"><span class="cls_021">if ( (pete.getX() > WORLD_WIDTH / 2f) && (pete.getX() &lt;</span></div>
<div style="position:absolute;left:136.80px;top:635.47px" class="cls_021"><span class="cls_021">(levelWidth - WORLD_WIDTH / 2f)) ) {</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 167 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:145162px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background185.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Extending the Platform</span></div>
<div style="position:absolute;left:147.60px;top:114.01px" class="cls_021"><span class="cls_021">camera.position.set(pete.getX(), camera.position.y,</span></div>
<div style="position:absolute;left:147.60px;top:124.81px" class="cls_021"><span class="cls_021">camera.position.z);</span></div>
<div style="position:absolute;left:147.60px;top:137.05px" class="cls_021"><span class="cls_021">camera.update();</span></div>
<div style="position:absolute;left:147.60px;top:149.29px" class="cls_021"><span class="cls_021">orthogonalTiledMapRenderer.setView(camera);</span></div>
<div style="position:absolute;left:136.80px;top:161.53px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:173.77px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:193.50px" class="cls_007"><span class="cls_007">So, once again, we retrieve the length of the level. We then check whether Pete</span></div>
<div style="position:absolute;left:108.00px;top:206.10px" class="cls_007"><span class="cls_007">is more than half in the screen width, but with not less than half a screen width</span></div>
<div style="position:absolute;left:108.00px;top:218.70px" class="cls_007"><span class="cls_007">remaining. We then update the camera.</span></div>
<div style="position:absolute;left:108.00px;top:239.94px" class="cls_007"><span class="cls_007">If you run the project now, you will find that the camera is now bound to the level</span></div>
<div style="position:absolute;left:108.00px;top:252.54px" class="cls_007"><span class="cls_007">and will not go past either end. Let's take a look at the following screenshot:</span></div>
<div style="position:absolute;left:108.00px;top:577.98px" class="cls_007"><span class="cls_007">As you can see, Pete can't escape the end of the level and the camera has</span></div>
<div style="position:absolute;left:108.00px;top:590.58px" class="cls_007"><span class="cls_007">stopped scrolling.</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 168 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:145964px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background186.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 7</span></div>
<div style="position:absolute;left:108.00px;top:111.92px" class="cls_019"><span class="cls_019">Let's make some noise</span></div>
<div style="position:absolute;left:108.00px;top:136.90px" class="cls_007"><span class="cls_007">So far, across all the games we have made, we can note that they all have something</span></div>
<div style="position:absolute;left:108.00px;top:149.50px" class="cls_007"><span class="cls_007">in common. They are completely silent! As any good game-maker knows, sounds</span></div>
<div style="position:absolute;left:108.00px;top:162.10px" class="cls_007"><span class="cls_007">and music add an awful lot to the experience. What we are going to look at now is</span></div>
<div style="position:absolute;left:108.00px;top:174.70px" class="cls_007"><span class="cls_007">how to use LibGDX to introduce sounds to our simple platform.</span></div>
<div style="position:absolute;left:108.00px;top:195.94px" class="cls_007"><span class="cls_007">Before we dive into coding up some beeps and boops, let's first look at how LibGDX</span></div>
<div style="position:absolute;left:108.00px;top:208.54px" class="cls_007"><span class="cls_007">handles making sounds!</span></div>
<div style="position:absolute;left:108.00px;top:238.48px" class="cls_025"><span class="cls_025">Sound effects</span></div>
<div style="position:absolute;left:108.00px;top:261.46px" class="cls_007"><span class="cls_007">LibGDX splits the handling of audio into two parts. The first part is the sound effects</span></div>
<div style="position:absolute;left:108.00px;top:274.06px" class="cls_007"><span class="cls_007">with smaller audio files and the second part is the music, which generally has larger</span></div>
<div style="position:absolute;left:108.00px;top:286.66px" class="cls_007"><span class="cls_007">audio files. We will start off with looking at the </span><span class="cls_009">Sound</span><span class="cls_007"> class of LibGDX, the one that</span></div>
<div style="position:absolute;left:108.00px;top:299.26px" class="cls_007"><span class="cls_007">looks after the smaller sound effects.</span></div>
<div style="position:absolute;left:108.00px;top:320.50px" class="cls_007"><span class="cls_007">According to the LibGDX wiki (</span><A HREF="https://github.com/libgdx/libgdx/wiki/Sound-effects">https://github.com/libgdx/libgdx/wiki/</A> </span></div>
<div style="position:absolute;left:108.00px;top:333.10px" class="cls_009"><span class="cls_009"> </span><A HREF="https://github.com/libgdx/libgdx/wiki/Sound-effects">Sound-effects</A> <span class="cls_007">), the definition of which audio falls in the sound effects category is:</span></div>
<div style="position:absolute;left:129.60px;top:354.70px" class="cls_020"><span class="cls_020">Sound effects are small audio samples, usually no longer than a few seconds, that</span></div>
<div style="position:absolute;left:129.60px;top:367.30px" class="cls_020"><span class="cls_020">are played back on specific game events such as a character jumping or shooting</span></div>
<div style="position:absolute;left:129.60px;top:379.90px" class="cls_020"><span class="cls_020">a gun.</span></div>
<div style="position:absolute;left:108.00px;top:401.50px" class="cls_007"><span class="cls_007">This fits in perfectly, as most sound effects we wish to use will be small, perhaps</span></div>
<div style="position:absolute;left:108.00px;top:414.10px" class="cls_007"><span class="cls_007">even less than a second in length.</span></div>
<div style="position:absolute;left:108.00px;top:435.34px" class="cls_007"><span class="cls_007">In fact, I would strongly recommend that you read the LibGDX wiki, as it will</span></div>
<div style="position:absolute;left:108.00px;top:447.94px" class="cls_007"><span class="cls_007">provide you with more links for further reading.</span></div>
<div style="position:absolute;left:108.00px;top:469.18px" class="cls_007"><span class="cls_007">LibGDX supports MP3, OGG, and WAV formats of audio files. Which format you</span></div>
<div style="position:absolute;left:108.00px;top:481.78px" class="cls_007"><span class="cls_007">use in your game will come down to many different decisions, such as how big the</span></div>
<div style="position:absolute;left:108.00px;top:494.38px" class="cls_007"><span class="cls_007">files can be, the level of quality of the audio required, and so on.</span></div>
<div style="position:absolute;left:108.00px;top:515.62px" class="cls_007"><span class="cls_007">OK, so this is the background in which audios are classed as sound effects and</span></div>
<div style="position:absolute;left:108.00px;top:528.22px" class="cls_007"><span class="cls_007">formats are supported, but how do we play the sound once we have a background?</span></div>
<div style="position:absolute;left:108.00px;top:540.82px" class="cls_007"><span class="cls_007">As with the majority of things, with LibGDX, this is pleasingly simple. Those who</span></div>
<div style="position:absolute;left:108.00px;top:553.42px" class="cls_007"><span class="cls_007">have had a brief look at the wiki page will notice that the following line of code is</span></div>
<div style="position:absolute;left:108.00px;top:566.02px" class="cls_007"><span class="cls_007">pretty recognizable:</span></div>
<div style="position:absolute;left:126.00px;top:586.96px" class="cls_021"><span class="cls_021">Sound sound = Gdx.audio.newSound</span></div>
<div style="position:absolute;left:126.00px;top:597.76px" class="cls_021"><span class="cls_021">(Gdx.files.internal("data/mysound.mp3"));</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 169 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:146766px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background187.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Extending the Platform</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Here, we load an MP3 audio file and generate an instance of the </span><span class="cls_009">Sound</span><span class="cls_007"> interface</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">class. You will recognize the file handle from the beginning of the book where we</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">had loaded the textures in the same way. We pass this file handle to the audio class</span></div>
<div style="position:absolute;left:108.00px;top:152.29px" class="cls_007"><span class="cls_007">of the </span><span class="cls_009">GDX</span><span class="cls_007"> object; this will then generate our instance.</span></div>
<div style="position:absolute;left:108.00px;top:173.54px" class="cls_007"><span class="cls_007">Hey! You might be thinking "Why can't I just do something like what we did for the</span></div>
<div style="position:absolute;left:108.00px;top:186.13px" class="cls_009"><span class="cls_009">Texture</span><span class="cls_007"> class?"</span></div>
<div style="position:absolute;left:126.00px;top:207.07px" class="cls_021"><span class="cls_021">Sound sound = new Sound(Gdx.files.internal("data/mysound.mp3"));</span></div>
<div style="position:absolute;left:108.00px;top:226.81px" class="cls_007"><span class="cls_007">This is an excellent question. The answer should not really surprise you if you know</span></div>
<div style="position:absolute;left:108.00px;top:239.41px" class="cls_007"><span class="cls_007">a little bit about how LibGDX is cross-platform. For those who don't know, we will</span></div>
<div style="position:absolute;left:108.00px;top:252.01px" class="cls_007"><span class="cls_007">cover the cross-platform aspect in a later chapter. Now, back to the question at hand.</span></div>
<div style="position:absolute;left:108.00px;top:273.25px" class="cls_007"><span class="cls_007">The </span><span class="cls_009">Gdx.audio</span><span class="cls_007"> parameter will be platform-dependent, and games-makers will never</span></div>
<div style="position:absolute;left:108.00px;top:285.85px" class="cls_007"><span class="cls_007">explicitly set it. However, the implementation will be set by LibGDX for the platform</span></div>
<div style="position:absolute;left:108.00px;top:298.45px" class="cls_007"><span class="cls_007">that LibGDX runs on. This means that the </span><span class="cls_009">newSound()</span><span class="cls_007"> method will contain an actual</span></div>
<div style="position:absolute;left:108.00px;top:311.05px" class="cls_007"><span class="cls_007">platform-dependent implementation. Thus, our </span><span class="cls_009">Sound</span><span class="cls_007"> interface is required because</span></div>
<div style="position:absolute;left:108.00px;top:323.65px" class="cls_007"><span class="cls_007">our core code is platform agnostic.</span></div>
<div style="position:absolute;left:108.00px;top:344.90px" class="cls_007"><span class="cls_007">Hopefully, this cleared everything up!</span></div>
<div style="position:absolute;left:108.00px;top:366.14px" class="cls_007"><span class="cls_007">Right, now we have a handle on our audio, but how do we play it? Well, this again is</span></div>
<div style="position:absolute;left:108.00px;top:378.74px" class="cls_007"><span class="cls_007">pleasingly simple:</span></div>
<div style="position:absolute;left:126.00px;top:399.67px" class="cls_021"><span class="cls_021">sound.play(1.0f);</span></div>
<div style="position:absolute;left:108.00px;top:419.41px" class="cls_007"><span class="cls_007">This will play our sound at the full volume; the </span><span class="cls_009">1.0</span><span class="cls_007"> value represents a ratio here. It</span></div>
<div style="position:absolute;left:108.00px;top:432.01px" class="cls_007"><span class="cls_007">will play our sound and then stop when it is finished and we can call this as many</span></div>
<div style="position:absolute;left:108.00px;top:444.61px" class="cls_007"><span class="cls_007">times as we like. There are more methods in the </span><span class="cls_009">Sound</span><span class="cls_007"> class, but they are beyond the</span></div>
<div style="position:absolute;left:108.00px;top:457.21px" class="cls_007"><span class="cls_007">scope of what we want to do here. So, I again suggest you check out the wiki and</span></div>
<div style="position:absolute;left:108.00px;top:469.81px" class="cls_007"><span class="cls_007">reference guide on the LibGDX website for more information.</span></div>
<div style="position:absolute;left:108.00px;top:491.06px" class="cls_007"><span class="cls_007">Finally, as with all the resources in the LibGDX world, once we are done with the</span></div>
<div style="position:absolute;left:108.00px;top:503.66px" class="cls_007"><span class="cls_007">audio, we need to dispose of it:</span></div>
<div style="position:absolute;left:126.00px;top:524.59px" class="cls_021"><span class="cls_021">sound.dispose();</span></div>
<div style="position:absolute;left:108.00px;top:553.03px" class="cls_025"><span class="cls_025">Music</span></div>
<div style="position:absolute;left:108.00px;top:576.01px" class="cls_007"><span class="cls_007">Onto the game music now! Music in a game is a bit different than our sound effects,</span></div>
<div style="position:absolute;left:108.00px;top:588.61px" class="cls_007"><span class="cls_007">as we might want our music to last longer by perhaps a couple of minutes and then</span></div>
<div style="position:absolute;left:108.00px;top:601.21px" class="cls_007"><span class="cls_007">we would want it to be looped!</span></div>
<div style="position:absolute;left:108.00px;top:622.45px" class="cls_007"><span class="cls_007">Since we saw that the </span><span class="cls_009">Sound</span><span class="cls_007"> class is better for short audio clips, the </span><span class="cls_009">Music</span><span class="cls_007"> class is</span></div>
<div style="position:absolute;left:108.00px;top:635.05px" class="cls_007"><span class="cls_007">suited to longer pieces.</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 170 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:147568px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background188.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 7</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">The following definition is from the LibGDX music wiki (</span><A HREF="https://github.com/libgdx/libgdx/wiki/Streaming-music">https://github.com/</A> </span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_009"><span class="cls_009"> </span><A HREF="https://github.com/libgdx/libgdx/wiki/Streaming-music">libgdx/libgdx/wiki/Streaming-music</A> <span class="cls_007">):</span></div>
<div style="position:absolute;left:129.60px;top:148.69px" class="cls_020"><span class="cls_020">For any sound that's longer than a few seconds it is preferable to stream it from</span></div>
<div style="position:absolute;left:129.60px;top:161.29px" class="cls_020"><span class="cls_020">disk instead of fully loading it into RAM. LibGDX provides a Music interface that</span></div>
<div style="position:absolute;left:129.60px;top:173.89px" class="cls_020"><span class="cls_020">lets you do that.</span></div>
<div style="position:absolute;left:108.00px;top:195.49px" class="cls_007"><span class="cls_007">OK, so now we have our MP3 file that has the audio we wish to play. However, how</span></div>
<div style="position:absolute;left:108.00px;top:208.09px" class="cls_007"><span class="cls_007">do we play it? The following code shows us how this is possible:</span></div>
<div style="position:absolute;left:126.00px;top:229.03px" class="cls_021"><span class="cls_021">Music music = Gdx.audio.newMusic(Gdx.files.internal</span></div>
<div style="position:absolute;left:126.00px;top:239.83px" class="cls_021"><span class="cls_021">("data/mymusic.mp3"));</span></div>
<div style="position:absolute;left:108.00px;top:259.57px" class="cls_007"><span class="cls_007">Doesn't this look a touch familiar? Well it should look very similar to the piece of</span></div>
<div style="position:absolute;left:108.00px;top:272.17px" class="cls_007"><span class="cls_007">code that we used before to load sounds. With a few exceptions, we will generate</span></div>
<div style="position:absolute;left:108.00px;top:284.77px" class="cls_007"><span class="cls_007">a </span><span class="cls_009">Music</span><span class="cls_007"> implementation again as we did for the platform-dependent aspects of</span></div>
<div style="position:absolute;left:108.00px;top:297.37px" class="cls_007"><span class="cls_007">LibGDX; this is the reason why we are loading the music this way.</span></div>
<div style="position:absolute;left:108.00px;top:318.62px" class="cls_007"><span class="cls_007">Once it is loaded, all we have to do is invoke the following code:</span></div>
<div style="position:absolute;left:126.00px;top:339.55px" class="cls_021"><span class="cls_021">music.play()</span></div>
<div style="position:absolute;left:108.00px;top:359.29px" class="cls_007"><span class="cls_007">There are other methods that can be called on the </span><span class="cls_009">Music</span><span class="cls_007"> object, such as </span><span class="cls_009">setLooping()</span><span class="cls_007">,</span></div>
<div style="position:absolute;left:108.00px;top:371.89px" class="cls_009"><span class="cls_009">setVolume()</span><span class="cls_007">, </span><span class="cls_009">stop()</span><span class="cls_007">, </span><span class="cls_009">pause()</span><span class="cls_007">, and others. We will come in contact with them when</span></div>
<div style="position:absolute;left:108.00px;top:384.49px" class="cls_007"><span class="cls_007">we add the sounds to our Pete the Platformer game.</span></div>
<div style="position:absolute;left:108.00px;top:405.73px" class="cls_007"><span class="cls_007">As with the </span><span class="cls_009">Sound</span><span class="cls_007"> class, we need to dispose of the object when we are done with it,</span></div>
<div style="position:absolute;left:108.00px;top:418.33px" class="cls_007"><span class="cls_007">as follows:</span></div>
<div style="position:absolute;left:126.00px;top:439.27px" class="cls_021"><span class="cls_021">music.dispose()</span></div>
<div style="position:absolute;left:108.00px;top:459.01px" class="cls_007"><span class="cls_007">It should be noted here that the </span><span class="cls_009">Music</span><span class="cls_007"> instances are heavy weight objects and that</span></div>
<div style="position:absolute;left:108.00px;top:471.61px" class="cls_007"><span class="cls_007">keeping them to a minimum is advised.</span></div>
<div style="position:absolute;left:108.00px;top:492.86px" class="cls_007"><span class="cls_007">In the final part, I will add the two types of audio classes that we have here. They can</span></div>
<div style="position:absolute;left:108.00px;top:505.45px" class="cls_007"><span class="cls_007">be cued up with the </span><span class="cls_009">AssetManager</span><span class="cls_007"> parameter, which is awesome! This means that</span></div>
<div style="position:absolute;left:108.00px;top:518.05px" class="cls_007"><span class="cls_007">we won't have to know too much about where the audio comes from!</span></div>
<div style="position:absolute;left:108.00px;top:547.99px" class="cls_025"><span class="cls_025">If Pete jumps in the game, does anyone hear</span></div>
<div style="position:absolute;left:108.00px;top:569.59px" class="cls_025"><span class="cls_025">him?</span></div>
<div style="position:absolute;left:108.00px;top:592.57px" class="cls_007"><span class="cls_007">Now that we have the tools to add audio to our game, we should! What we will do</span></div>
<div style="position:absolute;left:108.00px;top:605.17px" class="cls_007"><span class="cls_007">now is go through the code and add two sound effects: one for the jump and one for</span></div>
<div style="position:absolute;left:108.00px;top:617.77px" class="cls_007"><span class="cls_007">the collectable pick-up. We will also use a music track that we will keep on playing.</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 171 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:148370px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background189.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Extending the Platform</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Let's get down to the coding now!</span></div>
<div style="position:absolute;left:108.00px;top:135.73px" class="cls_007"><span class="cls_007">First, we need to add our audio to the </span><span class="cls_009">AssetManager</span><span class="cls_007"> parameter so that they will be</span></div>
<div style="position:absolute;left:108.00px;top:148.33px" class="cls_007"><span class="cls_007">loaded for us. There is actually a little side effect of sounds if they aren't loaded up in</span></div>
<div style="position:absolute;left:108.00px;top:160.93px" class="cls_007"><span class="cls_007">front as shown in the code, and this is usually manifested the first time you wish the</span></div>
<div style="position:absolute;left:108.00px;top:173.53px" class="cls_007"><span class="cls_007">audio to play; it won't, as it hasn't loaded yet.</span></div>
<div style="position:absolute;left:108.00px;top:194.77px" class="cls_007"><span class="cls_007">In our </span><span class="cls_009">LoadingScreen</span><span class="cls_007"> class, we should update the </span><span class="cls_009">show()</span><span class="cls_007"> method to get the</span></div>
<div style="position:absolute;left:108.00px;top:207.37px" class="cls_007"><span class="cls_007">audio references:</span></div>
<div style="position:absolute;left:126.00px;top:228.31px" class="cls_021"><span class="cls_021">public void show() {</span></div>
<div style="position:absolute;left:136.80px;top:240.55px" class="cls_021"><span class="cls_021">super.show();</span></div>
<div style="position:absolute;left:136.80px;top:252.79px" class="cls_021"><span class="cls_021">camera = new OrthographicCamera();</span></div>
<div style="position:absolute;left:136.80px;top:265.03px" class="cls_021"><span class="cls_021">camera.position.set(WORLD_WIDTH / 2, WORLD_HEIGHT / 2, 0);</span></div>
<div style="position:absolute;left:136.80px;top:277.27px" class="cls_021"><span class="cls_021">camera.update();</span></div>
<div style="position:absolute;left:136.80px;top:289.51px" class="cls_021"><span class="cls_021">viewport = new FitViewport(WORLD_WIDTH, WORLD_HEIGHT, camera);</span></div>
<div style="position:absolute;left:136.80px;top:301.75px" class="cls_021"><span class="cls_021">shapeRenderer = new ShapeRenderer();</span></div>
<div style="position:absolute;left:136.80px;top:313.99px" class="cls_021"><span class="cls_021">peteGame.getAssetManager().load("pete.png", Texture.class);</span></div>
<div style="position:absolute;left:136.80px;top:326.23px" class="cls_021"><span class="cls_021">peteGame.getAssetManager().load("acorn.png", Texture.class);</span></div>
<div style="position:absolute;left:136.80px;top:338.47px" class="cls_021"><span class="cls_021">peteGame.getAssetManager().load("pete.tmx", TiledMap.class);</span></div>
<div style="position:absolute;left:136.80px;top:350.71px" class="cls_021"><span class="cls_021">peteGame.getAssetManager().load("jump.wav", Sound.class);</span></div>
<div style="position:absolute;left:136.80px;top:362.95px" class="cls_021"><span class="cls_021">peteGame.getAssetManager().load("sacorn.wav", Sound.class);</span></div>
<div style="position:absolute;left:136.80px;top:375.19px" class="cls_021"><span class="cls_021">peteGame.getAssetManager().load("peteTheme.mp3", Music.class);</span></div>
<div style="position:absolute;left:126.00px;top:387.43px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:407.17px" class="cls_007"><span class="cls_007">Quite simply, LibGDX will automatically know what to do with the code.</span></div>
<div style="position:absolute;left:108.00px;top:428.42px" class="cls_007"><span class="cls_007">Next, let's get our sound effects going.</span></div>
<div style="position:absolute;left:108.00px;top:449.66px" class="cls_007"><span class="cls_007">We have a jump sound effect and a sound effect for when Pete picks up an acorn.</span></div>
<div style="position:absolute;left:108.00px;top:462.26px" class="cls_007"><span class="cls_007">Let's focus on the jump sound effect to start with.</span></div>
<div style="position:absolute;left:108.00px;top:483.49px" class="cls_007"><span class="cls_007">The first thing to achieve is to provide the </span><span class="cls_009">Pete</span><span class="cls_007"> class a reference to the jump </span><span class="cls_009">Sound</span></div>
<div style="position:absolute;left:108.00px;top:496.09px" class="cls_007"><span class="cls_007">object. Now, update the constructor of the class to take in a </span><span class="cls_009">Sound</span><span class="cls_007"> object and assign it</span></div>
<div style="position:absolute;left:108.00px;top:508.69px" class="cls_007"><span class="cls_007">to a local variable:</span></div>
<div style="position:absolute;left:126.00px;top:529.63px" class="cls_021"><span class="cls_021">private final Sound jumpSound;</span></div>
<div style="position:absolute;left:126.00px;top:541.87px" class="cls_021"><span class="cls_021">public Pete(Texture texture, Sound jumpSound) {</span></div>
<div style="position:absolute;left:136.80px;top:554.11px" class="cls_021"><span class="cls_021">this.jumpSound = jumpSound;</span></div>
<div style="position:absolute;left:136.80px;top:566.35px" class="cls_021"><span class="cls_021">// Code omitted for brevity</span></div>
<div style="position:absolute;left:126.00px;top:578.59px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:598.33px" class="cls_007"><span class="cls_007">This means that we now have access to the sound that we want inside the </span><span class="cls_009">Pete</span><span class="cls_007"> class.</span></div>
<div style="position:absolute;left:108.00px;top:619.58px" class="cls_007"><span class="cls_007">Next, we want to play this sound every time Pete jumps. To do this, we need to</span></div>
<div style="position:absolute;left:108.00px;top:632.18px" class="cls_007"><span class="cls_007">update the input handling code so that it plays the sound when the jump is initiated.</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 172 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:149172px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background190.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 7</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Update the </span><span class="cls_009">update()</span><span class="cls_007"> method with the following code:</span></div>
<div style="position:absolute;left:126.00px;top:135.43px" class="cls_021"><span class="cls_021">if (input.isKeyPressed(Input.Keys.UP) && !blockJump) {</span></div>
<div style="position:absolute;left:136.80px;top:147.67px" class="cls_021"><span class="cls_021">if (ySpeed != MAX_Y_SPEED) jumpSound.play();</span></div>
<div style="position:absolute;left:136.80px;top:159.91px" class="cls_021"><span class="cls_021">ySpeed = MAX_Y_SPEED;</span></div>
<div style="position:absolute;left:136.80px;top:172.15px" class="cls_021"><span class="cls_021">jumpYDistance += ySpeed;</span></div>
<div style="position:absolute;left:136.80px;top:184.39px" class="cls_021"><span class="cls_021">blockJump = jumpYDistance > MAX_JUMP_DISTANCE;</span></div>
<div style="position:absolute;left:126.00px;top:196.63px" class="cls_021"><span class="cls_021">} else {</span></div>
<div style="position:absolute;left:136.80px;top:208.87px" class="cls_021"><span class="cls_021">ySpeed = -MAX_Y_SPEED;</span></div>
<div style="position:absolute;left:136.80px;top:221.11px" class="cls_021"><span class="cls_021">blockJump = jumpYDistance > 0;</span></div>
<div style="position:absolute;left:126.00px;top:233.35px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:253.09px" class="cls_007"><span class="cls_007">Here, we are saying that if we are in the right conditions to jump and we haven't</span></div>
<div style="position:absolute;left:108.00px;top:265.69px" class="cls_007"><span class="cls_007">jumped yet (</span><span class="cls_009">ySpeed</span><span class="cls_007"> parameter is not </span><span class="cls_009">MAX_Y_SPEED</span><span class="cls_007">), then the jump sound should</span></div>
<div style="position:absolute;left:108.00px;top:278.29px" class="cls_007"><span class="cls_007">be played.</span></div>
<div style="position:absolute;left:108.00px;top:299.53px" class="cls_007"><span class="cls_007">The final piece of this puzzle is to update our instantiation of our </span><span class="cls_009">Pete</span><span class="cls_007"> class in the</span></div>
<div style="position:absolute;left:108.00px;top:312.13px" class="cls_009"><span class="cls_009">GameScreen</span><span class="cls_007"> class to pass the </span><span class="cls_009">Sound</span><span class="cls_007"> object:</span></div>
<div style="position:absolute;left:126.00px;top:333.07px" class="cls_021"><span class="cls_021">public void show() {</span></div>
<div style="position:absolute;left:136.80px;top:345.31px" class="cls_021"><span class="cls_021">// Code omitted for brevity</span></div>
<div style="position:absolute;left:136.80px;top:357.55px" class="cls_021"><span class="cls_021">pete = new Pete(</span></div>
<div style="position:absolute;left:147.60px;top:369.79px" class="cls_021"><span class="cls_021">peteGame.getAssetManager().get("pete.png", Texture.class),</span></div>
<div style="position:absolute;left:147.60px;top:382.03px" class="cls_021"><span class="cls_021">peteGame.getAssetManager().get("jump.wav", Sound.class)</span></div>
<div style="position:absolute;left:136.80px;top:394.27px" class="cls_021"><span class="cls_021">);</span></div>
<div style="position:absolute;left:136.80px;top:406.51px" class="cls_021"><span class="cls_021">pete.setPosition(0, WORLD_HEIGHT / 2);</span></div>
<div style="position:absolute;left:136.80px;top:418.75px" class="cls_021"><span class="cls_021">populateAcorns();</span></div>
<div style="position:absolute;left:126.00px;top:430.99px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:450.73px" class="cls_007"><span class="cls_007">Excellent; if you run the project now, you will find that we get a jump sound every</span></div>
<div style="position:absolute;left:108.00px;top:463.33px" class="cls_007"><span class="cls_007">time Pete jumps!</span></div>
<div style="position:absolute;left:108.00px;top:484.58px" class="cls_007"><span class="cls_007">Our second sound, the collectable audio, needs to be played when Pete collides with</span></div>
<div style="position:absolute;left:108.00px;top:497.17px" class="cls_007"><span class="cls_007">an acorn. There is a very straightforward update to our </span><span class="cls_009">GameScreen</span><span class="cls_007"> class that we</span></div>
<div style="position:absolute;left:108.00px;top:509.77px" class="cls_007"><span class="cls_007">need to make for this to happen. Let's update the </span><span class="cls_009">handlePeteCollisionWithAcorn()</span></div>
<div style="position:absolute;left:108.00px;top:522.37px" class="cls_007"><span class="cls_007">method, as follows:</span></div>
<div style="position:absolute;left:126.00px;top:543.31px" class="cls_021"><span class="cls_021">private void handlePeteCollisionWithAcorn() {</span></div>
<div style="position:absolute;left:136.80px;top:555.55px" class="cls_021"><span class="cls_021">for (Iterator&lt;Acorn> iter = acorns.iterator(); iter.hasNext(); )</span></div>
<div style="position:absolute;left:136.80px;top:566.35px" class="cls_021"><span class="cls_021">{</span></div>
<div style="position:absolute;left:147.60px;top:578.59px" class="cls_021"><span class="cls_021">Acorn acorn = iter.next();</span></div>
<div style="position:absolute;left:147.60px;top:590.83px" class="cls_021"><span class="cls_021">if (pete.getCollisionRectangle().overlaps</span></div>
<div style="position:absolute;left:147.60px;top:601.63px" class="cls_021"><span class="cls_021">(acorn.getCollisionRectangle())) {</span></div>
<div style="position:absolute;left:158.40px;top:613.87px" class="cls_021"><span class="cls_021">peteGame.getAssetManager().get("acorn.wav",</span></div>
<div style="position:absolute;left:158.40px;top:624.67px" class="cls_021"><span class="cls_021">Sound.class).play();</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 173 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:149974px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background191.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Extending the Platform</span></div>
<div style="position:absolute;left:158.40px;top:114.01px" class="cls_021"><span class="cls_021">iter.remove();</span></div>
<div style="position:absolute;left:147.60px;top:126.25px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:138.49px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:150.73px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:170.46px" class="cls_007"><span class="cls_007">As you can see, when the two collide, we play the sound! If you run the project now,</span></div>
<div style="position:absolute;left:108.00px;top:183.06px" class="cls_007"><span class="cls_007">you will find that the audio is played when you pick up the acorn.</span></div>
<div style="position:absolute;left:108.00px;top:204.30px" class="cls_007"><span class="cls_007">Our final task now is to get the music playing. Like the acorn pick-up sound effect,</span></div>
<div style="position:absolute;left:108.00px;top:216.90px" class="cls_007"><span class="cls_007">we can do this quite simply with one line of code. In our </span><span class="cls_009">GameScreen</span><span class="cls_007"> class, let's</span></div>
<div style="position:absolute;left:108.00px;top:229.50px" class="cls_007"><span class="cls_007">update the </span><span class="cls_009">show()</span><span class="cls_007"> method as follows:</span></div>
<div style="position:absolute;left:126.00px;top:250.44px" class="cls_021"><span class="cls_021">public void show() {</span></div>
<div style="position:absolute;left:136.80px;top:262.68px" class="cls_021"><span class="cls_021">// Code omitted for brevity</span></div>
<div style="position:absolute;left:136.80px;top:274.92px" class="cls_021"><span class="cls_021">peteGame.getAssetManager().get("peteTheme.mp3",</span></div>
<div style="position:absolute;left:136.80px;top:285.72px" class="cls_021"><span class="cls_021">Music.class).play();</span></div>
<div style="position:absolute;left:126.00px;top:297.96px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:317.70px" class="cls_007"><span class="cls_007">Now if you run the project, you will find that we have some background music</span></div>
<div style="position:absolute;left:108.00px;top:330.30px" class="cls_007"><span class="cls_007">as well!</span></div>
<div style="position:absolute;left:108.00px;top:351.54px" class="cls_007"><span class="cls_007">However, you will find that the music stops when it comes to the end of the audio.</span></div>
<div style="position:absolute;left:108.00px;top:364.14px" class="cls_007"><span class="cls_007">This won't do; what if the player hasn't finished your level yet? Well, to fix this, we</span></div>
<div style="position:absolute;left:108.00px;top:376.74px" class="cls_007"><span class="cls_007">can add the following line of code before the </span><span class="cls_009">play()</span><span class="cls_007"> method is invoked. So now, we</span></div>
<div style="position:absolute;left:108.00px;top:389.34px" class="cls_007"><span class="cls_007">end up with the following in our </span><span class="cls_009">show()</span><span class="cls_007"> method:</span></div>
<div style="position:absolute;left:126.00px;top:410.28px" class="cls_021"><span class="cls_021">peteGame.getAssetManager().get("peteTheme.mp3",</span></div>
<div style="position:absolute;left:126.00px;top:421.08px" class="cls_021"><span class="cls_021">Music.class).setLooping(true);</span></div>
<div style="position:absolute;left:126.00px;top:433.32px" class="cls_021"><span class="cls_021">peteGame.getAssetManager().get("peteTheme.mp3",</span></div>
<div style="position:absolute;left:126.00px;top:444.12px" class="cls_021"><span class="cls_021">Music.class).play();</span></div>
<div style="position:absolute;left:108.00px;top:463.86px" class="cls_007"><span class="cls_007">Aha! Now our music will loop forever!</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 174 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:150776px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background192.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 7</span></div>
<div style="position:absolute;left:108.00px;top:111.92px" class="cls_019"><span class="cls_019">Summary</span></div>
<div style="position:absolute;left:108.00px;top:136.90px" class="cls_007"><span class="cls_007">Well, there we go. What a nice little chapter we had there!</span></div>
<div style="position:absolute;left:108.00px;top:158.14px" class="cls_007"><span class="cls_007">We extended our level and scrolled the camera across the landscape. We successfully</span></div>
<div style="position:absolute;left:108.00px;top:170.74px" class="cls_007"><span class="cls_007">bounded the camera to the level so that we don't show any behind-the-scenes action</span></div>
<div style="position:absolute;left:108.00px;top:183.34px" class="cls_007"><span class="cls_007">to our players.</span></div>
<div style="position:absolute;left:108.00px;top:204.58px" class="cls_007"><span class="cls_007">We then took our initial dive to play sounds with LibGDX that allowed us to have</span></div>
<div style="position:absolute;left:108.00px;top:217.18px" class="cls_007"><span class="cls_007">background music along with some awesome sound effects. This will really liven up</span></div>
<div style="position:absolute;left:108.00px;top:229.78px" class="cls_007"><span class="cls_007">your own games.</span></div>
<div style="position:absolute;left:108.00px;top:251.02px" class="cls_007"><span class="cls_007">As with the previous game, there are some things that we didn't add to the game but</span></div>
<div style="position:absolute;left:108.00px;top:263.63px" class="cls_007"><span class="cls_007">we added to others, for example, a score. Here is a great opportunity for you to take</span></div>
<div style="position:absolute;left:108.00px;top:276.23px" class="cls_007"><span class="cls_007">what you have learned and apply it in Pete the Platformer!</span></div>
<div style="position:absolute;left:108.00px;top:297.47px" class="cls_007"><span class="cls_007">In the next chapter, we will start a new game. This game is based on a well-known</span></div>
<div style="position:absolute;left:108.00px;top:310.07px" class="cls_007"><span class="cls_007">game about a bunch of pigs and very upset angry birds! We will look at how to</span></div>
<div style="position:absolute;left:108.00px;top:322.67px" class="cls_007"><span class="cls_007">apply some of the physics tools that LibGDX has. These will allow us to create a</span></div>
<div style="position:absolute;left:108.00px;top:335.27px" class="cls_007"><span class="cls_007">simple, but fun game!</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 175 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:151578px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background193.jpg" width=612 height=792></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:151578px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background194.jpg" width=612 height=792></div>
<div style="position:absolute;left:122.16px;top:218.96px" class="cls_014"><span class="cls_014">Why Are All the Birds Angry?</span></div>
<div style="position:absolute;left:108.00px;top:272.66px" class="cls_007"><span class="cls_007">Another new chapter and another new game! This time around we are going to be</span></div>
<div style="position:absolute;left:108.00px;top:285.26px" class="cls_007"><span class="cls_007">looking at making a simplified version of a modern-day mobile classic. That's right;</span></div>
<div style="position:absolute;left:108.00px;top:297.86px" class="cls_007"><span class="cls_007">we are going to have a look at Angry Birds.</span></div>
<div style="position:absolute;left:108.00px;top:319.10px" class="cls_007"><span class="cls_007">For those that might be keen to see what this chapter will help you make, you can</span></div>
<div style="position:absolute;left:108.00px;top:331.70px" class="cls_007"><span class="cls_007">view a quick video of it at </span><A HREF="https://www.youtube.com/watch?v=7Xot-5pkjIY">https://www.youtube.com/watch?v=7Xot-5pkjIY</A> </span><span class="cls_007">.</span></div>
<div style="position:absolute;left:108.01px;top:352.94px" class="cls_007"><span class="cls_007">By choosing this game as a game to remake, we get the chance to look at some more</span></div>
<div style="position:absolute;left:108.01px;top:365.54px" class="cls_007"><span class="cls_007">advanced features of LibGDX, in particular the popular Box2D physics engine.</span></div>
<div style="position:absolute;left:108.01px;top:378.14px" class="cls_007"><span class="cls_007">Once again, we will be revisiting the great tool, that is, Tiled, for level creation and</span></div>
<div style="position:absolute;left:108.01px;top:390.74px" class="cls_007"><span class="cls_007">integration with Box2D, to simplify the design process.</span></div>
<div style="position:absolute;left:108.01px;top:411.98px" class="cls_007"><span class="cls_007">To finish off, we will look at handling different types of input for the mouse (or</span></div>
<div style="position:absolute;left:108.01px;top:424.58px" class="cls_007"><span class="cls_007">finger, for mobiles) with actions such as drag. We will cover the following topics:</span></div>
<div style="position:absolute;left:126.00px;top:445.83px" class="cls_007"><span class="cls_007">•  The what, why, and how of Angry Birds</span></div>
<div style="position:absolute;left:126.00px;top:462.74px" class="cls_007"><span class="cls_007">•  Setting up a new project with Box2D</span></div>
<div style="position:absolute;left:126.00px;top:479.66px" class="cls_007"><span class="cls_007">•  Box2D with LibGDX</span></div>
<div style="position:absolute;left:126.00px;top:496.57px" class="cls_007"><span class="cls_007">•  Creating a world</span></div>
<div style="position:absolute;left:126.00px;top:513.49px" class="cls_007"><span class="cls_007">•  Nutty birds</span></div>
<div style="position:absolute;left:108.00px;top:546.00px" class="cls_019"><span class="cls_019">The what, why, and how of Angry Birds</span></div>
<div style="position:absolute;left:108.00px;top:570.98px" class="cls_007"><span class="cls_007">For our final game, we are looking at Angry Birds; for some, this will have been a</span></div>
<div style="position:absolute;left:108.00px;top:583.58px" class="cls_007"><span class="cls_007">staple game in your library since its launch in 2009. But just in case you have lived</span></div>
<div style="position:absolute;left:108.00px;top:596.18px" class="cls_007"><span class="cls_007">under a rock for the last few years, let's have a quick rundown on the game.</span></div>
<div style="position:absolute;left:108.00px;top:617.42px" class="cls_007"><span class="cls_007">Angry Birds was first released on iPhones back in 2009, created by a company</span></div>
<div style="position:absolute;left:108.00px;top:630.02px" class="cls_007"><span class="cls_007">called Rovio. With around 2 billion downloads, it is one of the most popular</span></div>
<div style="position:absolute;left:108.00px;top:642.62px" class="cls_007"><span class="cls_007">games ever created.</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 177 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:152380px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background195.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Why Are All the Birds Angry?</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">From a gameplay perspective, the aim of the game is for the player to slingshot a</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">bird, a very angry bird, into the enemy pigs' fortress. The idea is to eliminate all</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">the pigs before the player runs out of birds to fling across the screen. The game</span></div>
<div style="position:absolute;left:108.00px;top:152.29px" class="cls_007"><span class="cls_007">mixes this action with a puzzle element as each fortress is differently designed with</span></div>
<div style="position:absolute;left:108.00px;top:164.89px" class="cls_007"><span class="cls_007">differing materials that require different attack tactics, and also there are different</span></div>
<div style="position:absolute;left:108.00px;top:177.49px" class="cls_007"><span class="cls_007">types of birds with different abilities that can be selected. Let's take a look at the</span></div>
<div style="position:absolute;left:108.00px;top:190.09px" class="cls_007"><span class="cls_007">following image:</span></div>
<div style="position:absolute;left:108.00px;top:445.62px" class="cls_007"><span class="cls_007">The preceding is a screenshot of Angry Birds, showing a bird being flung into the</span></div>
<div style="position:absolute;left:108.00px;top:458.22px" class="cls_007"><span class="cls_007">enemy fortress.</span></div>
<div style="position:absolute;left:108.00px;top:488.16px" class="cls_025"><span class="cls_025">Why?</span></div>
<div style="position:absolute;left:108.00px;top:511.14px" class="cls_007"><span class="cls_007">The reason I chose Angry Birds as the game is partly due to its popularity but also</span></div>
<div style="position:absolute;left:108.00px;top:523.74px" class="cls_007"><span class="cls_007">because of a technical aspect with the introduction of Box2D. In fact, Box2D is</span></div>
<div style="position:absolute;left:108.00px;top:536.34px" class="cls_007"><span class="cls_007">the exact same technology Rovio used in Angry Birds, so it made sense. This also</span></div>
<div style="position:absolute;left:108.00px;top:548.94px" class="cls_007"><span class="cls_007">introduces the external dependency ability of LibGDX.</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 178 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:153182px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background196.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 8</span></div>
<div style="position:absolute;left:108.00px;top:112.46px" class="cls_025"><span class="cls_025">How?</span></div>
<div style="position:absolute;left:108.00px;top:135.44px" class="cls_007"><span class="cls_007">LibGDX has this cool extension capability that allows you to add external</span></div>
<div style="position:absolute;left:108.00px;top:148.04px" class="cls_007"><span class="cls_007">libraries in a nice slick manner. Since Box2D is in essence a C/C++ library, it needs</span></div>
<div style="position:absolute;left:108.00px;top:160.64px" class="cls_007"><span class="cls_007">to be wrapped with some awesome Java Native wrapper code that funnily enough</span></div>
<div style="position:absolute;left:108.00px;top:173.24px" class="cls_007"><span class="cls_007">comes with the LibGDX extension. So, all the methods available natively will be</span></div>
<div style="position:absolute;left:108.00px;top:185.84px" class="cls_007"><span class="cls_007">available to us!</span></div>
<div style="position:absolute;left:108.00px;top:207.09px" class="cls_007"><span class="cls_007">We will have Box2D for the physics, and then we will use Tiled for our level design.</span></div>
<div style="position:absolute;left:108.00px;top:219.69px" class="cls_007"><span class="cls_007">We then just have to glue it all together using LibGDX!</span></div>
<div style="position:absolute;left:108.00px;top:252.18px" class="cls_019"><span class="cls_019">Setting up LibGDX with Box2D</span></div>
<div style="position:absolute;left:108.00px;top:277.16px" class="cls_007"><span class="cls_007">Right, we need a LibGDX project that has Box2D support. The question is, how do</span></div>
<div style="position:absolute;left:108.00px;top:289.76px" class="cls_007"><span class="cls_007">we go ahead and create that? Well, the eagle-eyed among you will have noticed that</span></div>
<div style="position:absolute;left:108.00px;top:302.36px" class="cls_007"><span class="cls_007">Box2D was a selectable option in the project setup application we used previously</span></div>
<div style="position:absolute;left:108.00px;top:314.96px" class="cls_007"><span class="cls_007">and in fact it will have been already preselected!</span></div>
<div style="position:absolute;left:108.00px;top:415.25px" class="cls_007"><span class="cls_007">The preceding partial screenshot of the setup application shows what you see when</span></div>
<div style="position:absolute;left:108.00px;top:427.85px" class="cls_007"><span class="cls_007">you rerun the application.</span></div>
<div style="position:absolute;left:108.00px;top:449.09px" class="cls_007"><span class="cls_007">Set up the application like we have done so previously, but with Box2D ticked, and</span></div>
<div style="position:absolute;left:108.00px;top:461.69px" class="cls_007"><span class="cls_007">then we are good to go!</span></div>
<div style="position:absolute;left:108.00px;top:491.63px" class="cls_025"><span class="cls_025">Code reuse</span></div>
<div style="position:absolute;left:108.00px;top:514.61px" class="cls_007"><span class="cls_007">Next, before we dive into Box2D, let's reuse some code from our previous projects.</span></div>
<div style="position:absolute;left:108.00px;top:535.85px" class="cls_007"><span class="cls_007">Firstly, we should update our </span><span class="cls_009">NuttyGame</span><span class="cls_007"> class so it extends the </span><span class="cls_009">Game</span><span class="cls_007"> class. This isn't</span></div>
<div style="position:absolute;left:108.00px;top:548.45px" class="cls_007"><span class="cls_007">something new, just look at our previous games!</span></div>
<div style="position:absolute;left:108.00px;top:569.69px" class="cls_007"><span class="cls_007">Next, we can bring across our </span><span class="cls_009">LoadingScreen</span><span class="cls_007"> class and create a simple </span><span class="cls_009">GameScreen</span></div>
<div style="position:absolute;left:108.00px;top:582.29px" class="cls_007"><span class="cls_007">class. Don't worry about screen sizes for now, we will come to them later.</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 179 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:153984px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background197.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Why Are All the Birds Angry?</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Hopefully, your game class will look like this:</span></div>
<div style="position:absolute;left:126.00px;top:135.43px" class="cls_021"><span class="cls_021">public class NuttyGame extends Game {</span></div>
<div style="position:absolute;left:136.80px;top:147.67px" class="cls_021"><span class="cls_021">private final AssetManager assetManager = new AssetManager();</span></div>
<div style="position:absolute;left:136.80px;top:172.15px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:136.80px;top:184.39px" class="cls_021"><span class="cls_021">public void create() {</span></div>
<div style="position:absolute;left:147.60px;top:196.63px" class="cls_021"><span class="cls_021">setScreen(new LoadingScreen(this));</span></div>
<div style="position:absolute;left:136.80px;top:208.87px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:233.35px" class="cls_021"><span class="cls_021">public AssetManager getAssetManager() {</span></div>
<div style="position:absolute;left:147.60px;top:245.59px" class="cls_021"><span class="cls_021">return assetManager;</span></div>
<div style="position:absolute;left:136.80px;top:257.83px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:270.07px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:289.81px" class="cls_007"><span class="cls_007">Looks familiar? It should, we have used this stuff before!</span></div>
<div style="position:absolute;left:108.00px;top:319.75px" class="cls_025"><span class="cls_025">Box2D with LibGDX</span></div>
<div style="position:absolute;left:108.00px;top:342.73px" class="cls_007"><span class="cls_007">Just before we jump into writing some code to make our new game, we should really</span></div>
<div style="position:absolute;left:108.00px;top:355.33px" class="cls_007"><span class="cls_007">cover the basics of Box2D so that we can get an understanding of what we are trying</span></div>
<div style="position:absolute;left:108.00px;top:367.93px" class="cls_007"><span class="cls_007">to achieve here.</span></div>
<div style="position:absolute;left:108.00px;top:389.18px" class="cls_007"><span class="cls_007">Essentially, Box2D is a physics library and an extremely popular one at that.</span></div>
<div style="position:absolute;left:108.00px;top:410.42px" class="cls_007"><span class="cls_007">It has its own website and I suggest you check it out. You can check it out</span></div>
<div style="position:absolute;left:108.00px;top:423.01px" class="cls_007"><span class="cls_007">at </span><A HREF="http://www.box2d.org">http://www.box2d.org</A> </span><span class="cls_007">, if you wish to get even more technical with its</span></div>
<div style="position:absolute;left:108.00px;top:435.61px" class="cls_007"><span class="cls_007">use—since we are just going to have a taster to start off with.</span></div>
<div style="position:absolute;left:108.00px;top:456.86px" class="cls_007"><span class="cls_007">You might be wondering why am I directing you to their website when we are using</span></div>
<div style="position:absolute;left:108.00px;top:469.46px" class="cls_007"><span class="cls_007">LibGDX; well, as I mentioned before, LibGDX provides a thin Java wrapper to the</span></div>
<div style="position:absolute;left:108.00px;top:482.06px" class="cls_007"><span class="cls_007">native C++ library, so the API is going to be the same. Aren't those guys awesome?</span></div>
<div style="position:absolute;left:108.00px;top:503.30px" class="cls_007"><span class="cls_007">For a more LibGDX-style approach, you can check out their awesome wiki.</span></div>
<div style="position:absolute;left:108.00px;top:515.90px" class="cls_007"><span class="cls_007">You should have guessed I was going to bring that up, right? They have a nice</span></div>
<div style="position:absolute;left:108.00px;top:528.50px" class="cls_007"><span class="cls_007">introduction to its use as well. You can find it at </span><A HREF="https://github.com/libgdx/libgdx/wiki/Box2d">https://github.com/libgdx/</A> </span></div>
<div style="position:absolute;left:108.00px;top:541.09px" class="cls_009"><span class="cls_009"> </span><A HREF="https://github.com/libgdx/libgdx/wiki/Box2d">libgdx/wiki/Box2d</A> <span class="cls_007">.</span></div>
<div style="position:absolute;left:108.00px;top:562.34px" class="cls_007"><span class="cls_007">However, what we will do now is cover some Box2D terminology.</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 180 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:154786px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background198.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 8</span></div>
<div style="position:absolute;left:108.00px;top:113.01px" class="cls_012"><span class="cls_012">Box2D concepts</span></div>
<div style="position:absolute;left:108.00px;top:133.99px" class="cls_007"><span class="cls_007">Box2D contains several different objects that can be used to simulate real-world</span></div>
<div style="position:absolute;left:108.00px;top:146.59px" class="cls_007"><span class="cls_007">physics. What I will do now is highlight the important ones. Like before, you can</span></div>
<div style="position:absolute;left:108.00px;top:159.19px" class="cls_007"><span class="cls_007">check the documentation to enhance your understanding. In fact, it is from the core</span></div>
<div style="position:absolute;left:108.00px;top:171.79px" class="cls_007"><span class="cls_007">concepts section that I have taken the following.</span></div>
<div style="position:absolute;left:108.00px;top:195.17px" class="cls_006"><span class="cls_006">Shape</span></div>
<div style="position:absolute;left:108.00px;top:214.15px" class="cls_007"><span class="cls_007">A shape is essentially a 2D geometrical object, such as a circle.</span></div>
<div style="position:absolute;left:108.00px;top:237.53px" class="cls_006"><span class="cls_006">Rigid body</span></div>
<div style="position:absolute;left:108.00px;top:256.51px" class="cls_007"><span class="cls_007">A rigid body is a chunk of matter so strong that the distance between any two bits of</span></div>
<div style="position:absolute;left:108.00px;top:269.11px" class="cls_007"><span class="cls_007">matter on the chunk is constant. You should think about this as a hard object, such as</span></div>
<div style="position:absolute;left:108.00px;top:281.71px" class="cls_007"><span class="cls_007">a diamond.</span></div>
<div style="position:absolute;left:108.00px;top:305.09px" class="cls_006"><span class="cls_006">Fixture</span></div>
<div style="position:absolute;left:108.00px;top:324.07px" class="cls_007"><span class="cls_007">A fixture maps a shape to a body and adds real-world material properties such as</span></div>
<div style="position:absolute;left:108.00px;top:336.67px" class="cls_007"><span class="cls_007">friction, restitution, and density. This also allows the shape to be recognized in the</span></div>
<div style="position:absolute;left:108.00px;top:349.27px" class="cls_007"><span class="cls_007">collision system.</span></div>
<div style="position:absolute;left:108.00px;top:372.65px" class="cls_006"><span class="cls_006">Constraint</span></div>
<div style="position:absolute;left:108.00px;top:391.63px" class="cls_007"><span class="cls_007">Every 2D body has three degrees of movement, essentially your x and y coordinates</span></div>
<div style="position:absolute;left:108.00px;top:404.23px" class="cls_007"><span class="cls_007">and one for rotation. A constraint allows you remove these, much like pinning a</span></div>
<div style="position:absolute;left:108.00px;top:416.83px" class="cls_007"><span class="cls_007">body to a wall, and it becomes like a pendulum.</span></div>
<div style="position:absolute;left:108.00px;top:440.21px" class="cls_006"><span class="cls_006">The contact constraint</span></div>
<div style="position:absolute;left:108.00px;top:459.19px" class="cls_007"><span class="cls_007">This is a special type of constraint that is used to prevent rigid bodies from penetrating</span></div>
<div style="position:absolute;left:108.00px;top:471.79px" class="cls_007"><span class="cls_007">one another, and it also simulates friction and restitution. You should note that Box2D</span></div>
<div style="position:absolute;left:108.00px;top:484.39px" class="cls_007"><span class="cls_007">will create these for us.</span></div>
<div style="position:absolute;left:108.00px;top:507.77px" class="cls_006"><span class="cls_006">Joint</span></div>
<div style="position:absolute;left:108.00px;top:526.75px" class="cls_007"><span class="cls_007">This is a type of constraint that is used to hold two or more bodies together. There</span></div>
<div style="position:absolute;left:108.00px;top:539.35px" class="cls_007"><span class="cls_007">are several different kinds/types of joint in the Box2D world.</span></div>
<div style="position:absolute;left:108.00px;top:562.73px" class="cls_006"><span class="cls_006">The joint limit</span></div>
<div style="position:absolute;left:108.00px;top:581.71px" class="cls_007"><span class="cls_007">This limits the range of motion of a joint.</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 181 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:155588px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background199.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Why Are All the Birds Angry?</span></div>
<div style="position:absolute;left:108.00px;top:113.55px" class="cls_006"><span class="cls_006">The joint motor</span></div>
<div style="position:absolute;left:108.00px;top:132.53px" class="cls_007"><span class="cls_007">This motor drives the motion of the connected bodies according to the degree</span></div>
<div style="position:absolute;left:108.00px;top:145.13px" class="cls_007"><span class="cls_007">of freedom.</span></div>
<div style="position:absolute;left:108.00px;top:168.51px" class="cls_006"><span class="cls_006">World</span></div>
<div style="position:absolute;left:108.00px;top:187.49px" class="cls_007"><span class="cls_007">This is an all-encompassing place where all the bodies, fixtures, and constraints</span></div>
<div style="position:absolute;left:108.00px;top:200.09px" class="cls_007"><span class="cls_007">interact together.</span></div>
<div style="position:absolute;left:108.00px;top:223.47px" class="cls_006"><span class="cls_006">Solver</span></div>
<div style="position:absolute;left:108.00px;top:242.45px" class="cls_007"><span class="cls_007">The world has one of these; they are used to advance time and resolve contact and</span></div>
<div style="position:absolute;left:107.99px;top:255.05px" class="cls_007"><span class="cls_007">joint constraints:</span></div>
<div style="position:absolute;left:125.99px;top:276.29px" class="cls_007"><span class="cls_007">•  Continuous collision</span></div>
<div style="position:absolute;left:125.99px;top:293.21px" class="cls_007"><span class="cls_007">•  The solver advances bodies in time using discrete time steps</span></div>
<div style="position:absolute;left:107.98px;top:314.45px" class="cls_007"><span class="cls_007">Right, those were the concepts; hopefully, that is enough to get us going!</span></div>
<div style="position:absolute;left:107.98px;top:335.69px" class="cls_007"><span class="cls_007">The final thing to discuss before writing some code will be units.</span></div>
<div style="position:absolute;left:108.00px;top:359.07px" class="cls_006"><span class="cls_006">Units</span></div>
<div style="position:absolute;left:108.00px;top:378.05px" class="cls_007"><span class="cls_007">Box2D works in a meters-kilogram-second (MKS) world. This means we shouldn't</span></div>
<div style="position:absolute;left:108.00px;top:390.65px" class="cls_007"><span class="cls_007">work in a pixel-based environment. But that's OK as we haven't since the early</span></div>
<div style="position:absolute;left:108.00px;top:403.25px" class="cls_007"><span class="cls_007">part of this book. Think of the </span><span class="cls_009">Viewport</span><span class="cls_007"> class, for example. Now we need to think</span></div>
<div style="position:absolute;left:108.00px;top:415.85px" class="cls_007"><span class="cls_007">of everything in terms of meters, kilograms, and seconds. Considering the tuning</span></div>
<div style="position:absolute;left:108.00px;top:428.45px" class="cls_007"><span class="cls_007">that has gone into Box2D, they recommend moving shapes in the range of 0.1 to 10</span></div>
<div style="position:absolute;left:108.00px;top:441.05px" class="cls_007"><span class="cls_007">meters. So, as they say in their documentation at </span><A HREF="http://box2d.org/manual.pdf 1.7 Units:">http://box2d.org/manual.pdf</A> </span></div>
<div style="position:absolute;left:108.00px;top:454.65px" class="cls_009"><span class="cls_009"> </span><A HREF="http://box2d.org/manual.pdf 1.7 Units:">1.7 Units:</A> </div>
<div style="position:absolute;left:129.60px;top:475.25px" class="cls_020"><span class="cls_020">"Box2D has been tuned to work well with moving shapes between 0.1 and 10</span></div>
<div style="position:absolute;left:129.60px;top:487.85px" class="cls_020"><span class="cls_020">meters. So this means objects between soup cans and buses in size should work</span></div>
<div style="position:absolute;left:129.60px;top:500.45px" class="cls_020"><span class="cls_020">well. Static shapes may be up to 50 meters long without trouble."</span></div>
<div style="position:absolute;left:108.00px;top:522.05px" class="cls_007"><span class="cls_007">Just to back up the idea of not mapping 1 pixel to 1 meter, if you had a 64x 64-pixel</span></div>
<div style="position:absolute;left:108.00px;top:534.65px" class="cls_007"><span class="cls_007">sprite, that would translate to a 64 x 64 meter Box2D representation!</span></div>
<div style="position:absolute;left:108.00px;top:555.89px" class="cls_007"><span class="cls_007">Oh! One last final, absolutely final thing. We will be working in radians not degrees!</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 182 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:156390px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background200.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 8</span></div>
<div style="position:absolute;left:108.00px;top:112.46px" class="cls_025"><span class="cls_025">Creating a world!</span></div>
<div style="position:absolute;left:108.00px;top:135.44px" class="cls_007"><span class="cls_007">Excellent! Now we can dive into code and start creating a world. Once we have a</span></div>
<div style="position:absolute;left:108.00px;top:148.04px" class="cls_007"><span class="cls_007">world, we can look at populating it.</span></div>
<div style="position:absolute;left:108.00px;top:169.29px" class="cls_007"><span class="cls_007">Firstly, we need to tell LibGDX to load the native libraries for Box2D. This is done</span></div>
<div style="position:absolute;left:108.00px;top:181.88px" class="cls_007"><span class="cls_007">with a simple static initialization call. Let's update the </span><span class="cls_009">create</span><span class="cls_007"> method in our game</span></div>
<div style="position:absolute;left:108.00px;top:194.48px" class="cls_007"><span class="cls_007">class to do this:</span></div>
<div style="position:absolute;left:126.00px;top:215.42px" class="cls_021"><span class="cls_021">public void create() {</span></div>
<div style="position:absolute;left:136.80px;top:227.66px" class="cls_021"><span class="cls_021">Box2D.init();</span></div>
<div style="position:absolute;left:136.80px;top:239.90px" class="cls_021"><span class="cls_021">setScreen(new LoadingScreen(this));</span></div>
<div style="position:absolute;left:126.00px;top:252.14px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:271.88px" class="cls_007"><span class="cls_007">Good stuff! Now we are ready to create a world. If we didn't do this, we might run</span></div>
<div style="position:absolute;left:108.00px;top:284.48px" class="cls_007"><span class="cls_007">into some strange class-loading issues.</span></div>
<div style="position:absolute;left:108.00px;top:305.73px" class="cls_007"><span class="cls_007">Next, let's create the world! We will need to define the following fields in our</span></div>
<div style="position:absolute;left:108.00px;top:318.32px" class="cls_009"><span class="cls_009">GameScreen</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:126.00px;top:339.26px" class="cls_021"><span class="cls_021">private static final float WORLD_WIDTH = 960;</span></div>
<div style="position:absolute;left:126.00px;top:351.50px" class="cls_021"><span class="cls_021">private static final float WORLD_HEIGHT = 544;</span></div>
<div style="position:absolute;left:126.00px;top:363.74px" class="cls_021"><span class="cls_021">private static final float UNITS_PER_METER = 16F;</span></div>
<div style="position:absolute;left:126.00px;top:375.98px" class="cls_021"><span class="cls_021">private World world;</span></div>
<div style="position:absolute;left:126.00px;top:388.22px" class="cls_021"><span class="cls_021">private Box2DDebugRenderer debugRenderer;</span></div>
<div style="position:absolute;left:126.00px;top:400.46px" class="cls_021"><span class="cls_021">private Body body;</span></div>
<div style="position:absolute;left:108.00px;top:420.20px" class="cls_007"><span class="cls_007">We have defined a world, debug renderer, and body. This body will just be used for</span></div>
<div style="position:absolute;left:108.00px;top:432.80px" class="cls_007"><span class="cls_007">a quick example before moving on. The units per meter will convert from our game</span></div>
<div style="position:absolute;left:108.00px;top:445.40px" class="cls_007"><span class="cls_007">world to the LibGDX world. This value will always vary depending on how you set</span></div>
<div style="position:absolute;left:108.00px;top:458.00px" class="cls_007"><span class="cls_007">your games up.</span></div>
<div style="position:absolute;left:108.00px;top:479.24px" class="cls_007"><span class="cls_007">In our </span><span class="cls_009">show()</span><span class="cls_007"> method, we need to instantiate our objects:</span></div>
<div style="position:absolute;left:126.00px;top:500.18px" class="cls_021"><span class="cls_021">public void show() {</span></div>
<div style="position:absolute;left:136.80px;top:512.42px" class="cls_021"><span class="cls_021">world = new World(new Vector2(0, -10F), true);</span></div>
<div style="position:absolute;left:136.80px;top:524.66px" class="cls_021"><span class="cls_021">debugRenderer = new Box2DDebugRenderer();</span></div>
<div style="position:absolute;left:136.80px;top:536.90px" class="cls_021"><span class="cls_021">body = createBody();</span></div>
<div style="position:absolute;left:136.80px;top:549.14px" class="cls_021"><span class="cls_021">body.setTransform(100, 120, 0);</span></div>
<div style="position:absolute;left:136.80px;top:561.38px" class="cls_021"><span class="cls_021">camera = new OrthographicCamera();</span></div>
<div style="position:absolute;left:136.80px;top:573.62px" class="cls_021"><span class="cls_021">viewport = new FitViewport(WORLD_WIDTH, WORLD_HEIGHT, camera);</span></div>
<div style="position:absolute;left:136.80px;top:585.86px" class="cls_021"><span class="cls_021">viewport.apply(true);</span></div>
<div style="position:absolute;left:136.80px;top:598.10px" class="cls_021"><span class="cls_021">shapeRenderer = new ShapeRenderer();</span></div>
<div style="position:absolute;left:126.00px;top:610.34px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 183 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:157192px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background201.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Why Are All the Birds Angry?</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Here we have created our world. We have defined some gravity, the </span><span class="cls_009">Vector2</span><span class="cls_007"> class,</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">and we have zero impact in a horizontal plane but we have defined </span><span class="cls_009">-10</span><span class="cls_007"> on the</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">vertical plane. This is to mimic real-world gravity—OK it should be 9.81m/s, but let's</span></div>
<div style="position:absolute;left:108.00px;top:152.29px" class="cls_007"><span class="cls_007">just keep it simple. We then create our debug renderer, and then create a body. Once</span></div>
<div style="position:absolute;left:108.00px;top:164.89px" class="cls_007"><span class="cls_007">we have this body, we set its position on screen. The Boolean flag defines whether</span></div>
<div style="position:absolute;left:108.00px;top:177.49px" class="cls_007"><span class="cls_007">we want to simulate inactive bodies, if we end up with too many bodes we can set</span></div>
<div style="position:absolute;left:108.00px;top:190.09px" class="cls_007"><span class="cls_007">this to </span><span class="cls_009">False</span><span class="cls_007"> to improve performance.</span></div>
<div style="position:absolute;left:108.00px;top:211.34px" class="cls_007"><span class="cls_007">To create a body, we will use the following code snippet:</span></div>
<div style="position:absolute;left:126.00px;top:232.27px" class="cls_021"><span class="cls_021">private Body createBody() {</span></div>
<div style="position:absolute;left:136.80px;top:244.51px" class="cls_021"><span class="cls_021">BodyDef def = new BodyDef();</span></div>
<div style="position:absolute;left:136.80px;top:256.75px" class="cls_021"><span class="cls_021">def.type = BodyDef.BodyType.DynamicBody;</span></div>
<div style="position:absolute;left:136.80px;top:268.99px" class="cls_021"><span class="cls_021">Body box = world.createBody(def);</span></div>
<div style="position:absolute;left:136.80px;top:281.23px" class="cls_021"><span class="cls_021">PolygonShape poly = new PolygonShape();</span></div>
<div style="position:absolute;left:136.80px;top:293.47px" class="cls_021"><span class="cls_021">poly.setAsBox(60/UNITS_PER_METER, 60/UNITS_PER_METER);</span></div>
<div style="position:absolute;left:136.80px;top:305.71px" class="cls_021"><span class="cls_021">box.createFixture(poly, 1);</span></div>
<div style="position:absolute;left:136.80px;top:317.95px" class="cls_021"><span class="cls_021">poly.dispose();</span></div>
<div style="position:absolute;left:136.80px;top:330.19px" class="cls_021"><span class="cls_021">return box;</span></div>
<div style="position:absolute;left:126.00px;top:342.43px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:362.17px" class="cls_007"><span class="cls_007">Here we first define the body definition; in this case it is going to be a dynamic rigid</span></div>
<div style="position:absolute;left:108.00px;top:374.77px" class="cls_007"><span class="cls_007">body, as it is going to move!</span></div>
<div style="position:absolute;left:108.00px;top:396.01px" class="cls_007"><span class="cls_007">We then use the </span><span class="cls_009">World</span><span class="cls_007"> object to create the body from the definition. Next we define</span></div>
<div style="position:absolute;left:108.00px;top:408.61px" class="cls_007"><span class="cls_007">the collision fixture. In this case, we are using </span><span class="cls_009">PolygonShape</span><span class="cls_007"> that we are setting to</span></div>
<div style="position:absolute;left:108.00px;top:421.21px" class="cls_007"><span class="cls_007">a square. We create the fixture and then dispose of the shape. Finally, we return the</span></div>
<div style="position:absolute;left:108.00px;top:433.81px" class="cls_007"><span class="cls_007">body back.</span></div>
<div style="position:absolute;left:108.00px;top:455.06px" class="cls_007"><span class="cls_007">Now, we need to tell the world to step through and update, otherwise nothing</span></div>
<div style="position:absolute;left:108.00px;top:467.66px" class="cls_007"><span class="cls_007">will happen:</span></div>
<div style="position:absolute;left:126.00px;top:488.59px" class="cls_021"><span class="cls_021">private void update(float delta) {</span></div>
<div style="position:absolute;left:136.80px;top:500.83px" class="cls_021"><span class="cls_021">world.step(delta, 6, 2);</span></div>
<div style="position:absolute;left:136.80px;top:513.07px" class="cls_021"><span class="cls_021">body.setAwake(true);</span></div>
<div style="position:absolute;left:126.00px;top:525.31px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:545.05px" class="cls_007"><span class="cls_007">Here we step through with the delta value as our time step—delta being the time</span></div>
<div style="position:absolute;left:108.00px;top:557.65px" class="cls_007"><span class="cls_007">between frames, and then we provide the velocity iterations and position iterations.</span></div>
<div style="position:absolute;left:108.00px;top:570.25px" class="cls_007"><span class="cls_007">You might be wondering why they are 6 and 2. Well, those who visited the LibGDX</span></div>
<div style="position:absolute;left:108.00px;top:582.85px" class="cls_007"><span class="cls_007">wiki will notice that these are the numbers they used, so we will just go with that</span></div>
<div style="position:absolute;left:108.00px;top:595.45px" class="cls_007"><span class="cls_007">for now. For more information on what effect those numbers have on the game, I</span></div>
<div style="position:absolute;left:108.00px;top:608.05px" class="cls_007"><span class="cls_007">suggest reading up on the Box2D documentation.</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 184 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:157994px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background202.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 8</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Our final step is to get the debug renderer to draw out what we have, which is a</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">simple one line of code, in our </span><span class="cls_009">drawDebug()</span><span class="cls_007"> method. Let's add the following:</span></div>
<div style="position:absolute;left:126.00px;top:148.03px" class="cls_021"><span class="cls_021">debugRenderer.render(world, camera.combined);</span></div>
<div style="position:absolute;left:108.00px;top:167.77px" class="cls_007"><span class="cls_007">With that all in place, if you run up the project, you should get the following:</span></div>
<div style="position:absolute;left:108.00px;top:492.02px" class="cls_007"><span class="cls_007">But not only that, the box should be falling down. If you leave it running, it will</span></div>
<div style="position:absolute;left:108.00px;top:504.62px" class="cls_007"><span class="cls_007">eventually disappear off the screen.</span></div>
<div style="position:absolute;left:108.00px;top:525.86px" class="cls_007"><span class="cls_007">Yey! You have done your first Box2D coding. I know, I know, it isn't much. But it</span></div>
<div style="position:absolute;left:108.00px;top:538.46px" class="cls_007"><span class="cls_007">is a start!</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 185 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:158796px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background203.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Why Are All the Birds Angry?</span></div>
<div style="position:absolute;left:108.00px;top:111.92px" class="cls_019"><span class="cls_019">Nutty Birds</span></div>
<div style="position:absolute;left:108.00px;top:136.90px" class="cls_007"><span class="cls_007">Right, now is the time to introduce the game we are going to make ourselves. We</span></div>
<div style="position:absolute;left:108.00px;top:149.50px" class="cls_007"><span class="cls_007">shall call it Nutty Birds. We will follow the same gameplay as Angry Birds. Except,</span></div>
<div style="position:absolute;left:108.00px;top:162.10px" class="cls_007"><span class="cls_007">instead of flinging the birds at pigs, we will bring back our friend Pete the Squirrel</span></div>
<div style="position:absolute;left:108.00px;top:174.70px" class="cls_007"><span class="cls_007">and he will be lobbing his acorns at the birds—pesky birds living in his tree,</span></div>
<div style="position:absolute;left:108.00px;top:187.30px" class="cls_007"><span class="cls_007">probably stealing his acorns.</span></div>
<div style="position:absolute;left:108.00px;top:450.67px" class="cls_007"><span class="cls_007">Here is a mock up of how the game will, hopefully, end up looking.</span></div>
<div style="position:absolute;left:108.00px;top:471.91px" class="cls_007"><span class="cls_007">Pete will fling his acorn toward a simple fort. Perhaps this is level 1, where one of the</span></div>
<div style="position:absolute;left:108.00px;top:484.51px" class="cls_007"><span class="cls_007">naughty birds is hiding. As with Angry Birds, if the bird is hit with enough force, the</span></div>
<div style="position:absolute;left:108.00px;top:497.11px" class="cls_007"><span class="cls_007">pigs will disappear and the player will win the level.</span></div>
<div style="position:absolute;left:108.00px;top:527.05px" class="cls_025"><span class="cls_025">Let's get tiling!</span></div>
<div style="position:absolute;left:108.00px;top:550.03px" class="cls_007"><span class="cls_007">First things first, let's get the level screen set up. To do this, we are going to use that</span></div>
<div style="position:absolute;left:108.00px;top:562.63px" class="cls_007"><span class="cls_007">awesome tiling tool called Tiled again. However, this time we are going to do two,</span></div>
<div style="position:absolute;left:108.00px;top:575.23px" class="cls_007"><span class="cls_007">yes two! things with it.</span></div>
<div style="position:absolute;left:108.00px;top:596.47px" class="cls_007"><span class="cls_007">I am going to assume that you are up to speed with how Tiled works so I am not</span></div>
<div style="position:absolute;left:108.00px;top:609.07px" class="cls_007"><span class="cls_007">going to go into too much detail on the setup as I did before.</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 186 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:159598px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background204.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 8</span></div>
<div style="position:absolute;left:108.00px;top:113.01px" class="cls_012"><span class="cls_012">The groundwork</span></div>
<div style="position:absolute;left:108.00px;top:133.99px" class="cls_007"><span class="cls_007">To get started, create a new tile map and set it to be 30 x 17 tiles big with a tile size</span></div>
<div style="position:absolute;left:108.00px;top:146.59px" class="cls_007"><span class="cls_007">of 32 x 32 pixels.</span></div>
<div style="position:absolute;left:108.00px;top:167.83px" class="cls_007"><span class="cls_007">Then, on the </span><span class="cls_023">Layers</span><span class="cls_007"> tab, rename the tiled layer to </span><span class="cls_009">Ground</span><span class="cls_007">, and then add a new layer,</span></div>
<div style="position:absolute;left:108.00px;top:180.43px" class="cls_007"><span class="cls_007">but this time choose the image layer! The image layer is, simply put, a layer that is</span></div>
<div style="position:absolute;left:108.00px;top:193.03px" class="cls_007"><span class="cls_007">represented by an image—perfect for our background. Call this layer </span><span class="cls_009">Background</span></div>
<div style="position:absolute;left:108.00px;top:205.63px" class="cls_007"><span class="cls_007">and then make sure it is at the bottom of the list—since it is at the back. Your layers</span></div>
<div style="position:absolute;left:108.00px;top:218.23px" class="cls_007"><span class="cls_007">pane should look like this:</span></div>
<div style="position:absolute;left:108.00px;top:343.88px" class="cls_007"><span class="cls_007">Next, with the </span><span class="cls_023">Background</span><span class="cls_007"> layer highlighted. Click on </span><span class="cls_023">Properties</span><span class="cls_007">—at the bottom</span></div>
<div style="position:absolute;left:108.00px;top:356.48px" class="cls_007"><span class="cls_007">there—and you will see the properties of the image layer. One of the properties you</span></div>
<div style="position:absolute;left:108.00px;top:369.08px" class="cls_007"><span class="cls_007">will notice is </span><span class="cls_023">Image</span><span class="cls_007">; if you click on it, you will have the option to add an image. It</span></div>
<div style="position:absolute;left:108.00px;top:381.68px" class="cls_007"><span class="cls_007">should end up looking like this:</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 187 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:160400px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background205.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Why Are All the Birds Angry?</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Note that your project location might/will/could/would/should be a different</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">location to mine.</span></div>
<div style="position:absolute;left:108.00px;top:148.34px" class="cls_007"><span class="cls_007">Hopefully, this will now have the background image appear in the main window,</span></div>
<div style="position:absolute;left:108.00px;top:160.94px" class="cls_007"><span class="cls_007">as shown in the following screenshot:</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 188 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:161202px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background206.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 8</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Continuing on, we need to add the tile set to the tiled layer so that we can</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">add the floor. Head back to the </span><span class="cls_023">Layers</span><span class="cls_007"> tab and select the </span><span class="cls_023">Ground</span><span class="cls_007"> layer, and</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">then click back onto the </span><span class="cls_023">Tilesets</span><span class="cls_007"> tab and add the floor image to the tile set.</span></div>
<div style="position:absolute;left:108.00px;top:152.29px" class="cls_007"><span class="cls_007">Finally, grab the stamping tool and build a floor that is two-tiles high, as</span></div>
<div style="position:absolute;left:108.00px;top:164.89px" class="cls_007"><span class="cls_007">shown in the following screenshot:</span></div>
<div style="position:absolute;left:108.00px;top:475.65px" class="cls_007"><span class="cls_007">That's the groundwork done. However, what we need to do is lay out the physics</span></div>
<div style="position:absolute;left:108.00px;top:488.25px" class="cls_007"><span class="cls_007">items; luckily this is something Tiled can help us achieve.</span></div>
<div style="position:absolute;left:108.00px;top:516.35px" class="cls_012"><span class="cls_012">Adding objects</span></div>
<div style="position:absolute;left:108.00px;top:537.33px" class="cls_007"><span class="cls_007">To have Tiled help us achieve easy placing of our physic bodies, we need to add a</span></div>
<div style="position:absolute;left:108.00px;top:549.93px" class="cls_007"><span class="cls_007">layer known as an Object Layer. This will allow us to draw shapes that we can then</span></div>
<div style="position:absolute;left:108.00px;top:562.53px" class="cls_007"><span class="cls_007">import into our game and build Box2D bodies from.</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 189 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:162004px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background207.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Why Are All the Birds Angry?</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">So, go back to your </span><span class="cls_023">Layers</span><span class="cls_007"> tab and add a new object layer—call it </span><span class="cls_009">Physics_</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_009"><span class="cls_009">Buildings</span><span class="cls_007"> and ensure it is at the top of the list, as shown in the following screenshot:</span></div>
<div style="position:absolute;left:108.00px;top:254.54px" class="cls_007"><span class="cls_007">With that layer selected, we can use the shapes tools from the toolbar, as shown in</span></div>
<div style="position:absolute;left:108.00px;top:267.14px" class="cls_007"><span class="cls_007">the next screenshot:</span></div>
<div style="position:absolute;left:108.00px;top:345.47px" class="cls_007"><span class="cls_007">With Square selected, we need to draw out four boxes similar to the positions I have</span></div>
<div style="position:absolute;left:108.00px;top:358.07px" class="cls_007"><span class="cls_007">them in the following screenshot. You should note that you will need to start from</span></div>
<div style="position:absolute;left:108.00px;top:370.67px" class="cls_007"><span class="cls_007">the top-left corner and drag to the bottom-right corner. To make this easier, we can</span></div>
<div style="position:absolute;left:108.00px;top:383.27px" class="cls_007"><span class="cls_007">also turn on </span><span class="cls_023">Snap to Grid</span><span class="cls_007"> under the </span><span class="cls_023">View</span><span class="cls_007"> menu.</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 190 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:162806px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background208.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 8</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Perfect, but this won't do much at the moment as we don't handle it yet in code. Our</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">next step is to add another object layer—called </span><span class="cls_009">Physics_Birds—</span><span class="cls_007">so that we can place</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">our naughty bird. The steps will be the same as earlier, but this time use the Circle</span></div>
<div style="position:absolute;left:108.00px;top:152.29px" class="cls_007"><span class="cls_007">tool for the bird. We will use a circle as we will want the bird to roll when it gets</span></div>
<div style="position:absolute;left:108.00px;top:164.89px" class="cls_007"><span class="cls_007">struck by the building parts.</span></div>
<div style="position:absolute;left:108.00px;top:470.73px" class="cls_007"><span class="cls_007">Excellent! Looks like we can have a go now at importing it in to our game!</span></div>
<div style="position:absolute;left:108.00px;top:498.83px" class="cls_012"><span class="cls_012">Importing the tile map</span></div>
<div style="position:absolute;left:108.00px;top:519.81px" class="cls_007"><span class="cls_007">Now we need to actually write some code! Or rather, we must first delete some.</span></div>
<div style="position:absolute;left:108.00px;top:532.41px" class="cls_007"><span class="cls_007">Let's remove the body we created to show a quick example of Box2D in action.</span></div>
<div style="position:absolute;left:108.00px;top:553.66px" class="cls_007"><span class="cls_007">Next, we need to add the code that handles the tile map. I am not going to go into too</span></div>
<div style="position:absolute;left:108.00px;top:566.26px" class="cls_007"><span class="cls_007">much detail here as this is something we have covered previously.</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 191 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:163608px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background209.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Why Are All the Birds Angry?</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Firstly, remember to add the required loader to the </span><span class="cls_009">AssetManager</span><span class="cls_007"> class in our</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">game class:</span></div>
<div style="position:absolute;left:126.00px;top:148.03px" class="cls_021"><span class="cls_021">public void create() {</span></div>
<div style="position:absolute;left:136.80px;top:160.27px" class="cls_021"><span class="cls_021">Box2D.init();</span></div>
<div style="position:absolute;left:136.80px;top:172.51px" class="cls_021"><span class="cls_021">assetManager.setLoader(TiledMap.class, new TmxMapLoader(new</span></div>
<div style="position:absolute;left:136.80px;top:183.31px" class="cls_021"><span class="cls_021">InternalFileHandleResolver()));</span></div>
<div style="position:absolute;left:136.80px;top:195.55px" class="cls_021"><span class="cls_021">setScreen(new LoadingScreen(this));</span></div>
<div style="position:absolute;left:126.00px;top:207.79px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:227.53px" class="cls_007"><span class="cls_007">Next, update our </span><span class="cls_009">LoadingScreen</span><span class="cls_007"> class to load our Tiled map:</span></div>
<div style="position:absolute;left:126.00px;top:248.47px" class="cls_021"><span class="cls_021">public void show() {</span></div>
<div style="position:absolute;left:136.80px;top:260.71px" class="cls_021"><span class="cls_021">// Code omitted for brevity</span></div>
<div style="position:absolute;left:136.80px;top:272.95px" class="cls_021"><span class="cls_021">nuttyGame.getAssetManager().load("nuttybirds.tmx",</span></div>
<div style="position:absolute;left:136.80px;top:283.75px" class="cls_021"><span class="cls_021">TiledMap.class);</span></div>
<div style="position:absolute;left:126.00px;top:295.99px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:315.73px" class="cls_007"><span class="cls_007">Finally, we need to update our </span><span class="cls_009">GameScreen</span><span class="cls_007"> class with the code that will load and</span></div>
<div style="position:absolute;left:108.00px;top:328.33px" class="cls_007"><span class="cls_007">display our Tiled map.</span></div>
<div style="position:absolute;left:108.00px;top:349.58px" class="cls_007"><span class="cls_007">Remember, we need to define the following:</span></div>
<div style="position:absolute;left:126.00px;top:370.51px" class="cls_021"><span class="cls_021">private SpriteBatch batch;</span></div>
<div style="position:absolute;left:126.00px;top:382.75px" class="cls_021"><span class="cls_021">private TiledMap tiledMap;</span></div>
<div style="position:absolute;left:126.00px;top:394.99px" class="cls_021"><span class="cls_021">private OrthogonalTiledMapRenderer orthogonalTiledMapRenderer;</span></div>
<div style="position:absolute;left:108.00px;top:414.73px" class="cls_007"><span class="cls_007">Then, instantiate them in the </span><span class="cls_009">show()</span><span class="cls_007"> method:</span></div>
<div style="position:absolute;left:126.00px;top:435.67px" class="cls_021"><span class="cls_021">tiledMap = nuttyGame.getAssetManager().get("nuttybirds.tmx");</span></div>
<div style="position:absolute;left:126.00px;top:447.91px" class="cls_021"><span class="cls_021">orthogonalTiledMapRenderer = new OrthogonalTiledMapRenderer(tiledMap,</span></div>
<div style="position:absolute;left:126.00px;top:458.71px" class="cls_021"><span class="cls_021">batch);</span></div>
<div style="position:absolute;left:126.00px;top:470.95px" class="cls_021"><span class="cls_021">orthogonalTiledMapRenderer.setView(camera);</span></div>
<div style="position:absolute;left:108.00px;top:490.69px" class="cls_007"><span class="cls_007">Finally, update the </span><span class="cls_009">draw()</span><span class="cls_007"> method to render the map:</span></div>
<div style="position:absolute;left:126.00px;top:511.63px" class="cls_021"><span class="cls_021">private void draw() {</span></div>
<div style="position:absolute;left:136.80px;top:523.87px" class="cls_021"><span class="cls_021">batch.setProjectionMatrix(camera.projection);</span></div>
<div style="position:absolute;left:136.80px;top:536.11px" class="cls_021"><span class="cls_021">batch.setTransformMatrix(camera.view);</span></div>
<div style="position:absolute;left:136.80px;top:548.35px" class="cls_021"><span class="cls_021">orthogonalTiledMapRenderer.render();</span></div>
<div style="position:absolute;left:126.00px;top:560.59px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 192 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:164410px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background210.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 8</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Hopefully, with all this in place, when you run the project, you should get the</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">following output:</span></div>
<div style="position:absolute;left:108.00px;top:404.26px" class="cls_007"><span class="cls_007">This is just what we want. Next, we will import the object maps and create our</span></div>
<div style="position:absolute;left:108.00px;top:416.86px" class="cls_007"><span class="cls_007">Box2D bodies from the objects.</span></div>
<div style="position:absolute;left:108.00px;top:444.96px" class="cls_012"><span class="cls_012">Importing the object layer</span></div>
<div style="position:absolute;left:108.00px;top:465.94px" class="cls_007"><span class="cls_007">Our next task is to take the object layer for the building parts and generate bodies</span></div>
<div style="position:absolute;left:108.00px;top:478.54px" class="cls_007"><span class="cls_007">for them. We will create a new class </span><span class="cls_009">TiledObjectBodyBuilder</span><span class="cls_007">, and in here we will</span></div>
<div style="position:absolute;left:108.00px;top:491.14px" class="cls_007"><span class="cls_007">have a static method that we pass our </span><span class="cls_009">TiledMap</span><span class="cls_007"> and </span><span class="cls_009">World</span><span class="cls_007"> classes to:</span></div>
<div style="position:absolute;left:126.00px;top:512.08px" class="cls_021"><span class="cls_021">public class TiledObjectBodyBuilder {</span></div>
<div style="position:absolute;left:136.80px;top:524.32px" class="cls_021"><span class="cls_021">private static final float PIXELS_PER_TILE = 32F;</span></div>
<div style="position:absolute;left:136.80px;top:536.56px" class="cls_021"><span class="cls_021">private static final float HALF = 0.5F;</span></div>
<div style="position:absolute;left:136.80px;top:548.80px" class="cls_021"><span class="cls_021">public static void buildBuildingBodies(TiledMap tiledMap, World</span></div>
<div style="position:absolute;left:136.80px;top:559.60px" class="cls_021"><span class="cls_021">world) {</span></div>
<div style="position:absolute;left:147.60px;top:571.84px" class="cls_021"><span class="cls_021">MapObjects objects =</span></div>
<div style="position:absolute;left:147.60px;top:582.64px" class="cls_021"><span class="cls_021">tiledMap.getLayers().get("Physics_Buildings").getObjects();</span></div>
<div style="position:absolute;left:147.60px;top:594.88px" class="cls_021"><span class="cls_021">for (MapObject object : objects) {</span></div>
<div style="position:absolute;left:158.40px;top:607.12px" class="cls_021"><span class="cls_021">PolygonShape rectangle = getRectangle((RectangleMapObject)</span></div>
<div style="position:absolute;left:158.40px;top:617.92px" class="cls_021"><span class="cls_021">object);</span></div>
<div style="position:absolute;left:158.40px;top:630.16px" class="cls_021"><span class="cls_021">BodyDef bd = new BodyDef();</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 193 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:165212px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background211.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Why Are All the Birds Angry?</span></div>
<div style="position:absolute;left:158.40px;top:114.01px" class="cls_021"><span class="cls_021">bd.type = BodyDef.BodyType.DynamicBody;</span></div>
<div style="position:absolute;left:158.40px;top:126.25px" class="cls_021"><span class="cls_021">Body body = world.createBody(bd);</span></div>
<div style="position:absolute;left:158.40px;top:138.49px" class="cls_021"><span class="cls_021">body.createFixture(rectangle, 1);</span></div>
<div style="position:absolute;left:158.40px;top:150.73px" class="cls_021"><span class="cls_021">rectangle.dispose();</span></div>
<div style="position:absolute;left:147.60px;top:162.97px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:175.21px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:199.69px" class="cls_021"><span class="cls_021">private static PolygonShape getRectangle(RectangleMapObject</span></div>
<div style="position:absolute;left:136.80px;top:210.49px" class="cls_021"><span class="cls_021">rectangleObject) {</span></div>
<div style="position:absolute;left:147.60px;top:222.73px" class="cls_021"><span class="cls_021">Rectangle rectangle = rectangleObject.getRectangle();</span></div>
<div style="position:absolute;left:147.60px;top:234.97px" class="cls_021"><span class="cls_021">PolygonShape polygon = new PolygonShape();</span></div>
<div style="position:absolute;left:147.60px;top:247.21px" class="cls_021"><span class="cls_021">Vector2 size = new Vector2(</span></div>
<div style="position:absolute;left:158.40px;top:259.45px" class="cls_021"><span class="cls_021">(rectangle.x + rectangle.width * HALF) / PIXELS_PER_TILE,</span></div>
<div style="position:absolute;left:158.40px;top:271.69px" class="cls_021"><span class="cls_021">(rectangle.y + rectangle.height * HALF) / PIXELS_PER_TILE</span></div>
<div style="position:absolute;left:147.60px;top:283.93px" class="cls_021"><span class="cls_021">);</span></div>
<div style="position:absolute;left:147.60px;top:296.17px" class="cls_021"><span class="cls_021">polygon.setAsBox(</span></div>
<div style="position:absolute;left:158.40px;top:308.41px" class="cls_021"><span class="cls_021">rectangle.width * HALF / PIXELS_PER_TILE,</span></div>
<div style="position:absolute;left:158.40px;top:320.65px" class="cls_021"><span class="cls_021">rectangle.height * HALF / PIXELS_PER_TILE,</span></div>
<div style="position:absolute;left:158.40px;top:332.89px" class="cls_021"><span class="cls_021">size,</span></div>
<div style="position:absolute;left:158.40px;top:345.13px" class="cls_021"><span class="cls_021">0.0f);</span></div>
<div style="position:absolute;left:147.60px;top:357.37px" class="cls_021"><span class="cls_021">return polygon;</span></div>
<div style="position:absolute;left:136.80px;top:369.61px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:381.85px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:401.58px" class="cls_007"><span class="cls_007">The preceding code listing is for the builder class. Let's go through this, break it</span></div>
<div style="position:absolute;left:108.00px;top:414.18px" class="cls_007"><span class="cls_007">down, and get an understanding of what we are doing here.</span></div>
<div style="position:absolute;left:108.00px;top:435.42px" class="cls_007"><span class="cls_007">First we define how big our tiles are in pixels, which in this case is 32:</span></div>
<div style="position:absolute;left:126.00px;top:456.36px" class="cls_021"><span class="cls_021">private static final float PIXELS_PER_TILE = 32F;</span></div>
<div style="position:absolute;left:108.00px;top:476.10px" class="cls_007"><span class="cls_007">We then have a constant just to reduce the amount of magic numbers in the code.</span></div>
<div style="position:absolute;left:108.00px;top:497.34px" class="cls_007"><span class="cls_007">Next we have the method that does all the hard work. Firstly, it obtains the layer that</span></div>
<div style="position:absolute;left:108.00px;top:509.94px" class="cls_007"><span class="cls_007">we require from the map and then the associated objects:</span></div>
<div style="position:absolute;left:126.00px;top:530.88px" class="cls_021"><span class="cls_021">MapObjects objects = tiledMap.getLayers().get("Physics_Buildings").</span></div>
<div style="position:absolute;left:126.00px;top:541.68px" class="cls_021"><span class="cls_021">getObjects();</span></div>
<div style="position:absolute;left:108.00px;top:561.42px" class="cls_007"><span class="cls_007">Here we have an iterable class that contains all the objects in our layer.</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 194 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:166014px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background212.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 8</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Next, we iterate over those objects and we create a </span><span class="cls_009">PolygonShape</span><span class="cls_007"> instance, similar to</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">our previous example:</span></div>
<div style="position:absolute;left:126.00px;top:148.03px" class="cls_021"><span class="cls_021">for (MapObject object : objects) {</span></div>
<div style="position:absolute;left:136.80px;top:160.27px" class="cls_021"><span class="cls_021">PolygonShape rectangle = getRectangle((RectangleMapObject)</span></div>
<div style="position:absolute;left:136.80px;top:171.07px" class="cls_021"><span class="cls_021">object);</span></div>
<div style="position:absolute;left:136.80px;top:183.31px" class="cls_021"><span class="cls_021">BodyDef bd = new BodyDef();</span></div>
<div style="position:absolute;left:136.80px;top:195.55px" class="cls_021"><span class="cls_021">bd.type = BodyDef.BodyType.DynamicBody;</span></div>
<div style="position:absolute;left:136.80px;top:207.79px" class="cls_021"><span class="cls_021">Body body = world.createBody(bd);</span></div>
<div style="position:absolute;left:136.80px;top:220.03px" class="cls_021"><span class="cls_021">body.createFixture(rectangle, 1);</span></div>
<div style="position:absolute;left:136.80px;top:232.27px" class="cls_021"><span class="cls_021">rectangle.dispose();</span></div>
<div style="position:absolute;left:126.00px;top:244.51px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:264.25px" class="cls_007"><span class="cls_007">But here we are using the position and size of the object from the Tiled map to</span></div>
<div style="position:absolute;left:108.00px;top:276.85px" class="cls_007"><span class="cls_007">position our shapes in the Box2D world. We create the required fixture, so it enters</span></div>
<div style="position:absolute;left:108.00px;top:289.45px" class="cls_007"><span class="cls_007">the collision system of Box2D. Finally, we dispose off the shape and we are good</span></div>
<div style="position:absolute;left:108.00px;top:302.05px" class="cls_007"><span class="cls_007">to go.</span></div>
<div style="position:absolute;left:108.00px;top:323.29px" class="cls_007"><span class="cls_007">Now that we have that handy class, let's add a call to it in our </span><span class="cls_009">GameScreen</span><span class="cls_007"> class.</span></div>
<div style="position:absolute;left:108.01px;top:335.89px" class="cls_007"><span class="cls_007">We shall add the following code to the </span><span class="cls_009">show()</span><span class="cls_007"> method:</span></div>
<div style="position:absolute;left:126.00px;top:356.83px" class="cls_021"><span class="cls_021">TiledObjectBodyBuilder.buildBuildingBodies(tiledMap, world);</span></div>
<div style="position:absolute;left:108.00px;top:376.57px" class="cls_007"><span class="cls_007">Excellent! Now run up the project and let's see what happens.</span></div>
<div style="position:absolute;left:108.00px;top:397.82px" class="cls_007"><span class="cls_007">Ah ha! We have a problem here. You may or may not see anything; if you did, I bet it</span></div>
<div style="position:absolute;left:108.00px;top:410.42px" class="cls_007"><span class="cls_007">was really tiny and in the corner. Well, this is because we need to update our debug</span></div>
<div style="position:absolute;left:108.00px;top:423.02px" class="cls_007"><span class="cls_007">renderer for Box2D to work from a different camera as its meters are different from</span></div>
<div style="position:absolute;left:108.00px;top:435.62px" class="cls_007"><span class="cls_007">our world units.</span></div>
<div style="position:absolute;left:108.00px;top:456.86px" class="cls_007"><span class="cls_007">To do this, let's add the following constants:</span></div>
<div style="position:absolute;left:126.00px;top:477.79px" class="cls_021"><span class="cls_021">private static float UNITS_PER_METER = 32F;</span></div>
<div style="position:absolute;left:126.00px;top:490.03px" class="cls_021"><span class="cls_021">private static float UNIT_WIDTH = WORLD_WIDTH / UNITS_PER_METER;</span></div>
<div style="position:absolute;left:126.00px;top:502.27px" class="cls_021"><span class="cls_021">private static float UNIT_HEIGHT = WORLD_HEIGHT / UNITS_PER_METER;</span></div>
<div style="position:absolute;left:108.00px;top:522.01px" class="cls_007"><span class="cls_007">Here we are creating a conversion to the world of Box2D from our world units.</span></div>
<div style="position:absolute;left:108.00px;top:534.61px" class="cls_007"><span class="cls_007">Again, we are using 32 because it is the size of our tiles.</span></div>
<div style="position:absolute;left:108.00px;top:555.86px" class="cls_007"><span class="cls_007">Next, we need to define a new camera:</span></div>
<div style="position:absolute;left:126.00px;top:576.79px" class="cls_021"><span class="cls_021">private OrthographicCamera box2dCam;</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 195 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:166816px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background213.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Why Are All the Birds Angry?</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Instantiate it with our new constants. The following code is added to the </span><span class="cls_009">show()</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">method:</span></div>
<div style="position:absolute;left:126.00px;top:148.03px" class="cls_021"><span class="cls_021">box2dCam = new OrthographicCamera(UNIT_WIDTH, UNIT_HEIGHT);</span></div>
<div style="position:absolute;left:108.00px;top:167.77px" class="cls_007"><span class="cls_007">Then, in our </span><span class="cls_009">update()</span><span class="cls_007"> method, we need to set the position and update the camera:</span></div>
<div style="position:absolute;left:126.00px;top:188.71px" class="cls_021"><span class="cls_021">box2dCam.position.set(UNIT_WIDTH / 2, UNIT_HEIGHT / 2, 0);</span></div>
<div style="position:absolute;left:126.00px;top:200.95px" class="cls_021"><span class="cls_021">box2dCam.update();</span></div>
<div style="position:absolute;left:108.00px;top:220.69px" class="cls_007"><span class="cls_007">Finally, let's update the </span><span class="cls_009">drawDebug()</span><span class="cls_007"> method to work with the new camera:</span></div>
<div style="position:absolute;left:126.00px;top:241.63px" class="cls_021"><span class="cls_021">debugRenderer.render(world, box2dCam.combined);</span></div>
<div style="position:absolute;left:108.00px;top:261.37px" class="cls_007"><span class="cls_007">Perfect! Now, if we run the project, we should have the following:</span></div>
<div style="position:absolute;left:108.00px;top:534.24px" class="cls_007"><span class="cls_007">Oh no! Another problem! Even though they load correctly, we don't have a ground,</span></div>
<div style="position:absolute;left:108.00px;top:546.84px" class="cls_007"><span class="cls_007">so they just fall out of the screen and on to infinity! Looks like we should add a static</span></div>
<div style="position:absolute;left:108.00px;top:559.44px" class="cls_007"><span class="cls_007">body that will be our floor. Back to Tiled we go!</span></div>
<div style="position:absolute;left:108.00px;top:580.68px" class="cls_007"><span class="cls_007">A world without floors.</span></div>
<div style="position:absolute;left:108.00px;top:601.92px" class="cls_007"><span class="cls_007">OK, this will be simple to fix, and, in fact, I bet you have already steamed ahead,</span></div>
<div style="position:absolute;left:108.00px;top:614.52px" class="cls_007"><span class="cls_007">created another layer in Tiled, called it </span><span class="cls_009">Physics_Floor</span><span class="cls_007">, and added a rectangle</span></div>
<div style="position:absolute;left:108.00px;top:627.12px" class="cls_007"><span class="cls_007">to be the floor!</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 196 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:167618px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background214.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 8</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">No? OK not a problem, let's do it together.</span></div>
<div style="position:absolute;left:108.00px;top:135.73px" class="cls_007"><span class="cls_007">Create a new object layer called </span><span class="cls_009">Physics_Floor</span><span class="cls_007"> and position it such that it is</span></div>
<div style="position:absolute;left:108.00px;top:148.33px" class="cls_007"><span class="cls_007">between the buildings and ground layers, as shown in the following screenshot:</span></div>
<div style="position:absolute;left:108.00px;top:309.47px" class="cls_007"><span class="cls_007">Next, using the Rectangle tool, create a rectangle that covers the bottom two tiles.</span></div>
<div style="position:absolute;left:108.00px;top:322.07px" class="cls_007"><span class="cls_007">So it will end up like this:</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 197 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:168420px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background215.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Why Are All the Birds Angry?</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Excellent! Now back to the code to handle this floor. What we can do is create a</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">new method in our builder class and have it exclusively handle floor components</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">as follows:</span></div>
<div style="position:absolute;left:126.00px;top:160.63px" class="cls_021"><span class="cls_021">public static void buildFloorBodies(TiledMap tiledMap, World world) {</span></div>
<div style="position:absolute;left:136.80px;top:172.87px" class="cls_021"><span class="cls_021">MapObjects objects =</span></div>
<div style="position:absolute;left:136.80px;top:183.67px" class="cls_021"><span class="cls_021">tiledMap.getLayers().get("Physics_Floor").getObjects();</span></div>
<div style="position:absolute;left:136.80px;top:195.91px" class="cls_021"><span class="cls_021">for (MapObject object : objects) {</span></div>
<div style="position:absolute;left:147.60px;top:208.15px" class="cls_021"><span class="cls_021">PolygonShape rectangle = getRectangle((RectangleMapObject)</span></div>
<div style="position:absolute;left:147.60px;top:218.95px" class="cls_021"><span class="cls_021">object);</span></div>
<div style="position:absolute;left:147.60px;top:231.19px" class="cls_021"><span class="cls_021">BodyDef bd = new BodyDef();</span></div>
<div style="position:absolute;left:147.60px;top:243.43px" class="cls_021"><span class="cls_021">bd.type = BodyDef.BodyType.StaticBody;</span></div>
<div style="position:absolute;left:147.60px;top:255.67px" class="cls_021"><span class="cls_021">Body body = world.createBody(bd);</span></div>
<div style="position:absolute;left:147.60px;top:267.91px" class="cls_021"><span class="cls_021">body.createFixture(rectangle, 1);</span></div>
<div style="position:absolute;left:147.60px;top:280.15px" class="cls_021"><span class="cls_021">rectangle.dispose();</span></div>
<div style="position:absolute;left:136.80px;top:292.39px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:304.63px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:324.37px" class="cls_007"><span class="cls_007">Now, update the </span><span class="cls_009">GameScreen</span><span class="cls_007"> class to call this method, from within the </span><span class="cls_009">show()</span></div>
<div style="position:absolute;left:108.00px;top:336.97px" class="cls_007"><span class="cls_007">method, just above our other build call:</span></div>
<div style="position:absolute;left:126.00px;top:357.91px" class="cls_021"><span class="cls_021">TiledObjectBodyBuilder.buildFloorBodies(tiledMap, world);</span></div>
<div style="position:absolute;left:108.00px;top:377.65px" class="cls_007"><span class="cls_007">Now let's go ahead with the project!</span></div>
<div style="position:absolute;left:108.00px;top:398.90px" class="cls_007"><span class="cls_007">Yes!!!! Oh no, stop, wait, noooooooooooooooooo</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 198 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:169222px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background216.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 8</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Did your build collapse like mine? Well, I guess it didn't fall off the screen.</span></div>
<div style="position:absolute;left:108.00px;top:135.74px" class="cls_007"><span class="cls_007">Well, I suggest we fiddle with our building design! If we move the posts in a bit,</span></div>
<div style="position:absolute;left:108.00px;top:148.34px" class="cls_007"><span class="cls_007">it should all support itself, go back to Tiled, and have a go at moving your objects.</span></div>
<div style="position:absolute;left:108.00px;top:160.94px" class="cls_007"><span class="cls_007">This will be good practice when you come to making your own levels!</span></div>
<div style="position:absolute;left:108.00px;top:182.18px" class="cls_007"><span class="cls_007">Here is what I came up with!</span></div>
<div style="position:absolute;left:108.00px;top:492.93px" class="cls_007"><span class="cls_007">If you try that, you will find it supports itself!</span></div>
<div style="position:absolute;left:108.00px;top:514.17px" class="cls_007"><span class="cls_007">Now, we just need to import the circle for the bird and we have that part complete—</span></div>
<div style="position:absolute;left:108.00px;top:526.77px" class="cls_007"><span class="cls_007">complete in the physics sense!</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 199 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:170024px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background217.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Why Are All the Birds Angry?</span></div>
<div style="position:absolute;left:108.00px;top:113.01px" class="cls_012"><span class="cls_012">Importing the naughty ones!</span></div>
<div style="position:absolute;left:108.00px;top:133.99px" class="cls_007"><span class="cls_007">Yey, well done on making it this far. I hope you are having fun seeing the physics in</span></div>
<div style="position:absolute;left:108.00px;top:146.59px" class="cls_007"><span class="cls_007">action! I know I am.</span></div>
<div style="position:absolute;left:108.00px;top:167.83px" class="cls_007"><span class="cls_007">Now, to import the enemy birds, we need to update our builder to support circle</span></div>
<div style="position:absolute;left:108.00px;top:180.43px" class="cls_007"><span class="cls_007">physics shapes. Let's start there, and add the following code to that class:</span></div>
<div style="position:absolute;left:126.00px;top:201.37px" class="cls_021"><span class="cls_021">private static CircleShape getCircle(EllipseMapObject</span></div>
<div style="position:absolute;left:126.00px;top:212.17px" class="cls_021"><span class="cls_021">ellipseObject) {</span></div>
<div style="position:absolute;left:136.80px;top:224.41px" class="cls_021"><span class="cls_021">Ellipse ellipse = ellipseObject.getEllipse();</span></div>
<div style="position:absolute;left:136.80px;top:236.65px" class="cls_021"><span class="cls_021">CircleShape circleShape = new CircleShape();</span></div>
<div style="position:absolute;left:136.80px;top:248.89px" class="cls_021"><span class="cls_021">circleShape.setRadius(ellipse.width * HALF / PIXELS_PER_TILE);</span></div>
<div style="position:absolute;left:136.80px;top:261.13px" class="cls_021"><span class="cls_021">circleShape.setPosition(new Vector2((ellipse.x + ellipse.width *</span></div>
<div style="position:absolute;left:136.80px;top:271.93px" class="cls_021"><span class="cls_021">HALF) / PIXELS_PER_TILE, (ellipse.y + ellipse.height * HALF)/</span></div>
<div style="position:absolute;left:136.80px;top:282.73px" class="cls_021"><span class="cls_021">PIXELS_PER_TILE));</span></div>
<div style="position:absolute;left:136.80px;top:294.97px" class="cls_021"><span class="cls_021">return circleShape;</span></div>
<div style="position:absolute;left:126.00px;top:307.21px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:326.95px" class="cls_007"><span class="cls_007">In the Tiled world, it isn't a circle it is an ellipse, but since we want a circle in the</span></div>
<div style="position:absolute;left:108.00px;top:339.55px" class="cls_007"><span class="cls_007">Box2D world, we need to do some extra code work. Here, we take the ellipse object</span></div>
<div style="position:absolute;left:108.00px;top:352.15px" class="cls_007"><span class="cls_007">and create a circle shape.</span></div>
<div style="position:absolute;left:108.00px;top:373.39px" class="cls_007"><span class="cls_007">Next, we need a method that will call this one and iterate over all the enemies</span></div>
<div style="position:absolute;left:108.00px;top:385.99px" class="cls_007"><span class="cls_007">that might be in that layer. The following is the code that needs to be added to</span></div>
<div style="position:absolute;left:108.00px;top:398.59px" class="cls_007"><span class="cls_007">the builder class:</span></div>
<div style="position:absolute;left:126.00px;top:419.53px" class="cls_021"><span class="cls_021">public static void buildBirdBodies(TiledMap tiledMap, World world)</span></div>
<div style="position:absolute;left:126.00px;top:430.33px" class="cls_021"><span class="cls_021">{</span></div>
<div style="position:absolute;left:136.80px;top:442.57px" class="cls_021"><span class="cls_021">MapObjects objects =</span></div>
<div style="position:absolute;left:136.80px;top:453.37px" class="cls_021"><span class="cls_021">tiledMap.getLayers().get("Physics_Birds").getObjects();</span></div>
<div style="position:absolute;left:136.80px;top:465.61px" class="cls_021"><span class="cls_021">for (MapObject object : objects) {</span></div>
<div style="position:absolute;left:147.60px;top:477.85px" class="cls_021"><span class="cls_021">CircleShape circle = getCircle((EllipseMapObject) object);</span></div>
<div style="position:absolute;left:147.60px;top:490.09px" class="cls_021"><span class="cls_021">BodyDef bd = new BodyDef();</span></div>
<div style="position:absolute;left:147.60px;top:502.33px" class="cls_021"><span class="cls_021">bd.type = BodyDef.BodyType.DynamicBody;</span></div>
<div style="position:absolute;left:147.60px;top:514.57px" class="cls_021"><span class="cls_021">Body body = world.createBody(bd);</span></div>
<div style="position:absolute;left:147.60px;top:526.81px" class="cls_021"><span class="cls_021">body.createFixture(circle, 1);</span></div>
<div style="position:absolute;left:147.60px;top:539.05px" class="cls_021"><span class="cls_021">circle.dispose();</span></div>
<div style="position:absolute;left:136.80px;top:551.29px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:563.53px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:583.27px" class="cls_007"><span class="cls_007">You will notice it is very, very similar to the others.</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 200 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:170826px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background218.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 8</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Finally, add a call to this method in the </span><span class="cls_009">show()</span><span class="cls_007"> method of the </span><span class="cls_009">GameScreen</span><span class="cls_007"> class and</span></div>
<div style="position:absolute;left:107.99px;top:127.09px" class="cls_007"><span class="cls_007">we should be good to go!</span></div>
<div style="position:absolute;left:126.00px;top:148.03px" class="cls_021"><span class="cls_021">TiledObjectBodyBuilder.buildBirdBodies(tiledMap, world);</span></div>
<div style="position:absolute;left:108.00px;top:167.77px" class="cls_007"><span class="cls_007">Run that project and you will see the following:</span></div>
<div style="position:absolute;left:108.00px;top:444.94px" class="cls_007"><span class="cls_007">Excellent! In physics form, we have our enemy, that naughty acorn stealing bird, and</span></div>
<div style="position:absolute;left:108.00px;top:457.54px" class="cls_007"><span class="cls_007">the building protecting him.</span></div>
<div style="position:absolute;left:108.00px;top:478.78px" class="cls_007"><span class="cls_007">Moving on, we will now need to handle the acorn and have it thrown in to the</span></div>
<div style="position:absolute;left:108.00px;top:491.38px" class="cls_007"><span class="cls_007">building, making it collapse!</span></div>
<div style="position:absolute;left:108.00px;top:519.48px" class="cls_012"><span class="cls_012">Fire at will!</span></div>
<div style="position:absolute;left:108.00px;top:540.46px" class="cls_007"><span class="cls_007">Moving on, we need to now provide something that will hit the building and</span></div>
<div style="position:absolute;left:108.00px;top:553.06px" class="cls_007"><span class="cls_007">hopefully knock it down!</span></div>
<div style="position:absolute;left:108.00px;top:574.30px" class="cls_007"><span class="cls_007">To do this, we will need another body. We will again use the circle shape and, just to</span></div>
<div style="position:absolute;left:108.00px;top:586.90px" class="cls_007"><span class="cls_007">start with, we will have it fire when you click on the screen.</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 201 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:171628px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background219.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Why Are All the Birds Angry?</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Let's create a method called </span><span class="cls_009">createBullet()</span><span class="cls_007"> in our </span><span class="cls_009">GameScreen</span><span class="cls_007"> class. In this class,</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">will create a circular body and give some initial velocity:</span></div>
<div style="position:absolute;left:126.00px;top:148.03px" class="cls_021"><span class="cls_021">private void createBullet() {</span></div>
<div style="position:absolute;left:136.80px;top:160.27px" class="cls_021"><span class="cls_021">CircleShape circleShape = new CircleShape();</span></div>
<div style="position:absolute;left:136.80px;top:172.51px" class="cls_021"><span class="cls_021">circleShape.setRadius(0.5f);</span></div>
<div style="position:absolute;left:136.80px;top:184.75px" class="cls_021"><span class="cls_021">circleShape.setPosition(new Vector2(3,6));</span></div>
<div style="position:absolute;left:136.80px;top:196.99px" class="cls_021"><span class="cls_021">BodyDef bd = new BodyDef();</span></div>
<div style="position:absolute;left:136.80px;top:209.23px" class="cls_021"><span class="cls_021">bd.type = BodyDef.BodyType.DynamicBody;</span></div>
<div style="position:absolute;left:136.80px;top:221.47px" class="cls_021"><span class="cls_021">Body bullet = world.createBody(bd);</span></div>
<div style="position:absolute;left:136.80px;top:233.71px" class="cls_021"><span class="cls_021">bullet.createFixture(circleShape, 0);</span></div>
<div style="position:absolute;left:136.80px;top:245.95px" class="cls_021"><span class="cls_021">circleShape.dispose();</span></div>
<div style="position:absolute;left:136.80px;top:258.19px" class="cls_021"><span class="cls_021">bullet.setLinearVelocity(10,6);</span></div>
<div style="position:absolute;left:126.00px;top:270.43px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:290.17px" class="cls_007"><span class="cls_007">As you can see from the preceding code, we create the shape first and position</span></div>
<div style="position:absolute;left:108.00px;top:302.77px" class="cls_007"><span class="cls_007">it 3m from the left and 6m from the bottom, we also set the radius to be 0.5m.</span></div>
<div style="position:absolute;left:108.00px;top:315.37px" class="cls_007"><span class="cls_007">Next, we create the body definition and then create the fixture. Finally, we set a</span></div>
<div style="position:absolute;left:108.00px;top:327.97px" class="cls_007"><span class="cls_007">velocity of 10m/s in the x plane so that it moves right, and 6m/s in the y plane</span></div>
<div style="position:absolute;left:108.00px;top:340.57px" class="cls_007"><span class="cls_007">so that it moves up.</span></div>
<div style="position:absolute;left:108.00px;top:361.81px" class="cls_007"><span class="cls_007">Now, we just need to trigger it. To this we can set </span><span class="cls_009">InputProcessor</span><span class="cls_007"> and call the</span></div>
<div style="position:absolute;left:108.00px;top:374.41px" class="cls_007"><span class="cls_007">method when a click is detected. This is using event-style input handling, as we</span></div>
<div style="position:absolute;left:108.00px;top:387.01px" class="cls_007"><span class="cls_007">are not polling the input like we did previously.</span></div>
<div style="position:absolute;left:108.00px;top:408.25px" class="cls_007"><span class="cls_007">In our </span><span class="cls_009">show()</span><span class="cls_007"> method, let's add the following code:</span></div>
<div style="position:absolute;left:126.00px;top:429.19px" class="cls_021"><span class="cls_021">Gdx.input.setInputProcessor(new InputAdapter() {</span></div>
<div style="position:absolute;left:136.80px;top:441.43px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:136.80px;top:453.67px" class="cls_021"><span class="cls_021">public boolean touchDown(int screenX, int screenY, int pointer,</span></div>
<div style="position:absolute;left:136.80px;top:464.47px" class="cls_021"><span class="cls_021">int button) {</span></div>
<div style="position:absolute;left:147.60px;top:476.71px" class="cls_021"><span class="cls_021">createBullet();</span></div>
<div style="position:absolute;left:147.60px;top:488.95px" class="cls_021"><span class="cls_021">return true;</span></div>
<div style="position:absolute;left:136.80px;top:501.19px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:513.43px" class="cls_021"><span class="cls_021">});</span></div>
<div style="position:absolute;left:108.00px;top:533.17px" class="cls_007"><span class="cls_007">Here we create an instance of an anonymous class called </span><span class="cls_009">InputAdapter</span><span class="cls_007">. This class</span></div>
<div style="position:absolute;left:107.99px;top:545.77px" class="cls_007"><span class="cls_007">has a few interesting methods, but for now we are only interested in the </span><span class="cls_009">touchDown()</span></div>
<div style="position:absolute;left:108.00px;top:558.37px" class="cls_007"><span class="cls_007">method. In this method, we call our </span><span class="cls_009">createBullet()</span><span class="cls_007">. Finally, that is set on the </span><span class="cls_009">Gdx.</span></div>
<div style="position:absolute;left:108.00px;top:570.97px" class="cls_009"><span class="cls_009">input</span><span class="cls_007"> class, effectively telling LibGDX that we want to handle this input.</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 202 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:172430px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background220.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 8</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Excellent! If we fire up the project now and start clicking on the screen. You should</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">see lots of bullets flying toward and hopefully knocking down the building.</span></div>
<div style="position:absolute;left:108.00px;top:404.26px" class="cls_007"><span class="cls_007">As you can see, I got a little carried away there! But hey it works! We almost have a</span></div>
<div style="position:absolute;left:108.00px;top:416.86px" class="cls_007"><span class="cls_007">game here.</span></div>
<div style="position:absolute;left:108.00px;top:438.10px" class="cls_007"><span class="cls_007">To make it a game, we are going to need to detect any force that occurs on the</span></div>
<div style="position:absolute;left:108.00px;top:450.70px" class="cls_007"><span class="cls_007">enemies so that we can decide whether it was enough to defeat them.</span></div>
<div style="position:absolute;left:108.00px;top:471.94px" class="cls_007"><span class="cls_007">But I hardly touched him!</span></div>
<div style="position:absolute;left:108.00px;top:493.18px" class="cls_007"><span class="cls_007">One of the many great things about Box2D is its collision handling. Now, we can</span></div>
<div style="position:absolute;left:108.00px;top:505.78px" class="cls_007"><span class="cls_007">see all the collisions happen on screen and we can mentally work out what should</span></div>
<div style="position:absolute;left:108.00px;top:518.38px" class="cls_007"><span class="cls_007">happen; however, when it comes to a computer working this out, there aren't enough</span></div>
<div style="position:absolute;left:108.00px;top:530.98px" class="cls_007"><span class="cls_007">CPU cycles to go around; obviously, this depends on how many bodies are flying</span></div>
<div style="position:absolute;left:108.00px;top:543.58px" class="cls_007"><span class="cls_007">around the screen!</span></div>
<div style="position:absolute;left:108.00px;top:564.83px" class="cls_007"><span class="cls_007">So, to save CPU cycles, Box2D does a couple of cool things. Firstly, it will check</span></div>
<div style="position:absolute;left:108.00px;top:577.43px" class="cls_007"><span class="cls_007">collisions based on a technique using </span><span class="cls_023">Axis Aligned Bounding Box</span><span class="cls_007"> (</span><span class="cls_023">AABB</span><span class="cls_007">), where</span></div>
<div style="position:absolute;left:108.00px;top:590.03px" class="cls_007"><span class="cls_007">each object had a rectangular box over it, even if it is a circle! If these overlay, then it</span></div>
<div style="position:absolute;left:108.00px;top:602.63px" class="cls_007"><span class="cls_007">will dive deeper into where fixtures overlap and how to resolve them. This high-level</span></div>
<div style="position:absolute;left:108.00px;top:615.23px" class="cls_007"><span class="cls_007">collision detection is commonly known as the broad phase and is relatively cheap to</span></div>
<div style="position:absolute;left:108.00px;top:627.83px" class="cls_007"><span class="cls_007">calculate. In fact, we did something similar in the previous game.</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 203 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:173232px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background221.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Why Are All the Birds Angry?</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Once it knows which fixtures potentially collide, Box2D can go on to the next phase</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">called the narrow phase. In this phase, it will look at each contact in depth and</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">calculate the best way to resolve this collision.</span></div>
<div style="position:absolute;left:108.00px;top:160.94px" class="cls_007"><span class="cls_007">Thankfully, because Box2D takes care of all this for us, as you probably noticed</span></div>
<div style="position:absolute;left:108.00px;top:173.54px" class="cls_007"><span class="cls_007">when you were firing your bullets at the building, we don't need to go into great</span></div>
<div style="position:absolute;left:108.00px;top:186.13px" class="cls_007"><span class="cls_007">detail. The part we are interested in is the </span><span class="cls_009">ContactListener</span><span class="cls_007"> class. This interface</span></div>
<div style="position:absolute;left:108.00px;top:198.73px" class="cls_007"><span class="cls_007">has various callbacks for the state of a collision. The following is the API:</span></div>
<div style="position:absolute;left:126.00px;top:219.67px" class="cls_021"><span class="cls_021">public interface ContactListener {</span></div>
<div style="position:absolute;left:136.80px;top:231.91px" class="cls_021"><span class="cls_021">public void beginContact (Contact contact);</span></div>
<div style="position:absolute;left:136.80px;top:244.15px" class="cls_021"><span class="cls_021">public void endContact (Contact contact);</span></div>
<div style="position:absolute;left:136.80px;top:256.39px" class="cls_021"><span class="cls_021">public void preSolve (Contact contact, Manifold oldManifold);</span></div>
<div style="position:absolute;left:136.80px;top:268.63px" class="cls_021"><span class="cls_021">public void postSolve (Contact contact, ContactImpulse impulse);</span></div>
<div style="position:absolute;left:126.00px;top:280.87px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:300.61px" class="cls_007"><span class="cls_007">It is pretty straightforward. The first two methods are for when the contact between</span></div>
<div style="position:absolute;left:108.00px;top:313.21px" class="cls_007"><span class="cls_007">two fixtures starts and ends, and the other two methods are for before and after</span></div>
<div style="position:absolute;left:108.00px;top:325.81px" class="cls_007"><span class="cls_007">the solver has done its work and repositioned the fixtures. We are only going to be</span></div>
<div style="position:absolute;left:108.00px;top:338.41px" class="cls_007"><span class="cls_007">interested in the </span><span class="cls_009">beginContact()</span><span class="cls_007"> method. But please, feel free to read more about</span></div>
<div style="position:absolute;left:108.00px;top:351.01px" class="cls_007"><span class="cls_007">this in the Box2D documentation.</span></div>
<div style="position:absolute;left:108.00px;top:372.26px" class="cls_007"><span class="cls_007">Back to the code! We want to create our own implementation of the</span></div>
<div style="position:absolute;left:108.00px;top:384.85px" class="cls_009"><span class="cls_009">ContactListener</span><span class="cls_007"> interface. Create this as an inner class in the </span><span class="cls_009">GameScreen</span></div>
<div style="position:absolute;left:108.00px;top:397.45px" class="cls_007"><span class="cls_007">class for now, I called it </span><span class="cls_009">NuttyContactListener</span><span class="cls_007">.</span></div>
<div style="position:absolute;left:108.00px;top:418.69px" class="cls_007"><span class="cls_007">Now for some code, in the </span><span class="cls_009">beginContact()</span><span class="cls_007"> method, let's have the following:</span></div>
<div style="position:absolute;left:126.00px;top:439.63px" class="cls_021"><span class="cls_021">if (contact.isTouching()) {</span></div>
<div style="position:absolute;left:136.80px;top:451.87px" class="cls_021"><span class="cls_021">Fixture attacker = contact.getFixtureA();</span></div>
<div style="position:absolute;left:136.80px;top:464.11px" class="cls_021"><span class="cls_021">Fixture defender = contact.getFixtureB();</span></div>
<div style="position:absolute;left:136.80px;top:476.35px" class="cls_021"><span class="cls_021">WorldManifold worldManifold = contact.getWorldManifold();</span></div>
<div style="position:absolute;left:136.80px;top:488.59px" class="cls_021"><span class="cls_021">if ("enemy".equals(defender.getUserData())) {</span></div>
<div style="position:absolute;left:147.60px;top:500.83px" class="cls_021"><span class="cls_021">Vector2 vel1 = attacker.getBody().</span></div>
<div style="position:absolute;left:147.60px;top:511.63px" class="cls_021"><span class="cls_021">getLinearVelocityFromWorldPoint(worldManifold.getPoints()[0]);</span></div>
<div style="position:absolute;left:147.60px;top:523.87px" class="cls_021"><span class="cls_021">Vector2 vel2 = defender.getBody().</span></div>
<div style="position:absolute;left:147.60px;top:534.67px" class="cls_021"><span class="cls_021">getLinearVelocityFromWorldPoint(worldManifold.getPoints()[0]);</span></div>
<div style="position:absolute;left:147.60px;top:546.91px" class="cls_021"><span class="cls_021">Vector2 impactVelocity = vel1.sub(vel2);</span></div>
<div style="position:absolute;left:147.60px;top:559.15px" class="cls_021"><span class="cls_021">if (Math.abs(impactVelocity.x) > 1 ||</span></div>
<div style="position:absolute;left:147.60px;top:569.95px" class="cls_021"><span class="cls_021">Math.abs(impactVelocity.y) > 1) {</span></div>
<div style="position:absolute;left:158.40px;top:582.19px" class="cls_021"><span class="cls_021">toRemove.add(defender.getBody());</span></div>
<div style="position:absolute;left:147.60px;top:594.43px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:606.67px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:618.91px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 204 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:174034px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background222.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 8</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Ah ha! The first line is going to be a bit confusing—shouldn't they already be</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">touching? Well, their AABBs are touching but the actual fixtures might not be.</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">Think about the square and the circle shapes. So, with us deciding that the fixtures</span></div>
<div style="position:absolute;left:108.00px;top:152.29px" class="cls_007"><span class="cls_007">are definitely touching, we can extract the fixtures from the </span><span class="cls_009">Contact</span><span class="cls_007"> class. We also</span></div>
<div style="position:absolute;left:108.00px;top:164.89px" class="cls_007"><span class="cls_007">extract something called </span><span class="cls_009">WorldManifold</span><span class="cls_007">. This essentially contains the line between</span></div>
<div style="position:absolute;left:108.00px;top:177.49px" class="cls_007"><span class="cls_007">two contacting fixtures; we will need this later. Next, we check to see if the second</span></div>
<div style="position:absolute;left:108.00px;top:190.09px" class="cls_007"><span class="cls_007">fixture, the defender, is the enemy. We do this by looking at the user data we will</span></div>
<div style="position:absolute;left:108.00px;top:202.69px" class="cls_007"><span class="cls_007">add to the fixture and seeing if it equates to the literal enemy string. If that is the</span></div>
<div style="position:absolute;left:108.00px;top:215.29px" class="cls_007"><span class="cls_007">case, we now need to work out how strong the contact was when they collided, and</span></div>
<div style="position:absolute;left:108.00px;top:227.89px" class="cls_007"><span class="cls_007">we do this by getting the velocities at those points and subtracting one from the</span></div>
<div style="position:absolute;left:108.00px;top:240.49px" class="cls_007"><span class="cls_007">other. Finally, if either the </span><span class="cls_020">x</span><span class="cls_007"> or </span><span class="cls_020">y</span><span class="cls_007"> component is over an arbitrary value, I picked 1 but</span></div>
<div style="position:absolute;left:108.00px;top:253.09px" class="cls_007"><span class="cls_007">you can choose whatever feels right in the game, too high and you might not defeat</span></div>
<div style="position:absolute;left:108.00px;top:265.69px" class="cls_007"><span class="cls_007">the enemy. We add the body to an array to remove at a later time. Box2D doesn't like</span></div>
<div style="position:absolute;left:108.00px;top:278.29px" class="cls_007"><span class="cls_007">you removing bodies from the world at the wrong time, since this can cause a fatal</span></div>
<div style="position:absolute;left:108.00px;top:290.89px" class="cls_007"><span class="cls_007">error and crash.</span></div>
<div style="position:absolute;left:108.00px;top:312.14px" class="cls_007"><span class="cls_007">Phew! I hope that makes sense so far. You will probably have a couple of</span></div>
<div style="position:absolute;left:108.00px;top:324.74px" class="cls_007"><span class="cls_007">errors at the moment as we haven't defined our array. So let's add that to</span></div>
<div style="position:absolute;left:108.00px;top:337.33px" class="cls_007"><span class="cls_007">the </span><span class="cls_009">GameScreen</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:126.00px;top:358.27px" class="cls_021"><span class="cls_021">private Array&lt;Body> toRemove = new Array&lt;>();</span></div>
<div style="position:absolute;left:108.00px;top:378.01px" class="cls_007"><span class="cls_007">Now, we need a method to remove the bodies that we wish to destroy:</span></div>
<div style="position:absolute;left:126.00px;top:398.95px" class="cls_021"><span class="cls_021">private void clearDeadBodies() {</span></div>
<div style="position:absolute;left:136.80px;top:411.19px" class="cls_021"><span class="cls_021">for (Body body : toRemove) {</span></div>
<div style="position:absolute;left:147.60px;top:423.43px" class="cls_021"><span class="cls_021">world.destroyBody(body);</span></div>
<div style="position:absolute;left:136.80px;top:435.67px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:447.91px" class="cls_021"><span class="cls_021">toRemove.clear();</span></div>
<div style="position:absolute;left:126.00px;top:460.15px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:479.89px" class="cls_007"><span class="cls_007">Then, add it to our </span><span class="cls_009">update()</span><span class="cls_007"> method:</span></div>
<div style="position:absolute;left:126.00px;top:500.83px" class="cls_021"><span class="cls_021">private void update(float delta) {</span></div>
<div style="position:absolute;left:136.80px;top:513.07px" class="cls_021"><span class="cls_021">clearDeadBodies();</span></div>
<div style="position:absolute;left:136.80px;top:525.31px" class="cls_021"><span class="cls_021">world.step(delta, 6, 2);</span></div>
<div style="position:absolute;left:136.80px;top:537.55px" class="cls_021"><span class="cls_021">box2dCam.position.set(UNIT_WIDTH / 2, UNIT_HEIGHT / 2, 0);</span></div>
<div style="position:absolute;left:136.80px;top:549.79px" class="cls_021"><span class="cls_021">box2dCam.update();</span></div>
<div style="position:absolute;left:126.00px;top:562.03px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:581.77px" class="cls_007"><span class="cls_007">Excellent! Now, when the naughty birds are hit and hurt, they will be removed from</span></div>
<div style="position:absolute;left:108.00px;top:594.37px" class="cls_007"><span class="cls_007">the physics world.</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 205 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:174836px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background223.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Why Are All the Birds Angry?</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Finally, we just need to set our contact listener. So, in the </span><span class="cls_009">show()</span><span class="cls_007"> method, add the</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">following line:</span></div>
<div style="position:absolute;left:126.00px;top:148.03px" class="cls_021"><span class="cls_021">world.setContactListener(new NuttyContactListener());</span></div>
<div style="position:absolute;left:108.00px;top:167.77px" class="cls_007"><span class="cls_007">Super! Oh! One other final thing, we need to set the user data for our enemy. Back to</span></div>
<div style="position:absolute;left:108.00px;top:180.37px" class="cls_007"><span class="cls_007">our </span><span class="cls_009">TiledObjectBodyBuilder</span><span class="cls_007"> class we go, and in our </span><span class="cls_009">buildBirdBodies()</span><span class="cls_007"> method,</span></div>
<div style="position:absolute;left:108.00px;top:192.97px" class="cls_007"><span class="cls_007">we need to update the </span><span class="cls_009">createFixture()</span><span class="cls_007"> method call to assign a local reference we</span></div>
<div style="position:absolute;left:108.00px;top:205.57px" class="cls_007"><span class="cls_007">then use:</span></div>
<div style="position:absolute;left:126.00px;top:226.51px" class="cls_021"><span class="cls_021">Fixture fixture = body.createFixture(circle, 1);</span></div>
<div style="position:absolute;left:108.00px;top:246.25px" class="cls_007"><span class="cls_007">Now, we can add the following line before we dispose of our circle:</span></div>
<div style="position:absolute;left:126.00px;top:267.19px" class="cls_021"><span class="cls_021">fixture.setUserData("enemy");</span></div>
<div style="position:absolute;left:108.00px;top:286.93px" class="cls_007"><span class="cls_007">Now, we should be good to go. If you run the project and start hurling those</span></div>
<div style="position:absolute;left:108.00px;top:299.53px" class="cls_007"><span class="cls_007">projectiles at the building, it should collapse and wipe out that circle!</span></div>
<div style="position:absolute;left:108.00px;top:576.70px" class="cls_007"><span class="cls_007">As you can see from the preceding screenshot, the circle is gone! Just what we wanted.</span></div>
<div style="position:absolute;left:108.00px;top:597.94px" class="cls_007"><span class="cls_007">The last thing we need to do before we start adding more artwork is to handle the</span></div>
<div style="position:absolute;left:108.00px;top:610.54px" class="cls_007"><span class="cls_007">firing mechanism.</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 206 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:175638px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background224.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 8</span></div>
<div style="position:absolute;left:108.00px;top:113.01px" class="cls_012"><span class="cls_012">Take Aim! Fire!</span></div>
<div style="position:absolute;left:108.00px;top:133.99px" class="cls_007"><span class="cls_007">Right, now we are building what is essentially the catapult part. The way we are</span></div>
<div style="position:absolute;left:108.00px;top:146.59px" class="cls_007"><span class="cls_007">going to approach this is, we are going to define a point in the game world that will</span></div>
<div style="position:absolute;left:108.00px;top:159.19px" class="cls_007"><span class="cls_007">be our anchor point, and then we will have a point that is continually updated by</span></div>
<div style="position:absolute;left:108.00px;top:171.79px" class="cls_007"><span class="cls_007">the mouse cursor. From those two points, we will be able to derive an angle and how</span></div>
<div style="position:absolute;left:108.00px;top:184.39px" class="cls_007"><span class="cls_007">strongly to throw the acorn.</span></div>
<div style="position:absolute;left:108.00px;top:205.63px" class="cls_007"><span class="cls_007">Let's start by first defining some variables that we will use. Once again in our</span></div>
<div style="position:absolute;left:108.00px;top:218.23px" class="cls_009"><span class="cls_009">GameScreen</span><span class="cls_007"> class, define the following:</span></div>
<div style="position:absolute;left:126.00px;top:239.17px" class="cls_021"><span class="cls_021">private static final float MAX_STRENGTH = 15;</span></div>
<div style="position:absolute;left:126.00px;top:251.41px" class="cls_021"><span class="cls_021">private static final float MAX_DISTANCE = 100;</span></div>
<div style="position:absolute;left:126.00px;top:263.65px" class="cls_021"><span class="cls_021">private static final float UPPER_ANGLE = 3 * MathUtils.PI / 2f;</span></div>
<div style="position:absolute;left:126.00px;top:275.89px" class="cls_021"><span class="cls_021">private static final float LOWER_ANGLE = MathUtils.PI / 2f;</span></div>
<div style="position:absolute;left:126.00px;top:300.37px" class="cls_021"><span class="cls_021">private final Vector2 anchor = new</span></div>
<div style="position:absolute;left:126.00px;top:311.17px" class="cls_021"><span class="cls_021">Vector2(convertMetresToUnits(3), convertMetresToUnits(6));</span></div>
<div style="position:absolute;left:126.00px;top:323.41px" class="cls_021"><span class="cls_021">private final Vector2 firingPosition = anchor.cpy();</span></div>
<div style="position:absolute;left:126.00px;top:335.65px" class="cls_021"><span class="cls_021">private float distance;</span></div>
<div style="position:absolute;left:126.00px;top:347.89px" class="cls_021"><span class="cls_021">private float angle;</span></div>
<div style="position:absolute;left:108.00px;top:367.63px" class="cls_007"><span class="cls_007">Here we have a few constants that will define some boundaries for our catapult;</span></div>
<div style="position:absolute;left:108.00px;top:380.23px" class="cls_007"><span class="cls_007">remember, we are working in radians here. Next, we define our anchor point and a</span></div>
<div style="position:absolute;left:108.00px;top:392.83px" class="cls_007"><span class="cls_007">field to keep track of our firing position. Finally, we define two fields to look after the</span></div>
<div style="position:absolute;left:108.00px;top:405.43px" class="cls_007"><span class="cls_007">distance and angle of our catapult.</span></div>
<div style="position:absolute;left:108.00px;top:426.67px" class="cls_007"><span class="cls_007">I have also added two methods that you will need, and which will allow us to</span></div>
<div style="position:absolute;left:108.00px;top:439.27px" class="cls_007"><span class="cls_007">convert from Box2D meters to our world units:</span></div>
<div style="position:absolute;left:126.00px;top:460.21px" class="cls_021"><span class="cls_021">private float convertUnitsToMetres(float pixels) {</span></div>
<div style="position:absolute;left:136.80px;top:472.45px" class="cls_021"><span class="cls_021">return pixels / UNITS_PER_METER;</span></div>
<div style="position:absolute;left:126.00px;top:484.69px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:509.17px" class="cls_021"><span class="cls_021">private float convertMetresToUnits(float metres) {</span></div>
<div style="position:absolute;left:136.80px;top:521.41px" class="cls_021"><span class="cls_021">return metres * UNITS_PER_METER;</span></div>
<div style="position:absolute;left:126.00px;top:533.65px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:553.39px" class="cls_007"><span class="cls_007">These will come in handy when we start to put our art in.</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 207 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:176440px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background225.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Why Are All the Birds Angry?</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Next up is a bit of mathematical work to help us calculate two things. Firstly, the</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">angle between two points:</span></div>
<div style="position:absolute;left:126.00px;top:148.03px" class="cls_021"><span class="cls_021">private float angleBetweenTwoPoints() {</span></div>
<div style="position:absolute;left:136.80px;top:160.27px" class="cls_021"><span class="cls_021">float angle = MathUtils.atan2(anchor.y - firingPosition.y,</span></div>
<div style="position:absolute;left:136.80px;top:171.07px" class="cls_021"><span class="cls_021">anchor.x - firingPosition.x);</span></div>
<div style="position:absolute;left:136.80px;top:183.31px" class="cls_021"><span class="cls_021">angle %= 2 * MathUtils.PI;</span></div>
<div style="position:absolute;left:136.80px;top:195.55px" class="cls_021"><span class="cls_021">if (angle &lt; 0) angle += 2 * MathUtils .PI2;</span></div>
<div style="position:absolute;left:136.80px;top:207.79px" class="cls_021"><span class="cls_021">return angle;</span></div>
<div style="position:absolute;left:126.00px;top:220.03px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:239.77px" class="cls_007"><span class="cls_007">Here we use the arctan method of the Java Math utils class with the difference</span></div>
<div style="position:absolute;left:108.00px;top:252.37px" class="cls_007"><span class="cls_007">in position between our two points, which are the anchor and the firing position.</span></div>
<div style="position:absolute;left:108.00px;top:264.97px" class="cls_007"><span class="cls_007">Then, we just bound the angle so that it will always appear between 0 and 2*Pi</span></div>
<div style="position:absolute;left:108.00px;top:277.57px" class="cls_007"><span class="cls_007">(0 to 360 degrees).</span></div>
<div style="position:absolute;left:108.00px;top:298.82px" class="cls_007"><span class="cls_007">Our second method is for finding the distance between the two points:</span></div>
<div style="position:absolute;left:126.00px;top:319.75px" class="cls_021"><span class="cls_021">private float distanceBetweenTwoPoints() {</span></div>
<div style="position:absolute;left:136.80px;top:331.99px" class="cls_021"><span class="cls_021">return (float) Math.sqrt(((anchor.x - firingPosition.x) *</span></div>
<div style="position:absolute;left:136.80px;top:342.79px" class="cls_021"><span class="cls_021">(anchor.x - firingPosition.x)) + ((anchor.y - firingPosition.y)</span></div>
<div style="position:absolute;left:136.80px;top:353.59px" class="cls_021"><span class="cls_021">* (anchor.y - firingPosition.y)));</span></div>
<div style="position:absolute;left:126.00px;top:365.83px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:385.57px" class="cls_007"><span class="cls_007">Perhaps you can figure out which mathematical method is being used here.</span></div>
<div style="position:absolute;left:108.00px;top:406.82px" class="cls_007"><span class="cls_007">With all this information at hand, we can tie it all together with a method that will</span></div>
<div style="position:absolute;left:108.00px;top:419.42px" class="cls_007"><span class="cls_007">take the location of the mouse and tell us the distance—which will be the power—</span></div>
<div style="position:absolute;left:108.00px;top:432.02px" class="cls_007"><span class="cls_007">and the angle. We will use the angle to distribute the power between the x and</span></div>
<div style="position:absolute;left:108.00px;top:444.62px" class="cls_007"><span class="cls_007">the y planes.</span></div>
<div style="position:absolute;left:108.00px;top:465.85px" class="cls_007"><span class="cls_007">Add the following code to your </span><span class="cls_009">GameScreen</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:126.00px;top:486.79px" class="cls_021"><span class="cls_021">private void calculateAngleAndDistanceForBullet(int screenX, int</span></div>
<div style="position:absolute;left:126.00px;top:497.59px" class="cls_021"><span class="cls_021">screenY) {</span></div>
<div style="position:absolute;left:136.80px;top:509.83px" class="cls_021"><span class="cls_021">firingPosition.set(screenX, screenY);</span></div>
<div style="position:absolute;left:136.80px;top:522.07px" class="cls_021"><span class="cls_021">viewport.unproject(firingPosition);</span></div>
<div style="position:absolute;left:136.80px;top:534.31px" class="cls_021"><span class="cls_021">distance = distanceBetweenTwoPoints();</span></div>
<div style="position:absolute;left:136.80px;top:546.55px" class="cls_021"><span class="cls_021">angle = angleBetweenTwoPoints();</span></div>
<div style="position:absolute;left:136.80px;top:558.79px" class="cls_021"><span class="cls_021">if (distance > MAX_DISTANCE) {</span></div>
<div style="position:absolute;left:147.60px;top:571.03px" class="cls_021"><span class="cls_021">distance = MAX_DISTANCE;</span></div>
<div style="position:absolute;left:136.80px;top:583.27px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:595.51px" class="cls_021"><span class="cls_021">if (angle > LOWER_ANGLE) {</span></div>
<div style="position:absolute;left:147.60px;top:607.75px" class="cls_021"><span class="cls_021">if (angle > UPPER_ANGLE) {</span></div>
<div style="position:absolute;left:158.40px;top:619.99px" class="cls_021"><span class="cls_021">angle = 0;</span></div>
<div style="position:absolute;left:147.60px;top:632.23px" class="cls_021"><span class="cls_021">} else {</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 208 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:177242px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background226.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 8</span></div>
<div style="position:absolute;left:158.40px;top:114.01px" class="cls_021"><span class="cls_021">angle = LOWER_ANGLE;</span></div>
<div style="position:absolute;left:147.60px;top:126.25px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:138.49px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:150.73px" class="cls_021"><span class="cls_021">firingPosition.set(anchor.x +</span></div>
<div style="position:absolute;left:304.20px;top:150.73px" class="cls_021"><span class="cls_021">(distance * -</span></div>
<div style="position:absolute;left:136.80px;top:161.53px" class="cls_021"><span class="cls_021">MathUtils.cos(angle)), anchor.y +</span></div>
<div style="position:absolute;left:325.80px;top:161.53px" class="cls_021"><span class="cls_021">(distance * -</span></div>
<div style="position:absolute;left:136.80px;top:172.33px" class="cls_021"><span class="cls_021">MathUtils.sin(angle)));</span></div>
<div style="position:absolute;left:126.00px;top:184.57px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:204.30px" class="cls_007"><span class="cls_007">Let's see what we have here. Firstly, we take the screen coordinates and</span></div>
<div style="position:absolute;left:108.00px;top:216.90px" class="cls_007"><span class="cls_007">unproject them against our viewport. This converts them from the real-world</span></div>
<div style="position:absolute;left:108.00px;top:229.50px" class="cls_007"><span class="cls_007">to our game-world units. Next up, we call our two mathematical methods before</span></div>
<div style="position:absolute;left:108.00px;top:242.10px" class="cls_007"><span class="cls_007">setting some boundaries up so that we cap the distance at the maximum, and the</span></div>
<div style="position:absolute;left:108.00px;top:254.70px" class="cls_007"><span class="cls_007">same with the angle. Finally, we reset the position of the firing position variable</span></div>
<div style="position:absolute;left:108.00px;top:267.30px" class="cls_007"><span class="cls_007">as it might currently be outside the boundary.</span></div>
<div style="position:absolute;left:108.00px;top:288.54px" class="cls_007"><span class="cls_007">The next step related to changes we have to make involves updating the input</span></div>
<div style="position:absolute;left:108.00px;top:301.14px" class="cls_007"><span class="cls_007">processor. We now no longer want to fire a bullet (or acorn) on </span><span class="cls_009">touchDown()</span><span class="cls_007">,</span></div>
<div style="position:absolute;left:108.00px;top:313.74px" class="cls_007"><span class="cls_007">so we can do away with that. Instead, we are going to trigger the bullet creation</span></div>
<div style="position:absolute;left:108.00px;top:326.34px" class="cls_007"><span class="cls_007">on </span><span class="cls_009">touchUp()</span><span class="cls_007"> and call our distance and angle calculating method in the</span></div>
<div style="position:absolute;left:108.00px;top:338.94px" class="cls_009"><span class="cls_009">touchDragged()</span><span class="cls_007"> method. Go ahead and update the </span><span class="cls_009">InputAdapter</span><span class="cls_007"> as follows:</span></div>
<div style="position:absolute;left:126.00px;top:359.88px" class="cls_021"><span class="cls_021">Gdx.input.setInputProcessor(new InputAdapter() {</span></div>
<div style="position:absolute;left:136.80px;top:372.12px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:136.80px;top:384.36px" class="cls_021"><span class="cls_021">public boolean touchDragged(int screenX, int screenY, int</span></div>
<div style="position:absolute;left:136.80px;top:395.16px" class="cls_021"><span class="cls_021">pointer) {</span></div>
<div style="position:absolute;left:147.60px;top:407.40px" class="cls_021"><span class="cls_021">calculateAngleAndDistanceForBullet(screenX, screenY);</span></div>
<div style="position:absolute;left:147.60px;top:419.64px" class="cls_021"><span class="cls_021">return true;</span></div>
<div style="position:absolute;left:136.80px;top:431.88px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:456.36px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:136.80px;top:468.60px" class="cls_021"><span class="cls_021">public boolean touchUp(int screenX, int screenY, int pointer,</span></div>
<div style="position:absolute;left:136.80px;top:479.40px" class="cls_021"><span class="cls_021">int button) {</span></div>
<div style="position:absolute;left:147.60px;top:491.64px" class="cls_021"><span class="cls_021">createBullet();</span></div>
<div style="position:absolute;left:147.60px;top:503.88px" class="cls_021"><span class="cls_021">firingPosition.set(anchor.cpy());</span></div>
<div style="position:absolute;left:147.60px;top:516.12px" class="cls_021"><span class="cls_021">return true;</span></div>
<div style="position:absolute;left:136.80px;top:528.36px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:540.60px" class="cls_021"><span class="cls_021">});</span></div>
<div style="position:absolute;left:108.00px;top:560.34px" class="cls_007"><span class="cls_007">As a final touch, we reset the position of the firing point.</span></div>
<div style="position:absolute;left:108.00px;top:581.58px" class="cls_007"><span class="cls_007">Now, with that in place, we should update our </span><span class="cls_009">createBullet()</span><span class="cls_007"> method using the</span></div>
<div style="position:absolute;left:108.00px;top:594.18px" class="cls_007"><span class="cls_007">distance and the angle we provide. Here is how the code now looks:</span></div>
<div style="position:absolute;left:126.00px;top:615.12px" class="cls_021"><span class="cls_021">private void createBullet() {</span></div>
<div style="position:absolute;left:136.80px;top:627.36px" class="cls_021"><span class="cls_021">CircleShape circleShape = new CircleShape();</span></div>
<div style="position:absolute;left:136.80px;top:639.60px" class="cls_021"><span class="cls_021">circleShape.setRadius(0.5f);</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 209 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:178044px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background227.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Why Are All the Birds Angry?</span></div>
<div style="position:absolute;left:136.80px;top:114.01px" class="cls_021"><span class="cls_021">circleShape.setPosition(new</span></div>
<div style="position:absolute;left:136.80px;top:124.81px" class="cls_021"><span class="cls_021">Vector2(convertUnitsToMetres(firingPosition.x),</span></div>
<div style="position:absolute;left:136.80px;top:135.61px" class="cls_021"><span class="cls_021">convertUnitsToMetres(firingPosition.y)));</span></div>
<div style="position:absolute;left:136.80px;top:147.85px" class="cls_021"><span class="cls_021">BodyDef bd = new BodyDef();</span></div>
<div style="position:absolute;left:136.80px;top:160.09px" class="cls_021"><span class="cls_021">bd.type = BodyDef.BodyType.DynamicBody;</span></div>
<div style="position:absolute;left:136.80px;top:172.33px" class="cls_021"><span class="cls_021">Body bullet = world.createBody(bd);</span></div>
<div style="position:absolute;left:136.80px;top:184.57px" class="cls_021"><span class="cls_021">bullet.createFixture(circleShape, 1);</span></div>
<div style="position:absolute;left:136.80px;top:196.81px" class="cls_021"><span class="cls_021">circleShape.dispose();</span></div>
<div style="position:absolute;left:136.80px;top:209.05px" class="cls_021"><span class="cls_021">float velX = Math.abs( (MAX_STRENGTH * -MathUtils.cos(angle) *</span></div>
<div style="position:absolute;left:136.80px;top:219.85px" class="cls_021"><span class="cls_021">(distance / 100f)));</span></div>
<div style="position:absolute;left:136.80px;top:232.09px" class="cls_021"><span class="cls_021">float velY = Math.abs( (MAX_STRENGTH * -MathUtils.sin(angle) *</span></div>
<div style="position:absolute;left:136.80px;top:242.89px" class="cls_021"><span class="cls_021">(distance / 100f)));</span></div>
<div style="position:absolute;left:136.80px;top:255.13px" class="cls_021"><span class="cls_021">bullet.setLinearVelocity(velX, velY);</span></div>
<div style="position:absolute;left:126.00px;top:267.37px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:287.10px" class="cls_007"><span class="cls_007">A few things to note here. Firstly, we are now setting the initial position to be that</span></div>
<div style="position:absolute;left:108.00px;top:299.70px" class="cls_007"><span class="cls_007">of the firing point. Next, when we create the fixture, we give the bullet a density of</span></div>
<div style="position:absolute;left:108.00px;top:312.30px" class="cls_007"><span class="cls_007">1; this will allow it to rotate and roll around on the static floor. Finally, we do some</span></div>
<div style="position:absolute;left:108.00px;top:324.90px" class="cls_007"><span class="cls_007">more mathematical gymnastics to calculate our x and y velocities. As you can see,</span></div>
<div style="position:absolute;left:108.00px;top:337.50px" class="cls_007"><span class="cls_007">they are the ratio of the angle and distance.</span></div>
<div style="position:absolute;left:108.00px;top:358.74px" class="cls_007"><span class="cls_007">Our final step is to just get the debug shape renderer to display our two points and</span></div>
<div style="position:absolute;left:108.00px;top:371.34px" class="cls_007"><span class="cls_007">the line. I have updated the </span><span class="cls_009">drawDebug()</span><span class="cls_007"> method as follows:</span></div>
<div style="position:absolute;left:126.00px;top:392.28px" class="cls_021"><span class="cls_021">private void drawDebug() {</span></div>
<div style="position:absolute;left:136.80px;top:404.52px" class="cls_021"><span class="cls_021">debugRenderer.render(world, box2dCam.combined);</span></div>
<div style="position:absolute;left:136.80px;top:416.76px" class="cls_021"><span class="cls_021">shapeRenderer.setProjectionMatrix(camera.projection);</span></div>
<div style="position:absolute;left:136.80px;top:429.00px" class="cls_021"><span class="cls_021">shapeRenderer.setTransformMatrix(camera.view);</span></div>
<div style="position:absolute;left:136.80px;top:441.24px" class="cls_021"><span class="cls_021">shapeRenderer.begin(ShapeRenderer.ShapeType.Line);</span></div>
<div style="position:absolute;left:136.80px;top:453.48px" class="cls_021"><span class="cls_021">shapeRenderer.rect(anchor.x - 5, anchor.y - 5, 10, 10);</span></div>
<div style="position:absolute;left:136.80px;top:465.72px" class="cls_021"><span class="cls_021">shapeRenderer.rect(firingPosition.x - 5, firingPosition.y - 5,</span></div>
<div style="position:absolute;left:136.80px;top:476.52px" class="cls_021"><span class="cls_021">10, 10);</span></div>
<div style="position:absolute;left:136.80px;top:488.76px" class="cls_021"><span class="cls_021">shapeRenderer.line(anchor.x, anchor.y, firingPosition.x,</span></div>
<div style="position:absolute;left:136.80px;top:499.56px" class="cls_021"><span class="cls_021">firingPosition.y);</span></div>
<div style="position:absolute;left:136.80px;top:511.80px" class="cls_021"><span class="cls_021">shapeRenderer.end();</span></div>
<div style="position:absolute;left:126.00px;top:524.04px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 210 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:178846px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background228.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 8</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">We should be all set, run up the project, and let's see what happens.</span></div>
<div style="position:absolute;left:108.00px;top:391.66px" class="cls_007"><span class="cls_007">Hopefully, when you click and drag, you will have something similar to the</span></div>
<div style="position:absolute;left:108.00px;top:404.26px" class="cls_007"><span class="cls_007">preceding screenshot. When released, it should cause our projectile to fly through</span></div>
<div style="position:absolute;left:108.00px;top:416.86px" class="cls_007"><span class="cls_007">the air. Give it a go at different angles. You should notice you can't extend the line</span></div>
<div style="position:absolute;left:108.00px;top:429.46px" class="cls_007"><span class="cls_007">too far and it is bounded by the angles.</span></div>
<div style="position:absolute;left:108.00px;top:450.70px" class="cls_007"><span class="cls_007">Our final step before we are finished here is to add the art assets in.</span></div>
<div style="position:absolute;left:108.00px;top:478.80px" class="cls_012"><span class="cls_012">Time for an art attack!</span></div>
<div style="position:absolute;left:108.00px;top:499.78px" class="cls_007"><span class="cls_007">Here we are at the final part we are going to cover. You might be thinking "Well, we</span></div>
<div style="position:absolute;left:108.00px;top:512.38px" class="cls_007"><span class="cls_007">have covered this earlier in the book, I know how to add textures to a game. What</span></div>
<div style="position:absolute;left:108.00px;top:524.98px" class="cls_007"><span class="cls_007">could you possibly show me now?"</span></div>
<div style="position:absolute;left:108.00px;top:546.22px" class="cls_007"><span class="cls_007">Well, my intrepid reader, having a texture follow the position of a Box2D isn't as</span></div>
<div style="position:absolute;left:108.00px;top:558.82px" class="cls_007"><span class="cls_007">straightforward as you would like to think it is. We have to make some changes to</span></div>
<div style="position:absolute;left:108.00px;top:571.42px" class="cls_007"><span class="cls_007">the code we use to build our scene.</span></div>
<div style="position:absolute;left:293.99px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 211 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:179648px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background229.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Why Are All the Birds Angry?</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">So, first up, let's dive into some code and update our </span><span class="cls_009">TiledObjectBodyBuilder</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">class. We need to update this class because the problem we have is that we position</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">the fixture relative to the body, and currently all our bodies are at 0,0 but our fixtures</span></div>
<div style="position:absolute;left:108.00px;top:152.29px" class="cls_007"><span class="cls_007">are placed where we would expect them to be. If we move our bodies to where the</span></div>
<div style="position:absolute;left:108.00px;top:164.89px" class="cls_007"><span class="cls_007">fixtures are but don't update the code, they will be positioned relative to that new</span></div>
<div style="position:absolute;left:108.00px;top:177.49px" class="cls_007"><span class="cls_007">position and thus not be where we want them to be.</span></div>
<div style="position:absolute;left:108.00px;top:198.73px" class="cls_007"><span class="cls_007">With that in mind, first we should update the </span><span class="cls_009">getRectangle()</span><span class="cls_007"> and </span><span class="cls_009">getCircle()</span></div>
<div style="position:absolute;left:108.00px;top:211.33px" class="cls_007"><span class="cls_007">methods to remove the setting of the fixture position, as follows:</span></div>
<div style="position:absolute;left:126.00px;top:232.27px" class="cls_021"><span class="cls_021">private static PolygonShape getRectangle(RectangleMapObject</span></div>
<div style="position:absolute;left:126.00px;top:243.07px" class="cls_021"><span class="cls_021">rectangleObject) {</span></div>
<div style="position:absolute;left:136.80px;top:255.31px" class="cls_021"><span class="cls_021">Rectangle rectangle = rectangleObject.getRectangle();</span></div>
<div style="position:absolute;left:136.80px;top:267.55px" class="cls_021"><span class="cls_021">PolygonShape polygon = new PolygonShape();</span></div>
<div style="position:absolute;left:136.80px;top:279.79px" class="cls_021"><span class="cls_021">polygon.setAsBox(rectangle.width * HALF / PIXELS_PER_TILE,</span></div>
<div style="position:absolute;left:136.80px;top:290.59px" class="cls_021"><span class="cls_021">rectangle.height * HALF / PIXELS_PER_TILE);</span></div>
<div style="position:absolute;left:136.80px;top:302.83px" class="cls_021"><span class="cls_021">return polygon;</span></div>
<div style="position:absolute;left:126.00px;top:315.07px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:327.31px" class="cls_021"><span class="cls_021">private static CircleShape getCircle(EllipseMapObject</span></div>
<div style="position:absolute;left:126.00px;top:338.11px" class="cls_021"><span class="cls_021">ellipseObject) {</span></div>
<div style="position:absolute;left:136.80px;top:350.35px" class="cls_021"><span class="cls_021">Ellipse ellipse = ellipseObject.getEllipse();</span></div>
<div style="position:absolute;left:136.80px;top:362.59px" class="cls_021"><span class="cls_021">CircleShape circleShape = new CircleShape();</span></div>
<div style="position:absolute;left:136.80px;top:374.83px" class="cls_021"><span class="cls_021">circleShape.setRadius(ellipse.width * HALF / PIXELS_PER_TILE);</span></div>
<div style="position:absolute;left:136.80px;top:387.07px" class="cls_021"><span class="cls_021">return circleShape;</span></div>
<div style="position:absolute;left:126.00px;top:399.31px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:419.05px" class="cls_007"><span class="cls_007">Next, we are going to add a little helper method to get the position of a rectangle</span></div>
<div style="position:absolute;left:108.00px;top:431.65px" class="cls_007"><span class="cls_007">from the </span><span class="cls_009">RectangleMapObject</span><span class="cls_007"> class, suitable to be used with a Box2D body. The</span></div>
<div style="position:absolute;left:108.00px;top:444.25px" class="cls_007"><span class="cls_007">following is the code:</span></div>
<div style="position:absolute;left:126.00px;top:465.19px" class="cls_021"><span class="cls_021">private static Vector2 getTransformForRectangle(Rectangle</span></div>
<div style="position:absolute;left:126.00px;top:475.99px" class="cls_021"><span class="cls_021">rectangle) {</span></div>
<div style="position:absolute;left:136.80px;top:488.23px" class="cls_021"><span class="cls_021">return new Vector2((rectangle.x + (rectangle.width * HALF)) /</span></div>
<div style="position:absolute;left:136.80px;top:499.03px" class="cls_021"><span class="cls_021">PIXELS_PER_TILE, (rectangle.y</span></div>
<div style="position:absolute;left:304.20px;top:499.03px" class="cls_021"><span class="cls_021">+ (rectangle.height * HALF)) /</span></div>
<div style="position:absolute;left:136.80px;top:509.83px" class="cls_021"><span class="cls_021">PIXELS_PER_TILE);</span></div>
<div style="position:absolute;left:126.00px;top:522.07px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:541.81px" class="cls_007"><span class="cls_007">Nothing scary or new there. When setting the position of a body, we need to place it</span></div>
<div style="position:absolute;left:108.00px;top:554.41px" class="cls_007"><span class="cls_007">by the center point, hence the half width and half height.</span></div>
<div style="position:absolute;left:108.00px;top:575.66px" class="cls_007"><span class="cls_007">Now we can update the rest of the class to use this new method and to place our</span></div>
<div style="position:absolute;left:108.00px;top:588.26px" class="cls_007"><span class="cls_007">bodies and not the fixtures.</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 212 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:180450px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background230.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 8</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">The following code shows the three methods in all their glory:</span></div>
<div style="position:absolute;left:126.00px;top:135.43px" class="cls_021"><span class="cls_021">public static void buildBirdBodies(TiledMap tiledMap, World world)</span></div>
<div style="position:absolute;left:126.00px;top:146.23px" class="cls_021"><span class="cls_021">{</span></div>
<div style="position:absolute;left:136.80px;top:158.47px" class="cls_021"><span class="cls_021">MapObjects objects = tiledMap.getLayers().</span></div>
<div style="position:absolute;left:136.80px;top:169.27px" class="cls_021"><span class="cls_021">get("Physics_Birds").getObjects();</span></div>
<div style="position:absolute;left:136.80px;top:193.75px" class="cls_021"><span class="cls_021">for (MapObject object : objects) {</span></div>
<div style="position:absolute;left:147.60px;top:205.99px" class="cls_021"><span class="cls_021">EllipseMapObject ellipseMapObject = (EllipseMapObject) object;</span></div>
<div style="position:absolute;left:147.60px;top:218.23px" class="cls_021"><span class="cls_021">CircleShape circle = getCircle(ellipseMapObject);</span></div>
<div style="position:absolute;left:147.60px;top:230.47px" class="cls_021"><span class="cls_021">BodyDef bd = new BodyDef();</span></div>
<div style="position:absolute;left:147.60px;top:242.71px" class="cls_021"><span class="cls_021">bd.type = BodyDef.BodyType.DynamicBody;</span></div>
<div style="position:absolute;left:147.60px;top:254.95px" class="cls_021"><span class="cls_021">Body body = world.createBody(bd);</span></div>
<div style="position:absolute;left:147.60px;top:267.19px" class="cls_021"><span class="cls_021">Fixture fixture = body.createFixture(circle, 1);</span></div>
<div style="position:absolute;left:147.60px;top:279.43px" class="cls_021"><span class="cls_021">fixture.setUserData("enemy");</span></div>
<div style="position:absolute;left:147.60px;top:291.67px" class="cls_021"><span class="cls_021">body.setUserData("enemy");</span></div>
<div style="position:absolute;left:147.60px;top:316.15px" class="cls_021"><span class="cls_021">Ellipse ellipse = ellipseMapObject.getEllipse();</span></div>
<div style="position:absolute;left:147.60px;top:328.39px" class="cls_021"><span class="cls_021">body.setTransform(new Vector2((ellipse.x + ellipse.width *</span></div>
<div style="position:absolute;left:147.60px;top:339.19px" class="cls_021"><span class="cls_021">HALF) / PIXELS_PER_TILE, (ellipse.y + ellipse.height * HALF) /</span></div>
<div style="position:absolute;left:147.60px;top:349.99px" class="cls_021"><span class="cls_021">PIXELS_PER_TILE), 0);</span></div>
<div style="position:absolute;left:147.60px;top:362.23px" class="cls_021"><span class="cls_021">circle.dispose();</span></div>
<div style="position:absolute;left:136.80px;top:374.47px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:386.71px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:411.19px" class="cls_021"><span class="cls_021">public static void buildBuildingBodies(TiledMap tiledMap, World</span></div>
<div style="position:absolute;left:126.00px;top:421.99px" class="cls_021"><span class="cls_021">world) {</span></div>
<div style="position:absolute;left:136.80px;top:434.23px" class="cls_021"><span class="cls_021">MapObjects objects =</span></div>
<div style="position:absolute;left:136.80px;top:445.03px" class="cls_021"><span class="cls_021">tiledMap.getLayers().get("Physics_Buildings").getObjects();</span></div>
<div style="position:absolute;left:136.80px;top:469.51px" class="cls_021"><span class="cls_021">for (MapObject object : objects) {</span></div>
<div style="position:absolute;left:147.60px;top:481.75px" class="cls_021"><span class="cls_021">RectangleMapObject rectangleMapObject = (RectangleMapObject)</span></div>
<div style="position:absolute;left:147.60px;top:492.55px" class="cls_021"><span class="cls_021">object;</span></div>
<div style="position:absolute;left:147.60px;top:504.79px" class="cls_021"><span class="cls_021">PolygonShape rectangle = getRectangle(rectangleMapObject);</span></div>
<div style="position:absolute;left:147.60px;top:517.03px" class="cls_021"><span class="cls_021">BodyDef bd = new BodyDef();</span></div>
<div style="position:absolute;left:147.60px;top:529.27px" class="cls_021"><span class="cls_021">bd.type = BodyDef.BodyType.DynamicBody;</span></div>
<div style="position:absolute;left:147.60px;top:541.51px" class="cls_021"><span class="cls_021">Body body = world.createBody(bd);</span></div>
<div style="position:absolute;left:147.60px;top:565.99px" class="cls_021"><span class="cls_021">if (rectangleMapObject.getRectangle().width ></span></div>
<div style="position:absolute;left:147.60px;top:576.79px" class="cls_021"><span class="cls_021">rectangleMapObject.getRectangle().height) {</span></div>
<div style="position:absolute;left:158.40px;top:589.03px" class="cls_021"><span class="cls_021">body.setUserData("horizontal");</span></div>
<div style="position:absolute;left:147.60px;top:601.27px" class="cls_021"><span class="cls_021">} else {</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 213 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:181252px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background231.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Why Are All the Birds Angry?</span></div>
<div style="position:absolute;left:158.40px;top:114.01px" class="cls_021"><span class="cls_021">body.setUserData("vertical");</span></div>
<div style="position:absolute;left:147.60px;top:126.25px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:147.60px;top:150.73px" class="cls_021"><span class="cls_021">body.createFixture(rectangle, 1);</span></div>
<div style="position:absolute;left:147.60px;top:162.97px" class="cls_021"><span class="cls_021">body.setTransform(getTransformForRectangle</span></div>
<div style="position:absolute;left:147.60px;top:173.77px" class="cls_021"><span class="cls_021">(rectangleMapObject.getRectangle()), 0);</span></div>
<div style="position:absolute;left:147.60px;top:186.01px" class="cls_021"><span class="cls_021">rectangle.dispose();</span></div>
<div style="position:absolute;left:136.80px;top:198.25px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:210.49px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:234.97px" class="cls_021"><span class="cls_021">public static void buildFloorBodies(TiledMap tiledMap, World</span></div>
<div style="position:absolute;left:126.00px;top:245.77px" class="cls_021"><span class="cls_021">world) {</span></div>
<div style="position:absolute;left:136.80px;top:258.01px" class="cls_021"><span class="cls_021">MapObjects objects = tiledMap.getLayers().get</span></div>
<div style="position:absolute;left:136.80px;top:268.81px" class="cls_021"><span class="cls_021">("Physics_Floor").getObjects();</span></div>
<div style="position:absolute;left:136.80px;top:293.29px" class="cls_021"><span class="cls_021">for (MapObject object : objects) {</span></div>
<div style="position:absolute;left:147.60px;top:305.53px" class="cls_021"><span class="cls_021">RectangleMapObject rectangleMapObject = (RectangleMapObject)</span></div>
<div style="position:absolute;left:147.60px;top:316.33px" class="cls_021"><span class="cls_021">object;</span></div>
<div style="position:absolute;left:147.60px;top:328.57px" class="cls_021"><span class="cls_021">PolygonShape rectangle = getRectangle(rectangleMapObject);</span></div>
<div style="position:absolute;left:147.60px;top:340.81px" class="cls_021"><span class="cls_021">BodyDef bd = new BodyDef();</span></div>
<div style="position:absolute;left:147.60px;top:353.05px" class="cls_021"><span class="cls_021">bd.type = BodyDef.BodyType.StaticBody;</span></div>
<div style="position:absolute;left:147.60px;top:365.29px" class="cls_021"><span class="cls_021">Body body = world.createBody(bd);</span></div>
<div style="position:absolute;left:147.60px;top:377.53px" class="cls_021"><span class="cls_021">body.setUserData("floor");</span></div>
<div style="position:absolute;left:147.60px;top:389.77px" class="cls_021"><span class="cls_021">body.createFixture(rectangle, 1);</span></div>
<div style="position:absolute;left:147.60px;top:402.01px" class="cls_021"><span class="cls_021">body.setTransform(getTransformForRectangle</span></div>
<div style="position:absolute;left:147.60px;top:412.81px" class="cls_021"><span class="cls_021">(rectangleMapObject.getRectangle()), 0);</span></div>
<div style="position:absolute;left:147.60px;top:425.05px" class="cls_021"><span class="cls_021">rectangle.dispose();</span></div>
<div style="position:absolute;left:136.80px;top:437.29px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:449.53px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:469.26px" class="cls_007"><span class="cls_007">As you can see, we are using the </span><span class="cls_009">setTransform()</span><span class="cls_007"> method of our bodies; this means</span></div>
<div style="position:absolute;left:108.00px;top:481.86px" class="cls_007"><span class="cls_007">we can now position textures relative to that.</span></div>
<div style="position:absolute;left:108.00px;top:503.10px" class="cls_007"><span class="cls_007">Hopefully, you will have spotted the other tiny addition in the preceding code.</span></div>
<div style="position:absolute;left:108.00px;top:515.70px" class="cls_007"><span class="cls_007">By setting the user data of each body to have a name, we can query the world</span></div>
<div style="position:absolute;left:108.00px;top:528.30px" class="cls_007"><span class="cls_007">for bodies later on and decide which textures to use.</span></div>
<div style="position:absolute;left:108.00px;top:549.54px" class="cls_007"><span class="cls_007">Before we use our textures, we must make sure we load them. In our </span><span class="cls_009">LoadingScreen</span></div>
<div style="position:absolute;left:108.00px;top:562.14px" class="cls_007"><span class="cls_007">class, we shall now update our </span><span class="cls_009">show()</span><span class="cls_007"> method to add the additional textures:</span></div>
<div style="position:absolute;left:126.00px;top:583.08px" class="cls_021"><span class="cls_021">public void show() {</span></div>
<div style="position:absolute;left:136.80px;top:595.32px" class="cls_021"><span class="cls_021">// Code omitted for brevity</span></div>
<div style="position:absolute;left:136.80px;top:607.56px" class="cls_021"><span class="cls_021">nuttyGame.getAssetManager().load("obstacleVertical.png",</span></div>
<div style="position:absolute;left:136.80px;top:618.36px" class="cls_021"><span class="cls_021">Texture.class);</span></div>
<div style="position:absolute;left:136.80px;top:630.60px" class="cls_021"><span class="cls_021">nuttyGame.getAssetManager().load("obstacleHorizontal.png",</span></div>
<div style="position:absolute;left:136.80px;top:641.40px" class="cls_021"><span class="cls_021">Texture.class);</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 214 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:182054px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background232.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 8</span></div>
<div style="position:absolute;left:136.80px;top:114.01px" class="cls_021"><span class="cls_021">nuttyGame.getAssetManager().load("bird.png", Texture.class);</span></div>
<div style="position:absolute;left:136.80px;top:126.25px" class="cls_021"><span class="cls_021">nuttyGame.getAssetManager().load("slingshot.png",</span></div>
<div style="position:absolute;left:136.80px;top:137.05px" class="cls_021"><span class="cls_021">Texture.class);</span></div>
<div style="position:absolute;left:136.80px;top:149.29px" class="cls_021"><span class="cls_021">nuttyGame.getAssetManager().load("squirrel.png", Texture.class);</span></div>
<div style="position:absolute;left:136.80px;top:161.53px" class="cls_021"><span class="cls_021">nuttyGame.getAssetManager().load("acorn.png", Texture.class);</span></div>
<div style="position:absolute;left:126.00px;top:173.77px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:193.50px" class="cls_007"><span class="cls_007">They are all the textures we are going to use, so now we can start creating</span></div>
<div style="position:absolute;left:108.00px;top:206.10px" class="cls_007"><span class="cls_007">our textures.</span></div>
<div style="position:absolute;left:108.00px;top:227.34px" class="cls_007"><span class="cls_007">Before we do I just want to introduce you to a class called </span><span class="cls_009">Sprite</span><span class="cls_007">. The </span><span class="cls_009">Sprite</span><span class="cls_007"> class</span></div>
<div style="position:absolute;left:108.00px;top:239.94px" class="cls_007"><span class="cls_007">is an awesome class as it can not only hold our texture but also allows us to perform</span></div>
<div style="position:absolute;left:108.00px;top:252.54px" class="cls_007"><span class="cls_007">rotations and scaling on it. This will be needed as our acorns will roll along the</span></div>
<div style="position:absolute;left:108.00px;top:265.14px" class="cls_007"><span class="cls_007">ground and the building parts collapse and so on. So with that in mind, we are going</span></div>
<div style="position:absolute;left:108.00px;top:277.74px" class="cls_007"><span class="cls_007">to create our textures using this </span><span class="cls_009">Sprite</span><span class="cls_007"> class.</span></div>
<div style="position:absolute;left:108.00px;top:298.98px" class="cls_007"><span class="cls_007">For the creation of building parts and the enemies, I have created another class called</span></div>
<div style="position:absolute;left:108.00px;top:311.58px" class="cls_009"><span class="cls_009">SpriteGenerator</span><span class="cls_007">. This class will inspect a body for user data and create a sprite that</span></div>
<div style="position:absolute;left:108.00px;top:324.18px" class="cls_007"><span class="cls_007">correctly corresponds to it.</span></div>
<div style="position:absolute;left:108.00px;top:345.42px" class="cls_007"><span class="cls_007">The following is the code listing for the class:</span></div>
<div style="position:absolute;left:126.00px;top:366.36px" class="cls_021"><span class="cls_021">public class SpriteGenerator {</span></div>
<div style="position:absolute;left:136.80px;top:378.60px" class="cls_021"><span class="cls_021">public static Sprite generateSpriteForBody(AssetManager</span></div>
<div style="position:absolute;left:136.80px;top:389.40px" class="cls_021"><span class="cls_021">assetManager, Body body) {</span></div>
<div style="position:absolute;left:147.60px;top:401.64px" class="cls_021"><span class="cls_021">if ("horizontal".equals(body.getUserData())) {</span></div>
<div style="position:absolute;left:158.40px;top:413.88px" class="cls_021"><span class="cls_021">return createSprite(assetManager, "obstacleHorizontal.png");</span></div>
<div style="position:absolute;left:147.60px;top:426.12px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:147.60px;top:438.36px" class="cls_021"><span class="cls_021">if ("vertical".equals(body.getUserData())) {</span></div>
<div style="position:absolute;left:158.40px;top:450.60px" class="cls_021"><span class="cls_021">return createSprite(assetManager, "obstacleVertical.png");</span></div>
<div style="position:absolute;left:147.60px;top:462.84px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:147.60px;top:475.08px" class="cls_021"><span class="cls_021">if ("enemy".equals(body.getUserData())) {</span></div>
<div style="position:absolute;left:158.40px;top:487.32px" class="cls_021"><span class="cls_021">return createSprite(assetManager, "bird.png");</span></div>
<div style="position:absolute;left:147.60px;top:499.56px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:147.60px;top:511.80px" class="cls_021"><span class="cls_021">return null;</span></div>
<div style="position:absolute;left:136.80px;top:524.04px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:536.28px" class="cls_021"><span class="cls_021">private static Sprite createSprite(AssetManager assetManager,</span></div>
<div style="position:absolute;left:136.80px;top:547.08px" class="cls_021"><span class="cls_021">String textureName) {</span></div>
<div style="position:absolute;left:147.60px;top:559.32px" class="cls_021"><span class="cls_021">Sprite sprite = new Sprite(assetManager.get(textureName,</span></div>
<div style="position:absolute;left:147.60px;top:570.12px" class="cls_021"><span class="cls_021">Texture.class));</span></div>
<div style="position:absolute;left:147.60px;top:582.36px" class="cls_021"><span class="cls_021">sprite.setOrigin(sprite.getWidth() / 2, sprite.getHeight() /</span></div>
<div style="position:absolute;left:147.60px;top:593.16px" class="cls_021"><span class="cls_021">2);</span></div>
<div style="position:absolute;left:147.60px;top:605.40px" class="cls_021"><span class="cls_021">return sprite;</span></div>
<div style="position:absolute;left:136.80px;top:617.64px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:629.88px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 215 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:182856px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background233.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Why Are All the Birds Angry?</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">As you can see, it only contains two methods, only one of which is the API.</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">Hopefully, this should be straightforward for you to work out what is going on.</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">Depending on the user data, we create a sprite with the texture that matches up. You</span></div>
<div style="position:absolute;left:108.00px;top:152.29px" class="cls_007"><span class="cls_007">will notice in the </span><span class="cls_009">createSprite()</span><span class="cls_007"> method that we also set the origin; the reason for</span></div>
<div style="position:absolute;left:108.00px;top:164.89px" class="cls_007"><span class="cls_007">this is because the rotation ability of a sprite is based around that origin point. So, we</span></div>
<div style="position:absolute;left:108.00px;top:177.49px" class="cls_007"><span class="cls_007">simply set that to be the center of the texture.</span></div>
<div style="position:absolute;left:108.00px;top:198.73px" class="cls_007"><span class="cls_007">Right, back to our </span><span class="cls_009">GameScreen</span><span class="cls_007"> class, here we are now going to tie everything</span></div>
<div style="position:absolute;left:108.00px;top:211.33px" class="cls_007"><span class="cls_007">together. Firstly, let's define some new fields that we will be using for our textures:</span></div>
<div style="position:absolute;left:126.00px;top:232.27px" class="cls_021"><span class="cls_021">private ObjectMap&lt;Body, Sprite> sprites = new ObjectMap&lt;>();;</span></div>
<div style="position:absolute;left:126.00px;top:244.51px" class="cls_021"><span class="cls_021">private Sprite slingshot;</span></div>
<div style="position:absolute;left:126.00px;top:256.75px" class="cls_021"><span class="cls_021">private Sprite squirrel;</span></div>
<div style="position:absolute;left:126.00px;top:268.99px" class="cls_021"><span class="cls_021">private Sprite staticAcorn;</span></div>
<div style="position:absolute;left:108.00px;top:288.73px" class="cls_007"><span class="cls_007">Firstly, we have a map that will provide us with the ability to look up sprites by the</span></div>
<div style="position:absolute;left:108.00px;top:301.33px" class="cls_007"><span class="cls_007">body that reflects them in the Box2D world. Then, we have three sprites that will be</span></div>
<div style="position:absolute;left:108.00px;top:313.93px" class="cls_007"><span class="cls_007">static parts of the game. The </span><span class="cls_009">staticAcorn</span><span class="cls_007"> sprite, in case you are wondering, will be</span></div>
<div style="position:absolute;left:108.00px;top:326.53px" class="cls_007"><span class="cls_007">the acorn that sits in the slingshot and moves with the cursor before the acorn body</span></div>
<div style="position:absolute;left:108.00px;top:339.13px" class="cls_007"><span class="cls_007">is created and fired.</span></div>
<div style="position:absolute;left:108.00px;top:360.38px" class="cls_007"><span class="cls_007">Now, we need to instantiate all these sprites and generate some sprites for the</span></div>
<div style="position:absolute;left:108.00px;top:372.97px" class="cls_007"><span class="cls_007">bodies. Let's update the </span><span class="cls_009">show()</span><span class="cls_007"> method with the following additional code:</span></div>
<div style="position:absolute;left:126.00px;top:393.91px" class="cls_021"><span class="cls_021">Array&lt;Body> bodies = new Array&lt;>();</span></div>
<div style="position:absolute;left:126.00px;top:406.15px" class="cls_021"><span class="cls_021">world.getBodies(bodies);</span></div>
<div style="position:absolute;left:126.00px;top:418.39px" class="cls_021"><span class="cls_021">for (Body body : bodies) {</span></div>
<div style="position:absolute;left:136.80px;top:430.63px" class="cls_021"><span class="cls_021">Sprite sprite = SpriteGenerator.generateSpriteForBody</span></div>
<div style="position:absolute;left:136.80px;top:441.43px" class="cls_021"><span class="cls_021">(nuttyGame.getAssetManager(), body);</span></div>
<div style="position:absolute;left:136.80px;top:453.67px" class="cls_021"><span class="cls_021">if (sprite != null) sprites.put(body, sprite);</span></div>
<div style="position:absolute;left:126.00px;top:465.91px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:490.39px" class="cls_021"><span class="cls_021">slingshot = new Sprite(nuttyGame.getAssetManager().get</span></div>
<div style="position:absolute;left:126.00px;top:501.19px" class="cls_021"><span class="cls_021">("slingshot.png", Texture.class));</span></div>
<div style="position:absolute;left:126.00px;top:513.43px" class="cls_021"><span class="cls_021">slingshot.setPosition(170, 64);</span></div>
<div style="position:absolute;left:126.00px;top:525.67px" class="cls_021"><span class="cls_021">squirrel = new Sprite(nuttyGame.getAssetManager().get</span></div>
<div style="position:absolute;left:126.00px;top:536.47px" class="cls_021"><span class="cls_021">("squirrel.png", Texture.class));</span></div>
<div style="position:absolute;left:126.00px;top:548.71px" class="cls_021"><span class="cls_021">squirrel.setPosition(32, 64);</span></div>
<div style="position:absolute;left:126.00px;top:560.95px" class="cls_021"><span class="cls_021">staticAcorn = new Sprite(nuttyGame.getAssetManager().get</span></div>
<div style="position:absolute;left:126.00px;top:571.75px" class="cls_021"><span class="cls_021">("acorn.png", Texture.class));</span></div>
<div style="position:absolute;left:108.00px;top:591.49px" class="cls_007"><span class="cls_007">Here we have our </span><span class="cls_009">SpriteGenerator</span><span class="cls_007"> class coming into play. We first of all query</span></div>
<div style="position:absolute;left:108.00px;top:604.09px" class="cls_007"><span class="cls_007">the world for all the bodies, and we then iterate over them and pass them and the</span></div>
<div style="position:absolute;left:108.00px;top:616.69px" class="cls_009"><span class="cls_009">AssetManager</span><span class="cls_007"> class to our generating class. If the body requires a sprite, it will be</span></div>
<div style="position:absolute;left:108.00px;top:629.29px" class="cls_007"><span class="cls_007">returned and we add it to the map.</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 216 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:183658px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background234.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 8</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">I would like to say at this point that you could collect the bodies when you create</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">them, but there is another way to do this, you could also create the sprite when you</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">create the body and set it as its user data—that's fine too! The beauty of software</span></div>
<div style="position:absolute;left:108.00px;top:152.29px" class="cls_007"><span class="cls_007">development is that there isn't a right answer, there are usually several of them.</span></div>
<div style="position:absolute;left:108.00px;top:173.54px" class="cls_007"><span class="cls_007">Finally, we create our static sprites and set their positions.</span></div>
<div style="position:absolute;left:108.00px;top:194.78px" class="cls_007"><span class="cls_007">Before we run up this project and see where we are, we need to do just a couple</span></div>
<div style="position:absolute;left:108.00px;top:207.38px" class="cls_007"><span class="cls_007">more things.</span></div>
<div style="position:absolute;left:108.00px;top:228.62px" class="cls_007"><span class="cls_007">Firstly, we are going to need a way to update the sprite positions every time the</span></div>
<div style="position:absolute;left:108.00px;top:241.22px" class="cls_007"><span class="cls_007">world is updated; otherwise they will never move!</span></div>
<div style="position:absolute;left:108.00px;top:262.45px" class="cls_007"><span class="cls_007">So, we need to create a method called </span><span class="cls_009">updateSpritePositions()</span><span class="cls_007"> and add it to our</span></div>
<div style="position:absolute;left:108.00px;top:275.05px" class="cls_009"><span class="cls_009">GameScreen</span><span class="cls_007"> class. Here it is:</span></div>
<div style="position:absolute;left:126.00px;top:295.99px" class="cls_021"><span class="cls_021">private void updateSpritePositions() {</span></div>
<div style="position:absolute;left:136.80px;top:308.23px" class="cls_021"><span class="cls_021">for (Body body : sprites.keys()) {</span></div>
<div style="position:absolute;left:147.60px;top:320.47px" class="cls_021"><span class="cls_021">Sprite sprite = sprites.get(body);</span></div>
<div style="position:absolute;left:147.60px;top:332.71px" class="cls_021"><span class="cls_021">sprite.setPosition(</span></div>
<div style="position:absolute;left:158.40px;top:344.95px" class="cls_021"><span class="cls_021">convertMetresToUnits(body.getPosition().x) -</span></div>
<div style="position:absolute;left:158.40px;top:355.75px" class="cls_021"><span class="cls_021">sprite.getWidth() / 2f,</span></div>
<div style="position:absolute;left:158.40px;top:367.99px" class="cls_021"><span class="cls_021">convertMetresToUnits(body.getPosition().y) -</span></div>
<div style="position:absolute;left:158.40px;top:378.79px" class="cls_021"><span class="cls_021">sprite.getHeight() / 2f);</span></div>
<div style="position:absolute;left:147.60px;top:391.03px" class="cls_021"><span class="cls_021">sprite.setRotation(MathUtils.radiansToDegrees *</span></div>
<div style="position:absolute;left:147.60px;top:401.83px" class="cls_021"><span class="cls_021">body.getAngle());</span></div>
<div style="position:absolute;left:136.80px;top:414.07px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:426.31px" class="cls_021"><span class="cls_021">staticAcorn.setPosition(firingPosition.x -</span></div>
<div style="position:absolute;left:136.80px;top:437.11px" class="cls_021"><span class="cls_021">staticAcorn.getWidth() / 2f, firingPosition.y -</span></div>
<div style="position:absolute;left:136.80px;top:447.91px" class="cls_021"><span class="cls_021">staticAcorn.getHeight() / 2f);</span></div>
<div style="position:absolute;left:126.00px;top:460.15px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:479.89px" class="cls_007"><span class="cls_007">As you can see, it is fairly simple. We iterate over our map of bodies and sprites and</span></div>
<div style="position:absolute;left:108.00px;top:492.49px" class="cls_007"><span class="cls_007">update the sprite's position and rotation with that of the bodies. Finally, we update</span></div>
<div style="position:absolute;left:108.00px;top:505.09px" class="cls_007"><span class="cls_007">our static acorn to make the position of the firing position variable.</span></div>
<div style="position:absolute;left:108.00px;top:526.33px" class="cls_007"><span class="cls_007">Now, we just add that to our </span><span class="cls_009">update()</span><span class="cls_007"> method as follows:</span></div>
<div style="position:absolute;left:126.00px;top:547.27px" class="cls_021"><span class="cls_021">private void update(float delta) {</span></div>
<div style="position:absolute;left:136.80px;top:559.51px" class="cls_021"><span class="cls_021">clearDeadBodies();</span></div>
<div style="position:absolute;left:136.80px;top:571.75px" class="cls_021"><span class="cls_021">world.step(delta, 6, 2);</span></div>
<div style="position:absolute;left:136.80px;top:583.99px" class="cls_021"><span class="cls_021">box2dCam.position.set(UNIT_WIDTH / 2, UNIT_HEIGHT / 2, 0);</span></div>
<div style="position:absolute;left:136.80px;top:596.23px" class="cls_021"><span class="cls_021">box2dCam.update();</span></div>
<div style="position:absolute;left:136.80px;top:608.47px" class="cls_021"><span class="cls_021">updateSpritePositions();</span></div>
<div style="position:absolute;left:126.00px;top:620.71px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 217 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:184460px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background235.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Why Are All the Birds Angry?</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Finally, we should update our </span><span class="cls_009">clearDeadBodies()</span><span class="cls_007"> method to remove the sprite that</span></div>
<div style="position:absolute;left:108.01px;top:127.09px" class="cls_007"><span class="cls_007">represents our enemy from the sprite map, so it will then disappear from view when</span></div>
<div style="position:absolute;left:108.01px;top:139.69px" class="cls_007"><span class="cls_007">the enemy is defeated:</span></div>
<div style="position:absolute;left:126.00px;top:160.63px" class="cls_021"><span class="cls_021">private void clearDeadBodies() {</span></div>
<div style="position:absolute;left:136.80px;top:172.87px" class="cls_021"><span class="cls_021">for (Body body : toRemove) {</span></div>
<div style="position:absolute;left:147.60px;top:185.11px" class="cls_021"><span class="cls_021">sprites.remove(body);</span></div>
<div style="position:absolute;left:147.60px;top:197.35px" class="cls_021"><span class="cls_021">world.destroyBody(body);</span></div>
<div style="position:absolute;left:136.80px;top:209.59px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:221.83px" class="cls_021"><span class="cls_021">toRemove.clear();</span></div>
<div style="position:absolute;left:126.00px;top:234.07px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:253.81px" class="cls_007"><span class="cls_007">Next, we need to update our </span><span class="cls_009">createBullet()</span><span class="cls_007"> method so that our acorn image is</span></div>
<div style="position:absolute;left:108.00px;top:266.41px" class="cls_007"><span class="cls_007">added to the map and will be rendered:</span></div>
<div style="position:absolute;left:126.00px;top:287.35px" class="cls_021"><span class="cls_021">private void createBullet() {</span></div>
<div style="position:absolute;left:136.80px;top:299.59px" class="cls_021"><span class="cls_021">// Code ommitted for brevity</span></div>
<div style="position:absolute;left:136.80px;top:311.83px" class="cls_021"><span class="cls_021">Sprite sprite = new Sprite(nuttyGame.getAssetManager().get</span></div>
<div style="position:absolute;left:136.80px;top:322.63px" class="cls_021"><span class="cls_021">("acorn.png", Texture.class));</span></div>
<div style="position:absolute;left:136.80px;top:334.87px" class="cls_021"><span class="cls_021">sprite.setOrigin(sprite.getWidth() / 2, sprite.getHeight() / 2);</span></div>
<div style="position:absolute;left:136.80px;top:347.11px" class="cls_021"><span class="cls_021">sprites.put(bullet, sprite);</span></div>
<div style="position:absolute;left:136.80px;top:359.35px" class="cls_021"><span class="cls_021">// Code ommitted for brevity</span></div>
<div style="position:absolute;left:126.00px;top:371.59px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:391.33px" class="cls_007"><span class="cls_007">Ensure you place the following code above the </span><span class="cls_009">dispose()</span><span class="cls_007"> call:</span></div>
<div style="position:absolute;left:126.00px;top:412.27px" class="cls_021"><span class="cls_021">circleShape.dispose();</span></div>
<div style="position:absolute;left:108.00px;top:432.01px" class="cls_007"><span class="cls_007">With the update cycle sorted and our acorns set to be rendered, we now need to</span></div>
<div style="position:absolute;left:108.00px;top:444.61px" class="cls_007"><span class="cls_007">update our </span><span class="cls_009">draw()</span><span class="cls_007"> method so that everything is rendered correctly. Here is how</span></div>
<div style="position:absolute;left:108.00px;top:457.21px" class="cls_007"><span class="cls_007">the </span><span class="cls_009">draw()</span><span class="cls_007"> method should look:</span></div>
<div style="position:absolute;left:126.00px;top:478.15px" class="cls_021"><span class="cls_021">private void draw() {</span></div>
<div style="position:absolute;left:136.80px;top:490.39px" class="cls_021"><span class="cls_021">batch.setProjectionMatrix(camera.projection);</span></div>
<div style="position:absolute;left:136.80px;top:502.63px" class="cls_021"><span class="cls_021">batch.setTransformMatrix(camera.view);</span></div>
<div style="position:absolute;left:136.80px;top:514.87px" class="cls_021"><span class="cls_021">orthogonalTiledMapRenderer.render();</span></div>
<div style="position:absolute;left:136.80px;top:527.11px" class="cls_021"><span class="cls_021">batch.begin();</span></div>
<div style="position:absolute;left:136.80px;top:539.35px" class="cls_021"><span class="cls_021">for (Sprite sprite : sprites.values()) {</span></div>
<div style="position:absolute;left:147.60px;top:551.59px" class="cls_021"><span class="cls_021">sprite.draw(batch);</span></div>
<div style="position:absolute;left:136.80px;top:563.83px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:576.07px" class="cls_021"><span class="cls_021">squirrel.draw(batch);</span></div>
<div style="position:absolute;left:136.80px;top:588.31px" class="cls_021"><span class="cls_021">staticAcorn.draw(batch);</span></div>
<div style="position:absolute;left:136.80px;top:600.55px" class="cls_021"><span class="cls_021">slingshot.draw(batch);</span></div>
<div style="position:absolute;left:136.80px;top:612.79px" class="cls_021"><span class="cls_021">batch.end();</span></div>
<div style="position:absolute;left:126.00px;top:625.03px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 218 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:185262px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background236.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 8</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Now, the absolute last thing to do! Comment out the </span><span class="cls_009">drawDebug()</span><span class="cls_007"> call in our</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_009"><span class="cls_009">render()</span><span class="cls_007"> method so that we don't have the wire frames everywhere!</span></div>
<div style="position:absolute;left:108.00px;top:148.34px" class="cls_007"><span class="cls_007">Ah but wait! Our sneaky artist has moved the location of the slingshot. We need to</span></div>
<div style="position:absolute;left:108.00px;top:160.94px" class="cls_007"><span class="cls_007">update our anchor position.</span></div>
<div style="position:absolute;left:108.00px;top:182.18px" class="cls_007"><span class="cls_007">Let's use this as a test to see if you have been paying attention. See if you can work</span></div>
<div style="position:absolute;left:108.00px;top:194.78px" class="cls_007"><span class="cls_007">out what the position of the anchor should now be.</span></div>
<div style="position:absolute;left:108.00px;top:216.02px" class="cls_007"><span class="cls_007">If you don't want to, here is what it should be set to now:</span></div>
<div style="position:absolute;left:126.00px;top:236.95px" class="cls_021"><span class="cls_021">private final Vector2 anchor = new</span></div>
<div style="position:absolute;left:126.00px;top:247.75px" class="cls_021"><span class="cls_021">Vector2(convertMetresToUnits(6.125f),</span></div>
<div style="position:absolute;left:126.00px;top:258.55px" class="cls_021"><span class="cls_021">convertMetresToUnits(5.75f));</span></div>
<div style="position:absolute;left:108.00px;top:285.15px" class="cls_012"><span class="cls_012">Ladies and gentleman - the main event!</span></div>
<div style="position:absolute;left:108.00px;top:306.13px" class="cls_007"><span class="cls_007">Right, readers, this is the part we have all been waiting for. I know you have been</span></div>
<div style="position:absolute;left:108.00px;top:318.73px" class="cls_007"><span class="cls_007">itching to launch the game with the art and see it in all its glory. For those who</span></div>
<div style="position:absolute;left:108.00px;top:331.33px" class="cls_007"><span class="cls_007">have done that already, well done on being inquisitive to see the game in its various</span></div>
<div style="position:absolute;left:108.00px;top:343.93px" class="cls_007"><span class="cls_007">stages. For the rest, are you ready?</span></div>
<div style="position:absolute;left:108.00px;top:365.18px" class="cls_007"><span class="cls_007">3...</span></div>
<div style="position:absolute;left:108.00px;top:386.42px" class="cls_007"><span class="cls_007">2...</span></div>
<div style="position:absolute;left:108.00px;top:407.66px" class="cls_007"><span class="cls_007">1...</span></div>
<div style="position:absolute;left:108.00px;top:428.90px" class="cls_007"><span class="cls_007">Launch the project!</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 219 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:186064px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background237.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Why Are All the Birds Angry?</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Yey, doesn't it look wonderful! How many shots do you have to fire before you</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">defeat that naughty bird?</span></div>
<div style="position:absolute;left:108.00px;top:148.34px" class="cls_007"><span class="cls_007">You should all be very proud of what you have just accomplished there. Whilst</span></div>
<div style="position:absolute;left:108.00px;top:160.94px" class="cls_007"><span class="cls_007">we don't have a score, menu screen, and a game state, you have already done</span></div>
<div style="position:absolute;left:108.00px;top:173.54px" class="cls_007"><span class="cls_007">these before in the previous games! Now is your chance to go back and take</span></div>
<div style="position:absolute;left:108.00px;top:186.14px" class="cls_007"><span class="cls_007">what we have and add it here. You now have all the tools to make a good-quality</span></div>
<div style="position:absolute;left:108.00px;top:198.74px" class="cls_007"><span class="cls_007">game with LibGDX.</span></div>
<div style="position:absolute;left:108.00px;top:219.98px" class="cls_007"><span class="cls_007">Not only that, because of how we have made this game, you can go ahead and</span></div>
<div style="position:absolute;left:108.00px;top:232.58px" class="cls_007"><span class="cls_007">experiment with designing different levels in Tiled and see what works and doesn't.</span></div>
<div style="position:absolute;left:108.00px;top:488.23px" class="cls_007"><span class="cls_007">I had a quick play with coming up with different ideas and playing with the strength</span></div>
<div style="position:absolute;left:108.00px;top:500.83px" class="cls_007"><span class="cls_007">of the acorn. So much fun making a game, don't you agree?</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 220 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:186866px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background238.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 8</span></div>
<div style="position:absolute;left:108.00px;top:111.92px" class="cls_019"><span class="cls_019">Summary</span></div>
<div style="position:absolute;left:108.00px;top:136.90px" class="cls_007"><span class="cls_007">Well, what a chapter we had there! You managed to get your toes wet with</span></div>
<div style="position:absolute;left:108.00px;top:149.50px" class="cls_007"><span class="cls_007">Box2D and master it like a pro! Well, maybe not a pro just yet, however, you have</span></div>
<div style="position:absolute;left:108.00px;top:162.10px" class="cls_007"><span class="cls_007">the basis of a great game. There is a lot in Box2D we didn't cover, but hopefully</span></div>
<div style="position:absolute;left:108.00px;top:174.70px" class="cls_007"><span class="cls_007">this gives you a basic understanding and enough information to go forward and</span></div>
<div style="position:absolute;left:108.00px;top:187.30px" class="cls_007"><span class="cls_007">make other things with that fabulous engine. So, what did we do in this chapter?</span></div>
<div style="position:absolute;left:108.00px;top:199.90px" class="cls_007"><span class="cls_007">We looked at Box2D, how to use a brilliant tool like Tiled to make designing and</span></div>
<div style="position:absolute;left:108.00px;top:212.50px" class="cls_007"><span class="cls_007">building levels simple, used the Box2D debug rendering so that we could make</span></div>
<div style="position:absolute;left:108.00px;top:225.10px" class="cls_007"><span class="cls_007">our game before having the full art asset set, and had a look at a handy class called</span></div>
<div style="position:absolute;left:108.00px;top:237.70px" class="cls_009"><span class="cls_009">Sprite</span><span class="cls_007"> that helped us with rotation.</span></div>
<div style="position:absolute;left:108.00px;top:258.94px" class="cls_007"><span class="cls_007">In the next chapter, we will introduce a handy technique that may be of some use</span></div>
<div style="position:absolute;left:108.00px;top:271.54px" class="cls_007"><span class="cls_007">to you going forward—object pooling! If we have a lot of objects that we could</span></div>
<div style="position:absolute;left:108.00px;top:284.14px" class="cls_007"><span class="cls_007">reuse rather than throw away and recreate, we should really look at pooling them,</span></div>
<div style="position:absolute;left:108.00px;top:296.74px" class="cls_007"><span class="cls_007">especially if they are expensive to create or our game is running in an environment</span></div>
<div style="position:absolute;left:108.00px;top:309.34px" class="cls_007"><span class="cls_007">where clean-up costs are high.</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 221 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:187668px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background239.jpg" width=612 height=792></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:187668px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background240.jpg" width=612 height=792></div>
<div style="position:absolute;left:247.21px;top:218.71px" class="cls_014"><span class="cls_014">Even Angrier Birds!</span></div>
<div style="position:absolute;left:108.00px;top:272.41px" class="cls_007"><span class="cls_007">Welcome to this chapter! I hope you enjoyed the previous chapter and are making</span></div>
<div style="position:absolute;left:108.00px;top:285.01px" class="cls_007"><span class="cls_007">your own games resembling Angry Birds. I also hope you used everything you</span></div>
<div style="position:absolute;left:108.00px;top:297.61px" class="cls_007"><span class="cls_007">learned in the previous chapters to really make it into a fully formed game.</span></div>
<div style="position:absolute;left:108.00px;top:318.86px" class="cls_007"><span class="cls_007">In this chapter, we will cover a technique that will hopefully help you when you</span></div>
<div style="position:absolute;left:108.00px;top:331.46px" class="cls_007"><span class="cls_007">find yourself creating lots of instances of a certain type of object that are generally</span></div>
<div style="position:absolute;left:108.00px;top:344.06px" class="cls_007"><span class="cls_007">short-lived. We will look at object pooling and how LibGDX can provide the tools</span></div>
<div style="position:absolute;left:108.00px;top:356.66px" class="cls_007"><span class="cls_007">to help us use them. In this chapter, we'll take a look at the following topics:</span></div>
<div style="position:absolute;left:126.00px;top:377.90px" class="cls_007"><span class="cls_007">•  The how, what, and why of object pools</span></div>
<div style="position:absolute;left:126.00px;top:394.81px" class="cls_007"><span class="cls_007">•  Hey, look at all these acorns!</span></div>
<div style="position:absolute;left:108.00px;top:427.31px" class="cls_019"><span class="cls_019">The how, what, and why of object pools</span></div>
<div style="position:absolute;left:129.60px;top:461.29px" class="cls_020"><span class="cls_020">Object pooling is the principle of reusing inactive or "dead" objects, instead of</span></div>
<div style="position:absolute;left:129.60px;top:473.89px" class="cls_020"><span class="cls_020">creating new objects every time.</span></div>
<div style="position:absolute;left:129.60px;top:495.49px" class="cls_007"><span class="cls_007">-</span><A HREF="https://github.com/libgdx/libgdx/wiki/Memory-management#object-pooling ">https://github.com/libgdx/libgdx/wiki/Memory-</A> </span></div>
<div style="position:absolute;left:129.60px;top:507.89px" class="cls_009"><span class="cls_009"> </span><A HREF="https://github.com/libgdx/libgdx/wiki/Memory-management#object-pooling ">management#object-pooling</A> </div>
<div style="position:absolute;left:108.00px;top:528.49px" class="cls_007"><span class="cls_007">I guess the best place to start is to talk about what an object pool is. An object pool is</span></div>
<div style="position:absolute;left:108.00px;top:541.09px" class="cls_007"><span class="cls_007">a pool of objects, bet you didn't see that coming, that can be reused after they become</span></div>
<div style="position:absolute;left:108.00px;top:553.69px" class="cls_007"><span class="cls_007">inactive. The pool can either be prefilled or filled on demand; hopefully, when you</span></div>
<div style="position:absolute;left:108.00px;top:566.29px" class="cls_007"><span class="cls_007">require one of these objects, there will be a "free" one available.</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 223 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:188470px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background241.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Even Angrier Birds!</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">I suppose you are now wondering why you would want to do this. I suspect you are</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">wondering, "Hey, I can just call "new" to create an object; perhaps it is an acorn sprite</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">you are creating, and I can do this as much as I want and I don't see an impact."</span></div>
<div style="position:absolute;left:108.00px;top:152.29px" class="cls_007"><span class="cls_007">Perhaps, on the scale we are working on, you might get away with that. However, it</span></div>
<div style="position:absolute;left:108.00px;top:164.89px" class="cls_007"><span class="cls_007">isn't a mindset you should really adopt here. You have to remember that one of the</span></div>
<div style="position:absolute;left:108.00px;top:177.49px" class="cls_007"><span class="cls_007">wonderful things with LibGDX is that it is cross-platform with mobile devices. So,</span></div>
<div style="position:absolute;left:108.00px;top:190.09px" class="cls_007"><span class="cls_007">perhaps your game is going to go from running on your fabulous desktop/laptop</span></div>
<div style="position:absolute;left:108.00px;top:202.69px" class="cls_007"><span class="cls_007">development machine with your gigabytes of RAM and high-end graphics card</span></div>
<div style="position:absolute;left:108.00px;top:215.29px" class="cls_007"><span class="cls_007">to someone's three-year-old mobile smart phone that might have only megabytes</span></div>
<div style="position:absolute;left:108.00px;top:227.89px" class="cls_007"><span class="cls_007">of RAM available for your game and even less dedicated to video. So, first off,</span></div>
<div style="position:absolute;left:108.00px;top:240.49px" class="cls_007"><span class="cls_007">you might have "out of memory issues" where you create so many objects that the</span></div>
<div style="position:absolute;left:108.00px;top:253.09px" class="cls_007"><span class="cls_007">underlying OS might just call it quits on your game—not a good user experience!</span></div>
<div style="position:absolute;left:108.00px;top:274.34px" class="cls_007"><span class="cls_007">The second issue that you might find is excessive slowing down of your game as,</span></div>
<div style="position:absolute;left:108.00px;top:286.94px" class="cls_007"><span class="cls_007">particularly on the Android platform, the garbage collector runs to clear out all the</span></div>
<div style="position:absolute;left:108.00px;top:299.54px" class="cls_007"><span class="cls_007">"inactive" objects that you created but no longer needed. This is where object pools</span></div>
<div style="position:absolute;left:108.00px;top:312.14px" class="cls_007"><span class="cls_007">can come into the picture and provide help. Imagine having to clear up hundreds</span></div>
<div style="position:absolute;left:108.00px;top:324.74px" class="cls_007"><span class="cls_007">of instances of an object type that has been created-on-the fly when, in fact, from a</span></div>
<div style="position:absolute;left:108.00px;top:337.34px" class="cls_007"><span class="cls_007">gameplay perspective only, say, three are in play at any point in time. If you had</span></div>
<div style="position:absolute;left:108.00px;top:349.94px" class="cls_007"><span class="cls_007">these objects in a pool, you would create the three required and then reuse them</span></div>
<div style="position:absolute;left:108.00px;top:362.54px" class="cls_007"><span class="cls_007">when you need to. Suddenly, all this excess processing that goes on for clearing up</span></div>
<div style="position:absolute;left:108.00px;top:375.14px" class="cls_007"><span class="cls_007">after your game goes away.</span></div>
<div style="position:absolute;left:108.00px;top:405.07px" class="cls_025"><span class="cls_025">Object pools with LibGDX</span></div>
<div style="position:absolute;left:108.00px;top:428.05px" class="cls_007"><span class="cls_007">Right, so hopefully you have an idea of what an object pool is and why an object</span></div>
<div style="position:absolute;left:108.00px;top:440.65px" class="cls_007"><span class="cls_007">pool can be useful. Let's look at how an object pool is created in LibGDX.</span></div>
<div style="position:absolute;left:108.00px;top:461.90px" class="cls_007"><span class="cls_007">Before we dive into the code, I recommend that you refer to the wiki page on</span></div>
<div style="position:absolute;left:108.00px;top:474.50px" class="cls_007"><span class="cls_007">object pooling and memory management for LibGDX, which is available at the</span></div>
<div style="position:absolute;left:108.00px;top:487.10px" class="cls_007"><span class="cls_007">following URL:</span></div>
<div style="position:absolute;left:108.00px;top:508.13px" class="cls_009"><span class="cls_009"> </span><A HREF="https://github.com/libgdx/libgdx/wiki/Memory-management#object-pooling ">https://github.com/libgdx/libgdx/wiki/Memory-management#object-</A> </div>
<div style="position:absolute;left:108.00px;top:519.53px" class="cls_009"><span class="cls_009"> </span><A HREF="https://github.com/libgdx/libgdx/wiki/Memory-management#object-pooling ">pooling</A> </div>
<div style="position:absolute;left:108.00px;top:539.77px" class="cls_007"><span class="cls_007">I strongly suggest that you give it a browse as it will be an eye-opener on</span></div>
<div style="position:absolute;left:108.00px;top:552.37px" class="cls_007"><span class="cls_007">memory management.</span></div>
<div style="position:absolute;left:108.00px;top:573.62px" class="cls_007"><span class="cls_007">So what does LibGDX offer to us game makers when it comes to creating object</span></div>
<div style="position:absolute;left:108.00px;top:586.22px" class="cls_007"><span class="cls_007">pools? Hopefully, those of you who checked out the preceding link already</span></div>
<div style="position:absolute;left:108.00px;top:598.82px" class="cls_007"><span class="cls_007">know the answer!</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 224 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:189272px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background242.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 9</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">There are the three classes LibGDX provides:</span></div>
<div style="position:absolute;left:126.00px;top:135.74px" class="cls_007"><span class="cls_007">•</span><span class="cls_009">  Pool.Poolable</span></div>
<div style="position:absolute;left:126.00px;top:152.65px" class="cls_007"><span class="cls_007">•</span><span class="cls_009">  Pool</span></div>
<div style="position:absolute;left:126.00px;top:169.57px" class="cls_007"><span class="cls_007">•</span><span class="cls_009">  Pools</span></div>
<div style="position:absolute;left:108.00px;top:190.81px" class="cls_007"><span class="cls_007">The </span><span class="cls_009">Pool.Poolable</span><span class="cls_007"> class is an interface that you implement on the object type class</span></div>
<div style="position:absolute;left:108.00px;top:203.41px" class="cls_007"><span class="cls_007">that you wish to be handled in a pool. Here is the interface in code:</span></div>
<div style="position:absolute;left:126.00px;top:224.35px" class="cls_021"><span class="cls_021">static public interface Poolable {</span></div>
<div style="position:absolute;left:136.80px;top:236.59px" class="cls_021"><span class="cls_021">/** Resets the object for reuse. Object references should be</span></div>
<div style="position:absolute;left:136.80px;top:247.39px" class="cls_021"><span class="cls_021">nulled and fields may be set to default values. */</span></div>
<div style="position:absolute;left:136.80px;top:259.63px" class="cls_021"><span class="cls_021">public void reset ();</span></div>
<div style="position:absolute;left:126.00px;top:271.87px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:291.61px" class="cls_007"><span class="cls_007">As you can see, it only has one method that you are required to provide an</span></div>
<div style="position:absolute;left:108.00px;top:304.21px" class="cls_007"><span class="cls_007">implementation to; that is the </span><span class="cls_009">reset()</span><span class="cls_007"> method, which is required to clean up the</span></div>
<div style="position:absolute;left:108.01px;top:316.81px" class="cls_007"><span class="cls_007">object ready to be made available again in the pool. We will see more of this in the</span></div>
<div style="position:absolute;left:108.01px;top:329.41px" class="cls_007"><span class="cls_007">next section.</span></div>
<div style="position:absolute;left:108.01px;top:350.65px" class="cls_007"><span class="cls_007">Next up is the </span><span class="cls_009">Pool</span><span class="cls_020"> </span><span class="cls_007">class; this is the pool itself. It contains the instantiations of the</span></div>
<div style="position:absolute;left:108.00px;top:363.25px" class="cls_007"><span class="cls_007">objects that we would like to pool. This class is typed, so we can only have all objects</span></div>
<div style="position:absolute;left:108.00px;top:375.85px" class="cls_007"><span class="cls_007">of the same type in there; otherwise, we will have all sorts of issues. This class is</span></div>
<div style="position:absolute;left:108.00px;top:388.45px" class="cls_007"><span class="cls_007">abstract, which means that we have to define our own class that extends this one.</span></div>
<div style="position:absolute;left:108.00px;top:401.05px" class="cls_007"><span class="cls_007">The reason for this is that we need to define how to create a new object for the pool;</span></div>
<div style="position:absolute;left:108.00px;top:413.65px" class="cls_007"><span class="cls_007">perhaps it requires some external input such as a reference to a texture that is used</span></div>
<div style="position:absolute;left:108.00px;top:426.25px" class="cls_007"><span class="cls_007">for the visual representation. There are two parameters that are required to construct</span></div>
<div style="position:absolute;left:108.00px;top:438.85px" class="cls_007"><span class="cls_007">the pool and they are the maximum number of objects in the pool and the initial</span></div>
<div style="position:absolute;left:108.00px;top:451.45px" class="cls_007"><span class="cls_007">capacity. It should be noted now that the maximum number is a soft limit. If you</span></div>
<div style="position:absolute;left:108.00px;top:464.05px" class="cls_007"><span class="cls_007">request an object and there are none free, a new one will be created. However, when</span></div>
<div style="position:absolute;left:108.00px;top:476.65px" class="cls_007"><span class="cls_007">it comes to returning the objects to the pool, if the pool is full, they will be reset but</span></div>
<div style="position:absolute;left:108.00px;top:489.25px" class="cls_007"><span class="cls_007">not added back to the pool. I would also like to highlight that the initial capacity</span></div>
<div style="position:absolute;left:108.00px;top:501.85px" class="cls_007"><span class="cls_007">doesn't prefill the pool for you; all it does is help to set up the backing array. This is</span></div>
<div style="position:absolute;left:108.00px;top:514.45px" class="cls_007"><span class="cls_007">a good thing as, then, you won't get slight pauses in your game should the backing</span></div>
<div style="position:absolute;left:108.00px;top:527.05px" class="cls_007"><span class="cls_007">array wish to grow.</span></div>
<div style="position:absolute;left:108.00px;top:548.29px" class="cls_007"><span class="cls_007">To take an object from the pool, there is a method called </span><span class="cls_009">obtain()</span><span class="cls_007"> that returns either</span></div>
<div style="position:absolute;left:108.00px;top:560.89px" class="cls_007"><span class="cls_007">a fresh instance or one from the pool.</span></div>
<div style="position:absolute;left:108.00px;top:582.14px" class="cls_007"><span class="cls_007">When it comes to the time that the game no longer uses this object, as it may</span></div>
<div style="position:absolute;left:108.00px;top:594.73px" class="cls_007"><span class="cls_007">have gone out of play, then call the </span><span class="cls_009">free()</span><span class="cls_007"> method on the pool with the object</span></div>
<div style="position:absolute;left:108.00px;top:607.33px" class="cls_007"><span class="cls_007">to be returned.</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 225 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:190074px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background243.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Even Angrier Birds!</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Just before we move on to the final class that LibGDX has to offer, I want to take</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">this opportunity to highlight the caveat that is mentioned on the LibGDX wiki. It is</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">possible to leak objects from the pool; just because it is returned to the pool doesn't</span></div>
<div style="position:absolute;left:108.00px;top:152.29px" class="cls_007"><span class="cls_007">mean other objects do not automatically clear their references to that returned object.</span></div>
<div style="position:absolute;left:108.00px;top:164.89px" class="cls_007"><span class="cls_007">This means you will see some odd behavior in your game if you are not careful.</span></div>
<div style="position:absolute;left:108.00px;top:186.13px" class="cls_007"><span class="cls_007">Finally, we have the </span><span class="cls_009">Pools</span><span class="cls_007"> class. This class, as you can imagine, contains all the pool</span></div>
<div style="position:absolute;left:108.00px;top:198.73px" class="cls_007"><span class="cls_007">instances that are provided to it, allowing you to have static access to them anywhere</span></div>
<div style="position:absolute;left:108.00px;top:211.33px" class="cls_007"><span class="cls_007">in your code. For the sake of what I would like to cover in this chapter, we will not</span></div>
<div style="position:absolute;left:108.00px;top:223.93px" class="cls_007"><span class="cls_007">be using this class. I just wanted you to be aware that this class exists, for when you</span></div>
<div style="position:absolute;left:108.00px;top:236.53px" class="cls_007"><span class="cls_007">start having lots of pools.</span></div>
<div style="position:absolute;left:108.00px;top:269.03px" class="cls_019"><span class="cls_019">Hey, look at all these acorns!</span></div>
<div style="position:absolute;left:108.00px;top:294.01px" class="cls_007"><span class="cls_007">Now we have a handle on what an object pool is, why we need one, and how we can</span></div>
<div style="position:absolute;left:108.00px;top:306.61px" class="cls_007"><span class="cls_007">use LibGDX to look after one for us. Next, we need to look at how we can use one in</span></div>
<div style="position:absolute;left:108.00px;top:319.21px" class="cls_007"><span class="cls_007">Nutty Birds.</span></div>
<div style="position:absolute;left:108.00px;top:340.46px" class="cls_007"><span class="cls_007">I am going to take a liberty with the gameplay and make a fundamental change to</span></div>
<div style="position:absolute;left:108.00px;top:353.06px" class="cls_007"><span class="cls_007">the way the game is played. We will design the game in such a way that we can</span></div>
<div style="position:absolute;left:108.00px;top:365.66px" class="cls_007"><span class="cls_007">only have three acorns on the screen at on time. Whenever you fire another while</span></div>
<div style="position:absolute;left:108.00px;top:378.26px" class="cls_007"><span class="cls_007">three are already in play, the oldest will be removed from the game. This may sound</span></div>
<div style="position:absolute;left:108.00px;top:390.86px" class="cls_007"><span class="cls_007">rather crude, but our aim here is to try out an object pool. Once we are done, you can</span></div>
<div style="position:absolute;left:108.00px;top:403.46px" class="cls_007"><span class="cls_007">try and shape the game the way you wish to.</span></div>
<div style="position:absolute;left:108.00px;top:433.39px" class="cls_025"><span class="cls_025">Pooling the acorns</span></div>
<div style="position:absolute;left:108.00px;top:456.37px" class="cls_007"><span class="cls_007">Our first task is to move our acorn from a </span><span class="cls_009">Sprite</span><span class="cls_007"> instance to a class in its own right.</span></div>
<div style="position:absolute;left:108.00px;top:468.97px" class="cls_007"><span class="cls_007">This class will implement the </span><span class="cls_009">Pool.Poolable</span><span class="cls_007"> interface.</span></div>
<div style="position:absolute;left:108.00px;top:490.21px" class="cls_007"><span class="cls_007">The following is the code listing for our new </span><span class="cls_009">Acorn</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:126.00px;top:511.15px" class="cls_021"><span class="cls_021">public class Acorn implements Pool.Poolable {</span></div>
<div style="position:absolute;left:136.80px;top:523.39px" class="cls_021"><span class="cls_021">private final Sprite sprite;</span></div>
<div style="position:absolute;left:136.80px;top:535.63px" class="cls_021"><span class="cls_021">public Acorn(AssetManager assetManager) {</span></div>
<div style="position:absolute;left:147.60px;top:547.87px" class="cls_021"><span class="cls_021">sprite = new Sprite(assetManager.get("acorn.png",</span></div>
<div style="position:absolute;left:147.60px;top:558.67px" class="cls_021"><span class="cls_021">Texture.class));</span></div>
<div style="position:absolute;left:147.60px;top:570.91px" class="cls_021"><span class="cls_021">sprite.setOrigin(sprite.getWidth() / 2, sprite.getHeight() /</span></div>
<div style="position:absolute;left:147.60px;top:581.71px" class="cls_021"><span class="cls_021">2);</span></div>
<div style="position:absolute;left:136.80px;top:593.95px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:618.43px" class="cls_021"><span class="cls_021">public void setPosition(float x, float y) {</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 226 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:190876px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background244.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 9</span></div>
<div style="position:absolute;left:147.60px;top:114.01px" class="cls_021"><span class="cls_021">sprite.setPosition(x, y);</span></div>
<div style="position:absolute;left:136.80px;top:126.25px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:150.73px" class="cls_021"><span class="cls_021">public void setRotation(float degrees) {</span></div>
<div style="position:absolute;left:147.60px;top:162.97px" class="cls_021"><span class="cls_021">sprite.setRotation(degrees);</span></div>
<div style="position:absolute;left:136.80px;top:175.21px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:199.69px" class="cls_021"><span class="cls_021">public float getWidth() {</span></div>
<div style="position:absolute;left:147.60px;top:211.93px" class="cls_021"><span class="cls_021">return sprite.getWidth();</span></div>
<div style="position:absolute;left:136.80px;top:224.17px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:248.65px" class="cls_021"><span class="cls_021">public float getHeight() {</span></div>
<div style="position:absolute;left:147.60px;top:260.89px" class="cls_021"><span class="cls_021">return sprite.getHeight();</span></div>
<div style="position:absolute;left:136.80px;top:273.13px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:297.61px" class="cls_021"><span class="cls_021">public void draw(Batch batch) {</span></div>
<div style="position:absolute;left:147.60px;top:309.85px" class="cls_021"><span class="cls_021">sprite.draw(batch);</span></div>
<div style="position:absolute;left:136.80px;top:322.09px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:346.57px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:136.80px;top:358.81px" class="cls_021"><span class="cls_021">public void reset() {</span></div>
<div style="position:absolute;left:147.60px;top:371.05px" class="cls_021"><span class="cls_021">sprite.setPosition(0,0);</span></div>
<div style="position:absolute;left:147.60px;top:383.29px" class="cls_021"><span class="cls_021">sprite.setRotation(0F);</span></div>
<div style="position:absolute;left:136.80px;top:395.53px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:407.77px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:427.50px" class="cls_007"><span class="cls_007">As you can see, our new class contains the </span><span class="cls_009">Sprite</span><span class="cls_007"> class that we originally created in</span></div>
<div style="position:absolute;left:108.00px;top:440.10px" class="cls_007"><span class="cls_007">the </span><span class="cls_009">GameScreen</span><span class="cls_007"> class; it implements the </span><span class="cls_009">Pool.Poolable</span><span class="cls_007"> interface and we delegate</span></div>
<div style="position:absolute;left:108.00px;top:452.70px" class="cls_007"><span class="cls_007">four methods from the </span><span class="cls_009">Sprite</span><span class="cls_007"> class. We implement the </span><span class="cls_009">reset()</span><span class="cls_007"> method as required,</span></div>
<div style="position:absolute;left:108.00px;top:465.30px" class="cls_007"><span class="cls_007">and in return we reset all the rotation and the position back to zero. In our constructor,</span></div>
<div style="position:absolute;left:108.00px;top:477.90px" class="cls_007"><span class="cls_007">we pass in our </span><span class="cls_009">AssetManager</span><span class="cls_007"> instance so we can get access to our texture.</span></div>
<div style="position:absolute;left:108.00px;top:499.14px" class="cls_007"><span class="cls_007">This class is now ready to go and be part of an object pool!</span></div>
<div style="position:absolute;left:108.00px;top:520.39px" class="cls_007"><span class="cls_007">Our next step is to create our own acorn pool. To do this, we need to create a class</span></div>
<div style="position:absolute;left:108.00px;top:532.98px" class="cls_007"><span class="cls_007">that extends the </span><span class="cls_009">Pool</span><span class="cls_007"> class. Let's create a class called </span><span class="cls_009">AcornPool</span><span class="cls_020"> </span><span class="cls_007">and extend that</span></div>
<div style="position:absolute;left:108.00px;top:545.58px" class="cls_009"><span class="cls_009">Pool</span><span class="cls_007"> class.</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 227 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:191678px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background245.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Even Angrier Birds!</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Here is the code you we will end up with:</span></div>
<div style="position:absolute;left:126.00px;top:135.43px" class="cls_021"><span class="cls_021">public class AcornPool extends Pool&lt;Acorn> {</span></div>
<div style="position:absolute;left:136.80px;top:147.67px" class="cls_021"><span class="cls_021">public static final int ACORN_COUNT = 3;</span></div>
<div style="position:absolute;left:136.80px;top:159.91px" class="cls_021"><span class="cls_021">private final AssetManager assetManager;</span></div>
<div style="position:absolute;left:136.80px;top:172.15px" class="cls_021"><span class="cls_021">public AcornPool(AssetManager assetManager) {</span></div>
<div style="position:absolute;left:147.60px;top:184.39px" class="cls_021"><span class="cls_021">super(ACORN_COUNT,ACORN_COUNT);</span></div>
<div style="position:absolute;left:147.60px;top:196.63px" class="cls_021"><span class="cls_021">this.assetManager = assetManager;</span></div>
<div style="position:absolute;left:136.80px;top:208.87px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:233.35px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:136.80px;top:245.59px" class="cls_021"><span class="cls_021">protected Acorn newObject() {</span></div>
<div style="position:absolute;left:147.60px;top:257.83px" class="cls_021"><span class="cls_021">return new Acorn(assetManager);</span></div>
<div style="position:absolute;left:136.80px;top:270.07px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:282.31px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:302.05px" class="cls_007"><span class="cls_007">As you can see, we have typed our </span><span class="cls_009">Pool</span><span class="cls_007"> class to be that of the </span><span class="cls_009">Acorn</span><span class="cls_007"> class. We pass</span></div>
<div style="position:absolute;left:108.00px;top:314.65px" class="cls_007"><span class="cls_007">in our </span><span class="cls_009">AssetManager</span><span class="cls_007"> instance, as we will need this later on. We have also defined</span></div>
<div style="position:absolute;left:108.00px;top:327.25px" class="cls_007"><span class="cls_007">our parameters for the pool with the </span><span class="cls_009">ACORN_COUNT</span><span class="cls_007"> constant. Finally, we implement</span></div>
<div style="position:absolute;left:108.00px;top:339.85px" class="cls_007"><span class="cls_007">our </span><span class="cls_009">newObject()</span><span class="cls_007"> method. Here, we just return a freshly created </span><span class="cls_009">Acorn</span><span class="cls_007"> instance.</span></div>
<div style="position:absolute;left:108.00px;top:361.09px" class="cls_007"><span class="cls_007">The next task is a rather big one: we need to update the </span><span class="cls_009">GameScreen</span><span class="cls_007"> class to use this</span></div>
<div style="position:absolute;left:108.00px;top:373.69px" class="cls_007"><span class="cls_007">new pool.</span></div>
<div style="position:absolute;left:108.00px;top:394.94px" class="cls_007"><span class="cls_007">First, we should define our new pool class as a variable but also have a separate</span></div>
<div style="position:absolute;left:108.00px;top:407.53px" class="cls_007"><span class="cls_007">map for managing our bodies to the </span><span class="cls_009">Acorn</span><span class="cls_007"> instances. Add the following code to</span></div>
<div style="position:absolute;left:108.00px;top:420.13px" class="cls_007"><span class="cls_007">the </span><span class="cls_009">GameScreen</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:126.00px;top:441.07px" class="cls_021"><span class="cls_021">private AcornPool acornPool;</span></div>
<div style="position:absolute;left:126.00px;top:453.31px" class="cls_021"><span class="cls_021">private OrderedMap&lt;Body, Acorn> acorns = new OrderedMap&lt;>();</span></div>
<div style="position:absolute;left:108.00px;top:473.05px" class="cls_007"><span class="cls_007">Now, in the </span><span class="cls_009">show()</span><span class="cls_007"> method, we will instantiate the pool as follows:</span></div>
<div style="position:absolute;left:126.00px;top:493.99px" class="cls_021"><span class="cls_021">acornPool = new AcornPool(nuttyGame.getAssetManager());</span></div>
<div style="position:absolute;left:108.00px;top:513.73px" class="cls_007"><span class="cls_007">Perfect! Next, we need to update the </span><span class="cls_009">createAcorn()</span><span class="cls_007"> method, which was previously</span></div>
<div style="position:absolute;left:108.00px;top:526.33px" class="cls_007"><span class="cls_007">called </span><span class="cls_009">createBullet()</span><span class="cls_007">, but I have renamed it since we now know what the</span></div>
<div style="position:absolute;left:108.00px;top:538.93px" class="cls_007"><span class="cls_007">projectile turned out to be. We need to change the way we create the acorn, from</span></div>
<div style="position:absolute;left:108.00px;top:551.53px" class="cls_007"><span class="cls_007">instantiation to using the pool. Let's take a look at the following code snippet:</span></div>
<div style="position:absolute;left:126.00px;top:572.47px" class="cls_021"><span class="cls_021">private void createAcorn() {</span></div>
<div style="position:absolute;left:136.80px;top:584.71px" class="cls_021"><span class="cls_021">CircleShape circleShape = new CircleShape();</span></div>
<div style="position:absolute;left:136.80px;top:596.95px" class="cls_021"><span class="cls_021">circleShape.setRadius(0.5f);</span></div>
<div style="position:absolute;left:136.80px;top:609.19px" class="cls_021"><span class="cls_021">BodyDef bd = new BodyDef();</span></div>
<div style="position:absolute;left:136.80px;top:621.43px" class="cls_021"><span class="cls_021">bd.type = BodyDef.BodyType.DynamicBody;</span></div>
<div style="position:absolute;left:136.80px;top:633.67px" class="cls_021"><span class="cls_021">Body acorn = world.createBody(bd);</span></div>
<div style="position:absolute;left:136.80px;top:645.91px" class="cls_021"><span class="cls_021">acorn.setUserData("acorn");</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 228 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:192480px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background246.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 9</span></div>
<div style="position:absolute;left:136.80px;top:114.01px" class="cls_021"><span class="cls_021">acorn.createFixture(circleShape, 1);</span></div>
<div style="position:absolute;left:136.80px;top:126.25px" class="cls_021"><span class="cls_021">acorn.setTransform(new</span></div>
<div style="position:absolute;left:136.80px;top:137.05px" class="cls_021"><span class="cls_021">Vector2(convertUnitsToMetres(firingPosition.x),</span></div>
<div style="position:absolute;left:136.80px;top:147.85px" class="cls_021"><span class="cls_021">convertUnitsToMetres(firingPosition.y)), 0);</span></div>
<div style="position:absolute;left:136.80px;top:160.09px" class="cls_021"><span class="cls_021">acorns.put(acorn, acornPool.obtain());</span></div>
<div style="position:absolute;left:136.80px;top:172.33px" class="cls_021"><span class="cls_021">circleShape.dispose();</span></div>
<div style="position:absolute;left:136.80px;top:184.57px" class="cls_021"><span class="cls_021">float velX = Math.abs((MAX_STRENGTH * -MathUtils.cos(angle) *</span></div>
<div style="position:absolute;left:136.80px;top:195.37px" class="cls_021"><span class="cls_021">(distance / 100f)));</span></div>
<div style="position:absolute;left:136.80px;top:207.61px" class="cls_021"><span class="cls_021">float velY = Math.abs((MAX_STRENGTH * -MathUtils.sin(angle) *</span></div>
<div style="position:absolute;left:136.80px;top:218.41px" class="cls_021"><span class="cls_021">(distance / 100f)));</span></div>
<div style="position:absolute;left:136.80px;top:230.65px" class="cls_021"><span class="cls_021">acorn.setLinearVelocity(velX, velY);</span></div>
<div style="position:absolute;left:126.00px;top:242.89px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:262.62px" class="cls_007"><span class="cls_007">This is how the method should look. As you can see, we have replaced the creation</span></div>
<div style="position:absolute;left:108.00px;top:275.22px" class="cls_007"><span class="cls_007">code with a simple call to the pool to obtain our instance. At this point, we don't know</span></div>
<div style="position:absolute;left:108.00px;top:287.82px" class="cls_007"><span class="cls_007">if it is fresh or reused. However, if we do this correctly, we won't care or notice!</span></div>
<div style="position:absolute;left:108.00px;top:309.06px" class="cls_007"><span class="cls_007">Finally, we need to update our code so we are referencing the new acorn map,</span></div>
<div style="position:absolute;left:108.00px;top:321.66px" class="cls_007"><span class="cls_007">instead of the previous sprite map. Let's take a look at the following code snippet:</span></div>
<div style="position:absolute;left:126.00px;top:342.60px" class="cls_021"><span class="cls_021">private void updateAcornPositions() {</span></div>
<div style="position:absolute;left:136.80px;top:354.84px" class="cls_021"><span class="cls_021">for (Body body : acorns.keySet()) {</span></div>
<div style="position:absolute;left:147.60px;top:367.08px" class="cls_021"><span class="cls_021">Acorn acorn = acorns.get(body);</span></div>
<div style="position:absolute;left:147.60px;top:379.32px" class="cls_021"><span class="cls_021">acorn.setPosition(convertMetresToUnits(body.getPosition().x) -</span></div>
<div style="position:absolute;left:147.60px;top:390.12px" class="cls_021"><span class="cls_021">acorn.getWidth() / 2f,</span></div>
<div style="position:absolute;left:147.60px;top:402.36px" class="cls_021"><span class="cls_021">convertMetresToUnits(body.getPosition().y) - acorn.getHeight()</span></div>
<div style="position:absolute;left:147.60px;top:413.16px" class="cls_021"><span class="cls_021">/ 2f);</span></div>
<div style="position:absolute;left:147.60px;top:425.40px" class="cls_021"><span class="cls_021">acorn.setRotation(MathUtils.radiansToDegrees *</span></div>
<div style="position:absolute;left:147.60px;top:436.20px" class="cls_021"><span class="cls_021">body.getAngle());</span></div>
<div style="position:absolute;left:136.80px;top:448.44px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:460.68px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:480.42px" class="cls_007"><span class="cls_007">Here I created a new method to take care of the updates! We now need to add a call</span></div>
<div style="position:absolute;left:108.00px;top:493.02px" class="cls_007"><span class="cls_007">to this method in our </span><span class="cls_009">update()</span><span class="cls_007"> method.</span></div>
<div style="position:absolute;left:108.00px;top:514.26px" class="cls_007"><span class="cls_007">Next, we need to update our </span><span class="cls_009">draw()</span><span class="cls_007"> method to draw from our new acorn map,</span></div>
<div style="position:absolute;left:108.00px;top:526.86px" class="cls_007"><span class="cls_007">as follows:</span></div>
<div style="position:absolute;left:126.00px;top:547.80px" class="cls_021"><span class="cls_021">private void draw() {</span></div>
<div style="position:absolute;left:136.80px;top:560.04px" class="cls_021"><span class="cls_021">// Code omitted for brevity</span></div>
<div style="position:absolute;left:136.80px;top:572.28px" class="cls_021"><span class="cls_021">for (Acorn acorn : acorns.values()) {</span></div>
<div style="position:absolute;left:147.60px;top:584.52px" class="cls_021"><span class="cls_021">acorn.draw(batch);</span></div>
<div style="position:absolute;left:136.80px;top:596.76px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:609.00px" class="cls_021"><span class="cls_021">// Code omitted for brevity</span></div>
<div style="position:absolute;left:126.00px;top:621.24px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 229 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:193282px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background247.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Even Angrier Birds!</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Brilliant! If you run the project now, it'll look and behave like it did earlier. However,</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">we are not limiting our acorns yet and, if you look at our pool in a debug view, you</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">will see that we are doing nothing but just creating new instances.</span></div>
<div style="position:absolute;left:108.00px;top:169.63px" class="cls_025"><span class="cls_025">Freeing the acorns!</span></div>
<div style="position:absolute;left:108.00px;top:192.61px" class="cls_007"><span class="cls_007">We need to apply our limit to the acorns and ensure that they are returned to the</span></div>
<div style="position:absolute;left:108.00px;top:205.21px" class="cls_007"><span class="cls_007">pool. This is actually a straightforward step.</span></div>
<div style="position:absolute;left:108.00px;top:226.46px" class="cls_007"><span class="cls_007">We need to check the map size; if it is at our maximum, which in this case</span></div>
<div style="position:absolute;left:108.00px;top:239.06px" class="cls_007"><span class="cls_007">is 3, we take the first entry offered by the map. Next, we can queue up to</span></div>
<div style="position:absolute;left:108.00px;top:251.66px" class="cls_007"><span class="cls_007">have the Box2D body removed from the world, remove the acorn from the</span></div>
<div style="position:absolute;left:108.00px;top:264.26px" class="cls_007"><span class="cls_007">map, and then return the acorn to the pool. We should create a method called</span></div>
<div style="position:absolute;left:108.00px;top:276.85px" class="cls_009"><span class="cls_009">checkLimitAndRemoveAcornIfNecessary()</span><span class="cls_007"> and place it in our </span><span class="cls_009">GameScreen</span><span class="cls_007"> class.</span></div>
<div style="position:absolute;left:108.00px;top:289.45px" class="cls_007"><span class="cls_007">The following is the code required to do this:</span></div>
<div style="position:absolute;left:126.00px;top:310.39px" class="cls_021"><span class="cls_021">private void checkLimitAndRemoveAcornIfNecessary() {</span></div>
<div style="position:absolute;left:136.80px;top:322.63px" class="cls_021"><span class="cls_021">if (acorns.size == AcornPool.ACORN_COUNT) {</span></div>
<div style="position:absolute;left:147.60px;top:334.87px" class="cls_021"><span class="cls_021">Body body = acorns.keys().iterator().next();</span></div>
<div style="position:absolute;left:147.60px;top:347.11px" class="cls_021"><span class="cls_021">toRemove.add(body);</span></div>
<div style="position:absolute;left:147.60px;top:359.35px" class="cls_021"><span class="cls_021">Acorn acorn = acorns.remove(body);</span></div>
<div style="position:absolute;left:147.60px;top:371.59px" class="cls_021"><span class="cls_021">acornPool.free(acorn);</span></div>
<div style="position:absolute;left:136.80px;top:383.83px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:396.07px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:415.81px" class="cls_007"><span class="cls_007">As you can see, we check the map. We grab the first offered instance, and queue it</span></div>
<div style="position:absolute;left:108.00px;top:428.41px" class="cls_007"><span class="cls_007">up to be removed. Next, we remove the map entry and return it to the pool. To make</span></div>
<div style="position:absolute;left:108.00px;top:441.01px" class="cls_007"><span class="cls_007">it perform a bit more than expected, we can change our map from an </span><span class="cls_009">ObjectMap</span></div>
<div style="position:absolute;left:108.00px;top:453.61px" class="cls_007"><span class="cls_007">instance to an </span><span class="cls_009">OrderedMap</span><span class="cls_007"> instance as this will keep track of the insertions made in</span></div>
<div style="position:absolute;left:107.99px;top:466.21px" class="cls_007"><span class="cls_007">the map. Let's take a look at the following code:</span></div>
<div style="position:absolute;left:126.00px;top:487.15px" class="cls_021"><span class="cls_021">private OrderedMap&lt;Body, Acorn> acorns = new OrderedMap&lt;>();</span></div>
<div style="position:absolute;left:108.00px;top:506.89px" class="cls_007"><span class="cls_007">Our final step is to add the call to the preceding method in our </span><span class="cls_009">createAcorn()</span></div>
<div style="position:absolute;left:108.00px;top:519.49px" class="cls_007"><span class="cls_007">method just before we obtain an acorn from the pool:</span></div>
<div style="position:absolute;left:126.00px;top:540.43px" class="cls_021"><span class="cls_021">checkLimitAndRemoveAcornIfNecessary();</span></div>
<div style="position:absolute;left:126.00px;top:552.67px" class="cls_021"><span class="cls_021">acorns.put(acorn, acornPool.obtain());</span></div>
<div style="position:absolute;left:108.00px;top:572.41px" class="cls_007"><span class="cls_007">If we run up the project now, you will find that we are now limited to three acorns.</span></div>
<div style="position:absolute;left:108.00px;top:585.01px" class="cls_007"><span class="cls_007">Believe it or not, the sprites being used are all the same instance. If you don't believe</span></div>
<div style="position:absolute;left:108.00px;top:597.61px" class="cls_007"><span class="cls_007">me as a trace out on the </span><span class="cls_009">newObject()</span><span class="cls_007"> method of the </span><span class="cls_009">AcornPool</span><span class="cls_007"> class and see how</span></div>
<div style="position:absolute;left:108.00px;top:610.21px" class="cls_007"><span class="cls_007">many get created.</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 230 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:194084px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background248.jpg" width=612 height=792></div>
<div style="position:absolute;left:468.87px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 9</span></div>
<div style="position:absolute;left:108.00px;top:111.92px" class="cls_019"><span class="cls_019">Summary</span></div>
<div style="position:absolute;left:108.00px;top:136.90px" class="cls_007"><span class="cls_007">Well, that wraps up Nutty Birds. In this chapter, we looked at object pools and how</span></div>
<div style="position:absolute;left:108.00px;top:149.50px" class="cls_007"><span class="cls_007">you can use one to reduce the need to create new objects all the time. We also took</span></div>
<div style="position:absolute;left:108.00px;top:162.10px" class="cls_007"><span class="cls_007">time to understand the need for this and the impact that it can have on performance.</span></div>
<div style="position:absolute;left:108.00px;top:174.70px" class="cls_007"><span class="cls_007">This is not to say that an object pool is the right answer every time—it isn't. It is a</span></div>
<div style="position:absolute;left:108.00px;top:187.30px" class="cls_007"><span class="cls_007">useful tool you now have in your game-making toolbox; the trick is to learn when</span></div>
<div style="position:absolute;left:108.00px;top:199.90px" class="cls_007"><span class="cls_007">to use it and when not. Unfortunately, I can't answer this with a straight answer; it</span></div>
<div style="position:absolute;left:108.00px;top:212.50px" class="cls_007"><span class="cls_007">really comes down to the game you make and the game mechanics you implement.</span></div>
<div style="position:absolute;left:108.00px;top:233.74px" class="cls_007"><span class="cls_007">Coming up in the next chapter, we move away from making games to look at how</span></div>
<div style="position:absolute;left:108.00px;top:246.34px" class="cls_007"><span class="cls_007">to use LibGDX to deliver your game onto different platforms, such as Android, iOS,</span></div>
<div style="position:absolute;left:108.00px;top:258.94px" class="cls_007"><span class="cls_007">and HTML5. I look forward to seeing you there!</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 231 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:194886px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background249.jpg" width=612 height=792></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:194886px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background250.jpg" width=612 height=792></div>
<div style="position:absolute;left:213.89px;top:218.96px" class="cls_014"><span class="cls_014">Exporting Our Games</span></div>
<div style="position:absolute;left:293.90px;top:254.96px" class="cls_014"><span class="cls_014">to the Platforms</span></div>
<div style="position:absolute;left:108.00px;top:308.66px" class="cls_007"><span class="cls_007">Welcome! In this chapter, we are going to move away from making games. I know,</span></div>
<div style="position:absolute;left:108.00px;top:321.26px" class="cls_007"><span class="cls_007">I know, I enjoyed myself too and we made some great stuff! But you see, LibGDX is</span></div>
<div style="position:absolute;left:108.00px;top:333.86px" class="cls_007"><span class="cls_007">so much more than what we were using it for till this point. In this chapter, we are</span></div>
<div style="position:absolute;left:108.00px;top:346.46px" class="cls_007"><span class="cls_007">going to look at the crossplatform features LibGDX has. In fact, this is probably what</span></div>
<div style="position:absolute;left:108.00px;top:359.06px" class="cls_007"><span class="cls_007">encouraged you to use LibGDX in the first place. Imagine, writing your game once</span></div>
<div style="position:absolute;left:108.00px;top:371.66px" class="cls_007"><span class="cls_007">and then being able to export it to Android, iOS, HTML, Desktop, and others. Well,</span></div>
<div style="position:absolute;left:108.00px;top:384.26px" class="cls_007"><span class="cls_007">this is what this chapter is going to be all about. The following are the topics that we</span></div>
<div style="position:absolute;left:108.00px;top:396.86px" class="cls_007"><span class="cls_007">will cover in this chapter:</span></div>
<div style="position:absolute;left:126.00px;top:418.10px" class="cls_007"><span class="cls_007">•  Using all the platforms</span></div>
<div style="position:absolute;left:126.00px;top:435.02px" class="cls_007"><span class="cls_007">•  Looking closer - Android</span></div>
<div style="position:absolute;left:126.00px;top:451.93px" class="cls_007"><span class="cls_007">•  Looking closer - iOS</span></div>
<div style="position:absolute;left:126.00px;top:468.85px" class="cls_007"><span class="cls_007">•  Looking closer - HTML</span></div>
<div style="position:absolute;left:108.00px;top:501.36px" class="cls_019"><span class="cls_019">Using all the platforms</span></div>
<div style="position:absolute;left:108.00px;top:526.34px" class="cls_007"><span class="cls_007">Hopefully by now, you are well on your way to being able to make your own games.</span></div>
<div style="position:absolute;left:108.00px;top:538.94px" class="cls_007"><span class="cls_007">We have been through all the main areas of LibGDX that you will likely use, and we</span></div>
<div style="position:absolute;left:108.00px;top:551.54px" class="cls_007"><span class="cls_007">also showed you other things LibGDX can do that you can take further with you.</span></div>
<div style="position:absolute;left:108.00px;top:572.78px" class="cls_007"><span class="cls_007">But now, you are ready! Ready to take your game to the world. Except, you didn't</span></div>
<div style="position:absolute;left:108.00px;top:585.38px" class="cls_007"><span class="cls_007">come here to just make a game for desktop. You came here because you wanted your</span></div>
<div style="position:absolute;left:108.00px;top:597.98px" class="cls_007"><span class="cls_007">game to run on Android, iOS, and maybe even a browser version.</span></div>
<div style="position:absolute;left:108.00px;top:619.22px" class="cls_007"><span class="cls_007">Am I correct in thinking that?</span></div>
<div style="position:absolute;left:108.00px;top:640.47px" class="cls_007"><span class="cls_007">Of course I am!</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 233 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:195688px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background251.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Exporting Our Games to the Platforms</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">To start off with, we are going to revisit our friendly setup tool that we have used</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">throughout this book. But this time, we are going to have all the boxes ticked for</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">subprojects! That's right, all the boxes! Let's take a look at the following steps:</span></div>
<div style="position:absolute;left:126.00px;top:160.94px" class="cls_007"><span class="cls_007">1.  So, let's launch the setup tool once again. You should be getting quite good at</span></div>
<div style="position:absolute;left:143.99px;top:173.54px" class="cls_007"><span class="cls_007">filling in the first part by now.</span></div>
<div style="position:absolute;left:126.00px;top:190.45px" class="cls_007"><span class="cls_007">2.  Make sure your </span><span class="cls_023">Sub Projects</span><span class="cls_007"> pane looks like this:</span></div>
<div style="position:absolute;left:126.00px;top:272.38px" class="cls_007"><span class="cls_007">3.  Then, untick all the extensions, as we won't be doing anything fancy here.</span></div>
<div style="position:absolute;left:126.00px;top:289.29px" class="cls_007"><span class="cls_007">4.  Finally, click on </span><span class="cls_023">Generate</span><span class="cls_007"> and import your project into your favorite IDE!</span></div>
<div style="position:absolute;left:107.99px;top:310.54px" class="cls_007"><span class="cls_007">If you want to read more on how to utilize multiple environments, I suggest</span></div>
<div style="position:absolute;left:107.99px;top:323.14px" class="cls_007"><span class="cls_007">you to go through the LibGDX wiki for more information. Particularly, visit</span></div>
<div style="position:absolute;left:108.00px;top:335.74px" class="cls_009"><span class="cls_009">https://github.com/libgdx/libgdx/wiki/Gradle-on-the-Commandline</span><span class="cls_007">.</span></div>
<div style="position:absolute;left:108.00px;top:368.24px" class="cls_019"><span class="cls_019">Looking closer - Android</span></div>
<div style="position:absolute;left:108.00px;top:393.22px" class="cls_007"><span class="cls_007">First up, we will look at Android as a platform to publish the package to, and deploy</span></div>
<div style="position:absolute;left:108.00px;top:405.82px" class="cls_007"><span class="cls_007">the package.</span></div>
<div style="position:absolute;left:108.00px;top:427.06px" class="cls_007"><span class="cls_007">Upon opening the project that we just set up, you will notice a few differences from</span></div>
<div style="position:absolute;left:108.00px;top:439.66px" class="cls_007"><span class="cls_007">what we had before. Note that there are many more useful directories and we now</span></div>
<div style="position:absolute;left:108.00px;top:452.26px" class="cls_007"><span class="cls_007">have one directory for Android, HTML, and iOS. If you open up the core directory,</span></div>
<div style="position:absolute;left:108.00px;top:464.86px" class="cls_007"><span class="cls_007">you will see that the asset directory has disappeared, it is now in the Android</span></div>
<div style="position:absolute;left:108.00px;top:477.46px" class="cls_007"><span class="cls_007">directory. Your structure should look similar to the following:</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 234 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:196490px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background252.jpg" width=612 height=792></div>
<div style="position:absolute;left:464.37px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 10</span></div>
<div style="position:absolute;left:108.00px;top:463.72px" class="cls_007"><span class="cls_007">Thanks to the setup tool, a lot has been preconfigured for us. So much so that we can</span></div>
<div style="position:absolute;left:108.00px;top:476.32px" class="cls_007"><span class="cls_007">launch the Android simulator with just one command line. However, before we do</span></div>
<div style="position:absolute;left:108.00px;top:488.92px" class="cls_007"><span class="cls_007">that, I suggest that you run the desktop version first just to confirm that we have the</span></div>
<div style="position:absolute;left:108.00px;top:501.52px" class="cls_007"><span class="cls_007">default "Hello World" application working.</span></div>
<div style="position:absolute;left:108.00px;top:522.76px" class="cls_007"><span class="cls_007">Did that work for you? Excellent!</span></div>
<div style="position:absolute;left:108.00px;top:544.00px" class="cls_007"><span class="cls_007">Now, we should try running the simulator. Personally, I rarely use the simulator,</span></div>
<div style="position:absolute;left:108.00px;top:556.60px" class="cls_007"><span class="cls_007">I much prefer loading it onto a real device. I just want to show you that this is</span></div>
<div style="position:absolute;left:108.00px;top:569.20px" class="cls_007"><span class="cls_007">possible, though, in case you don't have access to a device or you wish to try</span></div>
<div style="position:absolute;left:108.00px;top:581.80px" class="cls_007"><span class="cls_007">different screen sizes. I should point out that the simulator's speed does depend</span></div>
<div style="position:absolute;left:108.00px;top:594.40px" class="cls_007"><span class="cls_007">largely on your development computer.</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 235 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:197292px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background253.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Exporting Our Games to the Platforms</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">There are two ways to launch the simulator. Either we can launch it from the</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">command line or we can launch it straight from the IDE. I will try to show you both;</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">however, I am using Android Studio/IntelliJ, so the process might be different if you</span></div>
<div style="position:absolute;left:108.00px;top:152.29px" class="cls_007"><span class="cls_007">are using Eclipse.</span></div>
<div style="position:absolute;left:108.00px;top:173.54px" class="cls_007"><span class="cls_007">Before we launch the simulator, let's very quickly build a debug version of our</span></div>
<div style="position:absolute;left:108.00px;top:186.14px" class="cls_007"><span class="cls_007">APK—an APK is the generated file that is installed on an Android device. To do that,</span></div>
<div style="position:absolute;left:108.00px;top:198.74px" class="cls_007"><span class="cls_007">you can use the IDE or the command line to generate the APK file. In your project</span></div>
<div style="position:absolute;left:108.00px;top:211.34px" class="cls_007"><span class="cls_007">folder, run the following.</span></div>
<div style="position:absolute;left:108.00px;top:232.27px" class="cls_022"><span class="cls_022">gradlew android:assembleDebug</span></div>
<div style="position:absolute;left:108.00px;top:252.01px" class="cls_007"><span class="cls_007">This will then generate our APK.</span></div>
<div style="position:absolute;left:108.00px;top:281.95px" class="cls_025"><span class="cls_025">Launching the emulator from an IDE</span></div>
<div style="position:absolute;left:108.00px;top:304.93px" class="cls_007"><span class="cls_007">I hope you are ready for the long and really complex process that this involves.</span></div>
<div style="position:absolute;left:108.00px;top:326.18px" class="cls_007"><span class="cls_007">Only kidding!</span></div>
<div style="position:absolute;left:108.00px;top:347.42px" class="cls_007"><span class="cls_007">When you imported the project, Android Studio/IntelliJ was clever enough to</span></div>
<div style="position:absolute;left:108.00px;top:360.02px" class="cls_007"><span class="cls_007">pick up on the fact that there is an Android project there and provided you with</span></div>
<div style="position:absolute;left:108.00px;top:372.62px" class="cls_007"><span class="cls_007">a run configuration. In fact, it should be selected as default so you can just hit the</span></div>
<div style="position:absolute;left:108.00px;top:385.22px" class="cls_007"><span class="cls_007">run button.</span></div>
<div style="position:absolute;left:108.00px;top:458.58px" class="cls_007"><span class="cls_007">The run button is the green arrow next to the Android configuration.</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 236 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:198094px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background254.jpg" width=612 height=792></div>
<div style="position:absolute;left:464.37px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 10</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Next, you will be presented with the Choose Device dialog.</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 237 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:198896px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background255.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Exporting Our Games to the Platforms</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">As you can see, we will need to set up a virtual device. If you click on the button</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">to the right, it will launch the Android Virtual Device Manager; from here, we can</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">create one project.</span></div>
<div style="position:absolute;left:108.00px;top:444.91px" class="cls_007"><span class="cls_007">Let's take a look at the following steps:</span></div>
<div style="position:absolute;left:126.00px;top:466.16px" class="cls_007"><span class="cls_007">1.  If you click on </span><span class="cls_023">Create a virtual device</span><span class="cls_007">, you will be presented with a plethora</span></div>
<div style="position:absolute;left:143.99px;top:478.76px" class="cls_007"><span class="cls_007">of different hardware types and device profiles.</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 238 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:199698px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background256.jpg" width=612 height=792></div>
<div style="position:absolute;left:464.37px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 10</span></div>
<div style="position:absolute;left:126.00px;top:114.49px" class="cls_007"><span class="cls_007">2.  Since we are here to focus on mobile phones, let's just select </span><span class="cls_023">Phone</span><span class="cls_007"> and then</span></div>
<div style="position:absolute;left:144.00px;top:127.09px" class="cls_023"><span class="cls_023">Nexus 4</span><span class="cls_007">.</span></div>
<div style="position:absolute;left:144.00px;top:387.46px" class="cls_007"><span class="cls_007">To be honest, you could pick whichever hardware profile you like. However,</span></div>
<div style="position:absolute;left:144.00px;top:400.06px" class="cls_007"><span class="cls_007">for the sake of this book, I will be using Nexus 4.</span></div>
<div style="position:absolute;left:126.00px;top:421.31px" class="cls_007"><span class="cls_007">3.  Once you click on </span><span class="cls_023">Next</span><span class="cls_007">, you will be prompted to pick a system image. For</span></div>
<div style="position:absolute;left:144.00px;top:433.91px" class="cls_007"><span class="cls_007">now, just pick </span><span class="cls_023">armeabi-v7a</span><span class="cls_007">. I currently have API Level 22 installed so I am</span></div>
<div style="position:absolute;left:144.00px;top:446.51px" class="cls_007"><span class="cls_007">choosing the same.</span></div>
<div style="position:absolute;left:126.00px;top:513.83px" class="cls_007"><span class="cls_007">4.  Finally, you will be presented with a configuration panel; for now, you can</span></div>
<div style="position:absolute;left:144.00px;top:526.43px" class="cls_007"><span class="cls_007">leave the configuration as it is. Later, you can revisit this and play around</span></div>
<div style="position:absolute;left:144.00px;top:539.03px" class="cls_007"><span class="cls_007">with the different settings. Click on </span><span class="cls_023">Finish</span><span class="cls_007"> to complete the setup.</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 239 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:200500px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background257.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Exporting Our Games to the Platforms</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">We will now add an entry in our Virtual Devices. If we exit and return to our </span><span class="cls_023">Choose</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_023"><span class="cls_023">Device</span><span class="cls_007"> dialog screen, we can now pick our chosen virtual device.</span></div>
<div style="position:absolute;left:108.00px;top:212.04px" class="cls_007"><span class="cls_007">Excellent! Hit </span><span class="cls_023">Run</span><span class="cls_007"> and let the computer take care of the rest!</span></div>
<div style="position:absolute;left:108.00px;top:233.28px" class="cls_007"><span class="cls_007">While this is loading up, there are tools available that will help make the emulator</span></div>
<div style="position:absolute;left:108.00px;top:245.88px" class="cls_007"><span class="cls_007">run faster. One of them is the Intel Hardware Accelerated Execution Manager. I</span></div>
<div style="position:absolute;left:108.00px;top:258.48px" class="cls_007"><span class="cls_007">didn't cover how to use this as it requires your computer to have an Intel CPU with</span></div>
<div style="position:absolute;left:108.00px;top:271.08px" class="cls_007"><span class="cls_007">Virtualization technology; if your development computer does, perfect—you can</span></div>
<div style="position:absolute;left:108.00px;top:283.68px" class="cls_007"><span class="cls_007">get it set up from </span><A HREF="http://developer.android.com/tools/devices/emulator.html#acceleration">http://developer.android.com/tools/devices/emulator.</A> </span></div>
<div style="position:absolute;left:108.00px;top:296.28px" class="cls_009"><span class="cls_009">html#acceleration</span><span class="cls_007">.</span></div>
<div style="position:absolute;left:108.00px;top:317.52px" class="cls_007"><span class="cls_007">In the meantime, let's hope that the emulator has started up; it has? Excellent! It looks</span></div>
<div style="position:absolute;left:108.00px;top:330.12px" class="cls_007"><span class="cls_007">just like a real phone! You can interact with it with the mouse acting as your finger. If</span></div>
<div style="position:absolute;left:108.00px;top:342.72px" class="cls_007"><span class="cls_007">you swipe up, you will find that it unlocks the device and the LibGDX test project will</span></div>
<div style="position:absolute;left:108.00px;top:355.32px" class="cls_007"><span class="cls_007">be seen on the screen. It looks like the one shown in the following screenshot:</span></div>
<div style="position:absolute;left:108.00px;top:591.10px" class="cls_007"><span class="cls_007">Now, we will do the same, but from the command line.</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 240 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:201302px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background258.jpg" width=612 height=792></div>
<div style="position:absolute;left:464.37px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 10</span></div>
<div style="position:absolute;left:108.00px;top:112.46px" class="cls_025"><span class="cls_025">Launching the emulator from the command</span></div>
<div style="position:absolute;left:108.00px;top:134.06px" class="cls_025"><span class="cls_025">line</span></div>
<div style="position:absolute;left:108.00px;top:157.04px" class="cls_007"><span class="cls_007">This is going to be very similar to the IDE approach; however, we will need to tell the</span></div>
<div style="position:absolute;left:108.00px;top:169.64px" class="cls_007"><span class="cls_007">emulator to install our APK first.</span></div>
<div style="position:absolute;left:108.00px;top:190.89px" class="cls_007"><span class="cls_007">First up, we can run the Android Virtual Device Manager by entering the following</span></div>
<div style="position:absolute;left:108.00px;top:203.49px" class="cls_007"><span class="cls_007">in the command line:</span></div>
<div style="position:absolute;left:108.00px;top:224.42px" class="cls_022"><span class="cls_022">android avd</span></div>
<div style="position:absolute;left:108.00px;top:244.16px" class="cls_007"><span class="cls_007">We will be presented with a different dialog from the one in the IDE; this was</span></div>
<div style="position:absolute;left:108.00px;top:256.76px" class="cls_007"><span class="cls_007">wrapped it in a nicer UI for us.</span></div>
<div style="position:absolute;left:108.00px;top:580.24px" class="cls_007"><span class="cls_007">As you can see, it is different, but I ensure you that all the options are the same.</span></div>
<div style="position:absolute;left:108.00px;top:592.84px" class="cls_007"><span class="cls_007">If you don't have an entry, you can try the Create process. It is a simplistic version</span></div>
<div style="position:absolute;left:108.00px;top:605.44px" class="cls_007"><span class="cls_007">of the one that we had before.</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 241 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:202104px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background259.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Exporting Our Games to the Platforms</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Once you have done that, we can launch our virtual device. Select it and click on </span><span class="cls_023">Start</span><span class="cls_007">.</span></div>
<div style="position:absolute;left:108.00px;top:135.74px" class="cls_007"><span class="cls_007">While the device is booting up, let's get ready to upload our APK to the device.</span></div>
<div style="position:absolute;left:108.00px;top:148.34px" class="cls_007"><span class="cls_007">Navigate your way to the project folder and when the device has loaded, run the</span></div>
<div style="position:absolute;left:108.00px;top:160.94px" class="cls_007"><span class="cls_007">following command:</span></div>
<div style="position:absolute;left:108.00px;top:181.87px" class="cls_022"><span class="cls_022">adb install android\build\outputs\apk\android-debug.apk</span></div>
<div style="position:absolute;left:108.00px;top:201.61px" class="cls_007"><span class="cls_007">You will then find the game in the menu of the Virtual Android Device. Navigate</span></div>
<div style="position:absolute;left:108.00px;top:214.21px" class="cls_007"><span class="cls_007">your way there and you will find it.</span></div>
<div style="position:absolute;left:108.00px;top:235.46px" class="cls_007"><span class="cls_007">Perfect! You can now run your game in an emulator. As I said previously, I much</span></div>
<div style="position:absolute;left:108.00px;top:248.06px" class="cls_007"><span class="cls_007">prefer running the game on a real device because not only is the performance better,</span></div>
<div style="position:absolute;left:108.00px;top:260.66px" class="cls_007"><span class="cls_007">but it also gives you a much better impression of how the game is going to perform.</span></div>
<div style="position:absolute;left:108.00px;top:281.90px" class="cls_007"><span class="cls_007">Let me quickly show you how you can do this.</span></div>
<div style="position:absolute;left:108.00px;top:303.14px" class="cls_007"><span class="cls_007">Once you have an Android device plugged in, you will need your device to allow</span></div>
<div style="position:absolute;left:108.00px;top:315.74px" class="cls_007"><span class="cls_007">USB debugging.</span></div>
<div style="position:absolute;left:108.00px;top:336.98px" class="cls_007"><span class="cls_007">For more information regarding this process, visit </span><A HREF="http://developer.android./">http://developer.android.</A> </span></div>
<div style="position:absolute;left:108.00px;top:349.57px" class="cls_009"><span class="cls_009">com/tools/device.html</span><span class="cls_007">.</span></div>
<div style="position:absolute;left:108.00px;top:370.82px" class="cls_007"><span class="cls_007">To launch the project from the IDE, perform the following steps:</span></div>
<div style="position:absolute;left:126.00px;top:392.06px" class="cls_007"><span class="cls_007">1.  Go through the same process as before. Except, instead of launching the</span></div>
<div style="position:absolute;left:143.99px;top:404.66px" class="cls_007"><span class="cls_007">virtual device, we are going to select your device should be in the </span><span class="cls_023">Choose</span></div>
<div style="position:absolute;left:143.99px;top:417.26px" class="cls_023"><span class="cls_023">Device</span><span class="cls_007"> dialog. Let's take a look at the following screenshot:</span></div>
<div style="position:absolute;left:126.00px;top:554.60px" class="cls_007"><span class="cls_007">2.  Select and launch it. After this, you will have the test project running on</span></div>
<div style="position:absolute;left:144.00px;top:567.20px" class="cls_007"><span class="cls_007">your device!</span></div>
<div style="position:absolute;left:126.00px;top:584.12px" class="cls_007"><span class="cls_007">3.  To do this from the command line, simply run this command in your</span></div>
<div style="position:absolute;left:144.00px;top:596.72px" class="cls_007"><span class="cls_007">project directory:</span></div>
<div style="position:absolute;left:144.00px;top:613.34px" class="cls_022"><span class="cls_022">gradlew android:installDebug android:run</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 242 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:202906px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background260.jpg" width=612 height=792></div>
<div style="position:absolute;left:464.37px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 10</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">As a side note, you may find that the command line fails on occasion if it hasn't</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">successfully uninstalled the application, as it will think you are trying to install</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">the same application that is already there.</span></div>
<div style="position:absolute;left:108.00px;top:160.94px" class="cls_007"><span class="cls_007">There you go, you are now able to launch your game on a device.</span></div>
<div style="position:absolute;left:108.00px;top:190.87px" class="cls_025"><span class="cls_025">Hang on, how does it work?</span></div>
<div style="position:absolute;left:108.00px;top:213.85px" class="cls_007"><span class="cls_007">Ah, you caught me! We jumped straight to seeing something working without</span></div>
<div style="position:absolute;left:108.00px;top:226.45px" class="cls_007"><span class="cls_007">discussing how all of it works. Well essentially, your Android subproject can be seen</span></div>
<div style="position:absolute;left:108.00px;top:239.05px" class="cls_007"><span class="cls_007">as similar to the Desktop subproject, both have the core subproject as a dependency</span></div>
<div style="position:absolute;left:108.00px;top:251.65px" class="cls_007"><span class="cls_007">and both create an instance of your game. Check out the </span><span class="cls_009">AndroidLauncher</span><span class="cls_007"> class and</span></div>
<div style="position:absolute;left:108.00px;top:264.25px" class="cls_007"><span class="cls_007">the </span><span class="cls_009">DesktopLauncher</span><span class="cls_007"> class and you will see the similarities.</span></div>
<div style="position:absolute;left:108.00px;top:285.50px" class="cls_007"><span class="cls_007">I am not going to cover how Android works here as that is beyond the scope</span></div>
<div style="position:absolute;left:108.00px;top:298.10px" class="cls_007"><span class="cls_007">of what this book is about. There are plenty of resources out there if you</span></div>
<div style="position:absolute;left:108.00px;top:310.70px" class="cls_007"><span class="cls_007">wish to know more. I recommend that you start from the Android website:</span></div>
<div style="position:absolute;left:108.00px;top:323.29px" class="cls_009"><span class="cls_009">http://developer.android.com</span><span class="cls_007">.</span></div>
<div style="position:absolute;left:108.00px;top:353.23px" class="cls_025"><span class="cls_025">Release the Kraken!</span></div>
<div style="position:absolute;left:108.00px;top:376.21px" class="cls_007"><span class="cls_007">Alright, maybe not the Kraken, but at some point, you will need to generate a release</span></div>
<div style="position:absolute;left:108.00px;top:388.81px" class="cls_007"><span class="cls_007">APK that you will want to upload to certain online stores where you can make it</span></div>
<div style="position:absolute;left:108.00px;top:401.41px" class="cls_007"><span class="cls_007">available for the world to download and play.</span></div>
<div style="position:absolute;left:108.00px;top:422.66px" class="cls_007"><span class="cls_007">I won't be covering the app store part, but I will show you how to make sure</span></div>
<div style="position:absolute;left:108.00px;top:435.26px" class="cls_007"><span class="cls_007">your APK is signed and uses something called ProGuard to reduce and obfuscate</span></div>
<div style="position:absolute;left:108.00px;top:447.86px" class="cls_007"><span class="cls_007">your code.</span></div>
<div style="position:absolute;left:108.00px;top:469.10px" class="cls_007"><span class="cls_007">Firstly, let's cover signing. Why does your APK needs to be signed and what</span></div>
<div style="position:absolute;left:108.00px;top:481.70px" class="cls_007"><span class="cls_007">does this mean? Well, Android requires you to sign your release APK with a</span></div>
<div style="position:absolute;left:108.00px;top:494.30px" class="cls_007"><span class="cls_007">certificate to identify you as the author of the app. It is fairly common for you</span></div>
<div style="position:absolute;left:108.00px;top:506.90px" class="cls_007"><span class="cls_007">to use a self-signed certificate.</span></div>
<div style="position:absolute;left:108.00px;top:528.14px" class="cls_007"><span class="cls_007">When it comes to generating your own certificate, refer to </span><A HREF="http://developer.android.com/tools/publishing/app-signing.html">http://developer.</A> </span></div>
<div style="position:absolute;left:108.00px;top:540.73px" class="cls_009"><span class="cls_009"> </span><A HREF="http://developer.android.com/tools/publishing/app-signing.html">android.com/tools/publishing/app-signing.html</A> <span class="cls_007"> on how to create your</span></div>
<div style="position:absolute;left:108.00px;top:553.33px" class="cls_007"><span class="cls_007">own certificate.</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 243 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:203708px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background261.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Exporting Our Games to the Platforms</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">To have the APK signed as part of the build process, we need to update the </span><span class="cls_009">build.</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_009"><span class="cls_009">gradle</span><span class="cls_007"> file in the Android subproject, as this doesn't get generated for us. Let's take</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">a look at the following steps:</span></div>
<div style="position:absolute;left:126.00px;top:160.94px" class="cls_007"><span class="cls_007">1.</span></div>
<div style="position:absolute;left:143.99px;top:160.94px" class="cls_007"><span class="cls_007">In the file, update the Android module, as follows:</span></div>
<div style="position:absolute;left:144.00px;top:177.55px" class="cls_021"><span class="cls_021">signingConfigs {</span></div>
<div style="position:absolute;left:154.80px;top:189.79px" class="cls_021"><span class="cls_021">release {</span></div>
<div style="position:absolute;left:165.60px;top:202.03px" class="cls_021"><span class="cls_021">storeFile file(RELEASE_STORE_FILE)</span></div>
<div style="position:absolute;left:165.60px;top:214.27px" class="cls_021"><span class="cls_021">storePassword RELEASE_STORE_PASSWORD</span></div>
<div style="position:absolute;left:165.60px;top:226.51px" class="cls_021"><span class="cls_021">keyAlias RELEASE_KEY_ALIAS</span></div>
<div style="position:absolute;left:165.60px;top:238.75px" class="cls_021"><span class="cls_021">keyPassword RELEASE_KEY_PASSWORD</span></div>
<div style="position:absolute;left:154.80px;top:250.99px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:144.00px;top:263.23px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:144.00px;top:282.97px" class="cls_007"><span class="cls_007">Here, the text in caps will need to be replaced with your information. I highly</span></div>
<div style="position:absolute;left:144.00px;top:295.57px" class="cls_007"><span class="cls_007">recommend you to not keep your passwords in this file, but instead have</span></div>
<div style="position:absolute;left:144.00px;top:308.17px" class="cls_007"><span class="cls_007">them in the </span><span class="cls_009">gradle.properties</span><span class="cls_007"> file in the </span><span class="cls_009">.gradle</span><span class="cls_007"> directory in your home</span></div>
<div style="position:absolute;left:144.00px;top:320.77px" class="cls_007"><span class="cls_007">location and then reference them, like we did previously.</span></div>
<div style="position:absolute;left:126.00px;top:342.02px" class="cls_007"><span class="cls_007">2.</span></div>
<div style="position:absolute;left:144.00px;top:342.02px" class="cls_007"><span class="cls_007">However, this isn't the end of it, we need to now run Proguard. The reason</span></div>
<div style="position:absolute;left:144.00px;top:354.62px" class="cls_007"><span class="cls_007">for doing this is that it will reduce the overall size of your APK as well</span></div>
<div style="position:absolute;left:144.00px;top:367.22px" class="cls_007"><span class="cls_007">making it very hard to reverse-engineer your game should someone choose</span></div>
<div style="position:absolute;left:144.00px;top:379.82px" class="cls_007"><span class="cls_007">to do so. Luckily for us, LibGDX generates a base for Proguard. In fact, now</span></div>
<div style="position:absolute;left:144.00px;top:392.42px" class="cls_007"><span class="cls_007">is a good time if you are interested to visit their website: </span><A HREF="http://proguard./">http://proguard.</A> </span></div>
<div style="position:absolute;left:144.00px;top:405.01px" class="cls_009"><span class="cls_009">sourceforge.net/</span><span class="cls_007">.</span></div>
<div style="position:absolute;left:126.00px;top:421.93px" class="cls_007"><span class="cls_007">3.</span></div>
<div style="position:absolute;left:144.00px;top:421.93px" class="cls_007"><span class="cls_007">To utilize the code in our build, we need to add </span><span class="cls_009">buildTypes</span><span class="cls_007"> to our Android</span></div>
<div style="position:absolute;left:144.00px;top:434.53px" class="cls_007"><span class="cls_007">module and specify the following:</span></div>
<div style="position:absolute;left:144.00px;top:451.15px" class="cls_021"><span class="cls_021">buildTypes {</span></div>
<div style="position:absolute;left:154.80px;top:463.39px" class="cls_021"><span class="cls_021">release {</span></div>
<div style="position:absolute;left:165.60px;top:475.63px" class="cls_021"><span class="cls_021">signingConfig signingConfigs.release</span></div>
<div style="position:absolute;left:165.60px;top:487.87px" class="cls_021"><span class="cls_021">minifyEnabled true</span></div>
<div style="position:absolute;left:165.60px;top:500.11px" class="cls_021"><span class="cls_021">proguardFile getDefaultProguardFile('proguard-android-</span></div>
<div style="position:absolute;left:165.60px;top:510.91px" class="cls_021"><span class="cls_021">optimize.txt')</span></div>
<div style="position:absolute;left:165.60px;top:523.15px" class="cls_021"><span class="cls_021">proguardFile 'proguard-project.txt'</span></div>
<div style="position:absolute;left:154.80px;top:535.39px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:144.00px;top:547.63px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:144.00px;top:567.37px" class="cls_007"><span class="cls_007">Here we are saying that, when performing a release build, we need to sign</span></div>
<div style="position:absolute;left:144.00px;top:579.97px" class="cls_007"><span class="cls_007">using our signing configuration and enable minify, which will handle the</span></div>
<div style="position:absolute;left:144.00px;top:592.57px" class="cls_007"><span class="cls_007">Proguard execution.</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 244 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:204510px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background262.jpg" width=612 height=792></div>
<div style="position:absolute;left:464.37px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 10</span></div>
<div style="position:absolute;left:126.00px;top:114.49px" class="cls_007"><span class="cls_007">4.  Finally, to perform the release, run the following command in the</span></div>
<div style="position:absolute;left:144.00px;top:127.09px" class="cls_007"><span class="cls_007">project directory:</span></div>
<div style="position:absolute;left:144.00px;top:143.71px" class="cls_022"><span class="cls_022">gradlew android:assembleRelease</span></div>
<div style="position:absolute;left:108.00px;top:163.45px" class="cls_007"><span class="cls_007">You will then find a release APK in the outputs directory.</span></div>
<div style="position:absolute;left:108.00px;top:184.70px" class="cls_007"><span class="cls_007">There you have it. Now you should now be able to release your game on Android!</span></div>
<div style="position:absolute;left:108.00px;top:217.19px" class="cls_019"><span class="cls_019">Looking closer - iOS</span></div>
<div style="position:absolute;left:108.00px;top:242.17px" class="cls_007"><span class="cls_007">Ah iOS! The platform that transformed mobile app development and brought it to</span></div>
<div style="position:absolute;left:108.00px;top:254.77px" class="cls_007"><span class="cls_007">the mainstream. Hey! You are probably wondering that LibGDX is a Java-based</span></div>
<div style="position:absolute;left:108.00px;top:267.37px" class="cls_007"><span class="cls_007">framework, so how on earth does it run on iOS? Apple banned Java Runtimes long</span></div>
<div style="position:absolute;left:108.00px;top:279.97px" class="cls_007"><span class="cls_007">ago. Well you are correct, the game isn't exported as you might think it is. In fact,</span></div>
<div style="position:absolute;left:108.00px;top:292.57px" class="cls_007"><span class="cls_007">an additional tool called RoboVM is used. RoboVM's project aim was to allow Java</span></div>
<div style="position:absolute;left:108.00px;top:305.17px" class="cls_007"><span class="cls_007">developers to develop the game on the iOS platform, and the best bit is that the game</span></div>
<div style="position:absolute;left:108.00px;top:317.77px" class="cls_007"><span class="cls_007">will have a native-style performance. It doesn't need a runtime to launch. How is this</span></div>
<div style="position:absolute;left:108.00px;top:330.37px" class="cls_007"><span class="cls_007">possible? Well, RoboVM compiles the bytecode, generated by the Java compiler, with</span></div>
<div style="position:absolute;left:108.00px;top:342.97px" class="cls_007"><span class="cls_007">machine code.</span></div>
<div style="position:absolute;left:108.00px;top:364.21px" class="cls_007"><span class="cls_007">To check out RoboVM, visit its website, </span><span class="cls_009">http://robovm.com/</span><span class="cls_007">.</span></div>
<div style="position:absolute;left:108.00px;top:385.46px" class="cls_007"><span class="cls_007">LibGDX and RoboVM have what seems to be a tight partnership and work extremely</span></div>
<div style="position:absolute;left:108.00px;top:398.06px" class="cls_007"><span class="cls_007">well together. In fact, out-of-the-box—the project set up tool—you can build</span></div>
<div style="position:absolute;left:108.00px;top:410.66px" class="cls_007"><span class="cls_007">applications for iOS with RoboVM.</span></div>
<div style="position:absolute;left:108.00px;top:431.90px" class="cls_007"><span class="cls_007">I would like you to note now that like we did for Android, I am not going to cover</span></div>
<div style="position:absolute;left:108.00px;top:444.50px" class="cls_007"><span class="cls_007">how to set up an Apple Developer account or create provisioning profiles, key</span></div>
<div style="position:absolute;left:108.00px;top:457.10px" class="cls_007"><span class="cls_007">chains, and so on. There are plenty of documentation available on this topic.</span></div>
<div style="position:absolute;left:108.00px;top:478.33px" class="cls_007"><span class="cls_007">Check out Apple's developer site </span><A HREF="https://developer.apple.com/">https://developer.apple.com/</A> </span><span class="cls_007"> for</span></div>
<div style="position:absolute;left:108.00px;top:490.93px" class="cls_007"><span class="cls_007">more information,</span></div>
<div style="position:absolute;left:108.00px;top:512.18px" class="cls_007"><span class="cls_007">As before, like Android, you can see that we have an iOS submodule and it contains</span></div>
<div style="position:absolute;left:108.00px;top:524.78px" class="cls_007"><span class="cls_007">the configuration required to create an IPA—an IPA is equivalent to Android's APK.</span></div>
<div style="position:absolute;left:108.00px;top:537.38px" class="cls_007"><span class="cls_007">For development, you can dive straight in. For releases, it is a bit more involved in</span></div>
<div style="position:absolute;left:108.00px;top:549.98px" class="cls_007"><span class="cls_007">the game. To release the game, you will need to be on a Mac—I use a Mac Mini and</span></div>
<div style="position:absolute;left:108.00px;top:562.58px" class="cls_007"><span class="cls_007">solely for release purposes. You will need Xcode installed—this is available from the</span></div>
<div style="position:absolute;left:108.00px;top:575.18px" class="cls_007"><span class="cls_007">App Store on the Mac, a developer account, and Xcode signed in with that account.</span></div>
<div style="position:absolute;left:108.00px;top:596.41px" class="cls_007"><span class="cls_007">If you look at the iOS submodule, you will see an </span><span class="cls_009">IOSLauncher</span><span class="cls_007"> class. When you</span></div>
<div style="position:absolute;left:108.00px;top:609.01px" class="cls_007"><span class="cls_007">look, you will see some familiar code, essentially, the platform configuration and</span></div>
<div style="position:absolute;left:108.00px;top:621.61px" class="cls_007"><span class="cls_007">an instantiation of our game.</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 245 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:205312px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background263.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Exporting Our Games to the Platforms</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">To build a debug IPA, you can use the command line and run the following:</span></div>
<div style="position:absolute;left:108.00px;top:135.43px" class="cls_022"><span class="cls_022">gradlew ios:createIPA</span></div>
<div style="position:absolute;left:108.00px;top:155.17px" class="cls_007"><span class="cls_007">However, this isn't of much use to us; you can launch the simulator, as follows:</span></div>
<div style="position:absolute;left:108.00px;top:176.11px" class="cls_022"><span class="cls_022">gradlew ios:launchIPhoneSimulator</span></div>
<div style="position:absolute;left:108.00px;top:191.23px" class="cls_022"><span class="cls_022">gradlew ios:launchIPadSimulator</span></div>
<div style="position:absolute;left:108.00px;top:210.97px" class="cls_007"><span class="cls_007">If you have a device connected to a Mac, use the following:</span></div>
<div style="position:absolute;left:108.00px;top:231.91px" class="cls_022"><span class="cls_022">gradlew ios:launchIOSDevice</span></div>
<div style="position:absolute;left:108.00px;top:251.65px" class="cls_007"><span class="cls_007">This is really about it for iOS. It is that straightforward. Thanks to the use of a</span></div>
<div style="position:absolute;left:108.00px;top:264.25px" class="cls_007"><span class="cls_007">developer account and Apple's xcode application, everything was automatically</span></div>
<div style="position:absolute;left:108.00px;top:276.85px" class="cls_007"><span class="cls_007">signed and verified for us.</span></div>
<div style="position:absolute;left:108.00px;top:298.10px" class="cls_007"><span class="cls_007">For more information on how to distribute your game on iOS, I recommend you</span></div>
<div style="position:absolute;left:108.00px;top:310.70px" class="cls_007"><span class="cls_007">to visit </span><A HREF="https://developer.apple.com/library/ios/documentation/ides/">https://developer.apple.com/library/ios/documentation/IDEs/</A> </span></div>
<div style="position:absolute;left:108.00px;top:323.29px" class="cls_009"><span class="cls_009">Conceptual/AppDistributionGuide/Introduction/Introduction.html</span><span class="cls_007">.</span></div>
<div style="position:absolute;left:108.00px;top:355.79px" class="cls_019"><span class="cls_019">Looking closer - HTML</span></div>
<div style="position:absolute;left:108.00px;top:380.77px" class="cls_007"><span class="cls_007">The last platform we are going to look at is HTML. This might perplex you even</span></div>
<div style="position:absolute;left:108.00px;top:393.37px" class="cls_007"><span class="cls_007">more than iOS did. How on earth do we go from Java to HTML! Luckily, Google has</span></div>
<div style="position:absolute;left:108.00px;top:405.97px" class="cls_007"><span class="cls_007">the answer—</span><span class="cls_023">Google Web Toolkit</span><span class="cls_007"> (</span><span class="cls_023">GWT</span><span class="cls_007">). By using GWT will convert Java classes</span></div>
<div style="position:absolute;left:108.00px;top:418.57px" class="cls_007"><span class="cls_007">into a JavaScript equivalent.</span></div>
<div style="position:absolute;left:108.00px;top:439.82px" class="cls_007"><span class="cls_007">However, there are some limitations with the HTML export. I would like to add</span></div>
<div style="position:absolute;left:108.00px;top:452.42px" class="cls_007"><span class="cls_007">that HTML exports are getting smaller with each release and the smaller releases</span></div>
<div style="position:absolute;left:108.00px;top:465.02px" class="cls_007"><span class="cls_007">are the support for certain Java classes. You might find sometimes that there isn't a</span></div>
<div style="position:absolute;left:108.00px;top:477.62px" class="cls_007"><span class="cls_007">JavaScript equivalent available and GWT will refuse to compile the code. But having</span></div>
<div style="position:absolute;left:108.00px;top:490.22px" class="cls_007"><span class="cls_007">said that, I have used it a lot before and there are always ways around this, and</span></div>
<div style="position:absolute;left:108.00px;top:502.82px" class="cls_007"><span class="cls_007">LibGDX has full GWT support from the onset. So as long as you don't stray too far</span></div>
<div style="position:absolute;left:108.00px;top:515.42px" class="cls_007"><span class="cls_007">from LibGDX, you will be able to create an HTML game!</span></div>
<div style="position:absolute;left:108.00px;top:536.65px" class="cls_007"><span class="cls_007">Check out the GWT website, </span><A HREF="http://www.gwtproject.org/">http://www.gwtproject.org/</A> </span><span class="cls_007">, for more information.</span></div>
<div style="position:absolute;left:108.00px;top:566.59px" class="cls_025"><span class="cls_025">Getting ready to launch</span></div>
<div style="position:absolute;left:108.00px;top:589.57px" class="cls_007"><span class="cls_007">Like with the other plaforms, HTML has it's own submodule and a </span><span class="cls_009">HtmlLauncher</span></div>
<div style="position:absolute;left:108.00px;top:602.17px" class="cls_007"><span class="cls_007">class, in which you can see a platform-specific configuration object and the game</span></div>
<div style="position:absolute;left:108.00px;top:614.77px" class="cls_007"><span class="cls_007">being created. Very, very simple!</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 246 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:206114px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background264.jpg" width=612 height=792></div>
<div style="position:absolute;left:464.37px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 10</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">You will notice that there are also </span><span class="cls_009">*.gwt.xml</span><span class="cls_007"> files here and in the core submodule,</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">these are used so that GWT can find the original source of the code to be translated.</span></div>
<div style="position:absolute;left:108.00px;top:148.34px" class="cls_007"><span class="cls_007">To get the game up-and-running with HTML, on the command line run the</span></div>
<div style="position:absolute;left:108.00px;top:160.94px" class="cls_007"><span class="cls_007">following command:</span></div>
<div style="position:absolute;left:108.00px;top:181.87px" class="cls_022"><span class="cls_022">gradlew html:superDev</span></div>
<div style="position:absolute;left:108.00px;top:201.61px" class="cls_007"><span class="cls_007">Once it is run, you will find that it hasn't exited, but instead, it has run its own</span></div>
<div style="position:absolute;left:108.00px;top:214.21px" class="cls_007"><span class="cls_007">webserver to provide us the HTML file and JavaScript to us.</span></div>
<div style="position:absolute;left:108.00px;top:297.72px" class="cls_007"><span class="cls_007">Excellent, now if you visit that website in your browser, you will be presented with</span></div>
<div style="position:absolute;left:108.00px;top:310.32px" class="cls_007"><span class="cls_007">instructions on how you can enable the dev mode—making debugging easier. Once</span></div>
<div style="position:absolute;left:108.00px;top:322.92px" class="cls_007"><span class="cls_007">you have loaded that page, you can go to </span><span class="cls_009">http://localhost:8080/html/</span><span class="cls_007">.</span></div>
<div style="position:absolute;left:108.00px;top:344.16px" class="cls_007"><span class="cls_007">The game will then be loaded.</span></div>
<div style="position:absolute;left:108.00px;top:640.27px" class="cls_007"><span class="cls_007">Excellent!</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 247 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:206916px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background265.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Exporting Our Games to the Platforms</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Finally, I want to cover releasing of the game, as you won't want people playing your</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">game in your browser!</span></div>
<div style="position:absolute;left:108.00px;top:148.34px" class="cls_007"><span class="cls_007">Run the following command:</span></div>
<div style="position:absolute;left:108.00px;top:169.27px" class="cls_022"><span class="cls_022">gradlew html:dist</span></div>
<div style="position:absolute;left:108.00px;top:189.01px" class="cls_007"><span class="cls_007">Everything you need to upload on your website will be in the </span><span class="cls_009">html/build/dist</span></div>
<div style="position:absolute;left:108.00px;top:201.61px" class="cls_007"><span class="cls_007">directory. It is as simple as that!</span></div>
<div style="position:absolute;left:108.00px;top:234.11px" class="cls_019"><span class="cls_019">Summary</span></div>
<div style="position:absolute;left:108.00px;top:259.09px" class="cls_007"><span class="cls_007">Well, I hope that you have an understanding of what it takes to package up and</span></div>
<div style="position:absolute;left:108.00px;top:271.69px" class="cls_007"><span class="cls_007">deploy your game on multiple platforms, and in fact, considering how Gradle</span></div>
<div style="position:absolute;left:108.00px;top:284.29px" class="cls_007"><span class="cls_007">works, it is entirely possible to build everything you need in one go:</span></div>
<div style="position:absolute;left:108.00px;top:305.23px" class="cls_022"><span class="cls_022">gradlew android:assembleRelease ios:createIPA html:dist</span></div>
<div style="position:absolute;left:108.00px;top:324.97px" class="cls_007"><span class="cls_007">I know because I have done this!</span></div>
<div style="position:absolute;left:108.00px;top:346.22px" class="cls_007"><span class="cls_007">In this chapter, we looked at how to set up our Android releases and how to export</span></div>
<div style="position:absolute;left:108.00px;top:358.82px" class="cls_007"><span class="cls_007">the project with iOS, and we then looked at HTML and how we can generate</span></div>
<div style="position:absolute;left:108.00px;top:371.42px" class="cls_007"><span class="cls_007">JavaScript to cover this platform.</span></div>
<div style="position:absolute;left:108.00px;top:392.66px" class="cls_007"><span class="cls_007">In the next chapter, we are going to look at how to integrate a third-party service and</span></div>
<div style="position:absolute;left:108.00px;top:405.26px" class="cls_007"><span class="cls_007">how to interact with it in LibGDX.</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 248 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:207718px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background266.jpg" width=612 height=792></div>
<div style="position:absolute;left:235.60px;top:218.96px" class="cls_014"><span class="cls_014">Third-party Services</span></div>
<div style="position:absolute;left:108.00px;top:272.66px" class="cls_007"><span class="cls_007">Well, we have made it. This is the last chapter of this book. I know, I am sad too, but</span></div>
<div style="position:absolute;left:108.00px;top:285.26px" class="cls_007"><span class="cls_007">after this chapter, I hope I leave you with a sense of accomplishment and enough</span></div>
<div style="position:absolute;left:108.00px;top:297.86px" class="cls_007"><span class="cls_007">knowledge that you can go off on your own and start making games in LibGDX.</span></div>
<div style="position:absolute;left:108.00px;top:319.10px" class="cls_007"><span class="cls_007">Before you go, I would like to cover one last thing and that is how to integrate your</span></div>
<div style="position:absolute;left:108.00px;top:331.70px" class="cls_007"><span class="cls_007">game with third-party services. For example, there are social media platforms out</span></div>
<div style="position:absolute;left:108.00px;top:344.30px" class="cls_007"><span class="cls_007">there that have game-based integration. Whether it is achievements or leader boards</span></div>
<div style="position:absolute;left:108.00px;top:356.90px" class="cls_007"><span class="cls_007">that you are after, they will have them. In this chapter, we are going to look at how to</span></div>
<div style="position:absolute;left:108.00px;top:369.50px" class="cls_007"><span class="cls_007">integrate the game with a fictitious social media platform that provides high scores.</span></div>
<div style="position:absolute;left:108.00px;top:382.10px" class="cls_007"><span class="cls_007">This fictitious platform, which we will call as FriendFace, provides an Android</span></div>
<div style="position:absolute;left:108.00px;top:394.70px" class="cls_007"><span class="cls_007">library and we will use this in our integration. We will cover the following topics in</span></div>
<div style="position:absolute;left:108.00px;top:407.30px" class="cls_007"><span class="cls_007">this chapter:</span></div>
<div style="position:absolute;left:126.00px;top:428.54px" class="cls_007"><span class="cls_007">•  How to use platform-dependent libraries</span></div>
<div style="position:absolute;left:126.00px;top:445.46px" class="cls_007"><span class="cls_007">•  Keeping the game cross-platform-friendly</span></div>
<div style="position:absolute;left:108.00px;top:477.96px" class="cls_019"><span class="cls_019">How to use platform-dependent libraries</span></div>
<div style="position:absolute;left:108.00px;top:502.94px" class="cls_007"><span class="cls_007">In your quest to integrate third-party services, you will find that the providers very</span></div>
<div style="position:absolute;left:108.00px;top:515.54px" class="cls_007"><span class="cls_007">often do not provide you with similar-level tools to use their platform. For example,</span></div>
<div style="position:absolute;left:108.00px;top:528.14px" class="cls_007"><span class="cls_007">a user may have a library on a Maven repository somewhere and all you have to do</span></div>
<div style="position:absolute;left:108.00px;top:540.74px" class="cls_007"><span class="cls_007">is add the Gradle reference and Gradle will do the rest. Other users might have a</span></div>
<div style="position:absolute;left:108.00px;top:553.34px" class="cls_007"><span class="cls_007">Gradle-enabled project that you need to download and add to your project manually</span></div>
<div style="position:absolute;left:108.00px;top:565.94px" class="cls_007"><span class="cls_007">or just a simple JAR file that you need to download and add, and nothing else. We</span></div>
<div style="position:absolute;left:108.00px;top:578.54px" class="cls_007"><span class="cls_007">will quickly cover how you can go about importing the dependency into your project.</span></div>
<div style="position:absolute;left:108.00px;top:599.78px" class="cls_007"><span class="cls_007">Now, the thing to bear in mind here is that, if you are using an Android library, then</span></div>
<div style="position:absolute;left:108.00px;top:612.38px" class="cls_007"><span class="cls_007">the project needs to solely exist on the Android subproject. The core project knows</span></div>
<div style="position:absolute;left:108.00px;top:624.98px" class="cls_007"><span class="cls_007">nothing about Android and has no idea about any of the Android classes that may be</span></div>
<div style="position:absolute;left:108.00px;top:637.58px" class="cls_007"><span class="cls_007">required to compile your project once you add the reference.</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 249 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:208520px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background267.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Third-party Services</span></div>
<div style="position:absolute;left:108.00px;top:112.46px" class="cls_025"><span class="cls_025">The nice way - via Maven</span></div>
<div style="position:absolute;left:108.00px;top:135.44px" class="cls_007"><span class="cls_007">If the third-party you are interested in using has its library Mavenised—it is in a public</span></div>
<div style="position:absolute;left:108.00px;top:148.04px" class="cls_007"><span class="cls_007">access Maven repository—then all we have to do is edit our </span><span class="cls_009">build.gradle</span><span class="cls_007"> build, for</span></div>
<div style="position:absolute;left:108.00px;top:160.64px" class="cls_007"><span class="cls_007">the whole project, and add an entry.</span></div>
<div style="position:absolute;left:108.00px;top:181.89px" class="cls_007"><span class="cls_007">So, if we carry on with the use of an Android library as an example, we need to</span></div>
<div style="position:absolute;left:108.00px;top:194.49px" class="cls_007"><span class="cls_007">update the Android subproject entry as:</span></div>
<div style="position:absolute;left:126.00px;top:215.42px" class="cls_021"><span class="cls_021">project(":android") {</span></div>
<div style="position:absolute;left:136.80px;top:227.66px" class="cls_021"><span class="cls_021">apply plugin: "android"</span></div>
<div style="position:absolute;left:136.80px;top:239.90px" class="cls_021"><span class="cls_021">configurations { natives }</span></div>
<div style="position:absolute;left:136.80px;top:252.14px" class="cls_021"><span class="cls_021">dependencies {</span></div>
<div style="position:absolute;left:147.60px;top:264.38px" class="cls_021"><span class="cls_021">compile project(":core")</span></div>
<div style="position:absolute;left:147.60px;top:276.62px" class="cls_021"><span class="cls_021">compile "com.badlogicgames.gdx:gdx-backend-</span></div>
<div style="position:absolute;left:147.60px;top:287.42px" class="cls_021"><span class="cls_021">android:$gdxVersion"</span></div>
<div style="position:absolute;left:147.60px;top:299.66px" class="cls_021"><span class="cls_021">compile 'com.madeup.friendface:friendface-android-sdk:1.0.0'</span></div>
<div style="position:absolute;left:147.60px;top:311.90px" class="cls_021"><span class="cls_021">natives "com.badlogicgames.gdx:gdx-</span></div>
<div style="position:absolute;left:147.60px;top:322.70px" class="cls_021"><span class="cls_021">platform:$gdxVersion:natives-armeabi"</span></div>
<div style="position:absolute;left:147.60px;top:334.94px" class="cls_021"><span class="cls_021">natives "com.badlogicgames.gdx:gdx-</span></div>
<div style="position:absolute;left:147.60px;top:345.74px" class="cls_021"><span class="cls_021">platform:$gdxVersion:natives-armeabi-v7a"</span></div>
<div style="position:absolute;left:147.60px;top:357.98px" class="cls_021"><span class="cls_021">natives "com.badlogicgames.gdx:gdx-</span></div>
<div style="position:absolute;left:147.60px;top:368.78px" class="cls_021"><span class="cls_021">platform:$gdxVersion:natives-x86"</span></div>
<div style="position:absolute;left:136.80px;top:381.02px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:393.26px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:413.00px" class="cls_007"><span class="cls_007">As you can see, adding the dependency to the project is just one simple line:</span></div>
<div style="position:absolute;left:126.00px;top:433.94px" class="cls_021"><span class="cls_021">compile 'com.madeup.friendface:friendface-android-sdk:1.0.0'</span></div>
<div style="position:absolute;left:108.00px;top:453.68px" class="cls_007"><span class="cls_007">When you run the program, bear in mind that this is fake and doesn't exist—this</span></div>
<div style="position:absolute;left:108.00px;top:466.28px" class="cls_007"><span class="cls_007">is for when you have a real-life dependency. At that time, Gradle will go off and</span></div>
<div style="position:absolute;left:108.00px;top:478.88px" class="cls_007"><span class="cls_007">resolve it for you and download the library, which will be add to the projects</span></div>
<div style="position:absolute;left:108.00px;top:491.48px" class="cls_007"><span class="cls_007">classpath. Then, if FriendFace releases a new version, we just change the build</span></div>
<div style="position:absolute;left:108.00px;top:504.08px" class="cls_007"><span class="cls_007">number at the end of the program and it will get updated.</span></div>
<div style="position:absolute;left:108.00px;top:525.33px" class="cls_007"><span class="cls_007">Pretty nifty I think!</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 250 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:209322px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background268.jpg" width=612 height=792></div>
<div style="position:absolute;left:464.37px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 11</span></div>
<div style="position:absolute;left:108.00px;top:112.46px" class="cls_025"><span class="cls_025">An alternative to Maven - A project/JAR file</span></div>
<div style="position:absolute;left:108.00px;top:135.44px" class="cls_007"><span class="cls_007">OK, so the next third-party provider isn't as helpful, to us at least. For this, you</span></div>
<div style="position:absolute;left:108.00px;top:148.04px" class="cls_007"><span class="cls_007">have to visit their website and discover that they have a ZIP file that you need to</span></div>
<div style="position:absolute;left:108.00px;top:160.64px" class="cls_007"><span class="cls_007">download. This archive contains a Gradle project that you need to place into yours.</span></div>
<div style="position:absolute;left:108.00px;top:173.24px" class="cls_007"><span class="cls_007">Generally, I place these inside a directory in the subproject that it belongs to. Next, I</span></div>
<div style="position:absolute;left:108.00px;top:185.84px" class="cls_007"><span class="cls_007">update the </span><span class="cls_009">settings.gradle</span><span class="cls_007"> file of the main project to include this. Say the file is in</span></div>
<div style="position:absolute;left:108.00px;top:198.44px" class="cls_007"><span class="cls_007">the Android subproject, I have the following:</span></div>
<div style="position:absolute;left:126.00px;top:219.38px" class="cls_021"><span class="cls_021">include 'desktop', 'android', 'core'</span></div>
<div style="position:absolute;left:126.00px;top:231.62px" class="cls_021"><span class="cls_021">include ':android:libs:thirdparty'</span></div>
<div style="position:absolute;left:108.00px;top:251.36px" class="cls_007"><span class="cls_007">You will then need to reference it in a similar way to what we did for the</span></div>
<div style="position:absolute;left:108.00px;top:263.96px" class="cls_007"><span class="cls_007">Maven dependency:</span></div>
<div style="position:absolute;left:126.00px;top:284.90px" class="cls_021"><span class="cls_021">compile project(":android:libs:thirdparty")</span></div>
<div style="position:absolute;left:108.00px;top:304.64px" class="cls_007"><span class="cls_007">However, there are downsides to this approach. Firstly, you now have enlarged</span></div>
<div style="position:absolute;left:108.00px;top:317.24px" class="cls_007"><span class="cls_007">the size of your project; if you work in a team, this project is now very much tied to</span></div>
<div style="position:absolute;left:108.00px;top:329.84px" class="cls_007"><span class="cls_007">your code base. Secondly, it is not as easy as the Maven dependency when it comes</span></div>
<div style="position:absolute;left:108.00px;top:342.44px" class="cls_007"><span class="cls_007">to updating the library. Finally, back in the team scenario, if you don't package this</span></div>
<div style="position:absolute;left:108.00px;top:355.04px" class="cls_007"><span class="cls_007">with your project and ask other team members to download it, they might download</span></div>
<div style="position:absolute;left:108.00px;top:367.64px" class="cls_007"><span class="cls_007">the wrong version and cause inconsistencies with your code base.</span></div>
<div style="position:absolute;left:108.00px;top:388.89px" class="cls_007"><span class="cls_007">Adding just a JAR file in Gradle is actually really simple. You could create a</span></div>
<div style="position:absolute;left:108.00px;top:401.49px" class="cls_007"><span class="cls_007">directory, I call it "libs", in your subproject and place your JAR file there. Then,</span></div>
<div style="position:absolute;left:108.00px;top:414.09px" class="cls_007"><span class="cls_007">in the Gradle build file, use the following line in your dependencies:</span></div>
<div style="position:absolute;left:126.00px;top:435.02px" class="cls_021"><span class="cls_021">compile fileTree(dir: 'libs', include: ['*.jar'])</span></div>
<div style="position:absolute;left:108.00px;top:454.76px" class="cls_007"><span class="cls_007">This line is actually a catchall. Any JAR files in this directory will get picked up,</span></div>
<div style="position:absolute;left:108.00px;top:467.36px" class="cls_007"><span class="cls_007">which is generally what you would want anyway.</span></div>
<div style="position:absolute;left:108.00px;top:499.86px" class="cls_019"><span class="cls_019">Keeping it cross-platform friendly</span></div>
<div style="position:absolute;left:108.00px;top:524.84px" class="cls_007"><span class="cls_007">I hope you have managed to keep up with where we are at the moment with the</span></div>
<div style="position:absolute;left:108.00px;top:537.44px" class="cls_007"><span class="cls_007">third-party libraries. This sounds a little daunting at first, but once you have done</span></div>
<div style="position:absolute;left:108.00px;top:550.04px" class="cls_007"><span class="cls_007">it a couple of times, you will see that it is pretty straightforward.</span></div>
<div style="position:absolute;left:108.00px;top:571.29px" class="cls_007"><span class="cls_007">What we are going to look at now is how you would interact with one of these</span></div>
<div style="position:absolute;left:108.00px;top:583.89px" class="cls_007"><span class="cls_007">libraries if you were to use one.</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 251 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:210124px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background269.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Third-party Services</span></div>
<div style="position:absolute;left:108.00px;top:112.46px" class="cls_025"><span class="cls_025">FriendFace for Android</span></div>
<div style="position:absolute;left:108.00px;top:135.44px" class="cls_007"><span class="cls_007">Carrying on with our made-up social network called FriendFace, we are going</span></div>
<div style="position:absolute;left:108.00px;top:148.04px" class="cls_007"><span class="cls_007">to implement the social network's Android integration that it has. It doesn't offer</span></div>
<div style="position:absolute;left:108.00px;top:160.64px" class="cls_007"><span class="cls_007">anything fancy other than the ability for us to post a player's name and score. Then,</span></div>
<div style="position:absolute;left:108.00px;top:173.24px" class="cls_007"><span class="cls_007">FriendFace does whatever it is that it does with the name and score; perhaps it shows</span></div>
<div style="position:absolute;left:108.00px;top:185.84px" class="cls_007"><span class="cls_007">it to the player's friends?</span></div>
<div style="position:absolute;left:108.00px;top:207.08px" class="cls_007"><span class="cls_007">The following is how we are going to define the </span><span class="cls_009">FriendFaceAPI</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:126.00px;top:228.02px" class="cls_021"><span class="cls_021">public class FriendFaceAPI {</span></div>
<div style="position:absolute;left:136.80px;top:240.26px" class="cls_021"><span class="cls_021">public void postScore(String name, int score) {</span></div>
<div style="position:absolute;left:147.60px;top:252.50px" class="cls_021"><span class="cls_021">//Some code, the library may be opensource or not - who knows!</span></div>
<div style="position:absolute;left:136.80px;top:264.74px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:276.98px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:296.72px" class="cls_007"><span class="cls_007">Pretty straight forward!</span></div>
<div style="position:absolute;left:108.00px;top:317.97px" class="cls_007"><span class="cls_007">FriendFace's Android integration comes in the form of a Gradle-based Android</span></div>
<div style="position:absolute;left:108.00px;top:330.57px" class="cls_007"><span class="cls_007">library project. This means that we will have to add it to our Android subproject.</span></div>
<div style="position:absolute;left:108.00px;top:351.81px" class="cls_007"><span class="cls_007">I have already created a project that includes all this—refer to the code provided in</span></div>
<div style="position:absolute;left:108.00px;top:364.41px" class="cls_007"><span class="cls_007">this chapter.</span></div>
<div style="position:absolute;left:108.00px;top:385.65px" class="cls_007"><span class="cls_007">Once you have imported it in your IDE, if you look inside the Android subproject,</span></div>
<div style="position:absolute;left:108.00px;top:398.24px" class="cls_007"><span class="cls_007">you will see a </span><span class="cls_009">libs</span><span class="cls_007"> directory that contains the </span><span class="cls_009">FriendFace</span><span class="cls_007"> library project!</span></div>
<div style="position:absolute;left:108.00px;top:419.49px" class="cls_007"><span class="cls_007">Now, what will we do? For the sake of simplicity, we will use the default project and</span></div>
<div style="position:absolute;left:108.00px;top:432.09px" class="cls_007"><span class="cls_007">submit a score every time the space bar is pressed.</span></div>
<div style="position:absolute;left:108.00px;top:453.33px" class="cls_007"><span class="cls_007">Hang on! I bet you are thinking that the game code is in the Core subproject and</span></div>
<div style="position:absolute;left:108.00px;top:465.93px" class="cls_007"><span class="cls_007">FriendFace only offers the capability available in the Android subproject; how on</span></div>
<div style="position:absolute;left:108.00px;top:478.53px" class="cls_007"><span class="cls_007">earth am I going to bridge that gap?</span></div>
<div style="position:absolute;left:108.00px;top:499.76px" class="cls_007"><span class="cls_007">Well, you would be correct in thinking that. We can't have the </span><span class="cls_009">FriendFace</span><span class="cls_007"> library in</span></div>
<div style="position:absolute;left:108.00px;top:512.36px" class="cls_007"><span class="cls_007">the Core subproject; for example, what will happen when we try to run it on iOS? So,</span></div>
<div style="position:absolute;left:108.00px;top:524.96px" class="cls_007"><span class="cls_007">what we need to do is create an interface and implementation-style approach.</span></div>
<div style="position:absolute;left:108.00px;top:546.21px" class="cls_007"><span class="cls_007">In our Core subproject, we will create an interface class that we will call as</span></div>
<div style="position:absolute;left:108.00px;top:558.80px" class="cls_009"><span class="cls_009">ScoreHandler</span><span class="cls_007"> and it will have the following code:</span></div>
<div style="position:absolute;left:126.00px;top:579.74px" class="cls_021"><span class="cls_021">public interface ScoreHandler {</span></div>
<div style="position:absolute;left:136.80px;top:591.98px" class="cls_021"><span class="cls_021">void postScore(String name, int score);</span></div>
<div style="position:absolute;left:126.00px;top:604.22px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 252 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:210926px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background270.jpg" width=612 height=792></div>
<div style="position:absolute;left:464.37px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 11</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Looks familiar? Well it should, as it has the same API as FriendFace. I should point</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">out that we can get away with this for now as the API is quite simplistic; however, as</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">you integrate more complex third-party services across your different platforms, it</span></div>
<div style="position:absolute;left:108.00px;top:152.29px" class="cls_007"><span class="cls_007">may not be as easy to unify this API with the social network.</span></div>
<div style="position:absolute;left:108.00px;top:173.54px" class="cls_007"><span class="cls_007">Next, we are going to update the game class; in my case, it is just called as the</span></div>
<div style="position:absolute;left:108.00px;top:186.13px" class="cls_009"><span class="cls_009">MyGdxGame</span><span class="cls_007"> class so that it refers to this new interface. The class ends up looking</span></div>
<div style="position:absolute;left:108.00px;top:198.73px" class="cls_007"><span class="cls_007">like this:</span></div>
<div style="position:absolute;left:126.00px;top:219.67px" class="cls_021"><span class="cls_021">public class MyGdxGame extends ApplicationAdapter {</span></div>
<div style="position:absolute;left:136.80px;top:231.91px" class="cls_021"><span class="cls_021">SpriteBatch batch;</span></div>
<div style="position:absolute;left:136.80px;top:244.15px" class="cls_021"><span class="cls_021">Texture img;</span></div>
<div style="position:absolute;left:136.80px;top:256.39px" class="cls_021"><span class="cls_021">ScoreHandler scoreHandler;</span></div>
<div style="position:absolute;left:136.80px;top:280.87px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:136.80px;top:293.11px" class="cls_021"><span class="cls_021">public void create() {</span></div>
<div style="position:absolute;left:147.60px;top:305.35px" class="cls_021"><span class="cls_021">batch = new SpriteBatch();</span></div>
<div style="position:absolute;left:147.60px;top:317.59px" class="cls_021"><span class="cls_021">img = new Texture("badlogic.jpg");</span></div>
<div style="position:absolute;left:136.80px;top:329.83px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:354.31px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:136.80px;top:366.55px" class="cls_021"><span class="cls_021">public void render() {</span></div>
<div style="position:absolute;left:147.60px;top:378.79px" class="cls_021"><span class="cls_021">if (Gdx.input.isKeyPressed(Input.Keys.SPACE)) {</span></div>
<div style="position:absolute;left:158.40px;top:391.03px" class="cls_021"><span class="cls_021">scoreHandler.postScore("James", 1000);</span></div>
<div style="position:absolute;left:147.60px;top:403.27px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:147.60px;top:427.75px" class="cls_021"><span class="cls_021">Gdx.gl.glClearColor(1, 0, 0, 1);</span></div>
<div style="position:absolute;left:147.60px;top:439.99px" class="cls_021"><span class="cls_021">Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);</span></div>
<div style="position:absolute;left:147.60px;top:452.23px" class="cls_021"><span class="cls_021">batch.begin();</span></div>
<div style="position:absolute;left:147.60px;top:464.47px" class="cls_021"><span class="cls_021">batch.draw(img, 0, 0);</span></div>
<div style="position:absolute;left:147.60px;top:476.71px" class="cls_021"><span class="cls_021">batch.end();</span></div>
<div style="position:absolute;left:136.80px;top:488.95px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:501.19px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:520.93px" class="cls_007"><span class="cls_007">So, as we said before, on the tap of a space bar, we will call the method. The quick</span></div>
<div style="position:absolute;left:108.00px;top:533.53px" class="cls_007"><span class="cls_007">thinkers among you will probably be screaming at the book saying "There is going to</span></div>
<div style="position:absolute;left:108.00px;top:546.13px" class="cls_007"><span class="cls_007">be a </span><span class="cls_009">NullPointerException</span><span class="cls_007"> exception!" and you are quite right—however, we are</span></div>
<div style="position:absolute;left:108.00px;top:558.73px" class="cls_007"><span class="cls_007">not done yet!</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 253 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:211728px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background271.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Third-party Services</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">We need to provide an Android implementation of our interface; we can do this by</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">creating a class in our Android subproject called </span><span class="cls_009">ScoreHandlerAndroid</span><span class="cls_007">, and it will</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">implement our </span><span class="cls_009">ScoreHandler</span><span class="cls_007"> interface class as:</span></div>
<div style="position:absolute;left:126.00px;top:160.63px" class="cls_021"><span class="cls_021">public class ScoreHandlerAndroid implements ScoreHandler {</span></div>
<div style="position:absolute;left:136.80px;top:172.87px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:136.80px;top:185.11px" class="cls_021"><span class="cls_021">public void postScore(String name, int score) {</span></div>
<div style="position:absolute;left:136.80px;top:209.59px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:221.83px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:241.57px" class="cls_007"><span class="cls_007">Right now, this code doesn't do anything—however, as it is in the Android</span></div>
<div style="position:absolute;left:108.00px;top:254.17px" class="cls_007"><span class="cls_007">subproject, where the </span><span class="cls_009">FriendFaceAPI</span><span class="cls_007"> class is, we can delegate the method</span></div>
<div style="position:absolute;left:108.00px;top:266.77px" class="cls_007"><span class="cls_007">call to a reference of it!</span></div>
<div style="position:absolute;left:108.00px;top:288.02px" class="cls_007"><span class="cls_007">Now, our class becomes like this:</span></div>
<div style="position:absolute;left:126.00px;top:308.95px" class="cls_021"><span class="cls_021">public class ScoreHandlerAndroid implements ScoreHandler {</span></div>
<div style="position:absolute;left:136.80px;top:321.19px" class="cls_021"><span class="cls_021">private final FriendFaceAPI friendFaceAPI;</span></div>
<div style="position:absolute;left:136.80px;top:333.43px" class="cls_021"><span class="cls_021">public ScoreHandlerAndroid(FriendFaceAPI friendFaceAPI) {</span></div>
<div style="position:absolute;left:147.60px;top:345.67px" class="cls_021"><span class="cls_021">this.friendFaceAPI = friendFaceAPI;</span></div>
<div style="position:absolute;left:136.80px;top:357.91px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:136.80px;top:382.39px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:136.80px;top:394.63px" class="cls_021"><span class="cls_021">public void postScore(String name, int score) {</span></div>
<div style="position:absolute;left:147.60px;top:406.87px" class="cls_021"><span class="cls_021">friendFaceAPI.postScore(name, score);</span></div>
<div style="position:absolute;left:136.80px;top:419.11px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:431.35px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:451.09px" class="cls_007"><span class="cls_007">Excellent! Now, we pass in our reference and then delegate the call. Next, we need to</span></div>
<div style="position:absolute;left:108.00px;top:463.69px" class="cls_007"><span class="cls_007">create this reference in our </span><span class="cls_009">AndroidLauncher</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:126.00px;top:484.63px" class="cls_021"><span class="cls_021">public class AndroidLauncher extends AndroidApplication {</span></div>
<div style="position:absolute;left:136.80px;top:496.87px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:136.80px;top:509.11px" class="cls_021"><span class="cls_021">protected void onCreate (Bundle savedInstanceState) {</span></div>
<div style="position:absolute;left:147.60px;top:521.35px" class="cls_021"><span class="cls_021">super.onCreate(savedInstanceState);</span></div>
<div style="position:absolute;left:147.60px;top:533.59px" class="cls_021"><span class="cls_021">FriendFaceAPI friendFaceAPI = new FriendFaceAPI();</span></div>
<div style="position:absolute;left:147.60px;top:545.83px" class="cls_021"><span class="cls_021">ScoreHandlerAndroid scoreHandlerAndroid = new</span></div>
<div style="position:absolute;left:147.60px;top:556.63px" class="cls_021"><span class="cls_021">ScoreHandlerAndroid(friendFaceAPI);</span></div>
<div style="position:absolute;left:147.60px;top:568.87px" class="cls_021"><span class="cls_021">AndroidApplicationConfiguration config = new</span></div>
<div style="position:absolute;left:147.60px;top:579.67px" class="cls_021"><span class="cls_021">AndroidApplicationConfiguration();</span></div>
<div style="position:absolute;left:147.60px;top:591.91px" class="cls_021"><span class="cls_021">initialize(new MyGdxGame(scoreHandlerAndroid), config);</span></div>
<div style="position:absolute;left:136.80px;top:604.15px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:616.39px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 254 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:212530px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background272.jpg" width=612 height=792></div>
<div style="position:absolute;left:464.37px;top:94.56px" class="cls_018"><span class="cls_018">Chapter 11</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">Finally, we just need to update the game class again to get a constructor that accepts</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">a </span><span class="cls_009">ScoreHandler</span><span class="cls_007"> reference and sets the local variable. Here is the snippet to do so</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_007"><span class="cls_007">from the updated class:</span></div>
<div style="position:absolute;left:126.00px;top:160.63px" class="cls_021"><span class="cls_021">ScoreHandler scoreHandler;</span></div>
<div style="position:absolute;left:126.00px;top:185.11px" class="cls_021"><span class="cls_021">public MyGdxGame(ScoreHandler scoreHandler) {</span></div>
<div style="position:absolute;left:136.80px;top:197.35px" class="cls_021"><span class="cls_021">this.scoreHandler = scoreHandler;</span></div>
<div style="position:absolute;left:126.00px;top:209.59px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:229.33px" class="cls_007"><span class="cls_007">There you have it. Now, you can access the FriendFace API and post a score.</span></div>
<div style="position:absolute;left:108.00px;top:250.58px" class="cls_007"><span class="cls_007">What you will find is that, after setting a constructor on the game class, you need to</span></div>
<div style="position:absolute;left:108.00px;top:263.18px" class="cls_007"><span class="cls_007">go around and update the reference on all platforms, such as desktop, for example.</span></div>
<div style="position:absolute;left:108.00px;top:275.78px" class="cls_007"><span class="cls_007">Here, you may want to create a dummy implementation for each platform. How</span></div>
<div style="position:absolute;left:108.00px;top:288.38px" class="cls_007"><span class="cls_007">the dummy will function is really based on what you, and the game, are expecting</span></div>
<div style="position:absolute;left:108.00px;top:300.98px" class="cls_007"><span class="cls_007">to happen from the integration. Of course, you may have a desktop library for</span></div>
<div style="position:absolute;left:108.00px;top:313.58px" class="cls_007"><span class="cls_007">FriendFace. If you wish to implement it, it's excellent; add that library to the project</span></div>
<div style="position:absolute;left:108.00px;top:326.18px" class="cls_007"><span class="cls_007">and create another implementation. Simple!</span></div>
<div style="position:absolute;left:108.00px;top:356.11px" class="cls_025"><span class="cls_025">A potential trap! (Android)</span></div>
<div style="position:absolute;left:108.00px;top:379.09px" class="cls_007"><span class="cls_007">OK, imagine that you want to a create a few games now. You are fairly confident</span></div>
<div style="position:absolute;left:108.00px;top:391.69px" class="cls_007"><span class="cls_007">about how LibGDX works and you are going to integrate more third-party services—</span></div>
<div style="position:absolute;left:108.00px;top:404.29px" class="cls_007"><span class="cls_007">perhaps you want to add an advertisement to your game, which is not an uncommon</span></div>
<div style="position:absolute;left:108.00px;top:416.89px" class="cls_007"><span class="cls_007">scenario if you want to make a little bit of revenue from  it.</span></div>
<div style="position:absolute;left:108.00px;top:438.14px" class="cls_007"><span class="cls_007">You select your advertisement platform that you wish to use and add their library to</span></div>
<div style="position:absolute;left:108.00px;top:450.74px" class="cls_007"><span class="cls_007">your project. You start creating interfaces and implementations and run your game</span></div>
<div style="position:absolute;left:108.00px;top:463.34px" class="cls_007"><span class="cls_007">on Android. Then, you get to the point where you expect an advertisement to pop up</span></div>
<div style="position:absolute;left:108.00px;top:475.94px" class="cls_007"><span class="cls_007">and, all of a sudden, it crashes. You may be thinking that this is a bit odd. You check</span></div>
<div style="position:absolute;left:108.00px;top:488.54px" class="cls_007"><span class="cls_007">your code and double-check the documentation for Android that the third-party</span></div>
<div style="position:absolute;left:108.00px;top:501.14px" class="cls_007"><span class="cls_007">offers, but find that they are all the same and correct. You finally come back to this</span></div>
<div style="position:absolute;left:108.00px;top:513.74px" class="cls_007"><span class="cls_007">book and you are now reading these words. What you saw now is an error when two</span></div>
<div style="position:absolute;left:108.00px;top:526.34px" class="cls_007"><span class="cls_007">worlds collide; chances are that your advertising platform is required to run on an</span></div>
<div style="position:absolute;left:108.00px;top:538.94px" class="cls_007"><span class="cls_007">Android UI thread. However, the calls you are making come from the game thread—</span></div>
<div style="position:absolute;left:108.00px;top:551.54px" class="cls_007"><span class="cls_007">the OpenGL-enabled LibGDX thread—and Android is upset because you are calling</span></div>
<div style="position:absolute;left:108.00px;top:564.14px" class="cls_007"><span class="cls_007">the code from the wrong thread!</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 255 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:213332px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background273.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:94.56px" class="cls_018"><span class="cls_018">Third-party Services</span></div>
<div style="position:absolute;left:108.00px;top:114.49px" class="cls_007"><span class="cls_007">To fix this, we can use an object called </span><span class="cls_009">Handler</span><span class="cls_007">. This class allows us to send</span></div>
<div style="position:absolute;left:108.00px;top:127.09px" class="cls_007"><span class="cls_007">messages between the threads. When we create a </span><span class="cls_009">Handler</span><span class="cls_007">, we can specify a</span></div>
<div style="position:absolute;left:108.00px;top:139.69px" class="cls_009"><span class="cls_009">handleMessage()</span><span class="cls_007"> method that we can use to handle these messages. So, we may</span></div>
<div style="position:absolute;left:108.00px;top:152.29px" class="cls_007"><span class="cls_007">want something like this in our </span><span class="cls_009">AndroidLauncher</span><span class="cls_007"> class:</span></div>
<div style="position:absolute;left:126.00px;top:173.23px" class="cls_021"><span class="cls_021">private final Handler handler = new Handler() {</span></div>
<div style="position:absolute;left:136.80px;top:185.47px" class="cls_021"><span class="cls_021">@Override</span></div>
<div style="position:absolute;left:136.80px;top:197.71px" class="cls_021"><span class="cls_021">public void handleMessage(Message message) {</span></div>
<div style="position:absolute;left:147.60px;top:209.95px" class="cls_021"><span class="cls_021">if (message.what == 1) ad.show();</span></div>
<div style="position:absolute;left:136.80px;top:222.19px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:126.00px;top:234.43px" class="cls_021"><span class="cls_021">};</span></div>
<div style="position:absolute;left:108.00px;top:254.17px" class="cls_007"><span class="cls_007">Next, we just need a way to send a message. This is pretty straightforward as</span></div>
<div style="position:absolute;left:108.00px;top:266.77px" class="cls_007"><span class="cls_007">the </span><span class="cls_009">Handler</span><span class="cls_007"> class has lots of useful methods; one which we will use is to call</span></div>
<div style="position:absolute;left:108.00px;top:279.37px" class="cls_009"><span class="cls_009">sendEmptyMessage()</span><span class="cls_007">. So in our code, where we toggle for our advertisement,</span></div>
<div style="position:absolute;left:108.00px;top:291.97px" class="cls_007"><span class="cls_007">we can have the following code:</span></div>
<div style="position:absolute;left:126.00px;top:312.91px" class="cls_021"><span class="cls_021">public void displayAdvert() {</span></div>
<div style="position:absolute;left:136.80px;top:325.15px" class="cls_021"><span class="cls_021">handler.sendEmptyMessage(1);</span></div>
<div style="position:absolute;left:126.00px;top:337.39px" class="cls_021"><span class="cls_021">}</span></div>
<div style="position:absolute;left:108.00px;top:357.13px" class="cls_007"><span class="cls_007">It is that easy! Of course, there are many complex things we can do, but I just wanted</span></div>
<div style="position:absolute;left:108.00px;top:369.73px" class="cls_007"><span class="cls_007">to highlight this scenario, as I have tripped over such a situation many times before.</span></div>
<div style="position:absolute;left:108.00px;top:402.23px" class="cls_019"><span class="cls_019">Summary</span></div>
<div style="position:absolute;left:108.00px;top:427.21px" class="cls_007"><span class="cls_007">In this chapter, we looked at how to integrate third-party services with our game;</span></div>
<div style="position:absolute;left:108.00px;top:439.81px" class="cls_007"><span class="cls_007">we saw the different ways a third-party provider can present their library to us,</span></div>
<div style="position:absolute;left:108.00px;top:452.41px" class="cls_007"><span class="cls_007">and how we can integrate it in our game. We then took as an example a fictitious</span></div>
<div style="position:absolute;left:108.00px;top:465.01px" class="cls_007"><span class="cls_007">third-party provider so we could learn how to interact with that library from our</span></div>
<div style="position:absolute;left:108.00px;top:477.61px" class="cls_007"><span class="cls_007">core game code. Finally, we covered a little trick that seems to catch people out</span></div>
<div style="position:absolute;left:108.00px;top:490.21px" class="cls_007"><span class="cls_007">a lot, me included!</span></div>
<div style="position:absolute;left:108.00px;top:511.46px" class="cls_007"><span class="cls_007">Coming up, in the next chapter... Oh, there isn't another one...</span></div>
<div style="position:absolute;left:108.00px;top:532.70px" class="cls_007"><span class="cls_007">That's it, readers, we have made it to the end of this book. I hope you enjoyed</span></div>
<div style="position:absolute;left:108.00px;top:545.30px" class="cls_007"><span class="cls_007">making these games, I know I have. You learned the basics with Sammy the</span></div>
<div style="position:absolute;left:108.00px;top:557.90px" class="cls_007"><span class="cls_007">snake and made UI components with the Flappy bee before we looked at the more</span></div>
<div style="position:absolute;left:108.00px;top:570.50px" class="cls_007"><span class="cls_007">advanced features of LibGDX with Pete the squirrel and his funky world of physics.</span></div>
<div style="position:absolute;left:108.00px;top:591.74px" class="cls_007"><span class="cls_007">I look forward to playing your games on my Desktop/Android/iOS device in</span></div>
<div style="position:absolute;left:108.00px;top:604.34px" class="cls_007"><span class="cls_007">the future!</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 256 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:214134px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background274.jpg" width=612 height=792></div>
<div style="position:absolute;left:430.61px;top:185.09px" class="cls_014"><span class="cls_014">Index</span></div>
<div style="position:absolute;left:108.00px;top:240.32px" class="cls_006"><span class="cls_006">A</span></div>
<div style="position:absolute;left:311.40px;top:240.32px" class="cls_006"><span class="cls_006">B</span></div>
<div style="position:absolute;left:108.00px;top:263.42px" class="cls_027"><span class="cls_027">acorns, Angry Birds</span></div>
<div style="position:absolute;left:311.40px;top:263.42px" class="cls_027"><span class="cls_027">bind  115</span></div>
<div style="position:absolute;left:115.00px;top:274.82px" class="cls_024"><span class="cls_024">about  226</span></div>
<div style="position:absolute;left:311.40px;top:274.82px" class="cls_027"><span class="cls_027">Box2D</span></div>
<div style="position:absolute;left:115.00px;top:286.22px" class="cls_024"><span class="cls_024">freeing  230</span></div>
<div style="position:absolute;left:318.40px;top:286.22px" class="cls_024"><span class="cls_024">code, reusing  179, 180</span></div>
<div style="position:absolute;left:115.00px;top:297.62px" class="cls_024"><span class="cls_024">pooling  226-230</span></div>
<div style="position:absolute;left:318.40px;top:297.62px" class="cls_024"><span class="cls_024">concepts  181</span></div>
<div style="position:absolute;left:108.00px;top:309.02px" class="cls_027"><span class="cls_027">Actor class</span></div>
<div style="position:absolute;left:318.40px;top:309.02px" class="cls_024"><span class="cls_024">constraint  181</span></div>
<div style="position:absolute;left:115.00px;top:320.42px" class="cls_024"><span class="cls_024">URL  97</span></div>
<div style="position:absolute;left:318.40px;top:320.42px" class="cls_024"><span class="cls_024">contact constraint  181</span></div>
<div style="position:absolute;left:108.00px;top:331.82px" class="cls_027"><span class="cls_027">Android platform</span></div>
<div style="position:absolute;left:318.40px;top:331.82px" class="cls_024"><span class="cls_024">fixture  181</span></div>
<div style="position:absolute;left:115.00px;top:343.22px" class="cls_024"><span class="cls_024">about  234-236</span></div>
<div style="position:absolute;left:318.40px;top:343.22px" class="cls_024"><span class="cls_024">joint</span></div>
<div style="position:absolute;left:341.95px;top:343.22px" class="cls_024"><span class="cls_024">181</span></div>
<div style="position:absolute;left:115.00px;top:354.62px" class="cls_024"><span class="cls_024">emulator, launching from</span></div>
<div style="position:absolute;left:318.40px;top:354.62px" class="cls_024"><span class="cls_024">joint limit  181</span></div>
<div style="position:absolute;left:136.01px;top:366.02px" class="cls_024"><span class="cls_024">command line  241-243</span></div>
<div style="position:absolute;left:318.40px;top:366.02px" class="cls_024"><span class="cls_024">joint motor  182</span></div>
<div style="position:absolute;left:115.00px;top:377.42px" class="cls_024"><span class="cls_024">emulator, launching from IDE  236-240</span></div>
<div style="position:absolute;left:318.40px;top:377.42px" class="cls_024"><span class="cls_024">LibGDX, setting up  179</span></div>
<div style="position:absolute;left:115.00px;top:388.82px" class="cls_024"><span class="cls_024">Kraken, releasing  243-245</span></div>
<div style="position:absolute;left:318.40px;top:388.82px" class="cls_024"><span class="cls_024">rigid body  181</span></div>
<div style="position:absolute;left:115.00px;top:400.22px" class="cls_024"><span class="cls_024">URL  242</span></div>
<div style="position:absolute;left:318.40px;top:400.22px" class="cls_024"><span class="cls_024">shape  181</span></div>
<div style="position:absolute;left:115.00px;top:411.62px" class="cls_024"><span class="cls_024">working  243</span></div>
<div style="position:absolute;left:318.40px;top:411.62px" class="cls_024"><span class="cls_024">solver  182</span></div>
<div style="position:absolute;left:108.00px;top:423.02px" class="cls_027"><span class="cls_027">Android Studio +</span></div>
<div style="position:absolute;left:318.40px;top:423.02px" class="cls_024"><span class="cls_024">units  182</span></div>
<div style="position:absolute;left:115.00px;top:434.42px" class="cls_024"><span class="cls_024">URL  4</span></div>
<div style="position:absolute;left:318.40px;top:434.42px" class="cls_024"><span class="cls_024">URL  180</span></div>
<div style="position:absolute;left:108.00px;top:445.82px" class="cls_027"><span class="cls_027">Angry Birds</span></div>
<div style="position:absolute;left:318.40px;top:445.82px" class="cls_024"><span class="cls_024">with LibGDX  180</span></div>
<div style="position:absolute;left:115.00px;top:457.22px" class="cls_024"><span class="cls_024">about  177, 178</span></div>
<div style="position:absolute;left:318.40px;top:457.22px" class="cls_024"><span class="cls_024">world  182</span></div>
<div style="position:absolute;left:115.00px;top:468.62px" class="cls_024"><span class="cls_024">remaking, with LibGDX  179</span></div>
<div style="position:absolute;left:318.40px;top:468.62px" class="cls_024"><span class="cls_024">world, creating  183-185</span></div>
<div style="position:absolute;left:115.00px;top:480.02px" class="cls_024"><span class="cls_024">technical aspect  178</span></div>
<div style="position:absolute;left:108.00px;top:491.42px" class="cls_027"><span class="cls_027">Apple</span></div>
<div style="position:absolute;left:311.40px;top:488.12px" class="cls_006"><span class="cls_006">C</span></div>
<div style="position:absolute;left:115.00px;top:502.82px" class="cls_024"><span class="cls_024">developer site, URL  245</span></div>
<div style="position:absolute;left:311.40px;top:511.22px" class="cls_027"><span class="cls_027">collisions, Flappee Bee</span><span class="cls_024">  78-80</span></div>
<div style="position:absolute;left:108.00px;top:514.22px" class="cls_027"><span class="cls_027">AssetManager parameter, Flappee Bee</span></div>
<div style="position:absolute;left:311.40px;top:522.62px" class="cls_027"><span class="cls_027">collisions, Snake game</span></div>
<div style="position:absolute;left:115.00px;top:525.62px" class="cls_024"><span class="cls_024">implementing  109, 110</span></div>
<div style="position:absolute;left:318.40px;top:534.02px" class="cls_024"><span class="cls_024">about  39</span></div>
<div style="position:absolute;left:115.00px;top:537.02px" class="cls_024"><span class="cls_024">URL  109</span></div>
<div style="position:absolute;left:318.40px;top:545.42px" class="cls_024"><span class="cls_024">doubleback, stopping  40-42</span></div>
<div style="position:absolute;left:108.00px;top:548.42px" class="cls_027"><span class="cls_027">assets, Flappee Bee</span></div>
<div style="position:absolute;left:318.40px;top:556.82px" class="cls_024"><span class="cls_024">with body  42, 43</span></div>
<div style="position:absolute;left:115.00px;top:559.82px" class="cls_024"><span class="cls_024">about  107-109</span></div>
<div style="position:absolute;left:311.40px;top:568.22px" class="cls_027"><span class="cls_027">constraint</span><span class="cls_024">  181</span></div>
<div style="position:absolute;left:115.00px;top:571.22px" class="cls_024"><span class="cls_024">loading screen, loading  110-115</span></div>
<div style="position:absolute;left:311.40px;top:579.62px" class="cls_027"><span class="cls_027">contact constraint</span><span class="cls_024">  181</span></div>
<div style="position:absolute;left:115.00px;top:582.62px" class="cls_024"><span class="cls_024">URL  107</span></div>
<div style="position:absolute;left:311.40px;top:591.02px" class="cls_027"><span class="cls_027">cross-platform friendly</span></div>
<div style="position:absolute;left:108.00px;top:594.02px" class="cls_027"><span class="cls_027">audio, Pete</span></div>
<div style="position:absolute;left:318.40px;top:602.42px" class="cls_024"><span class="cls_024">FriendFace, for Android  252-255</span></div>
<div style="position:absolute;left:115.00px;top:605.42px" class="cls_024"><span class="cls_024">adding, to game  171-174</span></div>
<div style="position:absolute;left:318.40px;top:613.82px" class="cls_024"><span class="cls_024">Potential Gotcha! (Android)  255</span></div>
<div style="position:absolute;left:108.00px;top:616.82px" class="cls_027"><span class="cls_027">Axis Aligned Bounding Box (AABB)  203</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 257 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:214936px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background275.jpg" width=612 height=792></div>
<div style="position:absolute;left:108.00px;top:113.55px" class="cls_006"><span class="cls_006">F</span></div>
<div style="position:absolute;left:311.40px;top:113.55px" class="cls_006"><span class="cls_006">I</span></div>
<div style="position:absolute;left:108.00px;top:136.65px" class="cls_027"><span class="cls_027">fixture</span><span class="cls_024">  181</span></div>
<div style="position:absolute;left:311.40px;top:136.65px" class="cls_027"><span class="cls_027">IDE</span></div>
<div style="position:absolute;left:108.00px;top:148.05px" class="cls_027"><span class="cls_027">Flappee Bee</span></div>
<div style="position:absolute;left:318.40px;top:148.05px" class="cls_024"><span class="cls_024">URL  4</span></div>
<div style="position:absolute;left:115.00px;top:159.45px" class="cls_024"><span class="cls_024">about  64-68, 107</span></div>
<div style="position:absolute;left:311.40px;top:159.45px" class="cls_027"><span class="cls_027">Intel CPU</span></div>
<div style="position:absolute;left:115.00px;top:170.85px" class="cls_024"><span class="cls_024">animations, adding  85-96</span></div>
<div style="position:absolute;left:318.40px;top:170.85px" class="cls_024"><span class="cls_024">with Virtualization technology, URL  240</span></div>
<div style="position:absolute;left:115.00px;top:182.25px" class="cls_024"><span class="cls_024">assets  107-109</span></div>
<div style="position:absolute;left:311.40px;top:182.25px" class="cls_027"><span class="cls_027">Intersector class</span></div>
<div style="position:absolute;left:115.00px;top:193.65px" class="cls_024"><span class="cls_024">collisions  78-80</span></div>
<div style="position:absolute;left:318.40px;top:193.65px" class="cls_024"><span class="cls_024">URL  79</span></div>
<div style="position:absolute;left:115.00px;top:205.05px" class="cls_024"><span class="cls_024">creating  64</span></div>
<div style="position:absolute;left:311.40px;top:205.05px" class="cls_027"><span class="cls_027">iOS platform</span></div>
<div style="position:absolute;left:115.00px;top:216.45px" class="cls_024"><span class="cls_024">dispose() method  105, 106</span></div>
<div style="position:absolute;left:318.40px;top:216.45px" class="cls_024"><span class="cls_024">about  245</span></div>
<div style="position:absolute;left:115.00px;top:227.85px" class="cls_024"><span class="cls_024">flapping  68-70</span></div>
<div style="position:absolute;left:318.40px;top:227.85px" class="cls_024"><span class="cls_024">URL  246</span></div>
<div style="position:absolute;left:115.00px;top:239.25px" class="cls_024"><span class="cls_024">Flower, obstacles  70-78</span></div>
<div style="position:absolute;left:115.00px;top:250.65px" class="cls_024"><span class="cls_024">GameScreen class, setting up  62-64</span></div>
<div style="position:absolute;left:311.40px;top:247.35px" class="cls_006"><span class="cls_006">J</span></div>
<div style="position:absolute;left:115.00px;top:262.05px" class="cls_024"><span class="cls_024">GUI creation, with Scene2d  97</span></div>
<div style="position:absolute;left:311.40px;top:270.45px" class="cls_027"><span class="cls_027">Java Native Interface (JNI)  2</span></div>
<div style="position:absolute;left:115.00px;top:273.45px" class="cls_024"><span class="cls_024">project, setting up  62</span></div>
<div style="position:absolute;left:311.40px;top:281.85px" class="cls_027"><span class="cls_027">joint  181</span></div>
<div style="position:absolute;left:115.00px;top:284.85px" class="cls_024"><span class="cls_024">scoring  80-83</span></div>
<div style="position:absolute;left:311.40px;top:293.25px" class="cls_027"><span class="cls_027">joint limit  181</span></div>
<div style="position:absolute;left:115.00px;top:296.25px" class="cls_024"><span class="cls_024">start screen  99-105</span></div>
<div style="position:absolute;left:311.40px;top:304.65px" class="cls_027"><span class="cls_027">joint motor  182</span></div>
<div style="position:absolute;left:115.00px;top:307.65px" class="cls_024"><span class="cls_024">textures, adding  85-96</span></div>
<div style="position:absolute;left:108.00px;top:319.05px" class="cls_027"><span class="cls_027">Flappy Bird  61, 62</span></div>
<div style="position:absolute;left:108.00px;top:330.45px" class="cls_027"><span class="cls_027">FriendFace</span></div>
<div style="position:absolute;left:311.40px;top:324.15px" class="cls_006"><span class="cls_006">L</span></div>
<div style="position:absolute;left:115.00px;top:341.85px" class="cls_024"><span class="cls_024">for Android  252-255</span></div>
<div style="position:absolute;left:311.40px;top:347.25px" class="cls_027"><span class="cls_027">level length, Pete</span></div>
<div style="position:absolute;left:318.40px;top:358.65px" class="cls_024"><span class="cls_024">camera  166-168</span></div>
<div style="position:absolute;left:108.00px;top:361.35px" class="cls_006"><span class="cls_006">G</span></div>
<div style="position:absolute;left:318.40px;top:370.05px" class="cls_024"><span class="cls_024">increasing  161</span></div>
<div style="position:absolute;left:318.40px;top:381.45px" class="cls_024"><span class="cls_024">map, resizing  163, 164</span></div>
<div style="position:absolute;left:108.00px;top:384.45px" class="cls_027"><span class="cls_027">game</span></div>
<div style="position:absolute;left:318.40px;top:392.85px" class="cls_024"><span class="cls_024">Pete, moving off  165</span></div>
<div style="position:absolute;left:115.00px;top:395.85px" class="cls_024"><span class="cls_024">exporting, to platforms  233, 234</span></div>
<div style="position:absolute;left:311.40px;top:404.25px" class="cls_027"><span class="cls_027">LibGDX</span></div>
<div style="position:absolute;left:115.00px;top:407.25px" class="cls_024"><span class="cls_024">reusing  126-131</span></div>
<div style="position:absolute;left:318.40px;top:415.65px" class="cls_024"><span class="cls_024">about  1</span></div>
<div style="position:absolute;left:108.00px;top:418.65px" class="cls_027"><span class="cls_027">game update cycle, Snake game</span></div>
<div style="position:absolute;left:318.40px;top:427.05px" class="cls_024"><span class="cls_024">Angry Birds, remaking  179</span></div>
<div style="position:absolute;left:115.00px;top:430.05px" class="cls_024"><span class="cls_024">about  16-19</span></div>
<div style="position:absolute;left:318.40px;top:438.45px" class="cls_024"><span class="cls_024">classes  225</span></div>
<div style="position:absolute;left:115.00px;top:441.45px" class="cls_024"><span class="cls_024">batch class, using  20</span></div>
<div style="position:absolute;left:318.40px;top:449.85px" class="cls_024"><span class="cls_024">features, URL  2</span></div>
<div style="position:absolute;left:115.00px;top:452.85px" class="cls_024"><span class="cls_024">dispose() method, using  21</span></div>
<div style="position:absolute;left:318.40px;top:461.25px" class="cls_024"><span class="cls_024">Ingress, URL  3</span></div>
<div style="position:absolute;left:115.00px;top:464.25px" class="cls_024"><span class="cls_024">texture class, using  20</span></div>
<div style="position:absolute;left:318.40px;top:472.65px" class="cls_024"><span class="cls_024">Intel, URL  3</span></div>
<div style="position:absolute;left:115.00px;top:475.65px" class="cls_024"><span class="cls_024">texture, rendering  19, 20</span></div>
<div style="position:absolute;left:318.40px;top:484.05px" class="cls_024"><span class="cls_024">JavaDoc, URL  70</span></div>
<div style="position:absolute;left:108.00px;top:487.05px" class="cls_027"><span class="cls_027">Google Web Toolkit (GWT)</span></div>
<div style="position:absolute;left:318.40px;top:495.45px" class="cls_024"><span class="cls_024">JDK, URL  4</span></div>
<div style="position:absolute;left:115.00px;top:498.45px" class="cls_024"><span class="cls_024">URL  246</span></div>
<div style="position:absolute;left:318.40px;top:506.85px" class="cls_024"><span class="cls_024">object pools  224</span></div>
<div style="position:absolute;left:108.00px;top:509.85px" class="cls_027"><span class="cls_027">Gradle  9, 10</span></div>
<div style="position:absolute;left:318.40px;top:518.25px" class="cls_024"><span class="cls_024">prerequisites  3</span></div>
<div style="position:absolute;left:108.00px;top:521.25px" class="cls_027"><span class="cls_027">Gradle Wrapper  9</span></div>
<div style="position:absolute;left:318.40px;top:529.65px" class="cls_024"><span class="cls_024">setting up  3-6</span></div>
<div style="position:absolute;left:318.40px;top:541.05px" class="cls_024"><span class="cls_024">setting up, with Box2D  179</span></div>
<div style="position:absolute;left:108.00px;top:540.75px" class="cls_006"><span class="cls_006">H</span></div>
<div style="position:absolute;left:318.40px;top:552.45px" class="cls_024"><span class="cls_024">URL  1, 2</span></div>
<div style="position:absolute;left:108.00px;top:563.85px" class="cls_027"><span class="cls_027">Hiero</span></div>
<div style="position:absolute;left:311.40px;top:563.85px" class="cls_027"><span class="cls_027">LibGDX Tile Map API</span></div>
<div style="position:absolute;left:115.00px;top:575.25px" class="cls_024"><span class="cls_024">about  120-123</span></div>
<div style="position:absolute;left:318.40px;top:575.25px" class="cls_024"><span class="cls_024">URL  135</span></div>
<div style="position:absolute;left:115.00px;top:586.65px" class="cls_024"><span class="cls_024">URL  120</span></div>
<div style="position:absolute;left:311.40px;top:586.65px" class="cls_027"><span class="cls_027">logging tools</span></div>
<div style="position:absolute;left:108.00px;top:598.05px" class="cls_027"><span class="cls_027">HTML platform</span></div>
<div style="position:absolute;left:318.40px;top:598.05px" class="cls_024"><span class="cls_024">URL  116</span></div>
<div style="position:absolute;left:115.00px;top:609.45px" class="cls_024"><span class="cls_024">about  246</span></div>
<div style="position:absolute;left:115.00px;top:620.85px" class="cls_024"><span class="cls_024">launching  247, 248</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 258 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:215738px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background276.jpg" width=612 height=792></div>
<div style="position:absolute;left:318.41px;top:114.77px" class="cls_024"><span class="cls_024">JAR file  251</span></div>
<div style="position:absolute;left:108.00px;top:113.55px" class="cls_006"><span class="cls_006">M</span></div>
<div style="position:absolute;left:318.41px;top:126.17px" class="cls_024"><span class="cls_024">Mavenised  250</span></div>
<div style="position:absolute;left:108.00px;top:136.65px" class="cls_027"><span class="cls_027">maps</span></div>
<div style="position:absolute;left:318.41px;top:137.57px" class="cls_024"><span class="cls_024">project/JAR FILE  251</span></div>
<div style="position:absolute;left:115.00px;top:148.05px" class="cls_024"><span class="cls_024">LibGDX Tile Map API  134-136</span></div>
<div style="position:absolute;left:311.40px;top:148.97px" class="cls_027"><span class="cls_027">platforms</span></div>
<div style="position:absolute;left:115.00px;top:159.45px" class="cls_024"><span class="cls_024">new map, creating  132-134</span></div>
<div style="position:absolute;left:318.41px;top:160.37px" class="cls_024"><span class="cls_024">Android platform, using  234-236</span></div>
<div style="position:absolute;left:115.00px;top:170.85px" class="cls_024"><span class="cls_024">Tiled tool  131</span></div>
<div style="position:absolute;left:318.41px;top:171.77px" class="cls_024"><span class="cls_024">HTML platform, using  246</span></div>
<div style="position:absolute;left:115.00px;top:182.25px" class="cls_024"><span class="cls_024">tile maps  131</span></div>
<div style="position:absolute;left:318.41px;top:183.17px" class="cls_024"><span class="cls_024">iOS platform, using  245, 246</span></div>
<div style="position:absolute;left:108.00px;top:193.65px" class="cls_027"><span class="cls_027">music</span></div>
<div style="position:absolute;left:318.41px;top:194.57px" class="cls_024"><span class="cls_024">using  233, 234</span></div>
<div style="position:absolute;left:115.00px;top:205.05px" class="cls_024"><span class="cls_024">about  170, 171</span></div>
<div style="position:absolute;left:311.40px;top:205.97px" class="cls_027"><span class="cls_027">Proguard</span></div>
<div style="position:absolute;left:115.00px;top:216.45px" class="cls_024"><span class="cls_024">URL  171</span></div>
<div style="position:absolute;left:318.41px;top:217.37px" class="cls_024"><span class="cls_024">URL  244</span></div>
<div style="position:absolute;left:311.40px;top:228.77px" class="cls_027"><span class="cls_027">project</span></div>
<div style="position:absolute;left:108.00px;top:235.95px" class="cls_006"><span class="cls_006">N</span></div>
<div style="position:absolute;left:318.41px;top:240.17px" class="cls_024"><span class="cls_024">creating  6-9</span></div>
<div style="position:absolute;left:318.41px;top:251.57px" class="cls_024"><span class="cls_024">importing  11-13</span></div>
<div style="position:absolute;left:108.00px;top:259.05px" class="cls_027"><span class="cls_027">Nutty Birds</span></div>
<div style="position:absolute;left:318.41px;top:262.97px" class="cls_024"><span class="cls_024">URL  6</span></div>
<div style="position:absolute;left:115.00px;top:270.45px" class="cls_024"><span class="cls_024">about  186</span></div>
<div style="position:absolute;left:115.00px;top:281.85px" class="cls_024"><span class="cls_024">acorn, firing  207-211</span></div>
<div style="position:absolute;left:311.40px;top:282.47px" class="cls_006"><span class="cls_006">R</span></div>
<div style="position:absolute;left:115.00px;top:293.25px" class="cls_024"><span class="cls_024">anchor point, defining  207-211</span></div>
<div style="position:absolute;left:115.00px;top:304.65px" class="cls_024"><span class="cls_024">background, creating  187-189</span></div>
<div style="position:absolute;left:311.40px;top:305.57px" class="cls_027"><span class="cls_027">rigid body  181</span></div>
<div style="position:absolute;left:115.00px;top:316.05px" class="cls_024"><span class="cls_024">collisions, handling  201-206</span></div>
<div style="position:absolute;left:311.40px;top:316.97px" class="cls_027"><span class="cls_027">RoboVM</span></div>
<div style="position:absolute;left:115.00px;top:327.45px" class="cls_024"><span class="cls_024">enemy birds, importing  200, 201</span></div>
<div style="position:absolute;left:318.40px;top:328.37px" class="cls_024"><span class="cls_024">URL  245</span></div>
<div style="position:absolute;left:115.00px;top:338.85px" class="cls_024"><span class="cls_024">launching  219, 220</span></div>
<div style="position:absolute;left:115.00px;top:350.25px" class="cls_024"><span class="cls_024">level screen, setting up  186</span></div>
<div style="position:absolute;left:311.40px;top:347.87px" class="cls_006"><span class="cls_006">S</span></div>
<div style="position:absolute;left:115.00px;top:361.65px" class="cls_024"><span class="cls_024">object layer, importing  193-199</span></div>
<div style="position:absolute;left:115.00px;top:373.05px" class="cls_024"><span class="cls_024">objects, adding  189-191</span></div>
<div style="position:absolute;left:311.40px;top:370.97px" class="cls_027"><span class="cls_027">Scene2d</span></div>
<div style="position:absolute;left:115.00px;top:384.45px" class="cls_024"><span class="cls_024">textures, adding  211-218</span></div>
<div style="position:absolute;left:318.40px;top:382.37px" class="cls_024"><span class="cls_024">Actor class  97, 98</span></div>
<div style="position:absolute;left:115.00px;top:395.85px" class="cls_024"><span class="cls_024">tile map, importing  191-193</span></div>
<div style="position:absolute;left:318.40px;top:393.77px" class="cls_024"><span class="cls_024">Group  97</span></div>
<div style="position:absolute;left:318.40px;top:405.17px" class="cls_024"><span class="cls_024">GUI creation with  97</span></div>
<div style="position:absolute;left:318.40px;top:416.57px" class="cls_024"><span class="cls_024">Stage class  97</span></div>
<div style="position:absolute;left:108.00px;top:415.35px" class="cls_006"><span class="cls_006">O</span></div>
<div style="position:absolute;left:318.40px;top:427.97px" class="cls_024"><span class="cls_024">URL  98</span></div>
<div style="position:absolute;left:108.00px;top:438.45px" class="cls_027"><span class="cls_027">object pools, Angry Birds</span></div>
<div style="position:absolute;left:311.40px;top:439.37px" class="cls_027"><span class="cls_027">self-signed certificate</span></div>
<div style="position:absolute;left:115.00px;top:449.85px" class="cls_024"><span class="cls_024">about  223, 224</span></div>
<div style="position:absolute;left:318.40px;top:450.77px" class="cls_024"><span class="cls_024">URL  243</span></div>
<div style="position:absolute;left:115.00px;top:461.25px" class="cls_024"><span class="cls_024">URL  223, 224</span></div>
<div style="position:absolute;left:311.40px;top:462.17px" class="cls_027"><span class="cls_027">shape  181</span></div>
<div style="position:absolute;left:115.00px;top:472.65px" class="cls_024"><span class="cls_024">with LibGDX  224, 225</span></div>
<div style="position:absolute;left:311.40px;top:473.57px" class="cls_027"><span class="cls_027">ShapeRenderer class, Snake game</span></div>
<div style="position:absolute;left:108.00px;top:484.05px" class="cls_027"><span class="cls_027">orthographic camera</span></div>
<div style="position:absolute;left:318.40px;top:484.97px" class="cls_024"><span class="cls_024">about  35-38</span></div>
<div style="position:absolute;left:115.00px;top:495.45px" class="cls_024"><span class="cls_024">URL  55</span></div>
<div style="position:absolute;left:318.40px;top:496.37px" class="cls_024"><span class="cls_024">adding  36</span></div>
<div style="position:absolute;left:318.40px;top:507.77px" class="cls_024"><span class="cls_024">drawing  36-38</span></div>
<div style="position:absolute;left:108.00px;top:514.95px" class="cls_006"><span class="cls_006">P</span></div>
<div style="position:absolute;left:318.40px;top:519.17px" class="cls_024"><span class="cls_024">URL  36</span></div>
<div style="position:absolute;left:311.40px;top:530.57px" class="cls_027"><span class="cls_027">Snake game</span></div>
<div style="position:absolute;left:108.00px;top:538.05px" class="cls_027"><span class="cls_027">Pete</span></div>
<div style="position:absolute;left:318.40px;top:541.97px" class="cls_024"><span class="cls_024">about  15</span></div>
<div style="position:absolute;left:115.00px;top:549.45px" class="cls_024"><span class="cls_024">about  126, 137</span></div>
<div style="position:absolute;left:318.40px;top:553.37px" class="cls_024"><span class="cls_024">apple, adding  28-30</span></div>
<div style="position:absolute;left:115.00px;top:560.85px" class="cls_024"><span class="cls_024">artwork, adding  145-147</span></div>
<div style="position:absolute;left:318.40px;top:564.77px" class="cls_024"><span class="cls_024">engines, restarting  49</span></div>
<div style="position:absolute;left:115.00px;top:572.25px" class="cls_024"><span class="cls_024">audio, adding  171-174</span></div>
<div style="position:absolute;left:318.40px;top:576.17px" class="cls_024"><span class="cls_024">high scores  50-52</span></div>
<div style="position:absolute;left:115.00px;top:583.65px" class="cls_024"><span class="cls_024">character, adding  138, 139</span></div>
<div style="position:absolute;left:318.40px;top:587.57px" class="cls_024"><span class="cls_024">player feedback  46-48</span></div>
<div style="position:absolute;left:115.00px;top:595.05px" class="cls_024"><span class="cls_024">collectable, adding  153-158</span></div>
<div style="position:absolute;left:318.40px;top:598.97px" class="cls_024"><span class="cls_024">screen sizes, handling  53, 54</span></div>
<div style="position:absolute;left:115.00px;top:606.45px" class="cls_024"><span class="cls_024">collision detection  148-152</span></div>
<div style="position:absolute;left:318.40px;top:610.37px" class="cls_024"><span class="cls_024">snake, controlling with event polling  27</span></div>
<div style="position:absolute;left:115.00px;top:617.85px" class="cls_024"><span class="cls_024">jump, making  141-144</span></div>
<div style="position:absolute;left:318.40px;top:621.77px" class="cls_024"><span class="cls_024">snake, creating  22, 23</span></div>
<div style="position:absolute;left:108.00px;top:629.25px" class="cls_027"><span class="cls_027">platform-dependent libraries</span></div>
<div style="position:absolute;left:318.40px;top:633.17px" class="cls_024"><span class="cls_024">snake length, increasing  31-33</span></div>
<div style="position:absolute;left:115.00px;top:640.65px" class="cls_024"><span class="cls_024">about  249</span></div>
<div style="position:absolute;left:318.40px;top:644.57px" class="cls_024"><span class="cls_024">snake movement, creating  23-26</span></div>
<div style="position:absolute;left:293.76px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 259 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:216540px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background277.jpg" width=612 height=792></div>
<div style="position:absolute;left:115.00px;top:114.77px" class="cls_024"><span class="cls_024">state, adding  44, 45</span></div>
<div style="position:absolute;left:311.40px;top:113.55px" class="cls_006"><span class="cls_006">U</span></div>
<div style="position:absolute;left:115.00px;top:126.17px" class="cls_024"><span class="cls_024">textures, setting up  21, 22</span></div>
<div style="position:absolute;left:115.00px;top:137.57px" class="cls_024"><span class="cls_024">viewport  55</span></div>
<div style="position:absolute;left:311.40px;top:136.65px" class="cls_027"><span class="cls_027">units</span></div>
<div style="position:absolute;left:115.00px;top:148.97px" class="cls_024"><span class="cls_024">viewport, using  56-58</span></div>
<div style="position:absolute;left:318.40px;top:148.05px" class="cls_024"><span class="cls_024">about  182</span></div>
<div style="position:absolute;left:108.00px;top:160.37px" class="cls_027"><span class="cls_027">solver  182</span></div>
<div style="position:absolute;left:318.40px;top:159.45px" class="cls_024"><span class="cls_024">URL  182</span></div>
<div style="position:absolute;left:108.00px;top:171.77px" class="cls_027"><span class="cls_027">sound effects, Pete  169, 170</span></div>
<div style="position:absolute;left:311.40px;top:178.95px" class="cls_006"><span class="cls_006">W</span></div>
<div style="position:absolute;left:108.00px;top:191.27px" class="cls_006"><span class="cls_006">T</span></div>
<div style="position:absolute;left:311.40px;top:202.05px" class="cls_027"><span class="cls_027">world, Angry Birds</span></div>
<div style="position:absolute;left:108.00px;top:214.37px" class="cls_027"><span class="cls_027">textures, Flappee Bee</span></div>
<div style="position:absolute;left:318.40px;top:213.45px" class="cls_024"><span class="cls_024">about  182</span></div>
<div style="position:absolute;left:115.00px;top:225.77px" class="cls_024"><span class="cls_024">about  115</span></div>
<div style="position:absolute;left:318.40px;top:224.85px" class="cls_024"><span class="cls_024">creating  183-185</span></div>
<div style="position:absolute;left:115.00px;top:237.17px" class="cls_024"><span class="cls_024">alias, using  119, 120</span></div>
<div style="position:absolute;left:115.00px;top:248.57px" class="cls_024"><span class="cls_024">atlas  116</span></div>
<div style="position:absolute;left:115.00px;top:259.97px" class="cls_024"><span class="cls_024">impact, measuring  116</span></div>
<div style="position:absolute;left:115.00px;top:271.37px" class="cls_024"><span class="cls_024">packer tool, URL  116</span></div>
<div style="position:absolute;left:115.00px;top:282.77px" class="cls_024"><span class="cls_024">TexturePacker  117, 118</span></div>
<div style="position:absolute;left:108.00px;top:294.17px" class="cls_027"><span class="cls_027">Tiled tool</span></div>
<div style="position:absolute;left:115.00px;top:305.57px" class="cls_024"><span class="cls_024">about  131</span></div>
<div style="position:absolute;left:115.00px;top:316.97px" class="cls_024"><span class="cls_024">URL  161</span></div>
<div style="position:absolute;left:293.14px;top:665.55px" class="cls_002"><span class="cls_002">[</span><span class="cls_003"> 260 </span><span class="cls_002">]</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:217342px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background278.jpg" width=612 height=792></div>
<div style="position:absolute;left:234.83px;top:171.31px" class="cls_006"><span class="cls_006">Thank you for buying</span></div>
<div style="position:absolute;left:123.33px;top:193.11px" class="cls_028"><span class="cls_028">LibGDX Game Development By Example</span></div>
<div style="position:absolute;left:108.00px;top:234.43px" class="cls_025"><span class="cls_025">About Packt Publishing</span></div>
<div style="position:absolute;left:108.00px;top:257.33px" class="cls_024"><span class="cls_024">Packt, pronounced 'packed', published its first book, </span><span class="cls_029">Mastering phpMyAdmin for Effective</span></div>
<div style="position:absolute;left:108.00px;top:268.73px" class="cls_029"><span class="cls_029">MySQL Management</span><span class="cls_024">, in April 2004, and subsequently continued to specialize in publishing</span></div>
<div style="position:absolute;left:108.00px;top:280.13px" class="cls_024"><span class="cls_024">highly focused books on specific technologies and solutions.</span></div>
<div style="position:absolute;left:108.00px;top:295.85px" class="cls_024"><span class="cls_024">Our books and publications share the experiences of your fellow IT professionals in adapting</span></div>
<div style="position:absolute;left:108.00px;top:307.25px" class="cls_024"><span class="cls_024">and customizing today's systems, applications, and frameworks. Our solution-based books</span></div>
<div style="position:absolute;left:108.00px;top:318.65px" class="cls_024"><span class="cls_024">give you the knowledge and power to customize the software and technologies you're using</span></div>
<div style="position:absolute;left:108.00px;top:330.05px" class="cls_024"><span class="cls_024">to get the job done. Packt books are more specific and less general than the IT books you have</span></div>
<div style="position:absolute;left:108.00px;top:341.45px" class="cls_024"><span class="cls_024">seen in the past. Our unique business model allows us to bring you more focused information,</span></div>
<div style="position:absolute;left:108.00px;top:352.85px" class="cls_024"><span class="cls_024">giving you more of what you need to know, and less of what you don't.</span></div>
<div style="position:absolute;left:108.00px;top:368.57px" class="cls_024"><span class="cls_024">Packt is a modern yet unique publishing company that focuses on producing quality,</span></div>
<div style="position:absolute;left:108.00px;top:379.97px" class="cls_024"><span class="cls_024">cutting-edge books for communities of developers, administrators, and newbies alike.</span></div>
<div style="position:absolute;left:108.00px;top:391.37px" class="cls_024"><span class="cls_024">For more information, please visit our website at </span><span class="cls_021">www.packtpub.com</span><span class="cls_024">.</span></div>
<div style="position:absolute;left:108.00px;top:422.47px" class="cls_025"><span class="cls_025">About Packt Open Source</span></div>
<div style="position:absolute;left:108.00px;top:445.37px" class="cls_024"><span class="cls_024">In 2010, Packt launched two new brands, Packt Open Source and Packt Enterprise, in order</span></div>
<div style="position:absolute;left:108.00px;top:456.77px" class="cls_024"><span class="cls_024">to continue its focus on specialization. This book is part of the Packt Open Source brand,</span></div>
<div style="position:absolute;left:108.00px;top:468.17px" class="cls_024"><span class="cls_024">home to books published on software built around open source licenses, and offering</span></div>
<div style="position:absolute;left:108.00px;top:479.57px" class="cls_024"><span class="cls_024">information to anybody from advanced developers to budding web designers. The Open</span></div>
<div style="position:absolute;left:108.00px;top:490.97px" class="cls_024"><span class="cls_024">Source brand also runs Packt's Open Source Royalty Scheme, by which Packt gives a royalty</span></div>
<div style="position:absolute;left:108.00px;top:502.37px" class="cls_024"><span class="cls_024">to each open source project about whose software a book is sold.</span></div>
<div style="position:absolute;left:108.00px;top:531.47px" class="cls_025"><span class="cls_025">Writing for Packt</span></div>
<div style="position:absolute;left:108.00px;top:554.37px" class="cls_024"><span class="cls_024">We welcome all inquiries from people who are interested in authoring. Book proposals should</span></div>
<div style="position:absolute;left:108.00px;top:565.77px" class="cls_024"><span class="cls_024">be sent to </span><span class="cls_021">author@packtpub.com</span><span class="cls_024">. If your book idea is still at an early stage and you would</span></div>
<div style="position:absolute;left:108.00px;top:577.17px" class="cls_024"><span class="cls_024">like to discuss it first before writing a formal book proposal, then please contact us; one of our</span></div>
<div style="position:absolute;left:108.00px;top:588.57px" class="cls_024"><span class="cls_024">commissioning editors will get in touch with you.</span></div>
<div style="position:absolute;left:108.00px;top:604.29px" class="cls_024"><span class="cls_024">We're not just looking for published authors; if you have strong technical skills but no writing</span></div>
<div style="position:absolute;left:108.00px;top:615.69px" class="cls_024"><span class="cls_024">experience, our experienced editors can help you develop a writing career, or simply get some</span></div>
<div style="position:absolute;left:108.00px;top:627.09px" class="cls_024"><span class="cls_024">additional reward for your expertise.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:218144px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background279.jpg" width=612 height=792></div>
<div style="position:absolute;left:271.55px;top:175.78px" class="cls_006"><span class="cls_006">Learning LibGDX Game</span></div>
<div style="position:absolute;left:271.55px;top:192.58px" class="cls_006"><span class="cls_006">Development</span></div>
<div style="position:absolute;left:271.55px;top:211.98px" class="cls_030"><span class="cls_030">Second Edition</span></div>
<div style="position:absolute;left:271.55px;top:228.88px" class="cls_024"><span class="cls_024">ISBN: 978-1-78355-477-5</span></div>
<div style="position:absolute;left:405.84px;top:228.88px" class="cls_024"><span class="cls_024">Paperback: 478 pages</span></div>
<div style="position:absolute;left:271.55px;top:248.28px" class="cls_024"><span class="cls_024">Wield the power of the LibGDX framework to create</span></div>
<div style="position:absolute;left:271.55px;top:259.68px" class="cls_024"><span class="cls_024">a cross-platform game</span></div>
<div style="position:absolute;left:289.55px;top:278.98px" class="cls_031"><span class="cls_031">1.</span></div>
<div style="position:absolute;left:307.55px;top:278.98px" class="cls_031"><span class="cls_031">Write your game code once and run it on a</span></div>
<div style="position:absolute;left:307.55px;top:289.78px" class="cls_031"><span class="cls_031">multitude of platforms using LibGDX.</span></div>
<div style="position:absolute;left:289.55px;top:308.58px" class="cls_031"><span class="cls_031">2.</span></div>
<div style="position:absolute;left:307.55px;top:308.58px" class="cls_031"><span class="cls_031">Learn about the key features of LibGDX</span></div>
<div style="position:absolute;left:307.55px;top:319.38px" class="cls_031"><span class="cls_031">that will ease and speed up your</span></div>
<div style="position:absolute;left:307.55px;top:330.18px" class="cls_031"><span class="cls_031">development cycles.</span></div>
<div style="position:absolute;left:289.55px;top:348.98px" class="cls_031"><span class="cls_031">3.</span></div>
<div style="position:absolute;left:307.55px;top:348.98px" class="cls_031"><span class="cls_031">An easy-to-follow, comprehensive guide</span></div>
<div style="position:absolute;left:307.55px;top:359.78px" class="cls_031"><span class="cls_031">that will help you develop games in</span></div>
<div style="position:absolute;left:307.55px;top:370.58px" class="cls_031"><span class="cls_031">LibGDX successfully.</span></div>
<div style="position:absolute;left:271.55px;top:397.98px" class="cls_006"><span class="cls_006">LibGDX Game Development</span></div>
<div style="position:absolute;left:271.55px;top:414.78px" class="cls_006"><span class="cls_006">Essentials</span></div>
<div style="position:absolute;left:271.55px;top:433.68px" class="cls_024"><span class="cls_024">ISBN: 978-1-78439-929-0</span></div>
<div style="position:absolute;left:403.47px;top:433.68px" class="cls_024"><span class="cls_024">Paperback: 216 pages</span></div>
<div style="position:absolute;left:271.55px;top:453.08px" class="cls_024"><span class="cls_024">Make the most of game development features</span></div>
<div style="position:absolute;left:271.55px;top:464.48px" class="cls_024"><span class="cls_024">powered by LibGDX and create a side-scrolling</span></div>
<div style="position:absolute;left:271.55px;top:475.88px" class="cls_024"><span class="cls_024">action game, Thrust Copter</span></div>
<div style="position:absolute;left:289.55px;top:495.18px" class="cls_031"><span class="cls_031">1.</span></div>
<div style="position:absolute;left:307.55px;top:495.18px" class="cls_031"><span class="cls_031">Utilize the robust features of LibGDX to easily</span></div>
<div style="position:absolute;left:307.55px;top:505.98px" class="cls_031"><span class="cls_031">create and publish cross-platform 2D and 3D</span></div>
<div style="position:absolute;left:307.55px;top:516.78px" class="cls_031"><span class="cls_031">games that involve complicated physics</span></div>
<div style="position:absolute;left:289.55px;top:535.58px" class="cls_031"><span class="cls_031">2.</span></div>
<div style="position:absolute;left:307.55px;top:535.58px" class="cls_031"><span class="cls_031">Be the best cross-platform game developer with</span></div>
<div style="position:absolute;left:307.55px;top:546.38px" class="cls_031"><span class="cls_031">the ability to create rich interactive applications</span></div>
<div style="position:absolute;left:307.55px;top:557.18px" class="cls_031"><span class="cls_031">on all the leading platforms</span></div>
<div style="position:absolute;left:289.55px;top:575.98px" class="cls_031"><span class="cls_031">3.</span></div>
<div style="position:absolute;left:307.55px;top:575.98px" class="cls_031"><span class="cls_031">Develop a 2D side scrolling game, Thrust</span></div>
<div style="position:absolute;left:307.55px;top:586.78px" class="cls_031"><span class="cls_031">Copter, add physics, and try to convert</span></div>
<div style="position:absolute;left:307.55px;top:597.58px" class="cls_031"><span class="cls_031">it to 3D while working on interesting</span></div>
<div style="position:absolute;left:307.55px;top:608.38px" class="cls_031"><span class="cls_031">LibGDX experiments</span></div>
<div style="position:absolute;left:153.06px;top:641.98px" class="cls_017"><span class="cls_017">Please check </span><A HREF="http://www.packtpub.com/">www.PacktPub.com</A> </span><span class="cls_017"> for information on our titles</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-306px;top:218946px;width:612px;height:792px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="1a1dde48-6b00-11e9-9d71-0cc47a792c0a_id_1a1dde48-6b00-11e9-9d71-0cc47a792c0a_files/background280.jpg" width=612 height=792></div>
<div style="position:absolute;left:271.55px;top:175.78px" class="cls_006"><span class="cls_006">Libgdx Cross-platform Game</span></div>
<div style="position:absolute;left:271.55px;top:192.58px" class="cls_006"><span class="cls_006">Development Cookbook</span></div>
<div style="position:absolute;left:271.55px;top:211.48px" class="cls_024"><span class="cls_024">ISBN: 978-1-78328-729-1</span></div>
<div style="position:absolute;left:401.09px;top:211.48px" class="cls_024"><span class="cls_024">Paperback: 516 pages</span></div>
<div style="position:absolute;left:271.55px;top:230.88px" class="cls_024"><span class="cls_024">Over 75 practical recipes to help you master</span></div>
<div style="position:absolute;left:271.55px;top:242.28px" class="cls_024"><span class="cls_024">cross-platform 2D game development using</span></div>
<div style="position:absolute;left:271.55px;top:253.68px" class="cls_024"><span class="cls_024">the powerful Libgdx framework</span></div>
<div style="position:absolute;left:289.55px;top:272.98px" class="cls_031"><span class="cls_031">1.</span></div>
<div style="position:absolute;left:307.55px;top:272.98px" class="cls_031"><span class="cls_031">Gain an in-depth understanding of every</span></div>
<div style="position:absolute;left:307.55px;top:283.78px" class="cls_031"><span class="cls_031">Libgdx subsystem, including 2D graphics,</span></div>
<div style="position:absolute;left:307.55px;top:294.58px" class="cls_031"><span class="cls_031">input, audio, file extensions, and</span></div>
<div style="position:absolute;left:307.55px;top:305.38px" class="cls_031"><span class="cls_031">third-party libraries.</span></div>
<div style="position:absolute;left:289.55px;top:324.18px" class="cls_031"><span class="cls_031">2.</span></div>
<div style="position:absolute;left:307.55px;top:324.18px" class="cls_031"><span class="cls_031">Write once and deploy to Windows, Linux,</span></div>
<div style="position:absolute;left:307.55px;top:334.98px" class="cls_031"><span class="cls_031">Mac, Android, iOS, and browsers.</span></div>
<div style="position:absolute;left:289.55px;top:353.78px" class="cls_031"><span class="cls_031">3.</span></div>
<div style="position:absolute;left:307.55px;top:353.78px" class="cls_031"><span class="cls_031">Full of uniquely structured recipes that help</span></div>
<div style="position:absolute;left:307.55px;top:364.58px" class="cls_031"><span class="cls_031">you get the most out of Libgdx.</span></div>
<div style="position:absolute;left:271.55px;top:397.90px" class="cls_006"><span class="cls_006">Learning Libgdx Game</span></div>
<div style="position:absolute;left:271.55px;top:414.70px" class="cls_006"><span class="cls_006">Development</span></div>
<div style="position:absolute;left:271.55px;top:433.60px" class="cls_024"><span class="cls_024">ISBN: 978-1-78216-604-7</span></div>
<div style="position:absolute;left:403.47px;top:433.60px" class="cls_024"><span class="cls_024">Paperback: 388 pages</span></div>
<div style="position:absolute;left:271.55px;top:453.00px" class="cls_024"><span class="cls_024">Walk through a complete game development cycle</span></div>
<div style="position:absolute;left:271.55px;top:464.40px" class="cls_024"><span class="cls_024">with practical examples and build cross-platform</span></div>
<div style="position:absolute;left:271.55px;top:475.80px" class="cls_024"><span class="cls_024">games with Libgdx</span></div>
<div style="position:absolute;left:289.55px;top:495.10px" class="cls_031"><span class="cls_031">1.</span></div>
<div style="position:absolute;left:307.55px;top:495.10px" class="cls_031"><span class="cls_031">Create a LibGDX multi-platform game from</span></div>
<div style="position:absolute;left:307.55px;top:505.90px" class="cls_031"><span class="cls_031">start to finish.</span></div>
<div style="position:absolute;left:289.55px;top:524.70px" class="cls_031"><span class="cls_031">2.</span></div>
<div style="position:absolute;left:307.55px;top:524.70px" class="cls_031"><span class="cls_031">Learn about the key features of LibGDX</span></div>
<div style="position:absolute;left:307.55px;top:535.50px" class="cls_031"><span class="cls_031">that will ease and speed up your</span></div>
<div style="position:absolute;left:307.55px;top:546.30px" class="cls_031"><span class="cls_031">development cycles.</span></div>
<div style="position:absolute;left:289.55px;top:565.10px" class="cls_031"><span class="cls_031">3.</span></div>
<div style="position:absolute;left:307.55px;top:565.10px" class="cls_031"><span class="cls_031">Write your game code once and run it on a</span></div>
<div style="position:absolute;left:307.55px;top:575.90px" class="cls_031"><span class="cls_031">multitude of platforms using LibGDX.</span></div>
<div style="position:absolute;left:153.06px;top:640.80px" class="cls_017"><span class="cls_017">Please check </span><A HREF="http://www.packtpub.com/">www.PacktPub.com</A> </span><span class="cls_017"> for information on our titles</span></div>
</div>

</body>
</html>
